<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>AWeiâ€™s Kernel Tour | ã€C&#43;&#43; Primer(edition 5) 09ã€‘å…³è”å®¹å™¨</title>
    <meta name="description"
        content="å…³è”å®¹å™¨ ">
    <link rel="canonical" href="https://cnjslw.github.io/posts/%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8/" />
    <link rel="icon" type="image/x-icon" href="/images/linux_pic.ico">
    <meta property="og:title" content="ã€C&#43;&#43; Primer(edition 5) 09ã€‘å…³è”å®¹å™¨" />
<meta property="og:description" content="å…³è”å®¹å™¨" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cnjslw.github.io/posts/%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-09-28T00:00:00+00:00" />
<meta property="og:see_also" content="https://cnjslw.github.io/posts/%E5%A4%9A%E6%80%81/" /><meta property="og:see_also" content="https://cnjslw.github.io/posts/%E7%BB%A7%E6%89%BF/" /><meta property="og:see_also" content="https://cnjslw.github.io/posts/%E6%93%8D%E4%BD%9C%E9%87%8D%E8%BD%BD%E4%B8%8E%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" /><meta property="og:see_also" content="https://cnjslw.github.io/posts/%E6%8B%B7%E8%B4%9D%E6%8E%A7%E5%88%B6/" /><meta property="og:see_also" content="https://cnjslw.github.io/posts/%E5%8A%A8%E6%80%81%E5%88%86%E9%85%8D/" /><meta property="og:see_also" content="https://cnjslw.github.io/posts/%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95/" />



    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ã€C&#43;&#43; Primer(edition 5) 09ã€‘å…³è”å®¹å™¨"/>
<meta name="twitter:description" content="å…³è”å®¹å™¨"/>

    
    
    

    <link rel="stylesheet" href='/css/style.css' />
    <link rel="stylesheet" href='/css/search.css' />
    <link rel="stylesheet" href='/css/md_nb.css' />
    <link rel="stylesheet" href='/css/list.css' />
    <link rel="stylesheet" href='/css/terms.css' />
    <link rel="stylesheet" href='/css/taxonomy.css' />
    <link rel="stylesheet" href='/css/font-awesome-4.7.0/css/font-awesome.min.css' />
    <link rel="stylesheet" href='/css/home.css' />
    <link rel="stylesheet" href='/css/syntax.css' />
    
    <link rel="stylesheet" href='/css/shortcode.css' />

    
    <link rel="stylesheet" href='/css/_custom.css' />
    <style>
        {
                {
                if eq .Kind "404"
            }
        }

        body::after {
            display: none;
        }

            {
                {
                end
            }
        }
    </style>
    
    
    
    
    <script src="/js/lazysizes.min.js" async=""></script>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/md_nb.js"></script>
    <script src="/js/yes.js"></script>
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
</head><body style="font-family: ,'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Heiti SC', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;">
        <div class="loading">
            <div class="loading-bg"></div>
            <div class="loading-long">
                <div class="loading-short"></div>
            </div>
        </div>

        <header>
    <nav class="navbar">
        <div class="navbar-brand">
            <a href="/">
                <span class="logo">AWeiâ€™s Kernel Tour</span>
            </a>
        </div>
        <div class="navbar-menu">
            
                <a href="/">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-home'></i> ä¸»é¡µ</div>
                        </div>
                    </div>
                </a>
            
                <a href="/posts">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-book'></i> æ–‡ç« </div>
                        </div>
                    </div>
                </a>
            
                <a href="/categories">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-folder-open'></i> åˆ†ç±»</div>
                        </div>
                    </div>
                </a>
            
                <a href="/series">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-gears'></i> ç³»åˆ—</div>
                        </div>
                    </div>
                </a>
            
                <a href="/tags">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-tags'></i> æ ‡ç­¾</div>
                        </div>
                    </div>
                </a>
            
                <a href="/about">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-info-circle'></i> ç®€å†</div>
                        </div>
                    </div>
                </a>
            
            <div class="navbar-burger">
                <div class="burger-btn"><span><i class="fa fa-navicon"></i></span></div>
            </div>
            
            
            <div class="search-in"><span><i class="fa fa-search"></i></span></div>
            
                <div class="mode">
                    <span class="sun"><i class="fa fa-sun-o"></i></span>
                    <span class="moon"><i class="fa fa-moon-o"></i></span>
                </div>
            
        </div>
    </nav>
    <div class="burger-items">
        
        <a href="/">
            <div class="burger-item">
                <i class='fa fa-home'></i> ä¸»é¡µ
            </div>
        </a>
        
        <a href="/posts">
            <div class="burger-item">
                <i class='fa fa-book'></i> æ–‡ç« 
            </div>
        </a>
        
        <a href="/categories">
            <div class="burger-item">
                <i class='fa fa-folder-open'></i> åˆ†ç±»
            </div>
        </a>
        
        <a href="/series">
            <div class="burger-item">
                <i class='fa fa-gears'></i> ç³»åˆ—
            </div>
        </a>
        
        <a href="/tags">
            <div class="burger-item">
                <i class='fa fa-tags'></i> æ ‡ç­¾
            </div>
        </a>
        
        <a href="/about">
            <div class="burger-item">
                <i class='fa fa-info-circle'></i> ç®€å†
            </div>
        </a>
        
    </div>
    <div class="header-rest"></div>
</header>


        <div id="content">








    <div class="hero">
        
            <div class="hero-img">
                <img class="lazyload" src="/images/thumbnail.gif" data-src="https://picsum.photos/2500/500" alt="">
            </div>
        
        <div class="hero-content">
            <div class="hero-title">ã€C&#43;&#43; Primer(edition 5) 09ã€‘å…³è”å®¹å™¨</div>
            <div class="hero-subtitle"></div>
            <div class="hero-date">
                    <span class="no-wrap"><i class="fa fa-calendar"></i> å‘å¸ƒäº: 2021-9-28 &nbsp;</span>
                    <span class="no-wrap"><i class="fa fa-calendar-check-o"></i> æ›´æ–°äº: 2021-9-28 &nbsp;</span>
                    <span class="no-wrap"><i class="fa fa-folder"></i>
                        æ”¶å½•äº:
                        
                            <a href='
                                /categories/cpp
                            '>
                                Cpp
                            </a>
                    </span>    
            </div>
            <div class="timelong">
                <span class="no-wrap"><i class="fa fa-pencil"></i> æ–‡ç« å­—æ•°: 294 &nbsp;</span>
                <span class="no-wrap"><i class="fa fa-clock-o"></i> é˜…è¯»æ—¶é—´: 2 åˆ†é’Ÿ &nbsp;</span>
                <span class="no-wrap"><i class="fa fa-eye"></i> é˜…è¯»é‡: <span id="busuanzi_value_page_pv"></span></span>
            </div>
        </div>
    </div>




<div class="zhuti-0">
    <div class="container">
        <div class="zhuti">
            <div class="zhuti-l">
                




    


<div class="content-root">
    <div class="long">
        <button class="tosides-1 text-wbd">
            <i class="fa fa-arrow-right"></i>
        </button>
        <button class="tosides-2 text-wbd">
            <i class="fa fa-arrow-left"></i>
        </button>
        <button class="toup text-wbd">
            <i class="fa fa-arrow-up"></i>
        </button>
    </div>
    
        <div class="content">
            <div class="content-self">
                <p>å…³è”å®¹å™¨å’Œé¡ºåºå®¹å™¨çš„ä¸åŒï¼šå…³è”å®¹å™¨ä¸­çš„å…ƒç´ æ—¶æŒ‰ç…§<strong>å…³é”®å­—</strong>æ¥ä¿å­˜å’Œè®¿é—®çš„ã€‚
å…³è”å®¹å™¨æ”¯æŒé€šè¿‡å…³é”®å­—æ¥é«˜æ•ˆåœ°æŸ¥æ‰¾å’Œè¯»å–å…ƒç´ ï¼ŒåŸºæœ¬çš„å…³è”å®¹å™¨ç±»å‹æ˜¯ <code>map</code>å’Œ <code>set</code>ã€‚</p>
<p><strong>å…³è”å®¹å™¨ç±»å‹</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>å®¹å™¨ç±»å‹</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td>æŒ‰é¡ºåºå­˜å‚¨</td>
<td></td>
</tr>
<tr>
<td><code>map</code></td>
<td>å…³é”®æ•°ç»„ï¼šä¿å­˜<code>å…³é”®å­—-å€¼</code>å¯¹</td>
</tr>
<tr>
<td><code>set</code></td>
<td>å…³é”®å­—å³å€¼ï¼Œå³åªä¿å­˜å…³é”®å­—çš„å®¹å™¨</td>
</tr>
<tr>
<td><code>multimap</code></td>
<td>æ”¯æŒåŒä¸€ä¸ªé”®å¤šæ¬¡å‡ºç°çš„<code>map</code></td>
</tr>
<tr>
<td><code>multiset</code></td>
<td>æ”¯æŒåŒä¸€ä¸ªé”®å¤šæ¬¡å‡ºç°çš„<code>set</code></td>
</tr>
<tr>
<td>æ— åºé›†åˆ</td>
<td></td>
</tr>
<tr>
<td><code>unordered_map</code></td>
<td>ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡çš„<code>map</code></td>
</tr>
<tr>
<td><code>unordered_set</code></td>
<td>ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡çš„<code>set</code></td>
</tr>
<tr>
<td><code>unordered_multimap</code></td>
<td>å“ˆå¸Œç»„ç»‡çš„<code>map</code>ï¼Œå…³é”®å­—å¯ä»¥é‡å¤å‡ºç°</td>
</tr>
<tr>
<td><code>unordered_multiset</code></td>
<td>å“ˆå¸Œç»„ç»‡çš„<code>set</code>ï¼Œå…³é”®å­—å¯ä»¥é‡å¤å‡ºç°</td>
</tr>
</tbody>
</table>
<h1 id="ä¸€ä½¿ç”¨å…³è”å®¹å™¨">ä¸€ã€ä½¿ç”¨å…³è”å®¹å™¨</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//map
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span> <span class="p">,</span> <span class="n">size_t</span><span class="o">&gt;</span> <span class="n">word_count</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">string</span> <span class="n">word</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span><span class="p">(</span><span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">word</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">++</span><span class="n">word_count</span><span class="p">[</span><span class="n">word</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span><span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span><span class="nl">w</span> <span class="p">:</span> <span class="n">word_count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">w</span><span class="p">.</span><span class="n">first</span><span class="o">&lt;&lt;</span><span class="s">&#34; occurs &#34;</span><span class="o">&lt;&lt;</span><span class="n">w</span><span class="p">.</span><span class="n">second</span>
</span></span><span class="line"><span class="cl">	    <span class="o">&lt;&lt;</span><span class="p">((</span><span class="n">w</span><span class="p">.</span><span class="n">second</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span><span class="o">?</span><span class="s">&#34;times&#34;</span><span class="o">:</span><span class="s">&#34;time&#34;</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//set
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">size_t</span><span class="o">&gt;</span> <span class="n">word_count</span><span class="p">;</span> <span class="c1">// string åˆ° size_t çš„ç©º map 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">exclude</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#34;The&#34;</span><span class="p">,</span> <span class="s">&#34;But&#34;</span><span class="p">,</span> <span class="s">&#34;Andâ€ï¼Œ MOr&#39;*, &#34;</span><span class="n">An</span><span class="s">&#34;, &#34;</span><span class="n">A</span><span class="err">â€ï¼Œ</span> <span class="s">&#34;theâ€ï¼Œ â€œbutâ€ï¼Œ &#34;</span><span class="n">and</span><span class="err">â€ï¼Œ</span> <span class="n">norn</span> <span class="p">,</span> <span class="s">&#34;ann , &#34;</span><span class="n">a</span><span class="s">&#34;};</span>
</span></span><span class="line"><span class="cl"><span class="n">string</span> <span class="n">word</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">word</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">//åªç»Ÿè®¡ä¸åœ¨excludeä¸­çš„å•è¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="n">exclude</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">==</span> <span class="n">exclude</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="o">++</span><span class="n">word_count</span> <span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="p">;</span> <span class="c1">//è·å–å¹¶é€’å¢wordçš„è®¡æ•°å™¨
</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="äºŒå…³è”å®¹å™¨æ¦‚è¿°">äºŒã€å…³è”å®¹å™¨æ¦‚è¿°</h1>
<ul>
<li>å…³è”å®¹å™¨åŸºæœ¬æ”¯æŒæ™®é€šå®¹å™¨çš„æ‰€æœ‰æ“ä½œï¼Œä½†æ˜¯ä¸æ”¯æŒé¡ºåºå®¹å™¨çš„ä½ç½®ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚<code>push_back</code>ï¼Œ<code>push_front</code></li>
<li>å…³è”å®¹å™¨è¿˜æ”¯æŒç‰¹æœ‰çš„æ“ä½œå’Œç±»å‹åˆ«å</li>
<li>æ— åºå®¹å™¨è¿˜æ”¯æŒä¸€äº›æ¥è°ƒæ•´å“ˆå¸Œæ€§èƒ½çš„æ“ä½œ</li>
</ul>
<h2 id="1å®šä¹‰å…³è”å®¹å™¨">1ã€å®šä¹‰å…³è”å®¹å™¨</h2>
<ul>
<li>å¿…é¡»éœ€è¦æŒ‡å®šå…ƒç´ ç±»å‹ï¼Œå¹¶ä¸”å€¼ç¬¦åˆè¦æ±‚æˆ–è€…å¯ä»¥è½¬åŒ–ã€‚</li>
<li>é»˜è®¤æ„é€ </li>
<li>å…³è”å®¹å™¨åˆå§‹åŒ–ä¸ºå¦ä¸€ä¸ªåŒç±»å‹å®¹å™¨çš„æ‹·è´</li>
<li>å€¼èŒƒå›´åˆå§‹åŒ–</li>
<li>åˆ—è¡¨åˆå§‹åŒ–ï¼š
<ul>
<li><code>map</code>ï¼š<code>map&lt;string, int&gt; word_count = {{&quot;a&quot;, 1}, {&quot;b&quot;, 2}};</code></li>
<li><code>set</code>ï¼š<code>set&lt;string&gt; exclude = {&quot;the&quot;, &quot;a&quot;};</code></li>
</ul>
</li>
</ul>
<h2 id="2å…³é”®å­—ç±»å‹çš„è¦æ±‚">2ã€å…³é”®å­—ç±»å‹çš„è¦æ±‚</h2>
<ul>
<li>å¯¹äºæœ‰åºå®¹å™¨ï¼Œå…³é”®å­—ç±»å‹å¿…é¡»å®šä¹‰å…ƒç´ æ¯”è¾ƒçš„æ–¹æ³•ã€‚é»˜è®¤æ˜¯<code>&lt;</code>ã€‚</li>
<li>å¦‚æœæƒ³ä¼ é€’ä¸€ä¸ªæ¯”è¾ƒçš„å‡½æ•°ï¼Œå¯ä»¥è¿™æ ·å®šä¹‰ï¼š<code>multiset&lt;Sales_data, decltype(compareIsbn)*&gt; bookstore(compareIsbn);</code></li>
</ul>
<h2 id="3pair">3ã€pair</h2>
<ul>
<li>åœ¨<code>utility</code>å¤´æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li>
<li>ä¸€ä¸ª<code>pair</code>ä¿å­˜ä¸¤ä¸ªæ•°æ®æˆå‘˜ï¼Œä¸¤ä¸ªç±»å‹ä¸è¦æ±‚ä¸€æ ·ã€‚</li>
</ul>
<h2 id="pairçš„æ“ä½œ">pairçš„æ“ä½œ</h2>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pair&lt;T1, T2&gt; p;</code></td>
<td><code>p</code>æ˜¯ä¸€ä¸ª<code>pair</code>ï¼Œä¸¤ä¸ªç±»å‹åˆ†åˆ«æ˜¯<code>T1</code>å’Œ<code>T2</code>çš„æˆå‘˜éƒ½è¿›è¡Œäº†å€¼åˆå§‹åŒ–ã€‚</td>
</tr>
<tr>
<td><code>pair&lt;T1, T2&gt; p(v1, v2);</code></td>
<td><code>first</code>å’Œ<code>second</code>åˆ†åˆ«ç”¨<code>v1</code>å’Œ<code>v2</code>è¿›è¡Œåˆå§‹åŒ–ã€‚</td>
</tr>
<tr>
<td><code>pair&lt;T1, T2&gt;p = {v1, v2};</code></td>
<td>ç­‰ä»·äº`p(v1, v2)</td>
</tr>
<tr>
<td><code>make_pair(v1, v2);</code></td>
<td><code>pair</code>çš„ç±»å‹ä»<code>v1</code>å’Œ<code>v2</code>çš„ç±»å‹æ¨æ–­å‡ºæ¥ã€‚</td>
</tr>
<tr>
<td><code>p.first</code></td>
<td>è¿”å›<code>p</code>çš„åä¸º<code>first</code>çš„æ•°æ®æˆå‘˜ã€‚</td>
</tr>
<tr>
<td><code>p.second</code></td>
<td>è¿”å›<code>p</code>çš„åä¸º<code>second</code>çš„æ•°æ®æˆå‘˜ã€‚</td>
</tr>
<tr>
<td><code>p1 relop p2</code></td>
<td>è¿ç®—å…³ç³»ç¬¦æŒ‰å­—å…¸åºå®šä¹‰ã€‚</td>
</tr>
<tr>
<td><code>p1 == p2</code></td>
<td>å¿…é¡»ä¸¤å¯¹å…ƒç´ ä¸¤ä¸¤ç›¸ç­‰</td>
</tr>
<tr>
<td><code>p1 != p2</code></td>
<td>åŒä¸Š</td>
</tr>
</tbody>
</table>
<h1 id="ä¸‰å…³è”å®¹å™¨æ“ä½œ">ä¸‰ã€å…³è”å®¹å™¨æ“ä½œ</h1>
<p><strong>å…³è”å®¹å™¨é¢å¤–çš„ç±»å‹åˆ«å</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å‹åˆ«å</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>key_type</code></td>
<td>æ­¤å®¹å™¨ç±»å‹çš„å…³é”®å­—ç±»å‹</td>
</tr>
<tr>
<td><code>mapped_type</code></td>
<td>æ¯ä¸ªå…³é”®å­—å…³è”çš„ç±»å‹ï¼Œåªé€‚ç”¨äº<code>map</code></td>
</tr>
<tr>
<td><code>value_type</code></td>
<td>å¯¹äº<code>map</code>ï¼Œæ˜¯<code>pair&lt;const key_type, mapped_type&gt;</code>; å¯¹äº<code>set</code>ï¼Œå’Œ<code>key_type</code>ç›¸åŒã€‚</td>
</tr>
</tbody>
</table>
<h2 id="1å…³è”å®¹å™¨è¿­ä»£å™¨">1ã€å…³è”å®¹å™¨è¿­ä»£å™¨</h2>
<ul>
<li>è§£å¼•ç”¨ä¸€ä¸ªå…³è”å®¹å™¨è¿­ä»£å™¨æ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç±»å‹ä¸ºå®¹å™¨çš„<code>value_type</code>çš„å€¼çš„å¼•ç”¨ã€‚</li>
<li><code>map</code>ä¸­çš„è¿­ä»£å™¨è§£å¼•ç”¨è¿”å›ä¸€ä¸ª<code>pair&lt;const value_type , value_type&gt;</code></li>
<li><code>set</code>çš„è¿­ä»£å™¨æ˜¯<code>const</code>çš„ã€‚</li>
<li>éå†å…³è”å®¹å™¨ï¼šä½¿ç”¨<code>begin</code>å’Œ<code>end</code>ï¼Œéå†<code>map</code>ã€<code>multimap</code>ã€<code>set</code>ã€<code>multiset</code>æ—¶ï¼Œè¿­ä»£å™¨æŒ‰<strong>å…³é”®å­—å‡åº</strong>éå†å…ƒç´ ã€‚</li>
</ul>
<h2 id="2æ·»åŠ å…ƒç´ ">2ã€æ·»åŠ å…ƒç´ </h2>
<p><strong>å…³è”å®¹å™¨<code>insert</code>æ“ä½œ</strong>ï¼š</p>
<table>
<thead>
<tr>
<th><code>insert</code>æ“ä½œ</th>
<th>å…³è”å®¹å™¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>c.insert(v)</code>  <code>c.emplace(args)</code></td>
<td><code>v</code>æ˜¯<code>value_type</code>ç±»å‹çš„å¯¹è±¡ï¼›<code>args</code>ç”¨æ¥æ„é€ ä¸€ä¸ªå…ƒç´ ã€‚ å¯¹äº<code>map</code>å’Œ<code>set</code>ï¼Œåªæœ‰å…ƒç´ çš„å…³é”®å­—ä¸å­˜åœ¨<code>c</code>ä¸­æ‰æ’å…¥æˆ–æ„é€ å…ƒç´ ã€‚å‡½æ•°è¿”å›ä¸€ä¸ª<code>pair</code>ï¼ŒåŒ…å«ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘å…·æœ‰æŒ‡å®šå…³é”®å­—çš„å…ƒç´ ï¼Œä»¥åŠä¸€ä¸ªæŒ‡ç¤ºæ’å…¥æ˜¯å¦æˆåŠŸçš„<code>bool</code>å€¼ã€‚å¯¹äº<code>multimap</code>å’Œ<code>multiset</code>åˆ™ä¼šæ’å…¥èŒƒå›´ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚</td>
</tr>
<tr>
<td><code>c.insert(b, e)</code> <code>c.insert(il)</code></td>
<td><code>b</code>å’Œ<code>e</code>æ˜¯è¿­ä»£å™¨ï¼Œè¡¨ç¤ºä¸€ä¸ª<code>c::value_type</code>ç±»å‹å€¼çš„èŒƒå›´ï¼›<code>il</code>æ˜¯è¿™ç§å€¼çš„èŠ±æ‹¬å·åˆ—è¡¨ã€‚å‡½æ•°è¿”å›<code>void</code>ã€‚å¯¹äº <code>map</code>å’Œ<code>set</code>ï¼Œåªæ’å…¥å…³é”®å­—ä¸åœ¨<code>c</code>ä¸­çš„å…ƒç´ ã€‚</td>
</tr>
<tr>
<td><code>c.insert(p, v)</code>  <code>c.emplace(p, args)</code></td>
<td>ç±»ä¼¼<code>insert(v)</code>ï¼Œä½†å°†è¿­ä»£å™¨<code>p</code>ä½œä¸ºä¸€ä¸ªæç¤ºï¼ŒæŒ‡å‡ºä»å“ªé‡Œå¼€å§‹æœç´¢æ–°å…ƒç´ åº”è¯¥å­˜å‚¨çš„ä½ç½®ã€‚è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘å…·æœ‰ç»™å®šå…³é”®å­—çš„å…ƒç´ ã€‚</td>
</tr>
</tbody>
</table>
<p>å‘<code>map</code>æ·»åŠ å…ƒç´ ï¼š</p>
<ul>
<li><code>word_count.insert({word, 1});</code></li>
<li><code>word_count.insert(make_pair(word, 1));</code></li>
<li><code>word_count.insert(pair&lt;string, size_t&gt;(word, 1));</code></li>
<li><code>word_count.insert(map&lt;string, size_t&gt;::value_type (word, 1));</code></li>
</ul>
<h2 id="3åˆ é™¤å…ƒç´ ">3ã€åˆ é™¤å…ƒç´ </h2>
<p><strong>ä»å…³è”å®¹å™¨ä¸­åˆ é™¤å…ƒç´ </strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>c.erase(k)</code></td>
<td>ä»<code>c</code>ä¸­åˆ é™¤æ¯ä¸ªå…³é”®å­—ä¸º<code>k</code>çš„å…ƒç´ ã€‚è¿”å›ä¸€ä¸ª<code>size_type</code>å€¼ï¼ŒæŒ‡å‡ºåˆ é™¤çš„å…ƒç´ çš„æ•°é‡ã€‚</td>
</tr>
<tr>
<td><code>c.erase(p)</code></td>
<td>ä»<code>c</code>ä¸­åˆ é™¤è¿­ä»£å™¨<code>p</code>æŒ‡å®šçš„å…ƒç´ ã€‚<code>p</code>å¿…é¡»æŒ‡å‘<code>c</code>ä¸­ä¸€ä¸ªçœŸå®å…ƒç´ ï¼Œä¸èƒ½ç­‰äº<code>c.end()</code>ã€‚è¿”å›ä¸€ä¸ªæŒ‡å‘<code>p</code>ä¹‹åå…ƒç´ çš„è¿­ä»£å™¨ï¼Œè‹¥<code>p</code>æŒ‡å‘<code>c</code>ä¸­çš„å°¾å…ƒç´ ï¼Œåˆ™è¿”å›<code>c.end()</code></td>
</tr>
<tr>
<td><code>c.erase(b, e)</code></td>
<td>åˆ é™¤è¿­ä»£å™¨å¯¹<code>b</code>å’Œ<code>e</code>æ‰€è¡¨ç¤ºèŒƒå›´ä¸­çš„å…ƒç´ ã€‚è¿”å›<code>e</code>ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="4ä¸‹æ ‡æ“ä½œ">4ã€ä¸‹æ ‡æ“ä½œ</h2>
<p><strong><code>map</code>å’Œ<code>unordered_map</code>çš„ä¸‹æ ‡æ“ä½œ</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>c[k]</code></td>
<td>è¿”å›å…³é”®å­—ä¸º<code>k</code>çš„å…ƒç´ ï¼›å¦‚æœ<code>k</code>ä¸åœ¨<code>c</code>ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå…³é”®å­—ä¸º<code>k</code>çš„å…ƒç´ ï¼Œå¯¹å…¶å€¼åˆå§‹åŒ–ã€‚</td>
</tr>
<tr>
<td><code>c.at(k)</code></td>
<td>è®¿é—®å…³é”®å­—ä¸º<code>k</code>çš„å…ƒç´ ï¼Œå¸¦å‚æ•°æ£€æŸ¥ï¼›è‹¥<code>k</code>ä¸å­˜åœ¨åœ¨<code>c</code>ä¸­ï¼ŒæŠ›å‡ºä¸€ä¸ª<code>out_of_range</code>å¼‚å¸¸ã€‚</td>
</tr>
</tbody>
</table>
<ul>
<li><code>set</code>ä¸æ”¯æŒä¸‹æ ‡æ“ä½œï¼Œ<code>multimap</code>ä¹Ÿä¸æ”¯æŒ</li>
<li>å¯¹<code>map</code>ä½¿ç”¨ä¸‹æ ‡æ“ä½œ
<ul>
<li>å…³é”®å­—å­˜åœ¨ï¼Œè¿”å›<code>mapped_type</code></li>
<li>å…³é”®å­—ä¸å­˜åœ¨ï¼Œæ·»åŠ ä¸‹æ ‡å…ƒç´ </li>
</ul>
</li>
</ul>
<h2 id="5æŸ¥æ‰¾å…ƒç´ ">5ã€æŸ¥æ‰¾å…ƒç´ </h2>
<p><strong>åœ¨ä¸€ä¸ªå…³è”å®¹å™¨ä¸­æŸ¥æ‰¾å…ƒç´ </strong>:</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>c.find(k)</code></td>
<td>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…³é”®å­—ä¸º<code>k</code>çš„å…ƒç´ ï¼Œè‹¥<code>k</code>ä¸åœ¨å®¹å™¨ä¸­ï¼Œåˆ™è¿”å›å°¾åè¿­ä»£å™¨</td>
</tr>
<tr>
<td><code>c.count(k)</code></td>
<td>è¿”å›å…³é”®å­—ç­‰äº<code>k</code>çš„å…ƒç´ çš„æ•°é‡ã€‚å¯¹äºä¸å…è®¸é‡å¤å…³é”®å­—çš„å®¹å™¨ï¼Œè¿”å›å€¼æ°¸è¿œæ˜¯0æˆ–1ã€‚</td>
</tr>
<tr>
<td><code>c.lower_bound(k)</code></td>
<td>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…³é”®å­—<strong>ä¸å°äº</strong><code>k</code>çš„å…ƒç´ ã€‚</td>
</tr>
<tr>
<td><code>c.upper_bound(k)</code></td>
<td>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…³é”®å­—<strong>å¤§äº</strong><code>k</code>çš„å…ƒç´ ã€‚</td>
</tr>
<tr>
<td><code>c.equal_range(k)</code></td>
<td>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨<code>pair</code>ï¼Œè¡¨ç¤ºå…³é”®å­—ç­‰äº<code>k</code>çš„å…ƒç´ çš„èŒƒå›´ã€‚è‹¥<code>k</code>ä¸å­˜åœ¨ï¼Œ<code>pair</code>çš„ä¸¤ä¸ªæˆå‘˜å‡ç­‰äº<code>c.end()</code>ã€‚</td>
</tr>
</tbody>
</table>
<ul>
<li><code>lower_bound</code>å’Œ<code>upper_bound</code>ä¸é€‚ç”¨äºæ— åºå®¹å™¨ã€‚</li>
<li>ä¸‹æ ‡å’Œ<code>at</code>æ“ä½œåªé€‚ç”¨äºé<code>const</code>çš„<code>map</code>å’Œ<code>unordered_map</code>ã€‚</li>
</ul>
<h1 id="å››æ— åºå®¹å™¨">å››ã€æ— åºå®¹å™¨</h1>
<ul>
<li>æœ‰åºå®¹å™¨ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦æ¥ç»„ç»‡å…ƒç´ ï¼›æ— åºå®¹å™¨ä½¿ç”¨å“ˆå¸Œå‡½æ•°å’Œå…³é”®å­—ç±»å‹çš„<code>==</code>è¿ç®—ç¬¦ã€‚</li>
<li>ç†è®ºä¸Šå“ˆå¸ŒæŠ€æœ¯å¯ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</li>
<li>æ— åºå®¹å™¨åœ¨å­˜å‚¨ä¸Šç»„ç»‡ä¸ºä¸€ç»„æ¡¶(bucket)ï¼Œæ¯ä¸ªæ¡¶ä¿å­˜é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚æ— åºå®¹å™¨ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œå‡½æ•°å°†å…ƒç´ æ˜ å°„åˆ°æ¡¶ã€‚</li>
</ul>
<p><strong>æ— åºå®¹å™¨ç®¡ç†æ“ä½œ</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ¡¶æ¥å£</strong></td>
<td></td>
</tr>
<tr>
<td><code>c.bucket_count()</code></td>
<td>æ­£åœ¨ä½¿ç”¨çš„æ¡¶çš„æ•°ç›®</td>
</tr>
<tr>
<td><code>c.max_bucket_count()</code></td>
<td>å®¹å™¨èƒ½å®¹çº³çš„æœ€å¤šçš„æ¡¶çš„æ•°ç›®</td>
</tr>
<tr>
<td><code>c.bucket_size(n)</code></td>
<td>ç¬¬<code>n</code>ä¸ªæ¡¶ä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td><code>c.bucket(k)</code></td>
<td>å…³é”®å­—ä¸º<code>k</code>çš„å…ƒç´ åœ¨å“ªä¸ªæ¡¶ä¸­</td>
</tr>
<tr>
<td><strong>æ¡¶è¿­ä»£</strong></td>
<td></td>
</tr>
<tr>
<td><code>local_iterator</code></td>
<td>å¯ä»¥ç”¨æ¥è®¿é—®æ¡¶ä¸­å…ƒç´ çš„è¿­ä»£å™¨ç±»å‹</td>
</tr>
<tr>
<td><code>const_local_iterator</code></td>
<td>æ¡¶è¿­ä»£å™¨çš„<code>const</code>ç‰ˆæœ¬</td>
</tr>
<tr>
<td><code>c.begin(n)</code>ï¼Œ<code>c.end(n)</code></td>
<td>æ¡¶<code>n</code>çš„é¦–å…ƒç´ è¿­ä»£å™¨</td>
</tr>
<tr>
<td><code>c.cbegin(n)</code>ï¼Œ<code>c.cend(n)</code></td>
<td>ä¸å‰ä¸¤ä¸ªå‡½æ•°ç±»ä¼¼ï¼Œä½†è¿”å›<code>const_local_iterator</code>ã€‚</td>
</tr>
<tr>
<td><strong>å“ˆå¸Œç­–ç•¥</strong></td>
<td></td>
</tr>
<tr>
<td><code>c.load_factor()</code></td>
<td>æ¯ä¸ªæ¡¶çš„å¹³å‡å…ƒç´ æ•°é‡ï¼Œè¿”å›<code>float</code>å€¼ã€‚</td>
</tr>
<tr>
<td><code>c.max_load_factor()</code></td>
<td><code>c</code>è¯•å›¾ç»´æŠ¤çš„å¹³å‡æ¯”æ¡¶å¤§å°ï¼Œè¿”å›<code>float</code>å€¼ã€‚<code>c</code>ä¼šåœ¨éœ€è¦æ—¶æ·»åŠ æ–°çš„æ¡¶ï¼Œä»¥ä½¿å¾—<code>load_factor&lt;=max_load_factor</code></td>
</tr>
<tr>
<td><code>c.rehash(n)</code></td>
<td>é‡ç»„å­˜å‚¨ï¼Œä½¿å¾—<code>bucket_count&gt;=n</code>ï¼Œä¸”<code>bucket_count&gt;size/max_load_factor</code></td>
</tr>
<tr>
<td><code>c.reverse(n)</code></td>
<td>é‡ç»„å­˜å‚¨ï¼Œä½¿å¾—<code>c</code>å¯ä»¥ä¿å­˜<code>n</code>ä¸ªå…ƒç´ ä¸”ä¸å¿…<code>rehash</code>ã€‚</td>
</tr>
</tbody>
</table>

            </div>
            
                <div class="tags">
                    
                    <span class="down-type-item">
                        <div class="type-text">
                            <a href='
                                        /tags/#cpp
                                    '>
                                <i class="fa fa-tag"></i> #Cpp
                            </a>
                        </div>
                    </span>
                    
                    <span class="down-type-item">
                        <div class="type-text">
                            <a href='
                                        /tags/#%E8%AF%AD%E6%B3%95%E7%89%B9%E6%80%A7
                                    '>
                                <i class="fa fa-tag"></i> #è¯­æ³•ç‰¹æ€§
                            </a>
                        </div>
                    </span>
                    
                    <span class="down-type-item">
                        <div class="type-text">
                            <a href='
                                        /tags/#%E7%BC%96%E7%A8%8B
                                    '>
                                <i class="fa fa-tag"></i> #ç¼–ç¨‹
                            </a>
                        </div>
                    </span>
                    
                    <span class="down-type-item">
                        <div class="type-text">
                            <a href='
                                        /tags/c&#43;&#43;%E6%A0%87%E5%87%86%E5%BA%93
                                    '>
                                <i class="fa fa-tag"></i> C&#43;&#43;æ ‡å‡†åº“
                            </a>
                        </div>
                    </span>
                    
                </div>
            
        </div>
        
            
                <div class="pre-next">
                    
    
        
        <a href="https://cnjslw.github.io/posts/%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/" class="pre">
            <span class="pre-icon"><i class="fa fa-hand-o-left"></i></span>
            <div class="pre-title-root">
                <span>ã€C&#43;&#43; Primer(edition 5) 08ã€‘é¡ºåºå®¹å™¨</span>
            </div>
        </a>
        

        
        <a href="https://cnjslw.github.io/posts/%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95/" class="next">
            <div class="next-title-root">
                <span>ã€C&#43;&#43; Primer(edition 5) 10ã€‘æ³›å‹ç®—æ³•</span>
            </div>
            <span class="next-icon"><i class="fa fa-hand-o-right"></i></span>
        </a>
        

    
    

                </div>
            
        
    
</div>

    
        <div class="content-last">
            
                <button class="aixin content-last-item efct-button">
                    <i class="fa fa-heart"></i>
                </button>
            
            
        </div>
    


            </div>
            <div class="zhuti-r">
                
<div class="zhuti-r-0">
    <div class="zhuti-r-1">
        
        <div id="r1">
            

<div class="about-zuozhe">
    <div class="zuozhe">
        
            <div class="datou">
                <img class="lazyload" src="/images/thumbnail.gif" data-src="/images/author.png" alt="">
            </div>
        
        <div class="name-jianjie">
            <div class="name">AWei</div>
            <div class="jianjie">
                å‡¡å¤–é‡è€…å¿…å†…æ‹™
            </div>
        </div>
    </div>

    <div class="type">
        <a href='
                    /posts/
                '>
            <p>æ–‡ç« </p>
            <p>23</p>
        </a>
        <a href='
                    /categories/
                '>
            <p>åˆ†ç±»</p>
            <p>4</p>
        </a>
        <a href='
                    /tags/
                '>
            <p>æ ‡ç­¾</p>
            <p>11</p>
        </a>
    </div>

    <a href="https://github.com/cnjslw">
        <div class="follow">Follow Me</div>
    </a>
    <div class="link">
        
        <a href="https://github.com/cnjslw" class="link-item is-hidden-desktop" title="GitHub">
            <span class="icon"><i class='fa fa-github'></i></span>
        </a>
        
        <a href="https://www.youtube.com" class="link-item is-hidden-desktop" title="YouTube">
            <span class="icon"><i class='fa fa-youtube'></i></span>
        </a>
        
    </div>
</div>
            <div class="mulu">
    <div class="dong"></div>
    <div class="zhi">
        <div class="wenzi">
            <div class="zhi-mulu text-wbd">ç›®å½•</div>
            <div class="mulu-items">
            </div>
        </div>
    </div>
</div>
            



    
    


<div class="other">
    <div class="other-up">
        <div class="other-qita text-wbd">ç›¸å…³æ–‡ç« </div>
        <div class="xian"></div>
    </div>
    <div class="list">
        
            <a href="https://cnjslw.github.io/posts/%E5%8A%A8%E6%80%81%E5%88%86%E9%85%8D/">
                
<a href="https://cnjslw.github.io/posts/%E5%8A%A8%E6%80%81%E5%88%86%E9%85%8D/">
    <div class="list-item">
        <div class="icon-other-root">
            
                <div class="icon-other" style="background-image: url( https://picsum.photos/2500/500 );"></div>
            
        </div>
        <div class="list-right">
            <div class="other-title">
                ã€C&#43;&#43; Primer(edition 5) 11ã€‘åŠ¨æ€å†…å­˜
            </div>
            <div class="other-summary">åŠ¨æ€å†…å­˜</div>
            <div class="other-date">2021-10-7</div>
        </div>
    </div>
</a>
            </a>
        
            <a href="https://cnjslw.github.io/posts/%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95/">
                
<a href="https://cnjslw.github.io/posts/%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95/">
    <div class="list-item">
        <div class="icon-other-root">
            
                <div class="icon-other" style="background-image: url( https://picsum.photos/2500/500 );"></div>
            
        </div>
        <div class="list-right">
            <div class="other-title">
                ã€C&#43;&#43; Primer(edition 5) 10ã€‘æ³›å‹ç®—æ³•
            </div>
            <div class="other-summary">æ³›å‹ç®—æ³•</div>
            <div class="other-date">2021-10-1</div>
        </div>
    </div>
</a>
            </a>
        
            <a href="https://cnjslw.github.io/posts/%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/">
                
<a href="https://cnjslw.github.io/posts/%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/">
    <div class="list-item">
        <div class="icon-other-root">
            
                <div class="icon-other" style="background-image: url( https://picsum.photos/2500/500 );"></div>
            
        </div>
        <div class="list-right">
            <div class="other-title">
                ã€C&#43;&#43; Primer(edition 5) 08ã€‘é¡ºåºå®¹å™¨
            </div>
            <div class="other-summary">é¡ºåºå®¹å™¨</div>
            <div class="other-date">2021-9-25</div>
        </div>
    </div>
</a>
            </a>
        
            <a href="https://cnjslw.github.io/posts/%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">
                
<a href="https://cnjslw.github.io/posts/%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">
    <div class="list-item">
        <div class="icon-other-root">
            
                <div class="icon-other" style="background-image: url( https://picsum.photos/2500/500 );"></div>
            
        </div>
        <div class="list-right">
            <div class="other-title">
                ã€ä»æ±‡ç¼–çš„è§†è§’é‡å­¦C&#43;&#43; 01ã€‘åŸºæœ¬æ•°æ®ç±»å‹çš„è¡¨ç°å½¢å¼
            </div>
            <div class="other-summary">åŸºæœ¬æ•°æ®ç±»å‹çš„è¡¨ç°å½¢å¼</div>
            <div class="other-date">2021-11-1</div>
        </div>
    </div>
</a>
            </a>
        
            <a href="https://cnjslw.github.io/posts/%E5%A4%9A%E6%80%81/">
                
<a href="https://cnjslw.github.io/posts/%E5%A4%9A%E6%80%81/">
    <div class="list-item">
        <div class="icon-other-root">
            
                <div class="icon-other" style="background-image: url( https://picsum.photos/2500/500 );"></div>
            
        </div>
        <div class="list-right">
            <div class="other-title">
                ã€C&#43;&#43; Primer(edition 5) 15ã€‘å¤šæ€
            </div>
            <div class="other-summary">å¤šæ€</div>
            <div class="other-date">2021-10-27</div>
        </div>
    </div>
</a>
            </a>
        
            <a href="https://cnjslw.github.io/posts/%E7%BB%A7%E6%89%BF/">
                
<a href="https://cnjslw.github.io/posts/%E7%BB%A7%E6%89%BF/">
    <div class="list-item">
        <div class="icon-other-root">
            
                <div class="icon-other" style="background-image: url( https://picsum.photos/2500/500 );"></div>
            
        </div>
        <div class="list-right">
            <div class="other-title">
                ã€C&#43;&#43; Primer(edition 5) 14ã€‘ç»§æ‰¿
            </div>
            <div class="other-summary">ç»§æ‰¿</div>
            <div class="other-date">2021-10-22</div>
        </div>
    </div>
</a>
            </a>
        
    </div>
</div>
        </div>
        <div id="r2">
            
        </div> 
    </div>
</div>

            </div>
        </div>
    </div>
</div>

    

<div class="sponsor">
    <div class="sponsor-self">
        <div class="sponsor-title">èµèµ</div>
        <div class="sponsor-btn">
            
                
                    
                        <div class="sponsor-btn-1 border-r">Wechat</div>
                    
                
                
            
                
                    
                        <div class="sponsor-btn-2 border-l">Alipay</div>
                    
                
                
            
        </div>
        
        <div class="sponsor-img">
            
                
                    <img class="sponsor-img-1" src="/images/wechat.png" alt="">
                
                
            
                
                    <img class="sponsor-img-2" src="/images/alipay.png" alt="" style="display: none;">
                
                
            
        </div>
        <div class="cancel efct-button">å–æ¶ˆ</div>
    </div>
</div>


        </div>

        <footer class="footer">
    
        <div class="container">
            <div class="footer-items">
                
                    <div class="footer-item">
                        <i class="fa fa-user"></i> <span id="busuanzi_value_site_pv"></span> |
                        <i class="fa fa-eye"></i> <span id="busuanzi_value_site_uv"></span>
                    </div>
                
                
                    <div class="footer-item">
                        Â© 2022-2023 <a href="https://github.com/cnjslw">AWei</a>
                    </div>
                
                
                    <div class="footer-item">
                        Theme by <a href="https://github.com/xioyito/NewBee">NewBee</a> | Powered by <a href="https://gohugo.io/">Hugo</a>
                    </div>
                
            </div>
        </div>
    

    
</footer>


        
        <div class="search-root">
    <div class="search-zz"></div>
    <div class="search">
        <div class="sheader anniu">
            <div class="sh-l">
                <input type="text" placeholder='è¯·è¾“å…¥å…³é”®è¯' id="search-key">
                <span class="sclear"><i class="fa fa-close"></i></span>
            </div>
            <div class="sh-r">
                <button>æœç´¢</button>
            </div>
        </div>
        <div class="sbody">
            <div class="sbody-1">
                <div class="stip"></div>
            </div>
        </div>
    </div>
</div>
        









    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    


<script type="text/javascript">
    var mode_custom = "auto";
    var postsCount =  23 ;
    var arrPosts = [{"link":"https://cnjslw.github.io/posts/qemu+vscode+kernel-debug/","plain":"åŸºç¡€ç¯å¢ƒ è™šæ‹Ÿæœºç¯å¢ƒ VMwareÂ® Workstation 16 Pro 16.2.4 build-20089737 Ubuntu14.04 amd64 çœŸæœºç¯å¢ƒ Intel(R) Core(TM) i7-7700HQ CPU ï¼ˆAMD64ï¼‰ Windows 10 ä¸“ä¸šç‰ˆ 22H2 Visual Studio 1.79.2 Visual Studio æ’ä»¶é…ç½® C/C++ v.1.15.4 C/C++ Extension Pack v1.3.0 Remote SSH v0.102.0 Remote SSH: Editing Configuration v0.86.0 Remote Explorer: v.0.4.0 Ubuntu14.04 è®¾ç½® root è®¾ç½® 1 2 //è®¾ç½®rootå¯†ç  sudo passwd è½¯ä»¶æ›´æ–° 1 2 sudo apt-get update sudo apt-get upgrade å¼€æœºroot ç™»å½• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # ä¿®æ”¹50-ubuntu.conf gedit /usr/share/lightdm/lightdm.conf.d/50-ubuntu.conf # ä¿®æ”¹å†…å®¹ [SeatDefaults] user-session=ubuntu autologin-user=root greeter-session=unity-greete greeter-show-manual-login=true allow-guest=false # ä¿®æ”¹.profile gedit /root/.profile # ä¿®æ”¹å†…å®¹ # mesg n tty -s \u0026amp;\u0026amp; mesg n ç¦æ­¢æç¤ºubuntuæ›´æ–° å‚è€ƒé…ç½®æ–¹æ¡ˆ[3] ç›¸å…³è½¯ä»¶å®‰è£… sshå®‰è£…ä¸vscodeè¿œç¨‹è¿æ¥è®¾ç½® å®‰è£…ssh 1 2 3 4 5 6 7 8 9 10 # 1. å®‰è£… sudo apt-get install openssh-server -y # 2. ä¿®æ”¹é…ç½®æ–‡ä»¶ sudo gedit /etc/ssh/sshd_config # 3. ä¿®æ”¹é€‰é¡¹ # Authentication: LoginGraceTime 120 #PermitRootLogin prohibit-password PermitRootLogin yes StrictModes yes Vscode è¿œç¨‹è¿æ¥ å‚è€ƒé…ç½®æ–¹æ³•[2] Linux Source Code ä¸‹è½½åœ°å€ï¼š\nIndex of /pub/linux/kernel/\n1 2 # è§£å‹ tar -zxvf linux-2.6.32.20.tar.gz qemu 1 2 3 4 5 # å®‰è£… apt-get install qemu -y # æ£€æµ‹å®‰è£…ç»“æœ qemu-i386 -version # qemu-i386 version 2.0.0 (Debian 2.0.0+dfsg-2ubuntu1.46), Copyright (c) 2003-2008 Fabrice Bellard gcc è¦æ±‚å®‰è£…gcc 4.4\n1 2 3 4 5 6 7 8 9 10 # å®‰è£… apt-get install gcc-4.4 ls /usr/bin -l | grep gcc #å¯ä»¥çœ‹åˆ°gccæ˜¯ä¸€ä¸ªé“¾æ¥æ–‡ä»¶ï¼Œè¿æ¥åˆ°gcc-4.8ç‰ˆæœ¬ï¼›å¯ä»¥æŠŠæœ¬é“¾æ¥åˆ é™¤ï¼Œé‡æ–°é“¾æ¥gccåˆ°gcc-4.4ç‰ˆæœ¬ï¼› # åˆ é™¤4.8ç‰ˆæœ¬çš„gccè½¯è¿æ¥ sudo rm -rf /usr/bin/gcc sudo ln /usr/bin/gcc-4.4 /usr/bin/gcc # æ£€æŸ¥å®‰è£…ç»“æœ sudo gcc -v # æŸ¥çœ‹æœ€ç»ˆé“¾æ¥å¥½çš„ç‰ˆæœ¬ã€‚ å®‰è£…å¿…è¦çš„ç¼–è¯‘ç¯å¢ƒ 1 2 3 apt-get install aptitude -y aptitude install libncurses5-dev -y apt-get install libssl-dev -y gdb å¸è½½åŸæœ‰gdbï¼Œå¹¶ä¸‹è½½gdbæºç  1 2 sudo apt-get autoremove gdb wget http://ftp.gnu.org/gnu/gdb/gdb-7.9.tar.gz ä¿®æ”¹æºç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 vim gdb-7.9/gdb/remote.c # ä¿®æ”¹å†…å®¹ if (buf_len \u0026gt; 2 * rsa-\u0026gt;sizeof_g_packet) error (_(\u0026#34;Remote \u0026#39;g\u0026#39; packet reply is too long: %s\u0026#34;), rs-\u0026gt;buf); # æ”¹ä¸º if (buf_len \u0026gt; 2 * rsa-\u0026gt;sizeof_g_packet) { rsa-\u0026gt;sizeof_g_packet = buf_len; for (i = 0; i \u0026lt; gdbarch_num_regs (gdbarch); i++) { if (rsa-\u0026gt;regs[i].pnum == -1) continue; if (rsa-\u0026gt;regs[i].offset \u0026gt;= rsa-\u0026gt;sizeof_g_packet) rsa-\u0026gt;regs[i].in_g_packet = 0; else rsa-\u0026gt;regs[i].in_g_packet = 1; } } ç¼–è¯‘å®‰è£… 1 2 3 4 cd gdb-7.9 sudo ./configure sudo make sudo make install æ£€æŸ¥å®‰è£…ç»“æœ 1 gdb -v BusyBox æºç å®‰è£…ç¼–è¯‘ 1 2 3 4 5 6 7 8 9 10 11 # ä¸‹è½½æºç  wget --no-check-certification https://busybox.net/downloads/busybox-1.25.0.tar.bz2 # è§£å‹ tar -xvjf busybox-1.25.0.tar.bz2 # ç¼–è¯‘ make defconfig make menuconfig make -j4 make menuconfig åœ¨ç¼–è¯‘é€‰é¡¹ä¸­éœ€è¦æ‰‹åŠ¨å‹¾é€‰çš„é¡¹ 1 2 # æ£€æŸ¥å®‰è£…ç»“æœ,ä¸æˆªå›¾ä¸­çš„å†…å®¹ç›¸åŒåˆ™å®‰è£…æˆåŠŸ ./busybox ls 1 2 # å®‰è£… make install Linuxå†…æ ¸ç¼–è¯‘ 1 2 3 4 5 6 # ä¸‹è½½ wget https://mirrors.edge.kernel.org/pub/linux/kernel/v2.6/linux-2.6.32.20.tar.gz # ç¼–è¯‘ make menuconfig make -j4 æ£€æŸ¥å®‰è£…ç»“æœ æ ¹æ–‡ä»¶ç³»ç»Ÿåˆ¶ä½œ å°†busyboxå®‰è£…åç”Ÿæˆçš„_installæ–‡ä»¶å•ç‹¬æ‹·è´åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ 1 2 3 mkdir ramdisk cd ramdisk cp -r ../busy-1.25.0/_install/* . è®¾ç½®åˆå§‹åŒ–è¿›ç¨‹initï¼ˆå»ºç«‹ä¸€ä¸ªè½¯é“¾æ¥ï¼Œä¸€å®šä¸èƒ½ç›´æ¥å¤åˆ¶è¿‡å»ï¼‰ 1 2 cd ramdisk ln -s bin/busybox init è®¾ç½®å¼€æœºå¯åŠ¨ç¨‹åº é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å…ˆè®¾å®šä¸€äº›ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„æ–‡ä»¶å¤¹ 1 2 cd ramdisk mkdir -pv {bin,sbin,etc,proc,sys,usr/{bin,sbin},dev} initç¨‹åºé¦–å…ˆä¼šè®¿é—®etc/inittabæ–‡ä»¶ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™inittabï¼ŒæŒ‡å®šå¼€æœºéœ€è¦å¯åŠ¨çš„æ‰€æœ‰ç¨‹åº 1 2 3 cd ramdisk cd etc vim inittab inittabæ–‡ä»¶æ·»åŠ å¦‚ä¸‹å†…å®¹ 1 2 3 4 5 6 ::sysinit:/etc/init.d/rcS ::askfirst:-/bin/sh ::restart:/sbin/init ::ctrlaltdel:/sbin/reboot ::shutdown:/bin/umount -a -r ::shutdown:/sbin/swapoff -a 1 chmod +x inittab ç¼–å†™ç³»ç»Ÿåˆå§‹åŒ–å‘½ä»¤ ä»inittabæ–‡ä»¶ä¸­å¯ä»¥çœ‹å‡ºï¼Œé¦–å…ˆæ‰§è¡Œçš„æ˜¯/etc/init.d/rcSè„šæœ¬ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ç”Ÿæˆåˆå§‹åŒ–è„šæœ¬ 1 2 3 4 cd ramdisk mkdir init.d cd init.d vim rcS rcSæ–‡ä»¶æ·»åŠ å¦‚ä¸‹å†…å®¹\n1 2 3 4 5 6 7 #!/bin/sh mount proc mount -o remount,rw / mount -a clear echo \u0026#34;My Tiny Linux Starting, press enter to active\u0026#34; 1 chmod +x rcS è®¾ç½®æ–‡ä»¶ç³»ç»Ÿ åœ¨rcSè„šæœ¬ä¸­ï¼Œmount -a æ˜¯è‡ªåŠ¨æŒ‚è½½ /etc/fstab é‡Œé¢çš„ä¸œè¥¿ï¼Œå¯ä»¥ç†è§£ä¸ºæŒ‚åœ¨æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ç¼–å†™ fstabæ–‡ä»¶æ¥è®¾ç½®æˆ‘ä»¬çš„æ–‡ä»¶ç³»ç»Ÿã€‚ 1 2 cd ramdisk/etc/ vim fstab 1 2 3 4 #/etc/fstab proc /proc proc defaults 0 0 sysfs /sys sysfs defaults 0 0 devtmpfs /dev devtmpfs defaults 0 0 å‹ç¼©ç”Ÿæˆé•œåƒ è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†RAM Diskä¸­ç›¸å…³æ–‡ä»¶çš„é…ç½®ï¼Œå¯ä»¥å‹ç¼©ç”Ÿæˆæ–‡ä»¶é•œåƒäº†ã€‚ 1 2 cd ramdisk find . -print0 | cpio --null -ov --format=newc | gzip -9 \u0026gt; ../initramfs.img æœ€åç”Ÿæˆçš„initramfs.imgå°±æ˜¯æˆ‘ä»¬çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ\nqemu+gdbè°ƒè¯•linux kernel ç›´æ¥è¿è¡Œ\n1 qemu-system-x86_64 -kernel ./linux-2.6.32.20/arch/x86_64/boot/bzImage -initrd ./initramfs.img -append \u0026#34;console=ttyS0\u0026#34; -nographic è°ƒè¯•è¿è¡Œ\n1 qemu-system-x86_64 -kernel ./linux-2.6.32.20/arch/x86_64/boot/bzImage -initrd ./initramfs.img -append \u0026#34;console=ttyS0\u0026#34; -nographic -S -s 1 2 3 4 gdb vmlinux # vmlinuxä¸ºå†…æ ¸æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶ # è¿›å…¥gdbå target remote:1234 # qemué»˜è®¤ç«¯å£ï¼Œå¯ä»¥æ›´æ”¹ Vscode è¿œç¨‹è°ƒè¯• è¿œç¨‹è¿æ¥åæ·»åŠ é…ç½®æ–‡ä»¶lanuch.json è¿è¡Œ\u0026gt;æ·»åŠ é…ç½®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 // æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚ // æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387 \u0026#34;version\u0026#34;: \u0026#34;0.2.0\u0026#34;, \u0026#34;configurations\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;LinuxKernel-Debug\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;cppdbg\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;launch\u0026#34;, \u0026#34;miDebuggerServerAddress\u0026#34;: \u0026#34;127.0.0.1:1234\u0026#34;, \u0026#34;program\u0026#34;: \u0026#34;${workspaceFolder}/vmlinux\u0026#34;, \u0026#34;args\u0026#34;: [], \u0026#34;stopAtEntry\u0026#34;: false, \u0026#34;cwd\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34;, \u0026#34;environment\u0026#34;: [], \u0026#34;externalConsole\u0026#34;: false, \u0026#34;logging\u0026#34;: { \u0026#34;engineLogging\u0026#34;: false }, \u0026#34;MIMode\u0026#34;: \u0026#34;gdb\u0026#34;, \u0026#34;miDebuggerPath\u0026#34;: \u0026#34;/usr/local/bin/gdb\u0026#34; } ] } æ­£å¸¸è°ƒè¯•\n[1] QEMU+GDBè°ƒè¯•Linuxå†…æ ¸æ€»ç»“\n[2] VSCodeä½¿ç”¨Remote SSHè¿æ¥è¿œç¨‹æœåŠ¡å™¨\n[3] æ€ä¹ˆç¦æ­¢/å¼€å¯Ubuntuè‡ªåŠ¨æ›´æ–°å‡çº§\n[4] æ­å»º Linux å†…æ ¸ç½‘ç»œè°ƒè¯•ç¯å¢ƒ\n","pubDate":"2023-02-01","title":"ã€Linux Kernelã€‘Linux debug ç¯å¢ƒæ­å»ºï¼šqemu+vscodeå†…æ ¸æºç è°ƒè¯•é…ç½®æ•™ç¨‹"},{"link":"https://cnjslw.github.io/posts/%E6%8C%87%E4%BB%A4%E6%A6%82%E8%BF%B0/","plain":"æŒ‡ä»¤ç³»ç»Ÿä»‹ç» æŒ‡ä»¤ç³»ç»Ÿè®¾è®¡åŸåˆ™ æŒ‡ä»¤ç³»ç»Ÿçš„å‘å±•å†ç¨‹ æŒ‡ä»¤å†…å®¹çš„æ¼”å˜ å­˜å‚¨ç®¡ç†çš„æ¼”å˜ è¿è¡Œçº§åˆ«çš„æ¼”å˜ ç³»ç»ŸæŒ‡ä»¤çš„ç»„æˆ æŒ‡ä»¤ç³»ç»Ÿç”±è‹¥â¼²æ¡æŒ‡ä»¤åŠå…¶æ“ä½œå¯¹è±¡ç»„æˆã€‚ æ¯æ¡æŒ‡ä»¤éƒ½æ˜¯å¯¹â¼€ä¸ªæ“ä½œçš„æè¿°, ä¸»è¦åŒ…æ‹¬æ“ä½œç å’Œæ“ä½œæ•°ã€‚æ“ä½œç è§„å®šæŒ‡ä»¤åŠŸèƒ½, ä¾‹å¦‚åŠ å‡æ³•; æ“ä½œæ•°æŒ‡ç¤ºæ“ä½œå¯¹è±¡, åŒ…å«æ•°æ®ç±»å‹ã€ è®¿å­˜åœ°å€ã€ å¯»å€æ–¹å¼ç­‰å†…å®¹çš„å®šä¹‰ã€‚\nåœ°å€ç©ºé—´ æ“ä½œæ•° æŒ‡ä»¤æ“ä½œå’Œç¼–ç  è¡¥å…… æ—©æœŸï¼Œ1980så¹´ä»£ï¼Œx86â¼€èˆ¬æŒ‡å½“æ—¶çš„å¤„ç†å™¨8088å’Œ80286ï¼Œä¸è¿‡è¿™ä¸¤ä¸ªå¤„ç†å™¨éƒ½æ˜¯16ä½çš„ã€‚å¦‚ä»Šï¼Œ x86é€šå¸¸æŒ‡32ä½æŒ‡ä»¤é›†æ¶æ„çš„å¤„ç†å™¨ï¼Œæ¯”å¦‚80386ã€‚ 80386å¤„ç†å™¨æ˜¯intelåœ¨1985å¹´å®ç°çš„ç¬¬ä¸€æ¬¾32ä½æŒ‡ä»¤é›†æ¶æ„çš„å¤„ç†å™¨ï¼Œåˆå«i386ï¼Œ Intel Architecture, 32-bitï¼Œç¼©å†™ä¸ºIA-32ï¼Œç°åœ¨ï¼Œ IA-32ä¸€èˆ¬åˆèƒ½å¼•å–»æˆæ‰€æœ‰çš„æ”¯æŒ32ä½è®¡ç®—çš„x86æ¶æ„ã€‚æŒ‰ç…§å‘å±•å†å²çœ‹ï¼Œ x86åº”è¯¥æ˜¯æŒ‡ä»¤é›†æ¦‚å¿µï¼Œâ¼€èˆ¬ç”¨äºä¸ªäººPCç³»ç»Ÿå¦‚8086,286,386ã€‚ IA-32æ˜¯intelé¦–æ¨çš„32ä½æ¶æ„ã€‚ x86-64/x64/amd64/Intel64ã€‚åœ¨1999å¹´ï¼Œ AMDå…¬å¸â¾¸å…ˆåœ¨IA-32åŸºç¡€ä¸Šï¼Œå¢åŠ äº†64ä½å¯„å­˜å™¨ï¼Œå…¼å®¹æ—©æœŸçš„16ä½å’Œ32ä½è½¯ä»¶ç³»ç»Ÿï¼Œæ¨å‡ºäº†x86-64çš„64ä½å¾®å¤„ç†å™¨ï¼Œåæ¥å‘½åä¸ºAMD64ï¼Œå®ç°äº†è¶…è½¦ã€‚ç„¶åintelå…¬å¸ä¹Ÿæ¥å—äº†è¯¥æ–¹æ¡ˆï¼Œå«åšIntel64ã€‚ x86-64åº”è¯¥åªç®—æ˜¯x86æŒ‡ä»¤é›†çš„64ä½æ‰©å±•ï¼Œå¹¶ä¸æ˜¯â¼€ç§å…¨æ–°çš„64ä½æ¶æ„ã€‚ç”±äºamd64å’Œintel64æœ¬è´¨ä¸Šæ˜¯â¼€æ ·çš„ï¼Œå«æ³•ä¹Ÿæ˜¯å¾ˆå¤šã€‚ AMDé€šå¸¸å«å®ƒx86-64ã€ x86_64ï¼Œå¾®è½¯å’Œsunç­‰è½¯ä»¶å…¬å¸å«å®ƒx64ï¼Œæ“ä½œç³»ç»Ÿå‚å•†åˆ™é€šå¸¸ç”¨AMD64æˆ–è€…amd64æ¥æŒ‡ä»£AMD64å’ŒIntel64ã€‚IA-64æ˜¯Intelæ¨å‡ºçš„ç”¨äºItaniumå¤„ç†å™¨ï¼ˆå®‰è…¾å¤„ç†å™¨ï¼‰çš„è‡ªå·±çš„Intel Architecture 64ä½æŒ‡ä»¤é›†ï¼Œä¸€èˆ¬ç”¨äºæœåŠ¡å™¨ã€‚å°½ç®¡Intel64ä¹Ÿæ˜¯64ä½å¤„ç†å™¨ï¼Œä½†è¿™ä¸¤è€…å®Œå…¨ä¸æ˜¯â¼€å›äº‹ã€‚ IA-64è½¯ä»¶ä¸èƒ½ç›´æ¥è¿è¡ŒäºIntel64å¤„ç†å™¨ä¸Šã€‚ x86-64æ˜¯IA-32æŒ‡ä»¤é›†çš„æ‰©å±•ï¼Œâ½½IA-64åˆ™æ˜¯å®Œå®Œå…¨å…¨æ²¡æœ‰â¼€ç‚¹IA-32å½±å­çš„ç‹¬ç«‹å¤„ç†å™¨æ¶æ„ã€‚ IA-64éœ€è¦é€šè¿‡æ¨¡æ‹Ÿå™¨æ‰èƒ½è¿è¡ŒIA-32ï¼Œä½†æ˜¯æ€§èƒ½å¤§å¤§å—å½±å“ã€‚\nå¸‚é¢ä¸Šå¤„ç†å™¨å¦‚ä½•åŒºåˆ†AMD64å’ŒIA-64å‘¢ï¼Ÿå¸‚é¢ä¸Šä¹°çš„Intel 64-bitçš„cpuå…¶å®éƒ½å±äºamd64åˆ†ç±»ï¼Œintel64å’Œamd64å…¶å®éƒ½åº”è¯¥å«åšx86_64ã€‚IA64åˆ™æŒ‡Itaniumsç³»ç»Ÿcpuï¼Œå¹¶ä¸æ˜¯x86æ¶æ„çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨äºæœåŠ¡å™¨ï¼Œä¸æ˜¯ä¸ªâ¼ˆæ¡Œé¢äº§å“ï¼Œä»·æ ¼æ˜‚è´µã€‚\nARM64/AArch64ï¼šARMæ˜¯ç²¾ç®€æŒ‡ä»¤é›†RISCä¸‹çš„å¤„ç†å™¨æ¶æ„ã€‚ARMv3â¾„ARMv7â½€æŒ32ä½å¯»å€ç©ºé—´ã€‚ ARMv8-A å¼€å§‹æ”¯æŒ64ä½å¯»å€ç©ºé—´ã€‚ AArch64å’ŒARM64éƒ½æ˜¯æŒ‡64ä½çš„ARMæ¶æ„ã€‚\n[1] ã€Šè®¡ç®—æœºç»„æˆåŸç†ä¸ä½“ç³»æ¶æ„ï¼ˆç¬¬3ç‰ˆï¼‰ã€‹èƒ¡ä¼Ÿæ­¦ç­‰\n","pubDate":"2023-01-15","title":"ã€è®¡ç®—æœºç»„æˆåŸç†ä¸ä½“ç³»æ¶æ„01ã€‘æŒ‡ä»¤ç³»ç»Ÿè®¾è®¡"},{"link":"https://cnjslw.github.io/posts/%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%8E%E5%8F%8B%E5%85%83/","plain":"å¦‚æœä¸€ä¸ªç±»æ¨¡æ¿åŒ…å«ä¸€ä¸ªéæ¨¡æ¿å‹å…ƒï¼Œåˆ™å‹å…ƒè¢«æˆæƒå¯ä»¥è®¿é—®æ‰€æœ‰æ¨¡æ¿å®ä¾‹ã€‚å¦‚æœå‹å…ƒè‡ªèº«æ˜¯æ¨¡æ¿ï¼Œç±»å¯ä»¥æˆæƒç»™æ‰€æœ‰å‹å…ƒæ¨¡æ¿å®ä¾‹ï¼Œä¹Ÿå¯ä»¥åªæˆæƒç»™ç‰¹å®šå®ä¾‹\n1ã€å‹å…ƒç±» ä¼ ç»Ÿå‹å…ƒç±»çš„æ¦‚å¿µæ˜¯ï¼šè®©æŸä¸ªç±»Bæˆä¸ºå¦å¤–ä¸€ä¸ªç±»Açš„å‹å…ƒç±»ï¼Œè¿™æ ·çš„è¯ï¼Œç±»Bå°±å¯ä»¥åœ¨å…¶æˆå‘˜å‡½æ•°ä¸­è®¿é—®ç±»Açš„æ‰€æœ‰æˆå‘˜ï¼ˆæˆå‘˜å˜é‡ã€æˆå‘˜å‡½æ•°ï¼‰ï¼Œè€Œä¸ç®¡è¿™äº›æˆå‘˜åœ¨ç±»Aä¸­æ˜¯ç”¨ä»€ä¹ˆä¿®é¥°ç¬¦ï¼ˆprivateã€protectedã€publicï¼‰ä¿®é¥°çš„ã€‚\n1.1 è®©ç±»æ¨¡æ¿çš„æŸä¸ªå®ä¾‹ç§°ä¸ºå‹å…ƒç±» 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 template \u0026lt;typename U\u0026gt; class B; template \u0026lt;typename T\u0026gt; class A { friend class B\u0026lt;long\u0026gt;; private: int data; }; template \u0026lt;typename U\u0026gt; class B { public: void callBAF() { A\u0026lt;int\u0026gt; atmpobj; atmpobj.data = 5 ; std::cout \u0026lt;\u0026lt; atmpobj.data\u0026lt;\u0026lt;std::endl; } }; int main() { B\u0026lt;long\u0026gt; bobj ; bobj.callBAF(); } è®©ç±»æ¨¡æ¿Bçš„ç‰¹å®šç±»æ¨¡æ¿å®ä¾‹ï¼ˆä¹Ÿå°±æ˜¯B\u0026lt;long\u0026gt;ï¼‰æˆä¸ºç±»æ¨¡æ¿Açš„å‹å…ƒç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒB\u0026lt;long\u0026gt;å®é™…ä¸Šä»£è¡¨çš„æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»\n1.2 è®©ç±»æ¨¡æ¿æˆä¸ºå‹å…ƒç±»æ¨¡æ¿ æ•´ä¸ªç±»æ¨¡æ¿Bå˜æˆç±»æ¨¡æ¿Açš„å‹å…ƒç±»æ¨¡æ¿\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 template \u0026lt;typename U\u0026gt; class B; template \u0026lt;typename T\u0026gt; class A { template\u0026lt;typename \u0026gt; friend class B; private: int data; }; template \u0026lt;typename U\u0026gt; class B { public: void callBAF() { A\u0026lt;int\u0026gt; atmpobj; atmpobj.data = 5 ; std::cout \u0026lt;\u0026lt; atmpobj.data\u0026lt;\u0026lt;std::endl; } }; int main() { B\u0026lt;long\u0026gt; bobj ; bobj.callBAF(); B\u0026lt;int\u0026gt; bobjs ; bobjs.callBAF(); } 1.3 è®©ç±»å‹æ¨¡æ¿å‚æ•°æˆä¸ºå‹å…ƒç±»ï¼ˆC++11ï¼‰ å¦‚æœä¼ é€’è¿›æ¥çš„ç±»å‹æ¨¡æ¿å‚æ•°æ˜¯ä¸€ä¸ªç±»ç±»å‹ï¼Œåˆ™è¿™ä¸ªç±»ç±»å‹å¯ä»¥æˆä¸ºå½“å‰ç±»æ¨¡æ¿çš„å‹å…ƒç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 template \u0026lt;typename T\u0026gt; class A2 { friend T; private int data; }; class CF { public: void callCFAF() { A2\u0026lt;CF\u0026gt; aobj; aobj.data=12; } }; int main() { CF mycfobj; mycfobj.callCFAF(); } ç±»æ¨¡æ¿æœ‰å…¶ç‰¹æ®Šæ€§ï¼Œå¦‚æœä¼ é€’ç»™ç±»æ¨¡æ¿A2çš„ç±»å‹æ¨¡æ¿å‚æ•°ä¸æ˜¯ä¸€ä¸ªç±»ç±»å‹ï¼Œé‚£ä¹ˆä»£ç è¡Œfriend T;å°±ä¼šè¢«å¿½ç•¥ï¼Œä»è€Œä¸èƒ½è®¿é—®dataæˆå‘˜å˜é‡\n2ã€å‹å…ƒå‡½æ•° 2.1 è®©å‡½æ•°æ¨¡æ¿çš„æŸä¸ªå®ä¾‹æˆä¸ºå‹å…ƒå‡½æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 template\u0026lt;typename U , typename V\u0026gt; void func(U val1 , V val2); class Men { private: void funcmen()const { cout\u0026lt;\u0026lt;\u0026#34;Men::funcmenè¢«è°ƒç”¨äº†\u0026#34;\u0026lt;\u0026lt;endl; } friend void func\u0026lt;int , int\u0026gt;(int , int); friend void func\u0026lt;\u0026gt;(float , int);//å°–æ‹¬å·å†…ä¿æŒä¸ºç©ºï¼Œç¼–è¯‘å™¨ä¼šç”¨æŒ‡å®šçš„å®å‚ç±»å‹æ¨å¯¼å‡ºæ¨¡æ¿å‚æ•°çš„ç±»å‹ friend void func\u0026lt;\u0026gt;(int , float); }; template\u0026lt;typename U , typename V\u0026gt; void func(U val1 , V val2) { Men mymen; mymen.funcmen(); } int main() { func(2,3);//func\u0026lt;int ,int\u0026gt; func\u0026lt;float\u0026gt;(4.6f , 5);//func\u0026lt;float,int\u0026gt; func\u0026lt;int , float\u0026gt;(4,5.6f);//func\u0026lt;int ,float\u0026gt; } 2.2 å‹å…ƒæ¨¡æ¿ ä¸Šé¢çš„èŒƒä¾‹ä¸­ï¼Œåªæ˜¯è®©å‡½æ•°æ¨¡æ¿func()çš„æŸä¸ªå®ä¾‹æˆä¸ºMenç±»æ¨¡æ¿çš„å‹å…ƒå‡½æ•°ï¼Œè€Œä¸”ä¸ºäº†åº”å¯¹ä¸åŒçš„æƒ…å†µï¼Œè¿˜è¦åˆ†åˆ«è®¾ç½®å¤šä¸ªfunc()å‡½æ•°æ¨¡æ¿çš„å®ä¾‹æˆä¸ºMenç±»æ¨¡æ¿çš„å‹å…ƒå‡½æ•°ã€‚æ˜¾ç„¶ï¼Œå¦‚æœå¸Œæœ›æ‰€æœ‰func()å®ä¾‹éƒ½æˆä¸ºMenç±»æ¨¡æ¿çš„å‹å…ƒå‡½æ•°ï¼Œåƒä¸Šé¢è¿™æ ·ä¸€ä¸ªä¸ªè®¾ç½®å¾ˆè¾›è‹¦ã€‚æ‰€ä»¥ï¼Œä¸ºäº†åšåˆ°è¿™ç‚¹ï¼Œå°±éœ€è¦è®©å‡½æ•°æ¨¡æ¿func()æˆä¸ºMenç±»æ¨¡æ¿çš„å‹å…ƒæ¨¡æ¿ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 class Men { private: void funcmen()const { cout\u0026lt;\u0026lt;\u0026#34;Men::funcmenè¢«è°ƒç”¨äº†\u0026#34;\u0026lt;\u0026lt;endl; } template \u0026lt;typename U , typename V\u0026gt; friend void func(U val1 , V val2); }; template\u0026lt;typename U , typename V\u0026gt; void func(U val1 , V val2) { Men mymen; mymen.funcmen(); } int main() { func(2,3);//func\u0026lt;int ,int\u0026gt; func\u0026lt;float\u0026gt;(4.6f , 5);//func\u0026lt;float,int\u0026gt; func\u0026lt;int , float\u0026gt;(4,5.6f);//func\u0026lt;int ,float\u0026gt; } æ‰€æœ‰func()å‡½æ•°æ¨¡æ¿çš„å®ä¾‹å°±éƒ½æˆä¸ºMenç±»æ¨¡æ¿çš„å‹å…ƒå‡½æ•°,ä¹Ÿä¸å†éœ€è¦åœ¨ç±»æ¨¡æ¿Menå®šä¹‰çš„å‰é¢å¢åŠ é’ˆå¯¹å‡½æ•°æ¨¡æ¿func()çš„å£°æ˜äº†ã€‚ç¼–è¯‘å™¨æ˜¯æŠŠå…¨ç‰¹åŒ–çš„func()å‡½æ•°æ¨¡æ¿çœ‹ä½œä¸€ä¸ªå®ä¾‹åŒ–è¿‡çš„å‡½æ•°æ¨¡æ¿ï¼ˆç†è§£å¾—æ›´ç›´æ¥ä¸€ç‚¹ï¼Œå°±æ˜¯çœ‹ä½œä¸€ä¸ªå·²ç»å­˜åœ¨äº†çš„å‡½æ•°ï¼‰\n2.3 åœ¨ç±»æ¨¡æ¿ä¸­å®šä¹‰å‹å…ƒå‡½æ•° å¯ä»¥åœ¨ä¸€ä¸ªç±»æ¨¡æ¿ä¸­å®šä¹‰ï¼ˆä¸æ˜¯å£°æ˜ï¼‰ä¸€ä¸ªå‹å…ƒå‡½æ•°ï¼Œè¿™ç§å‹å…ƒå‡½æ•°æ˜¯èƒ½è¢«è°ƒç”¨çš„ï¼Œè€Œä¸”ä¹Ÿåªæœ‰åœ¨ä»£ç ä¸­è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨æ‰ä¼šå®ä¾‹åŒ–è¿™ä¸ªå‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 template \u0026lt;typename Z\u0026gt; class Men { public: friend void func2(Men\u0026lt;Z\u0026gt;\u0026amp;tmpmen){ tmpmen.funcmen(); } void funcmen()const { cout\u0026lt;\u0026lt;\u0026#34;Men::funcmenè¢«è°ƒç”¨äº†\u0026#34;\u0026lt;\u0026lt;endl; } }; int main() { Men\u0026lt;double\u0026gt; mymen2; func2(mymen2); } è™½ç„¶func2()å‹å…ƒå‡½æ•°è¢«å†™åœ¨ä¸€ä¸ªç±»æ¨¡æ¿ä¸­ï¼Œä½†æ˜¯ç±»æ¨¡æ¿è¢«å®ä¾‹åŒ–æ—¶å¹¶ä¸ä¼šå®ä¾‹åŒ–è¿™äº›å‹å…ƒå‡½æ•°ï¼Œåªæœ‰ä»£ç ä¸­è°ƒç”¨åˆ°è¿™äº›å‡½æ•°æ—¶ï¼Œè¿™äº›å‡½æ•°æ‰ä¼šè¢«å®ä¾‹åŒ–ã€‚å¦å¤–å€¼å¾—ä¸€æçš„å°±æ˜¯ï¼Œå› ä¸ºfunc2()æ˜¯å†™åœ¨ç±»æ¨¡æ¿å®šä¹‰ä¸­çš„ï¼Œæ‰€ä»¥ï¼Œå½“è°ƒç”¨func2()æ—¶ï¼Œå¦‚æœfunc2()ä¸­çš„ä»£ç éå¸¸ç®€å•ï¼Œé‚£ä¹ˆèªæ˜çš„ç¼–è¯‘å™¨å°±ä¼šæŠŠfunc2()å½“ä½œä¸€ä¸ªå†…è”ï¼ˆInlineï¼‰å‡½æ•°æ¥å¤„ç†ï¼›å¦‚æœfunc2()ä¸­çš„ä»£ç æ¯”è¾ƒå¤æ‚ï¼ˆå¦‚å‡ºç°äº†forå¾ªç¯ç­‰ï¼‰ï¼Œé‚£ä¹ˆfunc2()å°±å¾ˆå¯èƒ½ä¸ä¼šè¢«å½“ä½œä¸€ä¸ªå†…è”å‡½æ•°å¤„ç†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 //ç”±cppinsights.io ç”Ÿæˆ template\u0026lt;typename Z\u0026gt; class Men { public: friend inline void func2(Men\u0026lt;Z\u0026gt; \u0026amp; tmpmen) { tmpmen.funcmen(); } inline void funcmen() const { std::operator\u0026lt;\u0026lt;(std::cout, \u0026#34;Men::funcmen\\350\\242\\253\\350\\260\\203\\347\\224\\250\\344\\272\\206\u0026#34;).operator\u0026lt;\u0026lt;(std::endl); } }; /* First instantiated from: insights.cpp:20 */ #ifdef INSIGHTS_USE_TEMPLATE template\u0026lt;\u0026gt; class Men\u0026lt;double\u0026gt; { public: friend inline void func2(Men\u0026lt;double\u0026gt; \u0026amp; tmpmen) { tmpmen.funcmen(); } inline void funcmen() const { std::operator\u0026lt;\u0026lt;(std::cout, \u0026#34;Men::funcmen\\350\\242\\253\\350\\260\\203\\347\\224\\250\\344\\272\\206\u0026#34;).operator\u0026lt;\u0026lt;(std::endl); } // inline constexpr Men() noexcept = default; }; #endif int main() { Men\u0026lt;double\u0026gt; mymen2 = Men\u0026lt;double\u0026gt;(); func2(mymen2); return 0; } ","pubDate":"2022-06-22","title":"ã€æ¨¡æ¿ä¸æ³›å‹ç¼–ç¨‹03ã€‘ç±»æ¨¡æ¿å’Œå‹å…ƒ"},{"link":"https://cnjslw.github.io/posts/%E7%B1%BB%E6%A8%A1%E6%9D%BF/","plain":"ä¸€ã€å®šä¹‰ç±»æ¨¡æ¿ 1ã€åŸºæœ¬èŒƒä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 //ä¸€ä¸ªç®€å•æ¨¡æ¿ç±» template \u0026lt;typename T\u0026gt; class Blob { public: typedef T value_type; typedef typename std::vector\u0026lt;T\u0026gt;::size_type size_type; //æ„é€ å‡½æ•° Blob(); Blob(std::initializer_list\u0026lt;T\u0026gt; il); // Blobä¸­çš„å…ƒç´ æ•°ç›® size_type size () const { return data-\u0026gt;size(); } bool empty() const { return data-\u0026gt;empty(); } //æ·»åŠ å’Œåˆ é™¤å…ƒç´  void push_back(const T \u0026amp;t) {data-\u0026gt;push_back(t);} //ç§»åŠ¨ç‰ˆæœ¬ void push_back(T \u0026amp;\u0026amp;t){data-\u0026gt;push_back(std::move(t)); } void pop_back(); //å…ƒäº²è®¿é—® T\u0026amp; back(); T\u0026amp; operator [](size_type i); private: std::shared_ptr\u0026lt;std::vector\u0026lt;T\u0026gt;\u0026gt; data; // è‹¥ data [ i]æ— æ•ˆï¼Œåˆ™æŠ›å‡ºmsg void check(size_type i, const std::string \u0026amp;msg) const; }; template\u0026lt;typename T\u0026gt; Blob\u0026lt;T\u0026gt;::check(size_type i, const std::string \u0026amp;msg) const { //...... } å¯¹äºç±»æ¨¡æ¿Blobï¼ŒBlobå¯ä»¥ç§°ä¸ºç±»åæˆ–ç±»æ¨¡æ¿ï¼Œè€ŒBlob\u0026lt;T\u0026gt;å¯ä»¥ç§°ä¸ºç±»å‹åï¼ˆBlobåé¢å¸¦äº†å°–æ‹¬å·ï¼Œæ‰€ä»¥è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹ï¼‰ï¼Œå…¶ä¸­çš„Tç§°ä¸ºæ¨¡æ¿å‚æ•°ï¼ŒTæœ¬èº«ä»£è¡¨çš„ä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹ï¼ˆå®¹å™¨ä¸­çš„å…ƒç´ ç±»å‹ï¼‰ï¼Œ\n2ã€æ¨¡æ¿å‚æ•° 2.1 ç±»å‹å‚æ•° åŒå‡½æ•°æ¨¡æ¿\n2.2 é»˜è®¤å‚æ•° 2.2.1 å¸¸è§„é»˜è®¤å‚æ•° å¦‚æœæŸä¸ªæ¨¡æ¿å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆä»è¿™ä¸ªæœ‰é»˜è®¤å€¼çš„æ¨¡æ¿å‚æ•°å¼€å§‹ï¼Œåé¢çš„æ‰€æœ‰æ¨¡æ¿å‚æ•°éƒ½å¾—æœ‰é»˜è®¤å€¼\n1 2 3 4 5 6 7 8 9 10 11 template \u0026lt;typename T=char , typename U=int\u0026gt; struct TC { //... }; int main() { TC\u0026lt;\u0026gt; mytc1; //TC\u0026lt;char,int\u0026gt; TC\u0026lt;double\u0026gt; mytc2; //TC\u0026lt;char,double\u0026gt; } 2.2.2 åé¢çš„æ¨¡æ¿å‚æ•°ä¾èµ–å‰é¢çš„æ¨¡æ¿å‚æ•° 1 template \u0026lt;typename T,typename U = T*\u0026gt; struct TC{}; 2.3 éç±»å‹æ¨¡æ¿å‚æ•° 1 2 3 4 5 6 template \u0026lt;typename T , typename U , size_t arrsize = 8\u0026gt; struct TC { T m_arr[arrsize]; void functest(); }; å’Œå‡½æ•°æ¨¡æ¿ä¸€æ ·ï¼Œç±»æ¨¡æ¿éç±»å‹æ¨¡æ¿å‚æ•°åŒæ ·æœ‰é™åˆ¶ï¼Œä½†æ˜¯æœ‰ä¸¤ç‚¹æœ‰åˆ«äºå‡½æ•°æ¨¡æ¿\nå…¨å±€æŒ‡é’ˆä¸èƒ½ä½œä¸ºæ¨¡æ¿å‚æ•° å­—ç¬¦ä¸²å¸¸é‡æ— æ³•ä½œä¸ºæ¨¡æ¿å‚æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 template \u0026lt;const char *p\u0026gt; struct TC { TC(){}\t}; const char* g_s = \u0026#34;hello\u0026#34;; int main() { TC\u0026lt;g_s\u0026gt; mytc1; //Ã— TC\u0026lt;\u0026#34;hello\u0026#34;\u0026gt; mytc2; //Ã— } 3ã€ç±»å‹åˆ«å å¯¹äºæ¨¡æ¿ï¼Œç±»å‹åå¾€å¾€æ¯”è¾ƒé•¿ï¼ˆå®é™…çš„é¡¹ç›®ä¸­å¾€å¾€æ¯”è¿™é‡Œä¸¾ä¾‹çš„ç±»å‹åé•¿å¾ˆå¤šï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ç”¨typedefæˆ–usingç»™è¿™äº›ç±»å‹åèµ·ä¸€ä¸ªé¢å¤–çš„åˆ«åä»¥ç®€åŒ–ä¹¦å†™ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨typedefçš„æ–¹æ³•\n1 2 typedef TC\u0026lt;int , float\u0026gt; IF_TC; IF_TC mytc1; C++11æ”¯æŒusing\n1 2 using IF_TCU = TC\u0026lt;int , float\u0026gt;; IF_TCU mytc2; äºŒã€å®ä¾‹åŒ–ç±»æ¨¡æ¿ ç±»æ¨¡æ¿ä¸­ï¼Œåªæœ‰è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°ï¼Œç¼–è¯‘å™¨æ‰ä¼šäº§ç”Ÿå‡ºè¿™äº›å‡½æ•°çš„å®ä¾‹åŒ–ä»£ç ã€‚å¦‚æœç±»æ¨¡æ¿ä¸­æœ‰é™æ€æˆå‘˜å‡½æ•°ï¼Œé‚£ä¹ˆå½“è¿™ä¸ªé™æ€æˆå‘˜å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¹Ÿä¼šè¢«å®ä¾‹åŒ–ã€‚\n1ã€æ¨¡æ¿å‚æ•°æ¨æ–­ ä¸åŒäºå‡½æ•°æ¨¡æ¿ï¼Œç¼–è¯‘å™¨ä¸èƒ½æ¨æ–­æ¨¡æ¿å‚æ•°ç±»å‹ï¼ˆC++17ä¸­è¿™ç‰¹ç‰¹æ€§å·²ç»å¤±æ•ˆï¼‰ã€‚ä¸ºäº†ä½¿ç”¨ç±»æ¨¡æ¿ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ¨¡æ¿ååçš„å°–æ‹¬å·ä¸­æä¾›é¢å¤–ä¿¡æ¯ï¼Œæä¾›æ˜¾å¼æ¨¡æ¿å®å‚åˆ—è¡¨ï¼Œæ¥å®ä¾‹åŒ–å‡ºç‰¹å®šçš„ç±»ã€‚ ä¸€ä¸ªç±»æ¨¡æ¿ä¸­æ‰€æœ‰çš„å®ä¾‹éƒ½å½¢æˆä¸€ä¸ªç‹¬ç«‹çš„ç±»ã€‚ 2ã€ç‰¹åŒ– ä»¥ä¸‹åˆ—ä»£ç ä¸ºèŒƒä¾‹ï¼Œè¯´æ˜ç±»æ¨¡æ¿ç‰¹åŒ–\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 template \u0026lt;typename T, typename U\u0026gt; struct TC { TC() {cout \u0026lt;\u0026lt; \u0026#34;TCæ³›åŒ–ç‰ˆæœ¬æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; } void functest1() { cout \u0026lt;\u0026lt; \u0026#34;functest1æ³›åŒ–ç‰ˆæœ¬\u0026#34; \u0026lt;\u0026lt; endl; } void functest2() ; }; template \u0026lt;\u0026gt; void TC\u0026lt;int,int\u0026gt;::functest2(){cout\u0026lt;\u0026lt;\u0026#34;ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°çš„ç±»å¤–å®šä¹‰\u0026#34;\u0026lt;\u0026lt;endl;} int main() { TC\u0026lt;int , float\u0026gt; mytc; mytc.functest1(); } 2.1 å…¨ç‰¹åŒ– æ¦‚å¿µåŒå‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–ä¸€æ ·ï¼Œæ— éå°±æ˜¯å°†æ¨¡æ¿å‚æ•°ç”¨å…·ä½“ç±»å‹æ›¿ä»£\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 template \u0026lt;typename T, typename U\u0026gt; struct TC { TC() {cout \u0026lt;\u0026lt; \u0026#34;TCæ³›åŒ–ç‰ˆæœ¬æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; } void functest1() { cout \u0026lt;\u0026lt; \u0026#34;functest1æ³›åŒ–ç‰ˆæœ¬\u0026#34; \u0026lt;\u0026lt; endl; } void functest2() ; }; template \u0026lt;\u0026gt; struct TC\u0026lt;int , int\u0026gt; //T == int , U == int { TC() {cout \u0026lt;\u0026lt; \u0026#34;TCç‰¹åŒ–ç‰ˆæœ¬æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; } void functest1(); }; void TC\u0026lt;int ,int\u0026gt;::functest1() { cout \u0026lt;\u0026lt; \u0026#34;functest1ç‰¹åŒ–ç‰ˆæœ¬çš„ç±»æˆå‘˜å‡½æ•°ç±»å¤–å®šä¹‰\u0026#34; \u0026lt;\u0026lt; endl; } int main() { TC\u0026lt;int , int\u0026gt; mytc; mytc.functest1(); } 2.2 æ™®é€šæˆå‘˜å‡½æ•°çš„å…¨ç‰¹åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 template \u0026lt;typename T, typename U\u0026gt; struct TC { TC() {cout \u0026lt;\u0026lt; \u0026#34;TCæ³›åŒ–ç‰ˆæœ¬æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; } void functest1() { cout \u0026lt;\u0026lt; \u0026#34;functest1æ³›åŒ–ç‰ˆæœ¬\u0026#34; \u0026lt;\u0026lt; endl; } void functest2() ; }; template\u0026lt;\u0026gt; void TC\u0026lt;double,double\u0026gt;::functest2() { cout\u0026lt;\u0026lt;\u0026#34;æ™®é€šæˆå‘˜å‡½æ•°çš„å…¨ç‰¹åŒ–\u0026#34;\u0026lt;\u0026lt;endl; } int main() { TC\u0026lt;double , double\u0026gt; mytc; mytc.functest2(); } 2.3 é™æ€æˆå‘˜å˜é‡çš„å…¨ç‰¹åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 template \u0026lt;typename T, typename U\u0026gt; struct TC { TC() {cout \u0026lt;\u0026lt; \u0026#34;TCæ³›åŒ–ç‰ˆæœ¬æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; } void functest1() { cout \u0026lt;\u0026lt; \u0026#34;functest1æ³›åŒ–ç‰ˆæœ¬\u0026#34; \u0026lt;\u0026lt; endl; } void functest2() ; static int m_stc; static int m_sts; }; //é™æ€æˆå‘˜å˜é‡æ³›åŒ–ç‰ˆæœ¬å®šä¹‰ template\u0026lt;typename T,typename U\u0026gt; int TC\u0026lt;T,U\u0026gt;::m_stc =50; //é™æ€æˆå‘˜å˜é‡ç‰¹åŒ–ç‰ˆæœ¬å®šä¹‰ template\u0026lt;\u0026gt; int TC\u0026lt;int,int\u0026gt;::m_sts = 100; int main() { TC\u0026lt;int,int\u0026gt; mytc; cout\u0026lt;\u0026lt;mytc.m_sts;//c++11,å¦‚æœå¯¹è±¡ä¸æ˜¯int,intç±»å‹å®ä¾‹åŒ–ï¼Œç¼–è¯‘å™¨Warning cout\u0026lt;\u0026lt;mytc.m_stc; } å¦‚æœè¿›è¡Œäº†æ™®é€šæˆå‘˜å‡½æ•°çš„å…¨ç‰¹åŒ–ï¼Œæˆ–è€…æ˜¯é™æ€æˆå‘˜å˜é‡çš„å…¨ç‰¹åŒ–ï¼Œé‚£ä¹ˆå°±æ— æ³•ç”¨è¿™äº›å…¨ç‰¹åŒ–æ—¶æŒ‡å®šçš„ç±»å‹å¯¹æ•´ä¸ªç±»æ¨¡æ¿è¿›è¡Œå…¨ç‰¹åŒ–äº†ã€‚\n3ã€åç‰¹åŒ– 3.1 æ¨¡æ¿å‚æ•°æ•°é‡ä¸Šçš„åç‰¹åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 template \u0026lt;typename T, typename U\u0026gt; struct TC { TC() {cout \u0026lt;\u0026lt; \u0026#34;TCæ³›åŒ–ç‰ˆæœ¬æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; } }; template\u0026lt;typename U\u0026gt; struct TC\u0026lt;double,U\u0026gt; { TC() {cout \u0026lt;\u0026lt; \u0026#34;TCåç‰¹åŒ–æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; } void functest1(); }; template\u0026lt;typename U\u0026gt; void TC\u0026lt;double ,U\u0026gt;::functest1() { cout \u0026lt;\u0026lt; \u0026#34;TCåç‰¹åŒ–çš„æˆå‘˜å‡½æ•°ç±»å¤–å®šä¹‰\u0026#34; \u0026lt;\u0026lt; endl; } int main() { TC\u0026lt;double , double\u0026gt; mytc; mytc.functest1(); } ç±»æ¨¡æ¿åç‰¹åŒ–ç‰ˆæœ¬ä¸­çš„ç±»å‹æ¨¡æ¿å‚æ•°ä¸å¯ä»¥æœ‰é»˜è®¤å€¼\n3.2 æ¨¡æ¿å‚æ•°èŒƒå›´ä¸Šçš„åç‰¹åŒ– åŒå‡½æ•°æ¨¡æ¿ä¸€è‡´\n4ã€C++17ä¸­çš„ç±»æ¨¡æ¿å‚æ•°æ¨æ–­ 4.1 éšå¼æ¨æ–­ éšå¼çš„æ¨æ–­æŒ‡å—ï¼Œå¿…é¡»ä¾æ‰˜äºæ„é€ å‡½æ•°å­˜åœ¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 template \u0026lt;typename T\u0026gt; struct A { A(T val1, T val2) { cout\u0026lt;\u0026lt;\u0026#34;A::A(T val1 , T val2)\u0026#34;\u0026lt;\u0026lt;endl; } A(T val) { cout\u0026lt;\u0026lt;\u0026#34;A::A(T val)\u0026#34;\u0026lt;\u0026lt;endl; } }; int main() { A obj1(15,16); // A\u0026lt;int\u0026gt; A obj2(17.7); // A\u0026lt;double\u0026gt; return 0; } 4.2 è‡ªå®šä¹‰æ¨æ–­ 1 2 3 4 5 6 7 8 9 10 11 12 13 template \u0026lt;typename T\u0026gt; struct B { T m_b; }; template\u0026lt;typename T\u0026gt; B\u0026lt;T\u0026gt;-\u0026gt;B\u0026lt;T\u0026gt;;//è‡ªå®šä¹‰æ¨¡æ¿æ¨æ–­ int main() { B obj{15}; return 0; } è‡ªå®šä¹‰æ¨æ–­æœ‰ä¸¥æ ¼çš„ä½¿ç”¨æ¡ä»¶ï¼Œç±»Båªæœ‰æ™®é€šæ•°æ®æˆå‘˜(èšåˆç±»)\nä¸‰ã€ç±»æ¨¡æ¿çš„æˆå‘˜ 1ã€æˆå‘˜å‡½æ•°æ¨¡æ¿ 1.1 åŸºæœ¬å«ä¹‰ã€æ„é€ å‡½æ•°æ¨¡æ¿ ä¸ç®¡æ˜¯æ™®é€šçš„ç±»ï¼Œè¿˜æ˜¯ç±»æ¨¡æ¿ï¼Œéƒ½å¯ä»¥ä¸ºå…¶å®šä¹‰æˆå‘˜å‡½æ•°æ¨¡æ¿ï¼Œè¿™ç§æƒ…å†µå°±æ˜¯ç±»ï¼ˆç±»æ¨¡æ¿ï¼‰å’Œå…¶æˆå‘˜å‡½æ•°æ¨¡æ¿éƒ½æœ‰å„è‡ªç‹¬ç«‹çš„æ¨¡æ¿å‚æ•°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #include \u0026lt;iostream\u0026gt; using namespace std; template \u0026lt;typename T1\u0026gt; class A { public: template \u0026lt;typename T2\u0026gt; A(T2 v1, T2 v2); template \u0026lt;typename T3\u0026gt; void myft(T3 tmpt) { cout\u0026lt;\u0026lt;tmpt\u0026lt;\u0026lt;endl; } T1 m_ic; static constexpr int m_stcvalue = 200; }; template \u0026lt;typename T1\u0026gt; template \u0026lt;typename T2\u0026gt; A\u0026lt;T1\u0026gt;::A(T2 v1,T2 v2) { cout\u0026lt;\u0026lt;\u0026#34;A::A(T2,T2)æ‰§è¡Œäº†!\u0026#34;\u0026lt;\u0026lt;endl; } int main() { A\u0026lt;float\u0026gt; a(1,2); a.myft(3); A\u0026lt;float\u0026gt; a2(1.1 , 2.2); A\u0026lt;float\u0026gt; a3(11.1f , 12.2f); } ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œåªæœ‰æºç¨‹åºä»£ç ä¸­å‡ºç°è°ƒç”¨è¿™äº›æˆå‘˜å‡½æ•°çš„ä»£ç æ—¶ï¼Œè¿™äº›æˆå‘˜å‡½æ•°æ‰ä¼šå‡ºç°åœ¨ä¸€ä¸ªå®ä¾‹åŒ–çš„ç±»æ¨¡æ¿ä¸­ ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°æ¨¡æ¿ï¼Œåªæœ‰æºç¨‹åºä»£ç ä¸­å‡ºç°è°ƒç”¨è¿™äº›æˆå‘˜å‡½æ•°æ¨¡æ¿çš„ä»£ç æ—¶ï¼Œè¿™äº›æˆå‘˜å‡½æ•°æ¨¡æ¿çš„å…·ä½“å®ä¾‹æ‰ä¼šå‡ºç°åœ¨ä¸€ä¸ªå®ä¾‹åŒ–çš„ç±»æ¨¡æ¿ä¸­ã€‚ ç›®å‰çš„ç¼–è¯‘å™¨å¹¶ä¸æ”¯æŒè™šæˆå‘˜å‡½æ•°æ¨¡æ¿ï¼Œå› ä¸ºè™šå‡½æ•°è¡¨vtblçš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œæ¯ä¸ªè¡¨é¡¹é‡Œé¢å°±æ˜¯ä¸€ä¸ªè™šå‡½æ•°åœ°å€ã€‚ä½†æ˜¯æˆå‘˜å‡½æ•°æ¨¡æ¿åªæœ‰è¢«è°ƒç”¨çš„æ—¶å€™æ‰èƒ½å®ä¾‹åŒ–ï¼ˆå¦åˆ™ç¼–è¯‘å™¨ä¹Ÿä¸çŸ¥é“è¦ç”¨ä»€ä¹ˆæ¨¡æ¿å‚æ•°å®ä¾‹åŒ–è¿™ä¸ªæˆå‘˜å‡½æ•°æ¨¡æ¿ï¼‰ å½“å‡½æ•°å’Œå‡½æ•°æ¨¡æ¿éƒ½åˆé€‚æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆé€‰æ‹©å‡½æ•°è€Œéå‡½æ•°æ¨¡æ¿ 1.2 æ‹·è´æ„é€ å‡½æ•°æ¨¡æ¿ä¸æ‹·è´èµ‹å€¼è¿ç®—ç¬¦æ¨¡æ¿ 1 2 3 4 5 6 7 8 9 10 11 12 13 //ç»­å†™ä¸Šä¸€å°èŠ‚ç±»æ¨¡æ¿ template \u0026lt;typename U\u0026gt; A(const A\u0026lt;U\u0026gt;\u0026amp; other) { cout \u0026lt;\u0026lt;\u0026#34;A::A(const A\u0026lt;U\u0026gt;\u0026amp; other)æ‹·è´æ„é€ å‡½æ•°æ¨¡æ¿æ‰§è¡Œäº†ï¼\u0026#34;\u0026lt;\u0026lt;endl; } template \u0026lt;typename U\u0026gt; A\u0026lt;T1\u0026gt;\u0026amp; operator=(const A\u0026lt;U\u0026gt;\u0026amp; other) { cout \u0026lt;\u0026lt;\u0026#34;operator=(const A\u0026lt;U\u0026gt;\u0026amp; other)æ‹·è´èµ‹å€¼è¿ç®—ç¬¦æ¨¡æ¿æ‰§è¡Œäº†\u0026#34;\u0026lt;\u0026lt;endl; return *this; } æ‹·è´æ„é€ å‡½æ•°æ¨¡æ¿ä¸æ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦æ¨¡æ¿ä¸æ˜¯æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼ˆå…¶å®è¿™å¥è¯ä¹ŸåŒæ ·é€‚åˆæ„é€ å‡½æ•°æ¨¡æ¿ä¸æ˜¯æ„é€ å‡½æ•°ï¼‰ã€‚å› ä¸ºæ‹·è´æ„é€ å‡½æ•°æˆ–æ‹·è´èµ‹å€¼è¿ç®—ç¬¦è¦æ±‚æ‹·è´çš„å¯¹è±¡ç±»å‹å®Œå…¨ç›¸åŒï¼Œè€Œæ‹·è´æ„é€ å‡½æ•°æ¨¡æ¿æˆ–æ‹·è´èµ‹å€¼è¿ç®—ç¬¦æ¨¡æ¿å°±æ²¡æœ‰è¿™ç§è¦æ±‚ã€‚\n1 2 3 4 5 6 7 int main() { A\u0026lt;float\u0026gt; a3(1,2); a3.m_ic = 16.2f; A\u0026lt;float\u0026gt; a4(a3);//å½“æ‰§è¡ŒA\u0026lt;float\u0026gt; a4(a3);ä»£ç è¡Œæ—¶ï¼Œå®é™…æ˜¯è¦æ‰§è¡Œç±»æ¨¡æ¿Aä¸­çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ç±»æ¨¡æ¿Aä¸­å¹¶æ²¡æœ‰æ‹·è´æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ï¼Œç¼–è¯‘å™¨å†…éƒ¨å®é™…æ˜¯æ‰§è¡Œäº†æŒ‰å€¼æ‹·è´çš„ä¸€ä¸ªåŠ¨ä½œï¼Œä½¿a4.m_ic=16.2fã€‚è¯·è®°ä½ï¼šæ‹·è´æ„é€ å‡½æ•°æ¨¡æ¿æ°¸è¿œä¸å¯èƒ½æˆä¸ºæ‹·è´æ„é€ å‡½æ•°ï¼Œéœ€è¦æ‰§è¡Œæ‹·è´æ„é€ å‡½æ•°çš„åœ°æ–¹ï¼Œç»ä¸ä¼šå› ä¸ºæ‹·è´æ„é€ å‡½æ•°æ¨¡æ¿çš„å­˜åœ¨å°±ç”¨å¯¹æ‹·è´æ„é€ å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨ä»£æ›¿å¯¹æ‹·è´æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚ A\u0026lt;int\u0026gt; a5(a3);//ç±»å‹ä¸åŒï¼ˆéƒ½æ˜¯ç”¨ç±»æ¨¡æ¿Aå®ä¾‹åŒ–å‡ºæ¥çš„ç±»ï¼‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œç”¨ä¸€ä¸ªæ‹·è´æ„é€ å¦å¤–ä¸€ä¸ªæ—¶ä¼šè°ƒç”¨æ¨¡æ¿æ‹·è´æ„é€ å‡½æ•°ã€‚å› ä¸ºa5æ˜¯A\u0026lt;int\u0026gt;ç±»å‹ï¼Œa3æ˜¯A\u0026lt;float\u0026gt;ç±»å‹ï¼Œä¸¤è€…ç±»å‹ä¸åŒï¼Œæ‰€ä»¥ï¼Œåˆ©ç”¨a3æ„é€ a5æ—¶ï¼Œå°±ä¼šå¯¼è‡´æ‹·è´æ„é€ å‡½æ•°æ¨¡æ¿çš„æ‰§è¡Œã€‚ } 1.3 ç‰¹åŒ– æˆå‘˜å‡½æ•°æ¨¡æ¿ä¹Ÿèƒ½è¢«ç‰¹åŒ–ï¼Œä½†æ˜¯å…·ä½“èƒ½ç‰¹åŒ–åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Œå¯èƒ½ä¸åŒç¼–è¯‘å™¨çš„æ ‡å‡†ä¸åŒ\n2ã€ç±»æ¨¡æ¿çš„åµŒå¥— 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 //åœ¨ä¸Šæ–‡ä¸­çš„ç±»ä¸­ç»§ç»­æ·»åŠ  template \u0026lt;typename T1\u0026gt; class A { public: template \u0026lt;typename U\u0026gt; class OtherC { public: void myFunC() { cout\u0026lt;\u0026lt;\u0026#34;myFuncæ‰§è¡Œäº†\u0026#34;\u0026lt;\u0026lt;endl; } } }; //æŠŠmyFunC()æˆå‘˜å‡½æ•°å†™åœ¨ç±»æ¨¡æ¿Açš„floatå…¨ç‰¹åŒ–ç‰ˆæœ¬å®šä¹‰å¤–é¢ A\u0026lt;float\u0026gt;::OtherC\u0026lt;U\u0026gt;::myFunC(){cout\u0026lt;\u0026lt;\u0026#34;åµŒå…¥æ¨¡æ¿ç±»çš„æˆå‘˜å‡½æ•°çš„ç±»å¤–å®šä¹‰\u0026#34;}; //æŠŠmyFunC()æˆå‘˜å‡½æ•°å†™åœ¨ç±»æ¨¡æ¿Açš„floatå…¨ç‰¹åŒ–ç‰ˆæœ¬å®šä¹‰å¤–é¢ template \u0026lt;typename T1\u0026gt; template \u0026lt;typename U\u0026gt; A\u0026lt;T1\u0026gt;::OtherC\u0026lt;U\u0026gt;::myFunC(){cout\u0026lt;\u0026lt;\u0026#34;åµŒå…¥æ¨¡æ¿ç±»çš„æˆå‘˜å‡½æ•°çš„ç±»å¤–å®šä¹‰\u0026#34;}; int main() { A\u0026lt;float\u0026gt;::OtherC\u0026lt;float\u0026gt; myObjC; myObjC.myFunc(); } 3ã€å˜é‡æ¨¡æ¿ä¸æˆå‘˜å˜é‡æ¨¡æ¿ï¼ˆC++14ï¼‰ å˜é‡æ¨¡æ¿çš„è‹±æ–‡ä¸ºVariable Templatesï¼Œæ˜¯C++14æ ‡å‡†å¼•å…¥çš„ã€‚ä¸€èˆ¬è¿™ç§å˜é‡æ¨¡æ¿éœ€è¦å®šä¹‰åœ¨å…¨å±€ç©ºé—´æˆ–å‘½åç©ºé—´ä¸­ï¼ˆä¸€èˆ¬ä¹Ÿæ˜¯æ”¾åœ¨.hå¤´æ–‡ä»¶ä¸­ï¼‰\n1 2 3 4 5 6 7 8 template \u0026lt;typenam T\u0026gt; T g_myvar{}; int main() { g_myvar\u0026lt;float\u0026gt; = 15.6f; g_myvar\u0026lt;int\u0026gt; = 13; cout\u0026lt;\u0026lt;g_myvar\u0026lt;float\u0026gt;\u0026lt;\u0026lt;endl;//15.6 cout\u0026lt;\u0026lt;g_myvar\u0026lt;int\u0026gt;\u0026lt;\u0026lt;endl;//13 } g_myvaråé¢è·Ÿäº†ä¸€ä¸ªå¤§æ‹¬å·{}ï¼Œå…¶å®è¿™æ˜¯ä¸€ç§å¯¹å˜é‡çš„åˆå§‹åŒ–æ–¹å¼ï¼Œä¸€èˆ¬å«é›¶åˆå§‹åŒ–ã€‚æ‰€è°“é›¶åˆå§‹åŒ–ï¼Œå°±æ˜¯æ•°å€¼å‹å˜é‡åˆå§‹åŒ–ä¸º0ï¼›æŒ‡é’ˆå‹å˜é‡åˆå§‹åŒ–ä¸ºnullptrï¼›å¸ƒå°”å‹å˜é‡åˆå§‹åŒ–ä¸ºfalseï¼Œè¯¸å¦‚æ­¤ç±»ï¼ˆå¦‚æœä¸å¯¹è¿™äº›å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œé‚£ä¹ˆå¦‚æœè¿™äº›å˜é‡æ˜¯å±€éƒ¨å˜é‡çš„è¯ï¼Œå®ƒä»¬çš„å€¼å°±å¯èƒ½æ˜¯ä»»æ„å€¼ï¼‰\n3.1 å˜é‡æ¨¡æ¿çš„ç‰¹åŒ– 3.1.1 å…¨ç‰¹åŒ– 1 2 3 4 5 template\u0026lt;\u0026gt;char T g_myvar\u0026lt;double\u0026gt;{};//ä¸éœ€è¦æ­£åœ¨ç‰¹åŒ–ç±»å‹ï¼ˆdoubleï¼‰ä¸è¿™ä¸ªå˜é‡æ¨¡æ¿ç±»å‹ï¼ˆcharï¼‰ä¿æŒä¸€è‡´ int main() { g_myvar\u0026lt;double\u0026gt; =\u0026#39;2\u0026#39;;//g_myvar\u0026lt;double\u0026gt;å½“ä½œä¸€ä¸ªcharç±»å‹çš„å˜é‡ä½¿ç”¨äº†ï¼Œå®ƒèƒ½å¤Ÿå­˜å‚¨çš„æ•°æ®èŒƒå›´å½“ç„¶ä¹Ÿæ˜¯ä¸charç±»å‹å˜é‡ä¸€è‡´çš„ } 3.1.2 åç‰¹åŒ– 1 template\u0026lt;typename T\u0026gt; T g_myvar\u0026lt;T *\u0026gt;{120}; 3.2 é»˜è®¤æ¨¡æ¿å‚æ•° 1 2 3 4 5 6 7 8 template \u0026lt;typename T = int\u0026gt; T g_myvar; int main() { g_myvar\u0026lt;int\u0026gt; = 13; g_myvar\u0026lt;\u0026gt; = 26; cout \u0026lt;\u0026lt; g_myvar\u0026lt;int\u0026gt;\u0026lt;\u0026lt;endl; //13 cout \u0026lt;\u0026lt; g_myvar\u0026lt;\u0026gt; \u0026lt;\u0026lt; endl; //26 } 3.3 éç±»å‹æ¨¡æ¿å‚æ•° 1 2 3 4 5 6 7 8 9 10 template\u0026lt;typename T,int value\u0026gt; T g_myvar3[value]; int main() { for(int i = 0; i \u0026lt; 15; ++i) { g_myvar3\u0026lt;int, 15\u0026gt;[i] = i; /*æ³¨æ„[]ä¸­çš„ä¸‹æ ‡æ•°å­—\u0026lt;=14ï¼Œå¦åˆ™ä¸‹æ ‡ä¼šè¶Šç•Œï¼Œg_myvar3\u0026lt;int, 15\u0026gt;çš„å†™æ³•ä¸€å‡ºç°ï¼Œå°±è¡¨ç¤ºå®šä¹‰äº†int g_myvar3\u0026lt;int, 15\u0026gt;[15] è¿™ä¸ªæœ‰15ä¸ªå…ƒç´ çš„intç±»å‹æ•°ç»„*/ } } 4ã€åˆ«åæ¨¡æ¿ä¸æˆå‘˜åˆ«åæ¨¡æ¿ åˆ«åæ¨¡æ¿çš„è‹±æ–‡å«ä½œAlias Templatesï¼Œæ˜¯C++ 11æ ‡å‡†å¼•å…¥çš„ï¼Œå¼•å…¥çš„ç›®çš„æ˜¯ä¸ä½†èƒ½ç®€åŒ–ä¹¦å†™ï¼Œè€Œä¸”å¯ä»¥è¾¾åˆ°é€šè¿‡å…¶ä»–æ‰‹æ®µå¾ˆéš¾å®ç°çš„æ•ˆæœï¼Œä¸€èˆ¬éƒ½æ˜¯é€šè¿‡usingå®ç°åˆ«åæ¨¡æ¿\n1 2 3 4 5 6 7 8 #include \u0026lt;map\u0026gt; template \u0026lt;typename T\u0026gt; using str_map_t = std::map\u0026lt;std::string,T\u0026gt;; int main() { str_map_t \u0026lt;int\u0026gt; map1; map1.insert({\u0026#34;first\u0026#34;,1}); map2.insert({\u0026#34;second\u0026#34;,2}); } 5ã€æ¨¡æ¿æ¨¡æ¿å‚æ•° æ¨¡æ¿æ¨¡æ¿å‚æ•°çš„è‹±æ–‡ä¸ºTemplate Template Parametersï¼Œåå­—æ¯”è¾ƒç»•å˜´ï¼Œå°±æ˜¯è®©æ¨¡æ¿å‚æ•°æœ¬èº«æˆä¸ºæ¨¡æ¿çš„æ„æ€ã€‚\nintæ˜¯ä¸€ä¸ªç±»å‹ï¼ˆç®€å•ç±»å‹/å†…éƒ¨ç±»å‹ï¼‰ vectoræˆ–listæ˜¯C++æ ‡å‡†åº“ä¸­çš„å®¹å™¨ï¼Œå…·ä½“ç§°å‘¼åº”è¯¥æ˜¯ç±»æ¨¡æ¿ï¼ˆç±»åï¼‰ï¼Œè€Œè¯¸å¦‚vector\u0026lt;int\u0026gt;æˆ–list\u0026lt;double\u0026gt;å°±å±äºæ¨¡æ¿è¢«å®ä¾‹åŒ–äº†çš„äº§ç‰©ï¼Œç§°ä¸ºç±»å‹ï¼ˆç±»ç±»å‹ï¼‰ å‡è®¾ä¸€ä¸ªéœ€æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªå«ä½œmyclassçš„ç±»æ¨¡æ¿ï¼Œè¿™ä¸ªç±»æ¨¡æ¿ä¸­ï¼Œæœ‰ä¸€ä¸ªæˆå‘˜å˜é‡mycï¼Œè¿™ä¸ªæˆå‘˜å˜é‡æ˜¯ä¸€ä¸ªå®¹å™¨ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªvectoræˆ–listï¼Œæˆ–è€…å…¶ä»–å®¹å™¨ï¼‰ï¼Œå¸Œæœ›åœ¨å®ä¾‹åŒ–myclassç±»æ¨¡æ¿æ—¶èƒ½å¤Ÿé€šè¿‡æ¨¡æ¿å‚æ•°æŒ‡å®šmycæ˜¯ä»€ä¹ˆç±»å‹çš„å®¹å™¨ï¼Œä»¥åŠæŒ‡å®šè¿™ä¸ªå®¹å™¨ä¸­æ‰€è£…çš„å…ƒç´ ç±»å‹ã€‚\n1 2 3 4 5 6 7 8 9 10 template \u0026lt;typename T , typename\u0026lt;class\u0026gt; class Container = std::vector\u0026gt; /* Containerä»£è¡¨çš„æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼ˆç±»åï¼‰,æŠŠç±»æ¨¡æ¿ï¼ˆè€Œä¸æ˜¯ç±»å‹ï¼‰å½“ä½œä¸€ä¸ªå‚æ•°ä¼ é€’åˆ°myclassä¸­,è¿™ç§æ¨¡æ¿å‚æ•°å°±ä¸å«ä½œâ€œç±»å‹æ¨¡æ¿å‚æ•°â€ï¼Œè€Œæ˜¯å«ä½œâ€œæ¨¡æ¿æ¨¡æ¿å‚æ•°â€ */ class myclass { public: Container\u0026lt;T\u0026gt; myc; }; template\u0026lt;class\u0026gt; class Containerï¼Œæ˜¯myclassè¿™ä¸ªç±»æ¨¡æ¿çš„æ¨¡æ¿å‚æ•°ï¼Œè€ŒContaineræœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œæ‰€ä»¥Containerå°±å«â€œæ¨¡æ¿æ¨¡æ¿å‚æ•°â€\n6ã€å…±ç”¨ä½“æ¨¡æ¿(è”åˆæ¨¡æ¿) 1 2 3 4 5 6 7 8 9 10 11 12 template \u0026lt;typename T , typename U\u0026gt; union myuni { T carnum; U cartype; U cname[60]; }; int main() { myuni\u0026lt;int , char\u0026gt; myu ; myu.carnum =156; } ","pubDate":"2022-06-20","title":"ã€æ¨¡æ¿ä¸æ³›å‹ç¼–ç¨‹02ã€‘ç±»æ¨¡æ¿"},{"link":"https://cnjslw.github.io/posts/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/","plain":"ä¸€ã€å®šä¹‰å‡½æ•°æ¨¡æ¿ 1ã€åŸºæœ¬èŒƒä¾‹ 1 2 3 4 5 6 7 template \u0026lt;typename T\u0026gt; int compare(const T \u0026amp;v1 , const T \u0026amp;v2) { if(v1 \u0026lt; v2) return -1; if(v2 \u0026lt; v1) return 1; return 0; } æ¨¡æ¿å®šä¹‰ä»¥å…³é”®å­— templateå¼€å§‹ï¼Œåæ¥æ¨¡æ¿å½¢å‚è¡¨ï¼Œæ¨¡æ¿å½¢å‚è¡¨æ˜¯ç”¨å°–æ‹¬å·\u0026lt;\u0026gt;æ‹¬ä½çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡æ¿å½¢å‚çš„åˆ—è¡¨ï¼Œç”¨é€—å·åˆ†éš”ï¼Œä¸èƒ½ä¸ºç©ºã€‚\næ¨¡æ¿ç¨‹åºåº”è¯¥å°½é‡å‡å°‘å¯¹å®å‚ç±»å‹çš„è¦æ±‚ã€‚ å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿æˆå‘˜å‡½æ•°çš„å®šä¹‰é€šå¸¸æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚ 2ã€æ¨¡æ¿å‚æ•° 2.1 ç±»å‹å‚æ•° ç±»å‹å‚æ•°å‰å¿…é¡»ä½¿ç”¨å…³é”®å­—classæˆ–è€…typenameï¼Œè¿™ä¸¤ä¸ªå…³é”®å­—å«ä¹‰ç›¸åŒï¼Œå¯ä»¥äº’æ¢ä½¿ç”¨ã€‚æ—§çš„ç¨‹åºåªèƒ½ä½¿ç”¨classã€‚ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œclasså¹¶ä¸åˆé€‚\n2.2 é»˜è®¤å‚æ•° 1 2 3 4 5 6 7 8 9 10 template\u0026lt;typename T , typename F = FunType\u0026gt; void TestFunc(T i , T j , F funcpoint=mf) { cout\u0026lt;\u0026lt;funcpoint(i,j)\u0026lt;\u0026lt;endl; } int main() { TestFunc(15,16); return 0; } è°ƒç”¨Testfunc()å‡½æ•°çš„æ—¶å€™ï¼Œä¸ç”¨æŒ‡å®šç¬¬3ä¸ªå®å‚ï¼Œå› ä¸ºç¬¬3ä¸ªå‚æ•°æœ‰é»˜è®¤å€¼ã€‚è¦æ³¨æ„é»˜è®¤å‚æ•°çš„å†™æ³•ï¼šé’ˆå¯¹å½“å‰çš„èŒƒä¾‹ï¼Œç±»å‹æ¨¡æ¿å‚æ•°Fç»™äº†é»˜è®¤å€¼ï¼Œå‡½æ•°çš„å½¢å‚ä¹Ÿç»™äº†é»˜è®¤å€¼ã€‚é»˜è®¤æ¨¡æ¿å‚æ•°Fæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹ï¼ˆFuncTypeï¼‰ï¼Œå‡½æ•°å‚æ•°funcpoint = mfä¸­çš„mfæ˜¯å‡½æ•°åï¼Œä»£è¡¨å‡½æ•°é¦–åœ°å€\nå¦å¤–ï¼Œå‡½æ•°æ¨¡æ¿çš„é»˜è®¤æ¨¡æ¿å‚æ•°å¯ä»¥æ”¾åœ¨å‰é¢ï¼ˆè¿™ä¸€ç‚¹ç±»æ¨¡æ¿é»˜è®¤æ¨¡æ¿å‚æ•°ä¸ä¸€æ ·ï¼Œç±»æ¨¡æ¿çš„æ¨¡æ¿å‚æ•°ä¸€æ—¦æœ‰ä¸€ä¸ªæ˜¯é»˜è®¤å‚æ•°ï¼Œåˆ™å…¶åç»­çš„å‚æ•°éƒ½éœ€è¦æ˜¯é»˜è®¤å‚æ•°ï¼‰ã€‚\n2.3 éç±»å‹å‚æ•° é™¤äº†å®šä¹‰ç±»å‹å‚æ•°ï¼Œè¿˜å¯ä»¥åœ¨æ¨¡æ¿ä¸­å®šä¹‰éç±»å‹å‚æ•°(nontype parameter) è¡¨ç¤ºä¸€ä¸ªå€¼è€Œéä¸€ä¸ªç±»å‹ã€‚ å½“ä¸€ä¸ªæ¨¡æ¿è¢«å®ä¾‹åŒ–æ—¶ï¼Œéç±»å‹å‚æ•°è¢«ä¸€ä¸ªç”¨æˆ·æä¾›çš„æˆ–ç¼–è¯‘å™¨æ¨æ–­å‡ºçš„å€¼æ‰€ä»£æ›¿ã€‚è¿™äº›å€¼å¿…é¡»æ˜¯å¸¸é‡è¡¨è¾¾ï¼Œä»è€Œå…è®¸ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å®ä¾‹åŒ–æ¨¡æ¿ã€‚\n1 2 3 4 5 6 7 8 9 template\u0026lt;unsigned N , unsigned M\u0026gt; int compare(const char (\u0026amp;p1)[N] , const char (\u0026amp;p2)[M]) { return strcmp(p1,p2); } compare(\u0026#34;hi\u0026#34; , \u0026#34;mom\u0026#34;); //å®ä¾‹åŒ–æ¨¡æ¿ //int compare(const char (\u0026amp;p1)[3] , const char (\u0026amp;p2)[4]) ä¸€ä¸ªéç±»å‹å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªæ•´å½¢ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡æˆ–å‡½æ•°ç±»å‹çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œç»‘å®šåˆ°éç±»å‹æ•´æ•°å‚æ•°çš„å®å‚å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ã€‚ç»‘å®šåˆ°æŒ‡é’ˆæˆ–å¼•ç”¨éç±»å‹å‚æ•°çš„å®å‚ï¼Œå¿…é¡»å…·æœ‰é™æ€çš„ç”Ÿå­˜æœŸã€‚\nä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯ä»»ä½•ç±»å‹çš„å‚æ•°éƒ½å¯ä»¥ä½œä¸ºéç±»å‹æ¨¡æ¿å‚æ•°ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸€äº›æ˜¯å…è®¸çš„ ï¼ˆ1ï¼‰æ•´å‹æˆ–æšä¸¾ç±»å‹ã€‚ ï¼ˆ2ï¼‰æŒ‡é’ˆç±»å‹ã€‚ ï¼ˆ3ï¼‰å·¦å€¼å¼•ç”¨ç±»å‹ã€‚ ï¼ˆ4ï¼‰autoæˆ–decltype(auto)ã€‚å¯¹äºdecltype(auto)è¿™ä¸ªç”¨æ³•ï¼Œå…¶ä¸­çš„autoç†è§£æˆè¦æ¨å¯¼çš„ç±»å‹ï¼Œè€Œdecltypeç†è§£æˆæ¨å¯¼è¿‡ç¨‹é‡‡ç”¨decltypeæ¨å¯¼ã€‚ ï¼ˆ5ï¼‰å¯èƒ½è¿˜æœ‰å…¶ä»–ç±»å‹ï¼Œè¯·è¯»è€…è‡ªè¡Œåœ¨å­¦ä¹ æˆ–é˜…è¯»ä»–äººä»£ç çš„è¿‡ç¨‹ä¸­æ”¶é›†å’Œæ€»ç»“ã€‚\näºŒã€ å®ä¾‹åŒ–å‡½æ•°æ¨¡æ¿ è¿™é‡Œå¯ä»¥ç»™å®ä¾‹åŒ–ä¸€ä¸ªå®šä¹‰ï¼šç”¨å…·ä½“çš„â€œç±»å‹â€ä»£æ›¿â€œç±»å‹æ¨¡æ¿å‚æ•°â€çš„è¿‡ç¨‹å°±å«ä½œå®ä¾‹åŒ–ï¼ˆä¹Ÿç§°ä¸ºä»£ç ç”Ÿæˆå™¨ï¼‰ã€‚\n1ã€ä¸€ä¸ªé”™è¯¯çš„å®ä¾‹åŒ–ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 template \u0026lt;typename T\u0026gt; T sub(T tv1 , T tv2) { return tv1 - tv2; } int main() { int v1 = 1; int v2 = 2; sub(v1,v2);//return -1 string s1 = \u0026#34;Hello\u0026#34;; string s2 = \u0026#34;World\u0026#34;; sub(s1,s2);//æŠ¥é”™ return 0; } æ‰€ä»¥ï¼ŒåŒæ ·ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œå¯èƒ½ä»¥æŸç§æ–¹å¼è¿›è¡Œè°ƒç”¨æ˜¯åˆæ³•çš„ï¼Œè€Œæ¢ä¸€ç§æ–¹å¼è°ƒç”¨å°±ä¸åˆæ³•äº†ã€‚å°¤å…¶å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§åˆæ³•æ€§ï¼Œåœ¨==ç¼–è¯‘é˜¶æ®µå°±å¯ä»¥ç”±ç¼–è¯‘å™¨åˆ¤æ–­å‡ºæ¥==ï¼Œå› ä¸ºè¿™äº›å¯¹Sub()å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨ä»£ç å°±åœ¨è¿™é‡Œæ‘†ç€ï¼Œç¼–è¯‘å™¨æœ‰èƒ½åŠ›åœ¨ç¼–è¯‘æ—¶å°±ä»è¿™äº›è°ƒç”¨ä»£ç ä¸­å»æ¨æ–­Sub()å‡½æ•°æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°Tçš„ç±»å‹ã€‚æ ¹æ®æ¨¡æ¿å‚æ•°Tçš„ç±»å‹ï¼Œç¼–è¯‘å™¨å°±èƒ½å¤Ÿåˆ¤æ–­å‡ºè¿™ä¸ªç±»å‹æ˜¯å¦æ”¯æŒå‡æ³•è¿ç®—ã€‚\n2ã€ç¼–è¯‘å™¨è§†è§’çš„å®ä¾‹åŒ– 1 2 sub(1,2); sub(1.1 , 2.2); 1 2 //.obj int __cdecl sub\u0026lt;int\u0026gt;(int,int) double __cdecl sub\u0026lt; double \u0026gt;( double, double) è¿™è¯´æ˜åœ¨ç¼–è¯‘é˜¶æ®µï¼Œåœ¨å¯¹æ¨¡æ¿è¿›è¡Œå…·ä½“é’ˆå¯¹æŸç±»å‹çš„å®ä¾‹åŒ–ä¹‹å‰ï¼Œç¼–è¯‘å™¨éœ€è¦æŸ¥çœ‹å‡½æ•°æ¨¡æ¿çš„å‡½æ•°ä½“ï¼Œç¡®å®šèƒ½å¦é’ˆå¯¹è¯¥ç±»å‹è¿›è¡Œå®ä¾‹åŒ–\nå½“ç¼–è¯‘å™¨é‡åˆ°ä¸€ä¸ªæ¨¡æ¿å®šä¹‰æ—¶ï¼Œå®ƒå¹¶ä¸ç”Ÿæˆä»£ç ã€‚åªæœ‰å½“æˆ‘ä»¬å®ä¾‹åŒ–å‡ºæ¨¡æ¿çš„ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬æ—¶ï¼Œç¼–è¯‘å™¨æ‰ä¼šç”Ÿæˆä»£ç \nå½“ç¼–è¯‘å™¨é‡åˆ°ç±»å’Œæ™®é€šå‡½æ•°\næ™®é€šå‡½æ•° å½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨åªéœ€è¦æŒæ¡å‡½æ•°çš„å£°æ˜ ç±» å½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç±»ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œç±»å®šä¹‰å¿…é¡»æ˜¯å¯ç”¨çš„ï¼Œä½†æˆå‘˜å‡½æ•°çš„å®šä¹‰ä¸å¿…å·²ç»å‡ºç° æˆ‘ä»¬å°†ç±»å®šä¹‰å’Œå‡½æ•°å£°æ˜æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œè€Œæ™®é€šå‡½æ•°å’Œç±»çš„æˆå‘˜å‡½æ•°çš„å®šä¹‰æ”¾åœ¨æºæ–‡ä»¶ä¸­ ä¸ºäº†ç”Ÿæˆä¸ªå®ä¾‹åŒ–ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨éœ€è¦æŒæ¡å‡½æ•°æ¨¡æ¿æˆ–ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°çš„å®šä¹‰ã€‚å› æ­¤ï¼Œä¸éæ¨¡æ¿ä»£ç ä¸åŒï¼Œæ¨¡æ¿çš„å¤´æ–‡ä»¶é€šå¸¸æ—¢åŒ…æ‹¬å£°æ˜ä¹ŸåŒ…æ‹¬å®šä¹‰ï¼Œæ‰€ä»¥å‡½æ•°æ¨¡æ¿ä¸ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°çš„å®šä¹‰é€šå¸¸æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚\n3ã€æ¨¡æ¿å‚æ•°çš„å®ä¾‹åŒ– 1 2 3 4 5 template\u0026lt;typename T\u0026gt; T mydouble(T tmpvalue) { return tmpvalue * 2; } 3.1 æ˜¾ç¤ºå®ä¾‹åŒ– 1 2 int result = mydouble\u0026lt;int\u0026gt;(16); int result = mydouble\u0026lt;int\u0026gt;(17.7);//warning C4244: â€œå‚æ•°â€: ä»â€œdoubleâ€è½¬æ¢åˆ°â€œTâ€ï¼Œå¯èƒ½ä¸¢å¤±æ•°æ® 3.2 éšå¼å®ä¾‹åŒ– 1 2 3 cout \u0026lt;\u0026lt; compare(1,0) \u0026lt;\u0026lt; endl; //å®ä¾‹åŒ–å‡ºä¸€ä¸ªç‰¹åˆ«ç‰ˆæœ¬çš„å‡½æ•° //compare(const int\u0026amp; , const int\u0026amp;); ç¼–è¯‘å™¨ç”¨å‡½æ•°å®å‚æ¥ä¸ºæˆ‘ä»¬æ¨æ–­æ¨¡æ¿å®å‚ï¼Œå®å‚ç±»å‹æ˜¯intã€‚ç¼–è¯‘å™¨ä¼šæ¨æ–­å‡ºæ¨¡æ¿å®å‚ä¸ºint , å¹¶å°†å®ƒç»‘å®šåˆ°æ¨¡æ¿å‚æ•°Tã€‚ ç¼–è¯‘å™¨ç”¨æ¨æ–­å‡ºçš„æ¨¡æ¿å‚æ•°æ¥ä¸ºæˆ‘ä»¬å®ä¾‹åŒ–(instantiate) ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„å‡½æ•°\néšå¼å®ä¾‹åŒ–ä¸‹çš„ç©ºå‚æ•°åˆ—è¡¨\n1 auto result = mydouble\u0026lt;\u0026gt;(16.9); \u0026lt; \u0026gt;çš„ä½œç”¨ï¼š\u0026lt; \u0026gt;æ²¡ä»€ä¹ˆç”¨å¤„ï¼Œä½†æ˜¯å½“æœ‰ä¸€ä¸ªä¹Ÿå«ä½œmydouble()çš„æ™®é€šå‡½æ•°å­˜åœ¨æ—¶ï¼Œ\u0026lt; \u0026gt;ä¹Ÿè®¸å°±ä¼šå‘æŒ¥ä½œç”¨\n3.3 éƒ¨åˆ†å®ä¾‹åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 template \u0026lt;typename V,typename T,typename U\u0026gt; V Add(T tv1, U tv2) { return tv1 + tv2; } int main() { Add(15,17.8);//error C2672: â€œAddâ€\u0026#34;: æ‰¾åˆ°åŒ¹é…çš„é‡è½½å‡½æ•° error C2783: â€œV Add(T,U)â€: æœªèƒ½ä¸ºâ€œVâ€æ¨å¯¼æ¨¡æ¿å‚æ•° Add\u0026lt;double\u0026gt;(1.1 , 2); // return 3.1 return 0; } é€šè¿‡å°–æ‹¬å·æŒ‡å®šä¸€éƒ¨åˆ†æ¨¡æ¿å‚æ•°ï¼Œå¦å¤–ä¸€éƒ¨åˆ†æ¨¡æ¿å‚æ•°å¯ä»¥è®©ç¼–è¯‘å™¨å»æ¨æ–­ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦ä»æŸä¸ªæ¨¡æ¿å‚æ•°å¼€å§‹æ¨æ–­ï¼Œåç»­çš„æ‰€æœ‰æ¨¡æ¿å‚æ•°éƒ½éœ€è¦è®©ç¼–è¯‘å™¨æ¨æ–­ï¼Œ==ä¸å¯ä»¥è‡ªå·±æŒ‡å®šç¬¬1ä¸ªç±»å‹Vå’Œç¬¬3ä¸ªç±»å‹Uï¼Œç„¶åæ¨æ–­ä¸­é—´ç¬¬2ä¸ªç±»å‹Tï¼Œç¼–è¯‘å™¨ä¸æ”¯æŒè¿™ç§è¯­æ³•ã€‚==\n3.4 ç‰¹åŒ– 1 2 3 4 5 6 7 template \u0026lt;typename T, typename U\u0026gt; void tfunc(T\u0026amp; tmprv, U\u0026amp; tmprv2) { cout \u0026lt;\u0026lt; \u0026#34;tfuncæ³›åŒ–ç‰ˆæœ¬\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; tmprv \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; tmprv2 \u0026lt;\u0026lt; endl; } 3.4.1 å…¨ç‰¹åŒ– æ‰€è°“å…¨ç‰¹åŒ–ï¼Œå°±æ˜¯æŠŠtfunc()è¿™ä¸ªæ³›åŒ–ç‰ˆæœ¬ä¸­çš„æ‰€æœ‰æ¨¡æ¿å‚æ•°éƒ½ç”¨å…·ä½“çš„ç±»å‹ä»£æ›¿ï¼Œæ„æˆä¸€ä¸ªç‰¹æ®Šçš„ç‰ˆæœ¬ï¼ˆå…¨ç‰¹åŒ–ç‰ˆæœ¬ï¼‰ï¼Œæ—¢ç„¶æ‰€æœ‰æ¨¡æ¿å‚æ•°éƒ½ç”¨å…·ä½“çš„ç±»å‹ä»£æ›¿äº†ï¼Œé‚£ä¹ˆtfunc()æ³›åŒ–ç‰ˆæœ¬ä¸­templateåé¢å°–æ‹¬å·ä¸­çš„å†…å®¹å°±å˜æˆç©ºäº†ã€‚\n1 2 3 4 5 template\u0026lt;\u0026gt; void tfunc\u0026lt;int , double\u0026gt;(int\u0026amp; tmprv, double\u0026amp; tmprv2) { cout\u0026lt;\u0026lt;\u0026#34;tfuncç‰¹åŒ–\u0026#34;\u0026lt;\u0026lt;endl; } å…¨ç‰¹åŒ–å®é™…ä¸Šç­‰ä»·äºå®ä¾‹åŒ–ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œå¹¶ä¸ç­‰ä»·äºä¸€ä¸ªå‡½æ•°é‡è½½\n1 2 3 4 void tfunc(int\u0026amp; tmprv, double\u0026amp; tmprv2) { cout\u0026lt;\u0026lt;\u0026#34;tfuncå‡½æ•°é‡è½½\u0026#34;\u0026lt;\u0026lt;endl; } ==è°ƒç”¨ä¼˜å…ˆçº§ï¼šæ™®é€šå‡½æ•° \u0026gt; å‡½æ•°æ¨¡æ¿ç‰¹åŒ– \u0026gt; å‡½æ•°æ¨¡æ¿æ³›åŒ–==\n3.4.2 åç‰¹åŒ– ï¼ˆ1ï¼‰æ¨¡æ¿å‚æ•°æ•°é‡ä¸Šçš„åç‰¹åŒ–\nWhat is : ç‰¹åŒ–ç¬¬1ä¸ªæ¨¡æ¿å‚æ•°ç±»å‹ä¸ºdoubleç±»å‹ï¼Œä½†ç¬¬2ä¸ªæ¨¡æ¿å‚æ•°ä¸ç‰¹åŒ–\nå®é™…ä¸Šï¼Œä»æ¨¡æ¿å‚æ•°æ•°é‡ä¸Šæ¥è®²ï¼Œå‡½æ•°æ¨¡æ¿ä¸èƒ½åç‰¹åŒ–ï¼Œåªæœ‰ç±»æ¨¡æ¿æ‰èƒ½åç‰¹åŒ–\nï¼ˆ2ï¼‰æ¨¡æ¿å‚æ•°èŒƒå›´ä¸Šçš„åç‰¹åŒ–\nWhat is : æ‰€è°“â€œå‚æ•°èŒƒå›´â€ï¼Œæ¯”å¦‚åŸæ¥æ˜¯intç±»å‹ï¼Œå¦‚æœå˜æˆconst intç±»å‹ï¼Œé‚£ä¹ˆä¸intç±»å‹ç›¸æ¯”ï¼Œconst intç±»å‹çš„èŒƒå›´å°±å˜å°äº†ï¼›å†æ¯”å¦‚ï¼Œå¦‚æœåŸæ¥æ˜¯ä»»æ„ç±»å‹Tï¼Œç°åœ¨å˜æˆT *ï¼ˆä»ä»»æ„ç±»å‹ç¼©å°ä¸ºä»»æ„æŒ‡é’ˆç±»å‹ï¼‰ï¼Œé‚£è¿™ä¸ªç±»å‹çš„èŒƒå›´ä¹Ÿæ˜¯å˜å°äº†ï¼›è¿˜æœ‰T \u0026amp;ï¼ˆå·¦å€¼å¼•ç”¨ï¼‰ã€T\u0026amp;\u0026amp;ï¼ˆå³å€¼å¼•ç”¨ï¼‰ï¼Œå¯¹äºTï¼Œä»ç±»å‹èŒƒå›´ä¸Šéƒ½å±äºå˜å°äº†ã€‚\nå¯¹äºå‡½æ•°æ¨¡æ¿ï¼Œä¹Ÿä¸å­˜åœ¨æ¨¡æ¿å‚æ•°èŒƒå›´ä¸Šçš„åç‰¹åŒ–ã€‚å› ä¸ºè¿™ç§æ‰€è°“æ¨¡æ¿å‚æ•°èŒƒå›´ä¸Šçš„åç‰¹åŒ–ï¼Œå®é™…ä¸Šæ˜¯å‡½æ•°æ¨¡æ¿çš„é‡è½½\n1 2 3 4 5 template \u0026lt;typename T , typename U\u0026gt; void tfunc(const T\u0026amp; tmprv1, U\u0026amp; tmprv2) { cout\u0026lt;\u0026lt;\u0026#34;å‡½æ•°æ¨¡æ¿çš„å‚æ•°èŒƒå›´åç‰¹åŒ–æœ¬è´¨ä¸Šæ˜¯å‡½æ•°æ¨¡æ¿çš„é‡è½½\u0026#34;\u0026lt;\u0026lt;endl; } 3.5 å®ä¾‹åŒ–æ¨¡æ¿çš„è¿”å›å€¼é—®é¢˜ æ˜¾ç¤ºå®ä¾‹åŒ– 1 Add\u0026lt;double\u0026gt;(1.1 , 3); auto ä½¿ç”¨autoç»“åˆdecltypeå®Œæˆè¿”å›å€¼ç±»å‹æ¨æ–­ 1 2 3 4 5 6 template \u0026lt;typename V,typename T,typename U\u0026gt; auto Add(T tv1, U tv2) //auto Add(T tv1, U tv2) -\u0026gt; decltype(tv1 + tv2) { return tv1 + tv2; } ä¸‰ã€ç‰¹å¼‚çš„è¯­æ³• 1ã€çœç•¥å‚æ•° ä¸ç®¡æ˜¯ç±»å‹æ¨¡æ¿å‚æ•°è¿˜æ˜¯éç±»å‹æ¨¡æ¿å‚æ•°ï¼Œå¦‚æœåœ¨ä»£ç ä¸­æ²¡æœ‰ç”¨åˆ°è¿™ä¸ªå‚æ•°ï¼Œåˆ™å‚æ•°åå¯ä»¥çœç•¥\n1 2 3 template \u0026lt;typename T ,int value\u0026gt; auto Add2() {return 100;} å¯ä»¥åšå¦‚ä¸‹çœç•¥\n1 2 3 template \u0026lt;typename ,int\u0026gt; auto Add2() {return 100;} 2ã€\u0026ldquo;æ— ç”¨\u0026quot;çš„typename ç±»å‹å‰é¢å¯ä»¥å¢åŠ ä¸€ä¸ªtypenameä¿®é¥°ä»¥æ˜ç¡®æ ‡è¯†ä¸€ä¸ªç±»å‹ã€‚æœ‰çš„æ—¶å€™ä¸ºäº†è¡¨æ˜å…¶åé¢æ˜¯ä¸€ä¸ªç±»å‹ï¼Œä¹Ÿéœ€è¦ç”¨typenameä¿®é¥°\n1 2 3 4 5 template \u0026lt;typename T , typename int value\u0026gt; auto Add() { return 100; } å››ã€æ¨¡æ¿å‡½æ•°åœ¨å·¥ç¨‹ä¸­ 1ã€inlineå’Œconstexprçš„å«å‡½æ•°æ¨¡æ¿ inlineæˆ– constexprè¯´æ˜ç¬¦æ”¾åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¹‹åï¼Œè¿”å›ç±»å‹ä¹‹å‰ï¼š\n1 2 template \u0026lt;typename T\u0026gt; inline T min(const T\u0026amp;, const T\u0026amp;); template \u0026lt;typename T\u0026gt; constexpr T min(const T\u0026amp; , const T\u0026amp;); 2ã€ç¼–å†™ä¸ç±»å‹æ— å…³çš„ä»£ç  1 2 3 4 5 6 template \u0026lt;typename T\u0026gt; int compare(const T \u0026amp;v1 , const T \u0026amp;v2) { if(less\u0026lt;T\u0026gt;()(v1,v2)) return -1; if(less\u0026lt;T\u0026gt;()(v2,v1)) return 1; return 0; } è¿™æ ·å†™çš„å¥½å¤„\nconst T \u0026amp;ä½œä¸ºå‡½æ•°å‚æ•°å¯ä»¥é¿å…å®å‚æ˜¯ä¸å¯è°ƒç”¨ç±»å‹ less\u0026lt;T\u0026gt;()ä½¿ç”¨æ ‡å‡†åº“å¯ä»¥é¿å…æœ‰äº›ç±»å‹æ²¡æœ‰å®šä¹‰\u0026gt;çš„æ¯”è¾ƒ ","pubDate":"2022-06-08","title":"ã€æ¨¡æ¿ä¸æ³›å‹ç¼–ç¨‹01ã€‘å‡½æ•°æ¨¡æ¿"},{"link":"https://cnjslw.github.io/posts/02-%E5%8F%98%E9%87%8F%E4%B8%8E%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/","plain":"ä¸€ã€æ•°å€¼ç¼–ç  æ— ç¬¦å·æ•´æ•°ï¼ˆUnsigned Integerï¼‰ï¼š\nä½¿ç”¨äºŒè¿›åˆ¶è¡¥ç ï¼ˆBinary Unsigned Integerï¼‰è¡¨ç¤ºã€‚ æ‰€æœ‰ä½éƒ½å¯ç”¨äºè¡¨ç¤ºæ•°å€¼ï¼Œæ²¡æœ‰ç¬¦å·ä½ã€‚ æœ€é«˜ä½ä¸ºæ•°å€¼çš„æœ€é«˜ä½ï¼Œæ²¡æœ‰ç‰¹æ®Šå«ä¹‰ã€‚ èƒ½è¡¨ç¤ºçš„èŒƒå›´ï¼š0 åˆ° (2^n - 1)ï¼Œå…¶ä¸­ n æ˜¯è¯¥æ•´æ•°ç±»å‹çš„ä½æ•°ã€‚ æœ‰ç¬¦å·æ•´æ•°ï¼ˆSigned Integerï¼‰ï¼š\nä½¿ç”¨äºŒè¿›åˆ¶è¡¥ç ï¼ˆBinary Two\u0026rsquo;s Complementï¼‰è¡¨ç¤ºã€‚ æœ€é«˜ä½ï¼ˆæœ€å·¦ä¾§çš„ä½ï¼‰ä½œä¸ºç¬¦å·ä½ï¼Œ0 è¡¨ç¤ºæ­£æ•°ï¼Œ1 è¡¨ç¤ºè´Ÿæ•°ã€‚ å…¶ä½™ä½è¡¨ç¤ºæ•°å€¼éƒ¨åˆ†ï¼Œä½¿ç”¨æ­£æ•°çš„äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºã€‚ èƒ½è¡¨ç¤ºçš„èŒƒå›´ï¼š-(2^(n-1)) åˆ° (2^(n-1) - 1)ï¼Œå…¶ä¸­ n æ˜¯è¯¥æ•´æ•°ç±»å‹çš„ä½æ•°ã€‚ å°æ•°ï¼ˆFloating-point Numberï¼‰ï¼š\nä½¿ç”¨æµ®ç‚¹è¡¨ç¤ºæ³•ï¼Œä¾‹å¦‚IEEE 754æ ‡å‡†ã€‚ ä¸€èˆ¬åˆ†ä¸ºå•ç²¾åº¦ï¼ˆ32ä½ï¼‰å’ŒåŒç²¾åº¦ï¼ˆ64ä½ï¼‰ä¸¤ç§æ ¼å¼ã€‚ åŒ…æ‹¬ç¬¦å·ä½ã€æŒ‡æ•°ä½å’Œå°¾æ•°ä½ï¼Œç”¨äºè¡¨ç¤ºå¸¦æœ‰å°æ•°éƒ¨åˆ†çš„å®æ•°ã€‚ èƒ½è¡¨ç¤ºçš„èŒƒå›´å’Œç²¾åº¦å–å†³äºå…·ä½“çš„æµ®ç‚¹è¡¨ç¤ºæ ¼å¼ã€‚ å­—ç¬¦ï¼ˆCharacterï¼‰ï¼š\nä½¿ç”¨å­—ç¬¦ç¼–ç è¡¨æ¥è¡¨ç¤ºï¼Œæœ€å¸¸è§çš„æ˜¯ASCIIç¼–ç æˆ–Unicodeç¼–ç ã€‚ é€šå¸¸æ¯ä¸ªå­—ç¬¦å ç”¨ä¸€ä¸ªå›ºå®šå¤§å°çš„å­—èŠ‚ï¼ˆå¦‚ASCIIç¼–ç ä¸­çš„ä¸€ä¸ªå­—èŠ‚ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨å¤šå­—èŠ‚è¡¨ç¤ºï¼ˆå¦‚æŸäº›Unicodeç¼–ç ï¼‰ã€‚ æ¯ä¸ªç¼–ç è¡¨å°†å­—ç¬¦æ˜ å°„åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ï¼Œä»¥ä¾¿åœ¨è®¡ç®—æœºä¸­è¡¨ç¤ºã€‚ å­—ç¬¦ä¸²ï¼ˆStringï¼‰ï¼š\nå­—ç¬¦ä¸²æ˜¯ç”±å¤šä¸ªå­—ç¬¦æ„æˆçš„åºåˆ—ã€‚ åœ¨è®¡ç®—æœºä¸­ï¼Œå­—ç¬¦ä¸²é€šå¸¸è¢«è¡¨ç¤ºä¸ºå­—ç¬¦æ•°ç»„æˆ–å­—ç¬¦æŒ‡é’ˆï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦ä½¿ç”¨å­—ç¬¦çš„è¡¨ç¤ºæ–¹å¼è¿›è¡Œå­˜å‚¨ã€‚ å­—ç¬¦ä¸²çš„å…·ä½“è¡¨ç¤ºæ–¹å¼å¯ä»¥æ ¹æ®ç¼–ç¨‹è¯­è¨€å’Œå­—ç¬¦ä¸²åº“çš„ä¸åŒè€Œæœ‰æ‰€åŒºåˆ«ï¼Œä½†åŸºæœ¬åŸç†æ˜¯ç›¸åŒçš„ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ç§æ•°æ®ç±»å‹åœ¨è®¡ç®—æœºä¸­çš„å…·ä½“è¡¨ç¤ºæ–¹å¼å¯èƒ½ä¼šå› ç¼–ç¨‹è¯­è¨€ã€ç¼–è¯‘å™¨ã€æ“ä½œç³»ç»Ÿæˆ–ç¡¬ä»¶å¹³å°è€Œæœ‰æ‰€å·®å¼‚ã€‚è¿™äº›è¡¨ç¤ºæ–¹å¼æ˜¯é€šè¿‡çº¦å®šå’Œæ ‡å‡†æ¥å®šä¹‰çš„ï¼Œä»¥ç¡®ä¿æ•°æ®åœ¨è®¡ç®—æœºå†…éƒ¨çš„æ­£ç¡®è§£é‡Šå’Œæ“ä½œã€‚\näºŒã€å˜é‡ 1ã€å®šä¹‰å˜é‡ å˜é‡åå³æ±‡ç¼–è¯­å¥åå­—éƒ¨åˆ†ï¼Œæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„æ ‡è¯†ç¬¦ï¼Œè¡¨ç¤ºåˆå€¼è¡¨é¦–ä¸ªæ•°æ®çš„é€»è¾‘åœ°å€ã€‚æ±‡ç¼–è¯­è¨€ä½¿ç”¨è¿™ä¸ªç¬¦å·è¡¨ç¤ºåœ°å€ï¼Œæ•…æœ‰æ—¶è¢«ç§°ä¸ºç¬¦å·åœ°å€ã€‚å˜é‡åå¯ä»¥æ²¡æœ‰ï¼Œè¿™ç§æƒ…å†µï¼Œæ±‡ç¼–ç¨‹åºå°†ç›´æ¥ä¸ºåˆå€¼è¡¨åˆ†é…ç©ºé—´ï¼Œæ— ç¬¦å·åœ°å€ã€‚è®¾ç½®å˜é‡åæ˜¯ä¸ºäº†æ–¹ä¾¿å­˜å–å®ƒæŒ‡ç¤ºçš„å­˜å‚¨å•å…ƒã€‚\n1 å˜é‡å å˜é‡å®šä¹‰ä¼ªæŒ‡ä»¤ åˆå€¼è¡¨ 1.1 åˆå€¼è¡¨ åˆå€¼è¡¨æ˜¯ç”¨é€—å·åˆ†éš”çš„å‚æ•°ï¼Œç”±å„ç§å½¢å¼çš„å¸¸é‡å’Œç‰¹æ®Šçš„ç¬¦å·â€œ?â€ã€â€œDUPâ€ç»„æˆã€‚å…¶ä¸­â€œï¼Ÿâ€è¡¨ç¤ºåˆå€¼ä¸ç¡®å®šï¼Œå³æœªèµ‹åˆå€¼ã€‚å¤šä¸ªå­˜å‚¨å•å…ƒå¦‚æœåˆå€¼ç›¸åŒï¼Œå¯ä»¥ç”¨å¤åˆ¶æ“ä½œç¬¦DUPè¿›è¡Œè¯´æ˜ã€‚\n1 é‡å¤æ¬¡æ•° dup(é‡å¤å‚æ•°) 1.2 å˜é‡å®šä¹‰ä¼ªæŒ‡ä»¤ å˜é‡å®šä¹‰ä¼ªæŒ‡ä»¤æœ‰DBã€DWã€DDã€DFã€DQå’ŒDTï¼ˆMASM 6.0å¼€å§‹è¿˜å¯¹åº”æ”¯æŒBYTEã€WORDã€DWORDã€FWORDã€QWORDå’ŒTBYTEï¼Œä¸¤è€…åŠŸèƒ½ç›¸åŒï¼‰ï¼Œå®ƒä»¬æ ¹æ®ç”³è¯·çš„ä¸»å­˜ç©ºé—´å•ä½åˆ†ç±»\né™¤äº† DBã€DWã€DD ç­‰å®šä¹‰çš„ç®€å•å˜é‡ï¼Œæ±‡ç¼–è¯­è¨€è¿˜æ”¯æŒå¤æ‚çš„æ•°æ®å˜é‡ï¼Œä¾‹å¦‚ç»“æ„ï¼ˆStructureï¼‰ã€è®°å½•ï¼ˆRecordï¼‰ã€è”åˆï¼ˆUnionï¼‰ç­‰ã€‚\n2ã€å˜é‡å®šä½ å˜é‡å®šä¹‰çš„å­˜å‚¨ç©ºé—´æ˜¯æŒ‰ç…§ä¹¦å†™çš„å…ˆåé¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªåˆ†é…çš„ã€‚è€Œå®šä½ä¼ªæŒ‡ä»¤å¯ä»¥æ§åˆ¶å…¶å­˜æ”¾çš„åç§»åœ°å€ã€‚\n2.1 ORGä¼ªæŒ‡ä»¤ ORGä¼ªæŒ‡ä»¤å°†å‚æ•°è¡¨è¾¾çš„åç§»åœ°å€ä½œä¸ºå½“å‰åç§»åœ°å€ï¼Œæ ¼å¼æ˜¯ï¼š\n1 org å‚æ•° ä¾‹å¦‚ï¼Œä»åç§»åœ°å€100Hå¤„å®‰æ’æ•°æ®æˆ–ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨è¯­å¥ï¼š\n1 org 100h 2.2 ALIGNä¸Evenä¼ªæŒ‡ä»¤ åœ¨æ±‡ç¼–è¯­è¨€ä¸­ï¼Œ\u0026ldquo;Align\u0026quot;å’Œ\u0026quot;Even\u0026quot;æ˜¯ä¸¤ä¸ªå¸¸ç”¨çš„ä¼ªæŒ‡ä»¤ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯è°ƒæ•´ä»£ç æˆ–æ•°æ®çš„å¯¹é½æ–¹å¼ã€‚\nAlignï¼ˆå¯¹é½ï¼‰ä¼ªæŒ‡ä»¤ï¼š\nAlignä¼ªæŒ‡ä»¤ç”¨äºå°†ä»£ç æˆ–æ•°æ®å¯¹é½åˆ°æŒ‡å®šçš„è¾¹ç•Œã€‚ å¯¹é½æ˜¯æŒ‡å°†æ•°æ®æˆ–æŒ‡ä»¤çš„èµ·å§‹åœ°å€è®¾ç½®ä¸ºç‰¹å®šçš„è¾¹ç•Œåœ°å€ï¼Œé€šå¸¸æ˜¯å†…å­˜åœ°å€çš„å€æ•°ã€‚ å¯¹é½å¯ä»¥æé«˜ç¨‹åºæ‰§è¡Œæ•ˆç‡å’Œè®¿é—®é€Ÿåº¦ï¼Œå°¤å…¶åœ¨ä¸€äº›ä½“ç³»ç»“æ„ä¸­ï¼Œè¦æ±‚æŸäº›ç‰¹å®šç±»å‹çš„æ•°æ®å¿…é¡»ä»¥ç‰¹å®šçš„å¯¹é½æ–¹å¼å­˜å‚¨ã€‚ ä½¿ç”¨Alignä¼ªæŒ‡ä»¤ï¼Œç¨‹åºå‘˜å¯ä»¥æŒ‡å®šå¯¹é½çš„è¾¹ç•Œï¼Œå¦‚å­—èŠ‚ã€å­—ï¼ˆ2å­—èŠ‚ï¼‰ã€åŒå­—ï¼ˆ4å­—èŠ‚ï¼‰ç­‰ã€‚ Evenï¼ˆå¶æ•°ï¼‰ä¼ªæŒ‡ä»¤ï¼š\nEvenä¼ªæŒ‡ä»¤ç”¨äºå°†ä»£ç æˆ–æ•°æ®çš„èµ·å§‹åœ°å€å¯¹é½åˆ°å¶æ•°åœ°å€ã€‚ åœ¨æŸäº›ä½“ç³»ç»“æ„ä¸­ï¼Œè¦æ±‚32ä½æ•°æ®çš„èµ·å§‹åœ°å€å¿…é¡»ä¸ºå¶æ•°ï¼Œå³å†…å­˜åœ°å€çš„æœ€ä½ä½å¿…é¡»ä¸º0ã€‚ ä½¿ç”¨Evenä¼ªæŒ‡ä»¤ï¼Œç¨‹åºå‘˜å¯ä»¥ç¡®ä¿ä»£ç æˆ–æ•°æ®çš„èµ·å§‹åœ°å€ä¸ºå¶æ•°åœ°å€ï¼Œä»è€Œæ»¡è¶³ç‰¹å®šä½“ç³»ç»“æ„çš„è¦æ±‚ã€‚ è¿™äº›å¯¹é½ä¼ªæŒ‡ä»¤å¯ä»¥åœ¨ç¼–å†™æ±‡ç¼–ä»£ç æ—¶ä½¿ç”¨ï¼Œä»¥ç¡®ä¿æ•°æ®çš„æ­£ç¡®å¯¹é½å’Œè®¿é—®ã€‚å¯¹é½æ–¹å¼çš„é€‰æ‹©é€šå¸¸å—åˆ°ç‰¹å®šä½“ç³»ç»“æ„æˆ–ç¼–è¯‘å™¨çš„è¦æ±‚å’Œé™åˆ¶ã€‚é€šè¿‡ä½¿ç”¨Alignå’ŒEvenä¼ªæŒ‡ä»¤ï¼Œç¨‹åºå‘˜å¯ä»¥ä»¥æœ€ä½³çš„æ–¹å¼è¿›è¡Œæ•°æ®å¯¹é½ï¼Œä»¥æé«˜ä»£ç æ‰§è¡Œæ•ˆç‡å’Œè®¿é—®é€Ÿåº¦ã€‚\n2.3 å˜é‡å±æ€§ å˜é‡å®šä¹‰é™¤åˆ†é…å­˜å‚¨ç©ºé—´å’Œèµ‹åˆå€¼å¤–ï¼Œè¿˜å¯ä»¥åˆ›å»ºå˜é‡åã€‚ è¿™ä¸ªå˜é‡åä¸€ç»å®šä¹‰ä¾¿å…·æœ‰ä¸¤ç±»å±æ€§ï¼š ï¼ˆ1ï¼‰åœ°å€å±æ€§â€”â€”æŒ‡é¦–ä¸ªå˜é‡æ‰€åœ¨å­˜å‚¨å•å…ƒçš„é€»è¾‘åœ°å€ï¼Œå«æœ‰æ®µåŸºåœ°å€å’Œåç§»åœ°å€ã€‚ ï¼ˆ2ï¼‰ç±»å‹å±æ€§â€”â€”æŒ‡å˜é‡å®šä¹‰çš„æ•°æ®å•ä½ï¼Œæœ‰å­—èŠ‚é‡ã€å­—é‡ã€åŒå­—é‡ã€3 å­—é‡ã€4 å­—é‡å’Œ10å­—èŠ‚é‡ï¼Œä¾æ¬¡ç”¨ç±»å‹åBYTEã€WORDã€DWORDã€FWORDã€QWORDå’ŒTBYTEè¡¨ç¤ºã€‚\nTYPEè¿”å›è¯¥ç±»å‹å˜é‡ä¸€ä¸ªæ•°æ®é¡¹æ‰€å çš„å­—èŠ‚æ•°ï¼Œä¾‹å¦‚å¯¹å­—èŠ‚ã€å­—å’ŒåŒå­—å˜é‡ä¾æ¬¡è¿”å›1ã€2å’Œ4 å¯¹å˜é‡ï¼Œè¿˜å¯ä»¥ç”¨LENGTHOFæ“ä½œç¬¦è·çŸ¥æŸå˜é‡åæŒ‡å‘å¤šå°‘ä¸ªæ•°æ®é¡¹ï¼Œç”¨SIZEOFæ“ä½œç¬¦è·çŸ¥å®ƒå…±å ç”¨å¤šå°‘å­—èŠ‚ç©ºé—´ï¼Œå³ SIZEOF å€¼=TYPE å€¼Ã—LENGHOF å€¼\n1 2 3 4 5 6 7 mov ax,word ptr bvar ; mov bx,type bvar ; mov cx,type wvar mov dx,type array mov si,lengthof array mov di,sizeof array mov bp,arr_size ä¸‰ã€å¯»å€æ–¹å¼ [1] ã€Šæ±‡ç¼–è¯­è¨€ã€‹ç‹çˆ½\n[2] ã€Šx86æ±‡ç¼–è¯­è¨€ï¼šä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼ï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹æå¿ ã€ç‹æ™“æ³¢ã€ä½™æ´\n[3] ã€ŠIntelÂ® 64 and IA-32 Architectures Software Developerâ€™s Manual Volume 3A: System Programming Guide, Part 1ã€‹\n[4] ã€Šæ±‡ç¼–è¯­è¨€ç®€æ˜æ•™ç¨‹ã€‹é’±æ™“æ·\n[5] 8086CPUä¸­14ä¸ªå¯„å­˜å™¨çš„è¯¦è§£_åŸºå€å¯„å­˜å™¨\n","pubDate":"2022-01-15","title":"ã€x86æ±‡ç¼–è¯­è¨€02ã€‘å˜é‡ä¸åŸºæœ¬ç±»å‹"},{"link":"https://cnjslw.github.io/posts/01-8086%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/","plain":"ä¸€ã€åŸºç¡€çŸ¥è¯† 1ã€æŒ‡ä»¤ æœºå™¨æŒ‡ä»¤ï¼šCPUèƒ½ç›´æ¥è¯†åˆ«å¹¶æ‰§è¡Œçš„äºŒè¿›åˆ¶ç¼–ç  æ±‡ç¼–æŒ‡ä»¤ï¼šæ±‡ç¼–æŒ‡ä»¤æ˜¯æœºå™¨æŒ‡ä»¤çš„åŠ©è®°ç¬¦ï¼ŒåŒæœºå™¨æŒ‡ä»¤ä¸€ä¸€å¯¹åº”ã€‚ æŒ‡ä»¤ï¼šæŒ‡ä»¤é€šå¸¸ç”±æ“ä½œç å’Œåœ°å€ç ï¼ˆæ“ä½œæ•°ï¼‰ä¸¤éƒ¨åˆ†ç»„æˆ æŒ‡ä»¤é›†ï¼šæ¯ç§CPUéƒ½æœ‰è‡ªå·±çš„æ±‡ç¼–æŒ‡ä»¤é›†ã€‚ 2ã€æ±‡ç¼–è¯­è¨€ç¨‹åº 2.1 æ±‡ç¼–è¯­è¨€ç”±3ç±»æŒ‡ä»¤ç»„æˆ æ±‡ç¼–æŒ‡ä»¤ ä¼ªæŒ‡ä»¤ï¼šæ²¡æœ‰å¯¹åº”çš„æœºå™¨ç ï¼Œç”±ç¼–è¯‘å™¨æ‰§è¡Œï¼Œè®¡ç®—æœºå¹¶ä¸æ‰§è¡Œ å…¶ä»–ç¬¦å·ï¼šå¦‚+ã€-ã€*ã€/ç­‰ï¼Œç”±ç¼–è¯‘å™¨è¯†åˆ«ï¼Œæ²¡æœ‰å¯¹åº”çš„æœºå™¨ç ã€‚ 2.2 æŒ‡ä»¤ä»£ç æ ¼å¼ æŒ‡ä»¤çš„ä»£ç æ ¼å¼ï¼ˆInstruction Formatï¼‰è¯´æ˜å¦‚ä½•ç”¨äºŒè¿›åˆ¶ç¼–ç æŒ‡ä»¤ï¼Œä¹Ÿç§°æœºå™¨ä»£ç ï¼ˆMachine Codeï¼‰æ ¼å¼ï¼Œå®ƒç”±æ“ä½œç å’Œåœ°å€ç ç»„æˆ\næŒ‡ä»¤çš„æ“ä½œç ï¼ˆOpcodeï¼‰è¡¨æ˜å¤„ç†å™¨æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚æ•°æ®ä¼ é€ã€åŠ æ³•è¿ç®—ã€è·³è½¬ç­‰æ“ä½œ æ“ä½œæ•°ï¼ˆOperandï¼‰æ˜¯å‚ä¸æ“ä½œçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å„ç§æ“ä½œçš„å¯¹è±¡ï¼Œä¸»è¦ä»¥å¯„å­˜å™¨æˆ–å­˜å‚¨å™¨åœ°å€ã€I/O åœ°å€å½¢å¼æŒ‡æ˜æ•°æ®çš„æ¥æºï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºåœ°å€ç  1 2 mov al , [bx+si+6] ;æŒ‡ä»¤åŠŸèƒ½ï¼šALâ¬…[BX+SI+6] ;æœºå™¨ä»£ç ï¼š8A 40 06 ï¼ˆåå…­è¿›åˆ¶è¡¨ç¤ºæ³•ï¼‰ æ“ä½œç ï¼š\u0026ldquo;8A\u0026rdquo; æ“ä½œæ•°ï¼š\u0026ldquo;40\u0026rdquo; ,\u0026ldquo;06\u0026rdquo;\n2.3 è¯­å¥æ ¼å¼ æ‰§è¡Œæ€§è¯­å¥â€”â€”è¡¨è¾¾å¤„ç†å™¨æŒ‡ä»¤çš„è¯­å¥ 1 æ ‡å·ï¼šå¤„ç†å™¨æŒ‡ä»¤åŠ©è®°ç¬¦ æ“ä½œæ•°,æ“ä½œæ•° ;æ³¨é‡Š è¯´æ˜æ€§è¯­å¥â€”â€”è¡¨è¾¾æ±‡ç¼–ç¨‹åºå‘½ä»¤çš„è¯­å¥ 1 åå­— ä¼ªæŒ‡ä»¤åŠ©è®°ç¬¦ å‚æ•°,å‚æ•°,...... ;æ³¨é‡Š 2.3.1 æ ‡å·ä¸åå­— æ‰§è¡Œæ€§è¯­å¥ä¸­ï¼Œå†’å·å‰çš„æ ‡å·è¡¨ç¤ºå¤„ç†å™¨æŒ‡ä»¤åœ¨ä¸»å­˜ä¸­çš„é€»è¾‘åœ°å€ï¼Œä¸»è¦ç”¨äºæŒ‡ç¤ºåˆ†æ”¯ã€å¾ªç¯ç­‰ç¨‹åºçš„ç›®çš„åœ°å€ï¼Œå¯æœ‰å¯æ—  è¯´æ˜æ€§è¯­å¥ä¸­çš„åå­—å¯ä»¥æ˜¯å˜é‡åã€æ®µåã€å­ç¨‹åºåç­‰ï¼Œåæ˜ å˜é‡ã€æ®µå’Œå­ç¨‹åºç­‰çš„é€»è¾‘åœ°å€ã€‚ æ ‡å·é‡‡ç”¨å†’å·åˆ†éš”å¤„ç†å™¨æŒ‡ä»¤ï¼Œåå­—é‡‡ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦åˆ†éš”ä¼ªæŒ‡ä»¤ï¼Œæ®æ­¤ä¹Ÿåˆ†åˆ«äº†ä¸¤ç§è¯­å¥ã€‚ æ ‡å·å’Œåå­—æ˜¯ç¬¦åˆæ±‡ç¼–ç¨‹åºè¯­æ³•çš„ç”¨æˆ·è‡ªå®šä¹‰çš„æ ‡è¯†ç¬¦ï¼ˆIdentifierï¼‰ã€‚æ ‡è¯†ç¬¦ï¼ˆä¹Ÿç§°ä¸ºç¬¦å·Symbolï¼‰ä¸€èˆ¬æœ€å¤šç”±31ä¸ªå­—æ¯ã€æ•°å­—åŠè§„å®šçš„ç‰¹æ®Šç¬¦å·ï¼ˆå¦‚ _ã€$ã€?ã€@ï¼‰ç»„æˆï¼Œä¸èƒ½ä»¥æ•°å­—å¼€å¤´ 2.3.2 åŠ©è®°ç¬¦ä¸ä¼ªæŒ‡ä»¤ åœ¨æ±‡ç¼–è¯­è¨€ä¸­ï¼ŒåŠ©è®°ç¬¦ï¼ˆMnemonicï¼‰å’Œä¼ªæŒ‡ä»¤ï¼ˆPseudoinstructionï¼‰æ˜¯ä¸¤ç§ä¸åŒçš„æ¦‚å¿µã€‚ 1ï¼‰åŠ©è®°ç¬¦ï¼ˆMnemonicï¼‰ï¼šåŠ©è®°ç¬¦æ˜¯ç”¨äºè¡¨ç¤ºæœºå™¨æŒ‡ä»¤çš„ä¸€ç§ç®€çŸ­çš„åŠ©è®°åç§°ã€‚å®ƒæ˜¯æ±‡ç¼–è¯­è¨€ä¸­å¯è¯†åˆ«çš„æ–‡æœ¬ç¬¦å·ï¼Œä»£è¡¨ç€ç‰¹å®šçš„æœºå™¨æŒ‡ä»¤æ“ä½œç ã€‚ä¾‹å¦‚ï¼Œ\u0026ldquo;MOV\u0026quot;ä»£è¡¨å°†æ•°æ®ä»ä¸€ä¸ªä½ç½®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®çš„æœºå™¨æŒ‡ä»¤ã€‚æ€»çš„æ¥è¯´ï¼ŒåŠ©è®°ç¬¦ç›´æ¥å¯¹åº”æœºå™¨æŒ‡ä»¤ï¼Œè€Œä¼ªæŒ‡ä»¤æä¾›äº†æ›´é«˜çº§å’Œæ–¹ä¾¿çš„åŠŸèƒ½ï¼Œç”¨äºæ”¹å–„ç¨‹åºç»“æ„å’Œç¼–è¯‘è¿‡ç¨‹ã€‚ åŠ©è®°ç¬¦ï¼ˆMnemonicsï¼‰æ˜¯å¸®åŠ©è®°å¿†æŒ‡ä»¤çš„ç¬¦å·ï¼Œåæ˜ æŒ‡ä»¤çš„åŠŸèƒ½ã€‚ [[æ±‡ç¼–è¯­è¨€#åäº”ã€ æŒ‡ä»¤ç³»ç»Ÿæ€»ç»“|åŠ©è®°ç¬¦æ€»ç»“]]\n2ï¼‰ä¼ªæŒ‡ä»¤ï¼ˆPseudoinstructionï¼‰ï¼šä¼ªæŒ‡ä»¤æ˜¯åœ¨æ±‡ç¼–è¯­è¨€ä¸­ä½¿ç”¨çš„ä¸€ç±»ç‰¹æ®ŠæŒ‡ä»¤ï¼Œå…¶å¹¶ä¸ç›´æ¥å¯¹åº”äºæœºå™¨æŒ‡ä»¤ï¼Œè€Œæ˜¯ç”±ç¼–è¯‘å™¨æˆ–æ±‡ç¼–å™¨æ ¹æ®ä¼ªæŒ‡ä»¤çš„å«ä¹‰æ¥ç”Ÿæˆä¸€ç³»åˆ—çœŸæ­£çš„æœºå™¨æŒ‡ä»¤ã€‚ä¼ªæŒ‡ä»¤é€šå¸¸ç”¨äºæä¾›æ±‡ç¼–ç¨‹åºçš„ç»„ç»‡ç»“æ„ã€å®šä¹‰å¸¸é‡ã€å®šä¹‰å˜é‡ç­‰ã€‚å®ƒä»¬æ›´å¤šåœ°æ˜¯ä¸ºäº†æ–¹ä¾¿ç¨‹åºå‘˜æˆ–è€…æä¾›ç¼–è¯‘æ—¶çš„ä¸€äº›è¾…åŠ©åŠŸèƒ½ã€‚\n1 msg db\u0026#39;Hello,asm!\u0026#39;,13,10,\u0026#39;$\u0026#39; åå­— MSG æŒ‡ç¤ºè¿™ä¸ªå­—ç¬¦ä¸²åœ¨ä¸»å­˜çš„é€»è¾‘åœ°å€ï¼ŒåŒ…å«æœ‰æ®µåŸºåœ°å€å’Œåç§»åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„å˜é‡åã€‚å¯ä»¥ç”¨ä¸€ä¸ªMASMæ“ä½œç¬¦OFFSETè·å¾—å…¶åç§»åœ°å€ï¼Œä¿å­˜åˆ°DXå¯„å­˜å™¨ï¼Œæ±‡ç¼–è¯­è¨€æ‰§è¡Œæ€§è¯­å¥å¦‚ä¸‹ï¼š\n1 mov dx, offset msg ;DXè·å¾—MSGçš„åç§»åœ°å€ åŒºåˆ«ï¼š\nåŠ©è®°ç¬¦è¡¨ç¤ºå®é™…çš„æœºå™¨æŒ‡ä»¤ï¼Œæ¯ä¸ªåŠ©è®°ç¬¦å¯¹åº”ç€ç‰¹å®šçš„æ“ä½œç ã€‚å®ƒä»¬ç›´æ¥è¢«å¤„ç†å™¨æ‰§è¡Œã€‚ ä¼ªæŒ‡ä»¤è™½ç„¶çœ‹èµ·æ¥åƒæŒ‡ä»¤ï¼Œä½†å®ƒä»¬å¹¶æ²¡æœ‰ç›´æ¥å¯¹åº”çš„æœºå™¨æŒ‡ä»¤ã€‚å®ƒä»¬æ˜¯ç”±ç¼–è¯‘å™¨æˆ–æ±‡ç¼–å™¨è§£é‡Šå¹¶è½¬æ¢æˆä¸€ç³»åˆ—çœŸæ­£çš„æœºå™¨æŒ‡ä»¤ã€‚ 2.3.3 æ“ä½œæ•°å’Œå‚æ•° å¤„ç†å™¨æŒ‡ä»¤çš„æ“ä½œæ•°è¡¨ç¤ºå‚ä¸æ“ä½œçš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå…·ä½“çš„å¸¸é‡ã€ä¹Ÿå¯ä»¥æ˜¯ä¿å­˜åœ¨å¯„å­˜å™¨çš„æ•°æ®ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªä¿å­˜åœ¨å­˜å‚¨å™¨ä¸­çš„å˜é‡ç­‰ã€‚ åŒæ“ä½œæ•°çš„æŒ‡ä»¤ä¸­ï¼Œç›®çš„æ“ä½œæ•°å†™åœ¨é€—å·å‰ï¼Œè¿˜å¯ç”¨æ¥å­˜æ”¾æŒ‡ä»¤æ“ä½œçš„ç»“æœï¼›å¯¹åº”åœ°ï¼Œé€—å·åçš„æ“ä½œæ•°å°±ç§°ä¸ºæºæ“ä½œæ•°ã€‚ ä¾‹å¦‚ï¼ŒæŒ‡ä»¤â€œMOV AH,9â€ä¸­æ•°å­—9æ˜¯å¸¸é‡å½¢å¼çš„æºæ“ä½œæ•°ï¼ŒAHæ˜¯å¯„å­˜å™¨å½¢å¼çš„ç›®çš„æ“ä½œæ•°ã€‚åŒæ ·ï¼ŒOFFSET MSGç»æ±‡ç¼–åè½¬æ¢ä¸ºä¸€ä¸ªå…·ä½“çš„åç§»åœ°å€ï¼Œä¹Ÿæ˜¯å¸¸é‡ã€‚ ä¼ªæŒ‡ä»¤çš„å‚æ•°å¯ä»¥æ˜¯å¸¸é‡ã€å˜é‡åã€è¡¨è¾¾å¼ç­‰ï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼Œå‚æ•°ä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚ä¾‹å¦‚åœ¨â€œ\u0026lsquo;Hello, asm !\u0026rsquo;,13,10, \u0026lsquo;$\u0026rsquo;â€ç¤ºä¾‹ä¸­ï¼Œå°±ç”¨å•å¼•å·è¡¨è¾¾äº†ä¸€ä¸ªå­—ç¬¦ä¸²â€œHello, asm !â€ï¼Œä¸€ä¸ªå­—ç¬¦â€œ$â€ï¼Œè¿˜æœ‰å¸¸é‡13å’Œ10ï¼ˆè¿™ä¸¤ä¸ªå¸¸é‡åœ¨ASCIIç è¡¨ä¸­è¡¨ç¤ºå›è½¦å’Œæ¢è¡Œæ§åˆ¶å­—ç¬¦ï¼Œå…¶ä½œç”¨ç›¸å½“äºCè¯­è¨€çš„â€œ\\nâ€ï¼‰ã€‚\n2.3.4 æ³¨é‡Šå’Œåˆ†éš”ç¬¦ æ ‡å·åçš„å†’å·ã€æ³¨é‡Šå‰çš„åˆ†å·ä»¥åŠæ“ä½œæ•°é—´å’Œå‚æ•°é—´çš„é€—å·éƒ½æ˜¯è§„å®šé‡‡ç”¨çš„åˆ†éš”ç¬¦ï¼Œå…¶ä»–éƒ¨åˆ†é€šå¸¸é‡‡ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ã€‚å¤šä¸ªç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦çš„ä½œç”¨ä¸ä¸€ä¸ªç›¸åŒã€‚å¦å¤–ï¼ŒMASMä¹Ÿæ”¯æŒç»­è¡Œç¬¦â€œ\\â€ï¼Œè¡¨ç¤ºæœ¬è¡Œå†…å®¹ä¸ä¸Šä¸€è¡Œå†…å®¹å±äºåŒä¸€ä¸ªè¯­å¥ã€‚\n2.4 ç¼–è¯‘å™¨ å¤Ÿå°†æ±‡ç¼–æŒ‡ä»¤è½¬æ¢æˆæœºå™¨æŒ‡ä»¤çš„ç¿»è¯‘ç¨‹åºæ¯ä¸€ç§CPUéƒ½æœ‰è‡ªå·±çš„æ±‡ç¼–æŒ‡ä»¤é›†ã€‚\nåœ¨å†…å­˜æˆ–ç£ç›˜ä¸Šï¼ŒæŒ‡ä»¤å’Œæ•°æ®æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œéƒ½æ˜¯äºŒè¿›åˆ¶ä¿¡æ¯\n3ã€å­˜å‚¨å™¨ éšæœºå­˜å‚¨å™¨ï¼ˆRAMï¼‰åœ¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­å¯è¯»å¯å†™ï¼Œå¿…é¡»å¸¦ç”µå­˜å‚¨\nåªè¯»å­˜å‚¨å™¨ï¼ˆROMï¼‰åœ¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­åªè¯»ï¼Œå…³æœºæ•°æ®ä¸ä¸¢å¤±\nï¼ˆä»¥ä¸Š3å¼ å›¾ç‰‡æ¥è‡ªç‹é“è€ƒç ” - è®¡ç®—æœºç»„æˆåŸç†è¯¾ä»¶ï¼‰\n4ã€æ€»çº¿ 4.1 æ€»çº¿ æ€»çº¿æ˜¯è¿æ¥å„ä¸ªéƒ¨ä»¶çš„ä¿¡æ¯ä¼ è¾“çº¿ï¼Œæ˜¯å„ä¸ªéƒ¨ä»¶å…±äº«çš„ä¼ è¾“ä»‹è´¨ã€‚\nä¸»æ¿ä¸Šæœ‰æ ¸å¿ƒå™¨ä»¶å’Œä¸€äº›ä¸»è¦å™¨ä»¶ï¼Œè¿™äº›å™¨ä»¶é€šè¿‡æ€»çº¿ï¼ˆåœ°å€æ€»çº¿ã€æ•°æ®æ€»çº¿ã€æ§åˆ¶æ€»çº¿ï¼‰ç›¸è¿ã€‚è¿™äº›å™¨ä»¶æœ‰CPUã€å­˜å‚¨å™¨ã€å¤–å›´èŠ¯ç‰‡ç»„ã€æ‰©å±•æ’æ§½ç­‰ã€‚æ‰©å±•æ’æ§½ä¸Šä¸€èˆ¬æ’æœ‰RAMå†…å­˜æ¡å’Œå„ç±»æ¥å£å¡ã€‚\næ€»çº¿æ ¹æ®ä½ç½®åˆ†ç±»ï¼š\nç‰‡å†…æ€»çº¿ï¼ˆèŠ¯ç‰‡å†…éƒ¨æ€»çº¿ï¼‰\nç³»ç»Ÿæ€»çº¿ï¼ˆè®¡ç®—æœºå„éƒ¨ä»¶ä¹‹é—´çš„ä¿¡æ¯ä¼ è¾“çº¿ï¼‰\næ ¹æ®ä¼ é€ä¿¡æ¯çš„ä¸åŒï¼Œç³»ç»Ÿæ€»çº¿ä»é€»è¾‘ä¸Šåˆåˆ†ä¸º3ç±»ï¼Œåœ°å€æ€»çº¿ã€æ§åˆ¶æ€»çº¿å’Œæ•°æ®æ€»çº¿ã€‚\nCPUè¦æƒ³è¿›è¡Œæ•°æ®çš„è¯»å†™ï¼Œå¿…é¡»å’Œå¤–éƒ¨å™¨ä»¶ï¼ˆæ ‡å‡†çš„è¯´æ³•æ˜¯èŠ¯ç‰‡ï¼‰è¿›è¡Œä»¥ä¸‹3ç±»ä¿¡æ¯çš„äº¤äº’ã€‚\nåœ°å€æ€»çº¿ï¼šCPUé€šè¿‡åœ°å€æ€»çº¿æ¥æŒ‡å®šå­˜å‚¨å•å…ƒ\n1æ ¹å¯¼çº¿å¯ä»¥ä¼ é€çš„ç¨³å®šçŠ¶æ€åªæœ‰ä¸¤ç§ï¼Œé«˜ç”µå¹³æˆ–æ˜¯ä½ç”µå¹³ã€‚ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯1æˆ–0 å›¾ç¤ºæœ‰10æ ¹åœ°å€çº¿å³ä¸€æ¬¡å¯ä»¥ä¼ è¾“10ä½ï¼Œè®¿é—®å­˜å‚¨å•å…ƒåœ°å€ä¸º1011ï¼Œå¯»å€èŒƒå›´ä¸º0 ~ (210 - 1)\næ•°æ®æ€»çº¿ï¼šCPUä¸å†…å­˜æˆ–å…¶ä»–å™¨ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€æ˜¯é€šè¿‡æ•°æ®æ€»çº¿æ¥è¿›è¡Œçš„\n8æ ¹æ•°æ®çº¿ä¸€æ¬¡å¯ä¼ é€ä¸€ä¸ª8ä½äºŒè¿›åˆ¶æ•°æ®ï¼ˆå³ä¸€ä¸ªå­—èŠ‚ï¼‰ï¼Œä¼ é€2ä¸ªå­—èŠ‚éœ€è¦ä¸¤æ¬¡ï¼›16æ ¹æ•°æ®çº¿ä¸€æ¬¡å¯ä¼ é€2ä¸ªå­—èŠ‚ï¼ˆå†…å­˜å¯¹é½æ ¸å¿ƒåŸç†ï¼‰\næ§åˆ¶æ€»çº¿ï¼šCPUå¯¹å¤–éƒ¨å™¨ä»¶çš„æ§åˆ¶æ˜¯é€šè¿‡æ§åˆ¶æ€»çº¿æ¥è¿›è¡Œçš„ã€‚\næœ‰å¤šå°‘æ ¹æ§åˆ¶æ€»çº¿ï¼Œå°±æ„å‘³ç€CPUæä¾›äº†å¯¹å¤–éƒ¨å™¨ä»¶çš„å¤šå°‘ç§æ§åˆ¶ã€‚\næ‰€ä»¥ï¼Œæ§åˆ¶æ€»çº¿çš„å®½åº¦å†³å®šäº†CPUå¯¹å¤–éƒ¨å™¨ä»¶çš„æ§åˆ¶èƒ½åŠ›ã€‚\n4.2 CPUå¯¹å­˜å‚¨å™¨çš„è¯»å†™ 1ã€ CPUé€šè¿‡åœ°å€çº¿å°†åœ°å€ä¿¡æ¯3å‘å‡ºã€‚\n2ã€ CPUé€šè¿‡æ§åˆ¶çº¿å‘å‡ºå†…å­˜è¯»å‘½ä»¤ï¼Œé€‰ä¸­å­˜å‚¨å™¨èŠ¯ç‰‡ï¼Œå¹¶é€šçŸ¥å®ƒï¼Œå°†è¦ä»ä¸­è¯»å–æ•°æ®ã€‚\n3ã€ å­˜å‚¨å™¨å°†3å·å•å…ƒä¸­çš„æ•°æ®8é€šè¿‡æ•°æ®çº¿é€å…¥CPUã€‚å†™æ“ä½œä¸è¯»æ“ä½œçš„æ­¥éª¤ç›¸ä¼¼ã€‚\nè”æƒ³ï¼šåœ¨ç»„æˆåŸç†ä¸­ç”¨å¾®æ“ä½œè¡¨ç¤ºï¼š(PC) â†’ MAR; 1 â†’ R; M(MAR) â†’ MDR; â€¦\n4.3 CPUå¯¹å¤–è®¾çš„æ§åˆ¶ CPUå¯¹å¤–è®¾éƒ½ä¸èƒ½ç›´æ¥æ§åˆ¶ï¼Œå¦‚æ˜¾ç¤ºå™¨ã€éŸ³ç®±ã€æ‰“å°æœºç­‰ã€‚\nç›´æ¥æ§åˆ¶è¿™äº›è®¾å¤‡è¿›è¡Œå·¥ä½œçš„æ˜¯æ’åœ¨æ‰©å±•æ’æ§½ä¸Šçš„æ¥å£å¡ã€‚\næ‰©å±•æ’æ§½é€šè¿‡æ€»çº¿å’ŒCPUç›¸è¿ï¼Œæ‰€ä»¥æ¥å£å¡ä¹Ÿé€šè¿‡æ€»çº¿åŒCPUç›¸è¿ã€‚CPUå¯ä»¥ç›´æ¥æ§åˆ¶è¿™äº›æ¥å£å¡ï¼Œä»è€Œå®ç°CPUå¯¹å¤–è®¾çš„é—´æ¥æ§åˆ¶ã€‚\nå¦‚ï¼šCPUæ— æ³•ç›´æ¥æ§åˆ¶æ˜¾ç¤ºå™¨ï¼Œä½†CPUå¯ä»¥ç›´æ¥æ§åˆ¶æ˜¾å¡ï¼Œä»è€Œå®ç°å¯¹æ˜¾ç¤ºå™¨çš„é—´æ¥æ§åˆ¶\n5ã€å†…å­˜åœ°å€ç©ºé—´ CPUå°†ç³»ç»Ÿä¸­å„ç±»å­˜å‚¨å™¨çœ‹ä½œä¸€ä¸ªé€»è¾‘å­˜å‚¨å™¨ï¼Œè¿™ä¸ªé€»è¾‘å­˜å‚¨å™¨å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å†…å­˜åœ°å€ç©ºé—´ã€‚\nå¯¹äºCPUï¼Œæ‰€æœ‰å­˜å‚¨å™¨ä¸­çš„å­˜å‚¨å•å…ƒéƒ½å¤„äºä¸€ä¸ªç»Ÿä¸€çš„é€»è¾‘å­˜å‚¨å™¨ä¸­ï¼Œå®ƒçš„å®¹é‡å—CPUå¯»å€èƒ½åŠ›é™åˆ¶ã€‚(æˆ–è®¸å°±æ˜¯è®¡ç»„ä¸­å­¦çš„ç»Ÿä¸€ç¼–å€å§)\næ¯ä¸ªç‰©ç†å­˜å‚¨å™¨åœ¨è¿™ä¸ªé€»è¾‘å­˜å‚¨å™¨ä¸­å æœ‰ä¸€ä¸ªåœ°å€æ®µï¼Œå³ä¸€æ®µåœ°å€ç©ºé—´ã€‚CPUåœ¨è¿™æ®µåœ°å€ç©ºé—´ä¸­è¯»å†™æ•°æ®ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ç›¸å¯¹åº”çš„ç‰©ç†å­˜å‚¨å™¨ä¸­è¯»å†™æ•°æ®ï¼ˆå¯¹ROMå†™æ— æ•ˆï¼‰ã€‚\näºŒã€å¯„å­˜å™¨ 1ã€å¯„å­˜å™¨ CPUç”±è¿ç®—å™¨ã€æ§åˆ¶å™¨ã€å¯„å­˜å™¨ç­‰å™¨ä»¶æ„æˆï¼Œè¿™äº›å™¨ä»¶é ç‰‡å†…æ€»çº¿ç›¸è¿ã€‚\nè¿ç®—å™¨è¿›è¡Œä¿¡æ¯å¤„ç†ï¼›æ§åˆ¶å™¨æ§åˆ¶å„ç§å™¨ä»¶è¿›è¡Œå·¥ä½œï¼›å¯„å­˜å™¨è¿›è¡Œä¿¡æ¯å­˜å‚¨ï¼›\n8086CPUæœ‰14ä¸ªå¯„å­˜å™¨ï¼šAXã€BXã€CXã€DXã€SIã€DIã€SPã€BPã€IPã€CSã€SSã€DSã€ESã€PSWéƒ½æ˜¯16ä½\n16ä½ç»“æ„CPUå…·æœ‰ä¸‹é¢å‡ æ–¹é¢çš„ç»“æ„ç‰¹æ€§ã€‚\nè¿ç®—å™¨ä¸€æ¬¡æœ€å¤šå¯ä»¥å¤„ç†16ä½çš„æ•°æ®ï¼› å¯„å­˜å™¨çš„æœ€å¤§å®½åº¦ä¸º16ä½ï¼› å¯„å­˜å™¨å’Œè¿ç®—å™¨ä¹‹é—´çš„é€šè·¯ä¸º16ä½ã€‚ 8086CPUå¯ä»¥ä¸€æ¬¡æ€§å¤„ç†ä»¥ä¸‹ä¸¤ç§å°ºå¯¸çš„æ•°æ®ã€‚\nå­—èŠ‚ï¼šè®°ä¸ºbyteï¼Œä¸€ä¸ªå­—èŠ‚ç”±8ä¸ªbitç»„æˆï¼Œå¯ä»¥å­˜åœ¨8ä½å¯„å­˜å™¨ä¸­ã€‚ å­—ï¼šè®°ä¸ºwordï¼Œä¸€ä¸ªå­—ç”±ä¸¤ä¸ªå­—èŠ‚ç»„æˆï¼Œå¯ä»¥å­˜åœ¨ä¸€ä¸ª16ä½å¯„å­˜å™¨ä¸­(16ä½CPU)\n8086é‡‡ç”¨å°ç«¯æ¨¡å¼ï¼šé«˜åœ°å€å­˜æ”¾é«˜ä½å­—èŠ‚ï¼Œä½åœ°å€å­˜æ”¾ä½ä½å­—èŠ‚ã€‚ 2ã€é€šç”¨å¯„å­˜å™¨ é€šç”¨å¯„å­˜å™¨ï¼šé€šå¸¸ç”¨æ¥å­˜æ”¾ä¸€èˆ¬æ€§çš„æ•°æ®ï¼Œæœ‰AXã€BXã€CXã€DXå®ƒä»¬å¯åˆ†ä¸ºä¸¤ä¸ªå¯ç‹¬ç«‹ä½¿ç”¨çš„8ä½å¯„å­˜å™¨ï¼Œè¿˜æœ‰SIï¼ŒDIï¼ŒBPï¼ŒSPä¸èƒ½åˆ†ä¸ºé«˜ä½å­—èŠ‚\nåœ¨è¿›è¡Œæ•°æ®ä¼ é€æˆ–è¿ç®—æ—¶ï¼Œè¦æ³¨æ„æŒ‡ä»¤çš„ä¸¤ä¸ªæ“ä½œå¯¹è±¡çš„ä½æ•°åº”å½“æ˜¯ä¸€è‡´çš„\nä¸€ä¸ª8ä½å¯„å­˜å™¨æ‰€èƒ½å­˜å‚¨çš„æ•°æ®èŒƒå›´æ˜¯0 ~ 28-1ã€‚\n3ã€8086CPUç»™å‡ºç‰©ç†åœ°å€çš„æ–¹æ³• 8086CPUæœ‰20ä½åœ°å€æ€»çº¿ï¼Œå¯ä»¥ä¼ é€20ä½åœ°å€ï¼Œè¾¾åˆ°1MBå¯»å€èƒ½åŠ›ã€‚\n8086CPUåˆæ˜¯16ä½ç»“æ„ï¼Œåœ¨å†…éƒ¨ä¸€æ¬¡æ€§å¤„ç†ã€ä¼ è¾“ã€æš‚æ—¶å­˜å‚¨çš„åœ°å€ä¸º16ä½ã€‚\nä»8086CPUçš„å†…éƒ¨ç»“æ„æ¥çœ‹ï¼Œå¦‚æœå°†åœ°å€ä»å†…éƒ¨ç®€å•åœ°å‘å‡ºï¼Œé‚£ä¹ˆå®ƒåªèƒ½é€å‡º16ä½çš„åœ°å€ï¼Œè¡¨ç°å‡ºçš„å¯»å€èƒ½åŠ›åªæœ‰64KBã€‚\n8086CPUé‡‡ç”¨ä¸€ç§åœ¨å†…éƒ¨ç”¨ä¸¤ä¸ª16ä½åœ°å€åˆæˆçš„æ–¹æ³•æ¥å½¢æˆä¸€ä¸ª20ä½çš„ç‰©ç†åœ°å€ã€‚\nå½“8086CPUè¦è¯»å†™å†…å­˜æ—¶ï¼š\nCPUä¸­çš„ç›¸å…³éƒ¨ä»¶æä¾›ä¸¤ä¸ª16ä½çš„åœ°å€ï¼Œä¸€ä¸ªç§°ä¸ºæ®µåœ°å€ï¼Œå¦ä¸€ä¸ªç§°ä¸ºåç§»åœ°å€ï¼› åœ°å€åŠ æ³•å™¨å°†ä¸¤ä¸ª16ä½åœ°å€åˆæˆä¸ºä¸€ä¸ª20ä½çš„ç‰©ç†åœ°å€ï¼› åœ°å€åŠ æ³•å™¨é‡‡ç”¨ç‰©ç†åœ°å€ = æ®µåœ°å€Ã—16 + åç§»åœ°å€çš„æ–¹æ³•ç”¨æ®µåœ°å€å’Œåç§»åœ°å€åˆæˆç‰©ç†åœ°å€ã€‚\nä¾‹å¦‚ï¼Œ8086CPUè¦è®¿é—®åœ°å€ä¸º123C8Hçš„å†…å­˜å•å…ƒï¼Œ1230Hå·¦ç§»ä¸€ä½(ç©ºå‡º4ä½)åŠ ä¸Š00C8Håˆæˆ123C8H\n4ã€æ®µå¯„å­˜å™¨ æˆ‘ä»¬å¯ä»¥å°†ä¸€æ®µå†…å­˜å®šä¹‰ä¸ºä¸€ä¸ªæ®µï¼Œç”¨ä¸€ä¸ªæ®µåœ°å€æŒ‡ç¤ºæ®µï¼Œç”¨åç§»åœ°å€è®¿é—®æ®µå†…çš„å•å…ƒï¼Œå¯ä»¥ç”¨åˆ†æ®µçš„æ–¹å¼æ¥ç®¡ç†å†…å­˜ã€‚\nç”¨ä¸€ä¸ªæ®µå­˜æ”¾æ•°æ®ï¼Œå°†å®ƒå®šä¹‰ä¸ºâ€œæ•°æ®æ®µâ€ï¼›\nç”¨ä¸€ä¸ªæ®µå­˜æ”¾ä»£ç ï¼Œå°†å®ƒå®šä¹‰ä¸ºâ€œä»£ç æ®µâ€ï¼›\nç”¨ä¸€ä¸ªæ®µå½“ä½œæ ˆï¼Œå°†å®ƒå®šä¹‰ä¸ºâ€œæ ˆæ®µâ€ã€‚\næ³¨æ„ï¼š\nä¸€ä¸ªæ®µçš„èµ·å§‹åœ°å€ä¸€å®šæ˜¯16çš„å€æ•°ï¼› åç§»åœ°å€ä¸º16ä½ï¼Œå˜åŒ–èŒƒå›´ä¸º0-FFFFHï¼Œæ‰€ä»¥ä¸€ä¸ªæ®µçš„é•¿åº¦æœ€å¤§ä¸º64KBã€‚ CPUå¯ä»¥ç”¨ä¸åŒçš„æ®µåœ°å€å’Œåç§»åœ°å€å½¢æˆåŒä¸€ä¸ªç‰©ç†åœ°å€ã€‚ æ®µå¯„å­˜å™¨ï¼š8086CPUæœ‰4ä¸ªæ®µå¯„å­˜å™¨ï¼šCSã€DSã€SSã€ESï¼Œæä¾›å†…å­˜å•å…ƒçš„æ®µåœ°å€ã€‚\n4.1 CSå’ŒIP CSä¸ºä»£ç æ®µå¯„å­˜å™¨ï¼ŒIPä¸ºæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼Œ\nCPUå°†CSã€IPä¸­çš„å†…å®¹å½“ä½œæŒ‡ä»¤çš„æ®µåœ°å€å’Œåç§»åœ°å€,ç”¨å®ƒä»¬åˆæˆæŒ‡ä»¤çš„ç‰©ç†åœ°å€,\nCPUå°†CS:IPæŒ‡å‘çš„å†…å®¹å½“ä½œæŒ‡ä»¤æ‰§è¡Œã€‚(å³PC)\n8086CPUçš„å·¥ä½œè¿‡ç¨‹ç®€è¦æè¿°\nä»CS:IPæŒ‡å‘çš„å†…å­˜å•å…ƒè¯»å–æŒ‡ä»¤ï¼Œè¯»å–çš„æŒ‡ä»¤è¿›å…¥æŒ‡ä»¤ç¼“å†²å™¨ï¼› IP=IP+æ‰€è¯»å–æŒ‡ä»¤çš„é•¿åº¦ï¼Œä»è€ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼› æ‰§è¡ŒæŒ‡ä»¤ã€‚è½¬åˆ°æ­¥éª¤1ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚ åœ¨8086CPUåŠ ç”µå¯åŠ¨æˆ–å¤ä½åï¼ˆå³CPUåˆšå¼€å§‹å·¥ä½œæ—¶ï¼‰CSå’ŒIPè¢«è®¾ç½®ä¸ºCS=FFFFHï¼ŒIP=0000Hï¼Œå³åœ¨8086PCæœºåˆšå¯åŠ¨æ—¶ï¼ŒFFFF0Hå•å…ƒä¸­çš„æŒ‡ä»¤æ˜¯8086PCæœºå¼€æœºåæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚\n8086CPUæä¾›è½¬ç§»æŒ‡ä»¤ä¿®æ”¹CSã€IPçš„å†…å®¹ã€‚\njmp æ®µåœ°å€:åç§»åœ°å€ï¼šç”¨æŒ‡ä»¤ä¸­ç»™å‡ºçš„æ®µåœ°å€ä¿®æ”¹CSï¼Œåç§»åœ°å€ä¿®æ”¹IPã€‚å¦‚ï¼šjmp 2AE3:3\njmp æŸä¸€åˆæ³•å¯„å­˜å™¨ï¼šä»…ä¿®æ”¹IPçš„å†…å®¹ã€‚å¦‚ï¼šjmp axã€‚åœ¨å«ä¹‰ä¸Šå¥½ä¼¼ï¼šmov IPï¼Œax\n8086CPUä¸æ”¯æŒå°†æ•°æ®ç›´æ¥é€å…¥æ®µå¯„å­˜å™¨çš„æ“ä½œï¼Œè¿™å±äº8086CPUç¡¬ä»¶è®¾è®¡\n4.2 DS å’Œ [address] DSå¯„å­˜å™¨ï¼šé€šå¸¸ç”¨æ¥å­˜æ”¾è¦è®¿é—®æ•°æ®çš„æ®µåœ°å€\n[address]è¡¨ç¤ºä¸€ä¸ªåç§»åœ°å€ä¸ºaddressçš„å†…å­˜å•å…ƒï¼Œæ®µåœ°å€é»˜è®¤æ”¾åœ¨dsä¸­\né€šè¿‡æ•°æ®æ®µæ®µåœ°å€å’Œåç§»åœ°å€å³å¯å®šä½å†…å­˜å•å…ƒã€‚\nmov bx, 1000H ;8086CPUä¸æ”¯æŒå°†æ•°æ®ç›´æ¥é€å…¥æ®µå¯„å­˜å™¨çš„æ“ä½œ mov ds, bx ;dså­˜æ”¾æ•°æ®æ®µåœ°å€ mov [0], al ;å°†alæ•°æ®ï¼ˆ1å­—èŠ‚ï¼‰å­˜åˆ°1000Hæ®µçš„0åç§»åœ°å€å¤„ï¼Œå³10000H mov ax, [2] ;å°†æ•°æ®æ®µåç§»åœ°å€2å¤„çš„ä¸€ä¸ªå­—ï¼ˆ8086ä¸º2å­—èŠ‚ï¼‰å­˜æ”¾åˆ°axå¯„å­˜å™¨ add cx, [4] ;å°†åç§»åœ°å€4å¤„çš„ä¸€ä¸ªå­—æ•°æ®åŠ ä¸Šcxå¯„å­˜å™¨æ•°æ®æ”¾åˆ°cxå¯„å­˜å™¨ sub dx, [6] ;dxå¯„å­˜å™¨æ•°æ®å‡å»æ•°æ®æ®µåç§»åœ°å€6å¤„çš„å­—æ•°æ®å­˜åˆ°dx 4.3 SS å’Œ SP åœ¨åŸºäº8086CPUç¼–ç¨‹çš„æ—¶å€™ï¼Œå¯ä»¥å°†ä¸€æ®µå†…å­˜å½“ä½œæ ˆæ¥ä½¿ç”¨ã€‚\næ ˆæ®µå¯„å­˜å™¨SSï¼Œå­˜æ”¾æ®µåœ°å€ï¼ŒSPå¯„å­˜å™¨å­˜æ”¾åç§»åœ°å€ï¼Œä»»æ„æ—¶åˆ»ï¼ŒSS:SPæŒ‡å‘æ ˆé¡¶å…ƒç´ \n8086CPUä¸­ï¼Œå…¥æ ˆæ—¶ï¼Œæ ˆé¡¶ä»é«˜åœ°å€å‘ä½åœ°å€æ–¹å‘å¢é•¿ã€‚\npush axè¡¨ç¤ºå°†å¯„å­˜å™¨axä¸­çš„æ•°æ®é€å…¥æ ˆä¸­ï¼Œç”±ä¸¤æ­¥å®Œæˆã€‚\nSP=SP-2ï¼ŒSS:SPæŒ‡å‘å½“å‰æ ˆé¡¶å‰é¢çš„å•å…ƒï¼Œä»¥å½“å‰æ ˆé¡¶å‰é¢çš„å•å…ƒä¸ºæ–°çš„æ ˆé¡¶ï¼› å°†axä¸­çš„å†…å®¹é€å…¥SS:SPæŒ‡å‘çš„å†…å­˜å•å…ƒå¤„ï¼ŒSS:SPæ­¤æ—¶æŒ‡å‘æ–°æ ˆé¡¶ã€‚\npop axè¡¨ç¤ºä»æ ˆé¡¶å–å‡ºæ•°æ®é€å…¥axï¼Œç”±ä»¥ä¸‹ä¸¤æ­¥å®Œæˆã€‚\nå°†SS:SPæŒ‡å‘çš„å†…å­˜å•å…ƒå¤„çš„æ•°æ®é€å…¥axä¸­ï¼› SP=SP+2ï¼ŒSS:SPæŒ‡å‘å½“å‰æ ˆé¡¶ä¸‹é¢çš„å•å…ƒï¼Œä»¥å½“å‰æ ˆé¡¶ä¸‹é¢çš„å•å…ƒä¸ºæ–°çš„æ ˆé¡¶ã€‚ å®éªŒ\nå°†10000H~1000FHè¿™æ®µç©ºé—´å½“ä½œæ ˆï¼Œåˆå§‹çŠ¶æ€æ ˆæ˜¯ç©ºçš„ï¼› è®¾ç½®AX=001AHï¼ŒBX=001BHï¼› å°†AXã€BXä¸­çš„æ•°æ®å…¥æ ˆï¼› ç„¶åå°†AXã€BXæ¸…é›¶ï¼› ä»æ ˆä¸­æ¢å¤AXã€BXåŸæ¥çš„å†…å®¹ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 mov ax, 1000H mov ss, ax mov sp, 0010H ;åˆå§‹åŒ–æ ˆé¡¶ mov ax, 001AH mov bx, 001BH push ax push bx ;axã€bxå…¥æ ˆ sub ax, ax ;å°†axæ¸…é›¶ï¼Œä¹Ÿå¯ä»¥ç”¨mov axï¼Œ0ï¼Œ ;sub axï¼Œaxçš„æœºå™¨ç ä¸º2ä¸ªå­—èŠ‚ï¼Œ ;mov axï¼Œ0çš„æœºå™¨ç ä¸º3ä¸ªå­—èŠ‚ã€‚ sub bx, bx pop bx ;ä»æ ˆä¸­æ¢å¤axã€bxåŸæ¥çš„æ•°æ® pop ax ; [1] ã€Šæ±‡ç¼–è¯­è¨€ã€‹ç‹çˆ½\n[2] ã€Šx86æ±‡ç¼–è¯­è¨€ï¼šä»å®æ¨¡å¼åˆ°ä¿æŠ¤æ¨¡å¼ï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹æå¿ ã€ç‹æ™“æ³¢ã€ä½™æ´\n[3] ã€ŠIntelÂ® 64 and IA-32 Architectures Software Developerâ€™s Manual Volume 3A: System Programming Guide, Part 1ã€‹\n[4] ã€Šæ±‡ç¼–è¯­è¨€ç®€æ˜æ•™ç¨‹ã€‹é’±æ™“æ·\n[5] 8086CPUä¸­14ä¸ªå¯„å­˜å™¨çš„è¯¦è§£_åŸºå€å¯„å­˜å™¨\n","pubDate":"2022-01-13","title":"ã€x86æ±‡ç¼–è¯­è¨€01ã€‘8086ä½“ç³»ç»“æ„ä¸æ±‡ç¼–åŸºç¡€"},{"link":"https://cnjslw.github.io/posts/%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","plain":"æ•´æ•°ç±»å‹ æµ®ç‚¹æ•°ç±»å‹ å­—ç¬¦å’Œå­—ç¬¦ä¸² åœ°å€ã€æŒ‡é’ˆå’Œå¼•ç”¨ å¸¸é‡ å˜é‡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 int c = 10; void func(int a ) { int b = ++a; c++; } int main() { { int b = 100; func(b); c--; } { int b = 200; func(b); c+=3; } return 0; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 c: .long 10 # å®šä¹‰ä¸€ä¸ªå˜é‡cä¸º10ï¼Œ.longæ˜¯å®šä¹‰é•¿æ•´å‹å˜é‡çš„æŒ‡ä»¤ func(int): push ebp # å°†ebpå¯„å­˜å™¨çš„å€¼ä¿å­˜åˆ°æ ˆä¸­ mov ebp, esp # å°†espå¯„å­˜å™¨çš„å€¼èµ‹ç»™ebpï¼Œç›¸å½“äºä¿å­˜äº†å½“å‰å‡½æ•°çš„æ ˆæŒ‡é’ˆ sub esp, 16 # åœ¨æ ˆä¸Šä¸ºå±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°åˆ†é…16å­—èŠ‚çš„ç©ºé—´ï¼Œespå¯„å­˜å™¨æŒ‡å‘æ–°çš„æ ˆé¡¶ä½ç½® add DWORD PTR [ebp+8], 1 # å–å‡ºè°ƒç”¨å‡½æ•°æ—¶å‹å…¥æ ˆä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶å°†å…¶åŠ 1 mov eax, DWORD PTR [ebp+8] # å°†å‚æ•°èµ‹å€¼ç»™eaxå¯„å­˜å™¨ mov DWORD PTR [ebp-4], eax # å°†eaxçš„å€¼ä¼ é€’ç»™å±€éƒ¨å˜é‡[ebp-4] mov eax, DWORD PTR c # å°†å˜é‡cçš„å€¼èµ‹ç»™eaxå¯„å­˜å™¨ add eax, 1 # å°†eaxçš„å€¼åŠ 1 mov DWORD PTR c, eax # å°†eaxçš„å€¼èµ‹ç»™å˜é‡c nop # ç©ºæŒ‡ä»¤ leave # æ¢å¤æ ˆæŒ‡é’ˆ ret # è¿”å›å‡½æ•°ç»“æœ main: push ebp # å°†ebpå¯„å­˜å™¨çš„å€¼ä¿å­˜åˆ°æ ˆä¸­ mov ebp, esp # å°†espå¯„å­˜å™¨çš„å€¼èµ‹ç»™ebpï¼Œç›¸å½“äºä¿å­˜äº†å½“å‰å‡½æ•°çš„æ ˆæŒ‡é’ˆ sub esp, 16 # åœ¨æ ˆä¸Šä¸ºå±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°åˆ†é…16å­—èŠ‚çš„ç©ºé—´ï¼Œespå¯„å­˜å™¨æŒ‡å‘æ–°çš„æ ˆé¡¶ä½ç½® mov DWORD PTR [ebp-4], 100 # å°†100èµ‹å€¼ç»™å±€éƒ¨å˜é‡[ebp-4] push DWORD PTR [ebp-4] # å°†[ebp-4]çš„å€¼å‹å…¥æ ˆä¸­ï¼Œä½œä¸ºå‡½æ•°è°ƒç”¨çš„å‚æ•° call func(int) # è°ƒç”¨å‡½æ•°func add esp, 4 # é‡Šæ”¾æ ˆç©ºé—´ mov eax, DWORD PTR c # å°†å˜é‡cçš„å€¼èµ‹ç»™eaxå¯„å­˜å™¨ sub eax, 1 # å°†eaxçš„å€¼å‡1 mov DWORD PTR c, eax # å°†eaxçš„å€¼èµ‹ç»™å˜é‡c mov DWORD PTR [ebp-8], 200 # å°†200èµ‹å€¼ç»™å±€éƒ¨å˜é‡[ebp-8] push DWORD PTR [ebp-8] # å°†[ebp-8]çš„å€¼å‹å…¥æ ˆä¸­ï¼Œä½œä¸ºå‡½æ•°è°ƒç”¨çš„å‚æ•° call func(int) # è°ƒç”¨å‡½æ•°func add esp, 4 # é‡Šæ”¾æ ˆç©ºé—´ mov eax, DWORD PTR c # å°†å˜é‡cçš„å€¼èµ‹ç»™eaxå¯„å­˜å™¨ add eax, 3 # å°†eaxçš„å€¼åŠ 3 mov DWORD PTR c, eax # å°†eaxçš„å€¼èµ‹ç»™å˜é‡c mov eax, 0 # å°†eaxå¯„å­˜å™¨æ¸…é›¶ leave # æ¢å¤æ ˆæŒ‡é’ˆ ret # è¿”å›å‡½æ•°ç»“æœ ","pubDate":"2021-11-01","title":"ã€ä»æ±‡ç¼–çš„è§†è§’é‡å­¦C++ 01ã€‘åŸºæœ¬æ•°æ®ç±»å‹çš„è¡¨ç°å½¢å¼"},{"link":"https://cnjslw.github.io/posts/%E5%A4%9A%E6%80%81/","plain":"OOPçš„æ ¸å¿ƒæ€æƒ³æ˜¯å¤šæ€æ€§ï¼ˆpolymorphismï¼‰ï¼ˆåŠ¨æ€ç»‘å®šæ˜¯å¤šæ€æ€§å¾—ä»¥å®ç°çš„é‡è¦å› ç´ ï¼‰\nä¸€ã€é™æ€ç±»å‹å’ŒåŠ¨æ€ç±»å‹ åŠ¨æ€ç±»å‹: å˜é‡æˆ–è¡¨è¾¾å¼è¡¨ç¤ºçš„å†…å­˜ä¸­çš„å¯¹è±¡ç±»å‹ï¼Œç›´åˆ°è¿è¡Œæ—¶æ‰å¯è§ é™æ€ç±»å‹: å˜é‡ç”³æ˜çš„ç±»å‹æˆ–è¡¨è¾¾å¼ç”Ÿæˆçš„ç±»å‹ï¼Œåœ¨ç¼–è¯‘æ—¶å°±å·²çŸ¥ å¯ä»¥å°†åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ç»‘å®šåˆ°æ´¾ç”Ÿç±»å¯¹è±¡ä¸Šã€‚ å¦‚æœä¸æ˜¯æŒ‡é’ˆä¹Ÿä¸æ˜¯å¼•ç”¨ï¼Œåˆ™å®ƒçš„åŠ¨æ€ç±»å‹å’Œé™æ€ç±»å‹æ°¸è¿œä¿æŒä¸€è‡´ ä¸å­˜åœ¨ä»åŸºç±»å‘æ´¾ç”Ÿç±»çš„éšå¼ç±»å‹è½¬æ¢ã€‚ æ´¾ç”Ÿç±»å‘åŸºç±»çš„è‡ªåŠ¨ç±»å‹è½¬æ¢åªå¯¹æŒ‡é’ˆæˆ–å¼•ç”¨ç±»å‹æœ‰æ•ˆï¼Œå¯¹è±¡ä¹‹é—´ä¸å­˜åœ¨ç±»å‹è½¬æ¢ã€‚å¯¹è±¡ä¹‹é—´çš„è½¬æ¢ä¼šå¯¼è‡´æŸäº›å¯¹è±¡è¢«åˆ‡æ‰(sliced down)ã€‚æ‰€è°“çš„åˆ‡æ‰ï¼Œå°±æ˜¯å½“æ´¾ç”Ÿç±»å’ŒåŸºç±»ä¹‹é—´é€šè¿‡æ‹·è´æ„é€ ï¼Œèµ‹å€¼æ„é€ ç­‰è¿›è¡Œè½¬åŒ–æ—¶ï¼Œæœ‰ä¸€äº›æˆå‘˜ä¼šå› ä¸ºæ•°æ®æˆå‘˜çš„ä¸åŒå¯¼è‡´æˆå‘˜ä¸¢å¤±ï¼Œæœ‰ç‚¹åƒè¢«åˆ‡æ‰äº†ã€‚ äºŒã€è™šå‡½æ•°ä¸åŠ¨æ€ç»‘å®š 1ã€å¦‚ä½•å®ç°å¤šæ€ åŸºç±»é€šè¿‡åœ¨å…¶æˆå‘˜å‡½æ•°çš„å£°æ˜è¯­å¥å‰åŠ ä¸Šå…³é”®å­—virtualä½¿å¾—è¯¥å‡½æ•°æ‰§è¡ŒåŠ¨æ€ç»‘å®šã€‚ ä»»ä½•éé™æ€å‡½æ•°éƒ½å¯ä»¥æ˜¯è™šå‡½æ•°ã€‚å…³é”®å­—virtualåªèƒ½å‡ºç°åœ¨å†…å†…éƒ¨çš„å£°æ˜è¯­å¥ä¹‹å‰ï¼Œè€Œä¸èƒ½ç”¨äºç±»å¤–éƒ¨çš„å‡½æ•°å®šä¹‰ã€‚å¦‚æœåŸºç±»æŠŠä¸€ä¸ªå‡½æ•°å£°æ˜æˆè™šå‡½æ•°ï¼Œåˆ™è¯¥å‡½æ•°åœ¨æ´¾ç”Ÿç±»ä¸­éšå¼çš„ä¹Ÿæ˜¯è™šå‡½æ•°ã€‚å¦‚æœæˆå‘˜å‡½æ•°æ²¡æœ‰è¢«å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œåˆ™è§£æè¿‡ç¨‹å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶è€Œéè¿è¡Œæ—¶ã€‚\nå½“ä¸”ä»…å½“å¯¹é€šè¿‡æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œæ‰ä¼šåœ¨è¿è¡Œæ—¶è§£æè¯¥è°ƒç”¨ï¼Œä¹Ÿåªæœ‰åœ¨è¿™ç§æƒ…å†µä¸‹å¯¹è±¡çš„åŠ¨æ€ç±»å‹æ‰æœ‰å¯èƒ½ä¸é™æ€ç±»å‹ä¸åŒã€‚\næ´¾ç”Ÿç±»å¿…é¡»åœ¨å…¶å†…éƒ¨å¯¹æ‰€æœ‰é‡æ–°å®šä¹‰çš„è™šå‡½æ•°è¿›è¡Œå£°æ˜ã€‚å¯ä»¥åœ¨å‡½æ•°ä¹‹å‰åŠ ä¸Švirtualå…³é”®å­—ï¼Œä¹Ÿå¯ä»¥ä¸åŠ ã€‚ æ´¾ç”Ÿç±»å‡½æ•°å¦‚æœè¦†ç›–äº†æŸä¸ªç»§æ‰¿è€Œæ¥çš„è™šå‡½æ•°, å®ƒçš„å½¢å‚å¿…é¡»ä¸è¢«å®ƒè¦†ç›–çš„åŸºç±»å‡½æ•°å®Œå…¨ä¸€è‡´,è¿”å›ç±»å‹å¿…é¡»ä¸åŸºç±»å‡½æ•°åŒ¹é…ï¼Œé™¤éè¿”å›ç±»æœ¬èº«çš„æŒ‡é’ˆæˆ–å¼•ç”¨æ—¶ï¼Œä¸è¦æ±‚ä¸€è‡´ï¼Œä½†æ˜¯è¦æ±‚è¦æ±‚ä¸¤ä¸ªç±» å¦‚æœè™šå‡½æ•°ä½¿ç”¨é»˜è®¤å®å‚ï¼Œåˆ™åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­å®šä¹‰çš„é»˜è®¤å®å‚æœ€å¥½ä¸€è‡´ã€‚ä¹‹é—´å¯ä»¥è¿›è¡Œç±»å‹è½¬åŒ– 2ã€overrideå’Œfinalå…³é”®å­— C++11æ–°æ ‡å‡†å…è®¸æ´¾ç”Ÿç±»æ˜¾å¼åœ°æ³¨æ˜å®ƒå°†ä½¿ç”¨å“ªä¸ªæˆå‘˜å‡½æ•°æ”¹å†™åŸºç±»çš„è™šå‡½æ•°ï¼Œå³åœ¨å‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¹‹ååŠ ä¸€ä¸ªoverrideå…³é”®å­—ã€‚ å¦‚æœæˆ‘ä»¬æƒ³è¦†ç›–æŸä¸ªè™šå‡½æ•°ï¼Œä½†ä¸å°å¿ƒæŠŠå½¢å‚åˆ—è¡¨å¼„é”™äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¸ä¼šè¦†ç›–åŸºç±»ä¸­çš„è™šå‡½æ•°ã€‚åŠ ä¸Šoverrideå¯ä»¥æ˜ç¡®ç¨‹åºå‘˜çš„æ„å›¾ï¼Œè®©ç¼–è¯‘å™¨å¸®å¿™ç¡®è®¤å‚æ•°åˆ—è¡¨æ˜¯å¦å‡ºé”™ã€‚ï¼ˆåœ¨æ´¾ç”Ÿç±»ä¸­ç”³æ˜ä¸€ä¸ªé™¤äº†å‚æ•°åˆ—è¡¨ä¹‹å¤–ä¸åŸºç±»ä¸­è™šå‡½æ•°ä¸€è‡´çš„å‡½æ•°æ˜¯åˆæ³•ï¼Œä½†æ˜¯ä¸è¦è¿™æ ·åšï¼Œä¸ºäº†é˜²æ­¢ä¸æ˜¯åˆ»æ„æ„é€ è¿™æ ·çš„å‡½æ•°ï¼Œè€Œæ˜¯å†™é”™äº†ï¼Œè®¾ç½®äº†overrideå…³é”®å­—ï¼‰ å¦‚æœæŸä¸ªå‡½æ•°è¢«æŒ‡å®šä¸ºfinalï¼Œåˆ™ä¹‹åçš„ä»»ä½•å°è¯•è¦†ç›–å‡½æ•°çš„æ“ä½œéƒ½å°†å¼•å‘é”™è¯¯ 3ã€ç¦æ­¢åŠ¨æ€ç»‘å®š åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›å¯¹è™šå‡½æ•°çš„è°ƒç”¨ä¸è¦è¿›è¡ŒåŠ¨æ€ç»‘å®šï¼Œè€Œæ˜¯å¼ºè¿«å…¶æ‰§è¡Œè™šå‡½æ•°çš„æŸä¸ªç‰¹å®šç‰ˆæœ¬ã€‚ä½¿ç”¨ä½œç”¨åŸŸè¿ç®—ç¬¦ï¼ˆ::ï¼‰å¯ä»¥å®ç°ã€‚\n1 double undiscounted = baseP-\u0026gt;Quote::net_price(42); ä¸‰ã€å¤šæ€å®ä¾‹ ç¼–è¯‘äº§ç”Ÿçš„ä»£ç å°†åœ¨è¿è¡Œæ—¶ç¡®å®šä½¿ç”¨è™šå‡½æ•°çš„å“ªä¸ªç‰ˆæœ¬ï¼Œåˆ¤æ–­çš„ä¾æ®æ˜¯è¯¥æŒ‡é’ˆæ‰€ç»‘å®šå¯¹è±¡çš„çœŸå®ç±»å‹å³åŠ¨æ€ç±»å‹ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 class Base{ public: virtual itn fcn(); }; class D1:public Base{ public: int fcn(int); virtual void f2(); }; class D2:public D1{ int fcn(int); int fcn(); void f2(); } Base bobj ; D1 dlobj ; D2 d1obj; Base *bpl = \u0026amp;bobj, *bp2 = \u0026amp;dlobj, *bp3 = \u0026amp;d2obj; bpl-\u0026gt;fcn (); bp2-\u0026gt;fcn (); bp3-\u0026gt;fcn (); D1 *dlp = \u0026amp;dlobj; D2 *d2p = \u0026amp;d2obj; bp2-\u0026gt;f2();\tdlp-\u0026gt;f2() ;\td2p-\u0026gt;f2() ;\tå››ã€æŠ½è±¡åŸºç±» çº¯è™šå‡½æ•°ï¼ˆpure virtualï¼‰ï¼šæ¸…æ™°åœ°å‘Šè¯‰ç”¨æˆ·å½“å‰çš„å‡½æ•°æ˜¯æ²¡æœ‰å®é™…æ„ä¹‰çš„ã€‚çº¯è™šå‡½æ•°æ— éœ€å®šä¹‰ï¼Œåªç”¨åœ¨å‡½æ•°ä½“çš„ä½ç½®å‰ä¹¦å†™=0å°±å¯ä»¥å°†ä¸€ä¸ªè™šå‡½æ•°è¯´æ˜ä¸ºçº¯è™šå‡½æ•°ã€‚ å«æœ‰çº¯è™šå‡½æ•°çš„ç±»æ˜¯æŠ½è±¡åŸºç±»ï¼ˆabstract base classï¼‰ã€‚ä¸èƒ½åˆ›å»ºæŠ½è±¡åŸºç±»çš„å¯¹è±¡ã€‚ äº”ã€å¹¿ä¹‰çš„å¤šæ€ 1.é‡è½½å¤šæ€ï¼ˆç¼–è¯‘æœŸé—´ï¼‰ 1.1 å‡½æ•°é‡è½½ 1.2 è¿ç®—ç¬¦é‡è½½ 2.å­ç±»å‹é‡è½½ï¼ˆè¿è¡ŒæœŸé—´ï¼‰ 2.1 è™šå‡½æ•° è§ä¸Šé¢å†…å®¹\n3.å‚æ•°å¤šæ€æ€§ï¼ˆç¼–è¯‘å™¨ï¼‰ 3.1 ç±»æ¨¡æ¿ 3.2 å‡½æ•°æ¨¡æ¿ 4.å¼ºåˆ¶å¤šæ€ï¼ˆç¼–è¯‘æœŸé—´ã€è¿è¡ŒæœŸï¼‰ 4.1 åŸºæœ¬ç±»å‹è½¬æ¢ 4.2 è‡ªå®šä¹‰ç±»å‹è½¬æ¢ ","pubDate":"2021-10-27","title":"ã€C++ Primer(edition 5) 15ã€‘å¤šæ€"},{"link":"https://cnjslw.github.io/posts/%E7%BB%A7%E6%89%BF/","plain":"ä¸€ã€æ¦‚è¿° é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼ˆobject-oriented programmingï¼‰çš„æ ¸å¿ƒæ€æƒ³æ˜¯æ•°æ®æŠ½è±¡ã€ç»§æ‰¿å’Œå¤šæ€ã€‚\nç»§æ‰¿ï¼ˆinheritanceï¼‰ï¼š\né€šè¿‡ç»§æ‰¿è”ç³»åœ¨ä¸€èµ·çš„ç±»æ„æˆä¸€ç§å±‚æ¬¡å…³ç³»ã€‚ é€šå¸¸åœ¨å±‚æ¬¡å…³ç³»çš„æ ¹éƒ¨æœ‰ä¸€ä¸ªåŸºç±»ï¼ˆbase classï¼‰ã€‚ å…¶ä»–ç±»ç›´æ¥æˆ–è€…ç®€ä»‹ä»åŸºç±»ç»§æ‰¿è€Œæ¥ï¼Œè¿™äº›ç»§æ‰¿å¾—åˆ°çš„ç±»æˆä¸ºæ´¾ç”Ÿç±»ï¼ˆderived classï¼‰ã€‚ åŸºç±»è´Ÿè´£å®šä¹‰åœ¨å±‚æ¬¡å…³ç³»ä¸­æ‰€æœ‰ç±»å…±åŒæ‹¥æœ‰çš„æˆå‘˜ï¼Œè€Œæ¯ä¸ªæ´¾ç”Ÿç±»å®šä¹‰å„è‡ªç‰¹æœ‰çš„æˆå‘˜ã€‚ å¯¹äºæŸäº›å‡½æ•°ï¼ŒåŸºç±»å¸Œæœ›å®ƒçš„æ´¾ç”Ÿç±»è‡ªå®šä¹‰é€‚åˆè‡ªå·±çš„ç‰ˆæœ¬ï¼Œæ­¤æ—¶åŸºç±»å°±å°†è¿™äº›å‡½æ•°å£°æ˜æˆè™šå‡½æ•°ï¼ˆvirtual functionï¼‰ã€‚ æ´¾ç”Ÿç±»å¿…é¡»é€šè¿‡ä½¿ç”¨ç±»æ´¾ç”Ÿåˆ—è¡¨ï¼ˆclass derivation listï¼‰æ˜ç¡®æŒ‡å‡ºå®ƒæ˜¯ä»å“ªä¸ªåŸºç±»ç»§æ‰¿è€Œæ¥ã€‚å½¢å¼ï¼šä¸€ä¸ªå†’å·ï¼Œåé¢ç´§è·Ÿä»¥é€—å·åˆ†éš”çš„åŸºç±»åˆ—è¡¨ï¼Œæ¯ä¸ªåŸºç±»å‰éƒ½å¯ä»¥æœ‰è®¿é—®è¯´æ˜ç¬¦ã€‚class Bulk_quote : public Quote{}; æ´¾ç”Ÿç±»å¿…é¡»åœ¨å…¶å†…éƒ¨å¯¹æ‰€æœ‰é‡æ–°å®šä¹‰çš„è™šå‡½æ•°è¿›è¡Œå£°æ˜ã€‚å¯ä»¥åœ¨å‡½æ•°ä¹‹å‰åŠ ä¸Švirtualå…³é”®å­—ï¼Œä¹Ÿå¯ä»¥ä¸åŠ ã€‚C++11æ–°æ ‡å‡†å…è®¸æ´¾ç”Ÿç±»æ˜¾å¼åœ°æ³¨æ˜å®ƒå°†ä½¿ç”¨å“ªä¸ªæˆå‘˜å‡½æ•°æ”¹å†™åŸºç±»çš„è™šå‡½æ•°ï¼Œå³åœ¨å‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¹‹ååŠ ä¸€ä¸ªoverrideå…³é”®å­—ã€‚ ç»§æ‰¿æ˜¯ä¸€ç§å¼ºå¤§çš„å±æ€§é‡ç”¨æ–¹å¼ï¼Œæ˜¯é€šå‘å¤šæ€çš„è·³æ¿ åŠ¨æ€ç»‘å®šï¼ˆdynamic bindingï¼Œåˆç§°è¿è¡Œæ—¶ç»‘å®šï¼‰ï¼š\nä½¿ç”¨åŒä¸€æ®µä»£ç å¯ä»¥åˆ†åˆ«å¤„ç†åŸºç±»å’Œæ´¾ç”Ÿç±»çš„å¯¹è±¡ã€‚ å‡½æ•°çš„è¿è¡Œç‰ˆæœ¬ç”±å®å‚å†³å®šï¼Œå³åœ¨è¿è¡Œæ—¶é€‰æ‹©å‡½æ•°çš„ç‰ˆæœ¬ã€‚ äºŒã€å®šä¹‰ç»§æ‰¿ 1 2 3 4 5 6 7 class Base{ ...... }; class Derived:access-specifier Base{ ....... }; æ´¾ç”Ÿç±»å¿…é¡»é€šè¿‡ç±»æ´¾ç”Ÿåˆ—è¡¨ï¼ˆclass derivation listï¼‰æ˜ç¡®æŒ‡å‡ºå®ƒæ˜¯ä»å“ªä¸ªåŸºç±»ç»§æ‰¿è€Œæ¥ã€‚å½¢å¼ï¼šå†’å·ï¼Œåé¢ç´§è·Ÿä»¥é€—å·åˆ†éš”çš„åŸºç±»åˆ—è¡¨ï¼Œæ¯ä¸ªåŸºç±»å‰é¢å¯ä»¥æœ‰ä¸€ä¸‹ä¸‰ç§è®¿é—®è¯´æ˜ç¬¦çš„ä¸€ä¸ªï¼špublicã€protectedã€privateã€‚\næ´¾ç”Ÿç±»ä¸­çš„è™šå‡½æ•°: C++11æ–°æ ‡å‡†å…è®¸æ´¾ç”Ÿç±»æ˜¾å¼åœ°æ³¨æ˜å®ƒå°†ä½¿ç”¨å“ªä¸ªæˆå‘˜å‡½æ•°æ”¹å†™åŸºç±»çš„è™šå‡½æ•°ï¼Œå³åœ¨å‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¹‹ååŠ ä¸€ä¸ªoverrideå…³é”®å­—ã€‚\né™æ€æˆå‘˜ï¼šå¦‚æœåŸºç±»å®šä¹‰äº†ä¸€ä¸ªåŸºç±»æˆå‘˜ï¼Œåˆ™åœ¨æ•´ä¸ªç»§æ‰¿ä½“ç³»ä¸­åªå­˜åœ¨è¯¥æˆå‘˜çš„å”¯ä¸€å®šä¹‰ã€‚\næ´¾ç”Ÿç±»çš„å£°æ˜ï¼šå£°æ˜ä¸­ä¸åŒ…å«å®ƒçš„æ´¾ç”Ÿåˆ—è¡¨ã€‚\nå¦‚æœä½¿ç”¨æŸä¸ªç±»ä½œä¸ºåŸºç±», åˆ™è¯¥ç±»å¿…é¡»å®šä¹‰è€Œéç”³æ˜\næ´¾ç”Ÿç±»ä½¿ç”¨åŸºç±»çš„æˆå‘˜ï¼šæ´¾ç”Ÿç±»å¯ä»¥è®¿é—®åŸºç±»çš„å…±æœ‰æˆå‘˜å’Œå—ä¿æŠ¤æˆå‘˜\nC++11æ–°æ ‡å‡†æä¾›ä¸€ç§é˜²æ­¢ç»§æ‰¿çš„æ–¹æ³•ï¼Œåœ¨ç±»ååé¢è·Ÿä¸€ä¸ªå…³é”®å­—finalã€‚\nä¸‰ã€åŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´ç»†èŠ‚ 1ã€ç±»å‹è½¬æ¢ä¸ç»§æ‰¿ 1.1 åŸºäºæŒ‡é’ˆå’Œå¼•ç”¨å¯¹è±¡çš„ç±»å‹è½¬æ¢ ç†è§£åŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´çš„ç±»å‹æŠ“æ¢æ˜¯ç†è§£C++è¯­è¨€é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å…³é”®æ‰€åœ¨ã€‚ æ´¾ç”Ÿç±»å¯¹è±¡åŠæ´¾ç”Ÿç±»å‘åŸºç±»çš„ç±»å‹è½¬æ¢ï¼šå› ä¸ºåœ¨æ´¾ç”Ÿç±»å¯¹è±¡ä¸­å«æœ‰ä¸å…¶åŸºç±»å¯¹åº”çš„ç»„æˆéƒ¨åˆ†ï¼Œæ‰€ä»¥èƒ½æŠŠæ´¾ç”Ÿç±»çš„å¯¹è±¡å½“æˆåŸºç±»å¯¹è±¡æ¥ä½¿ç”¨ï¼Œè€Œä¸”ä¹Ÿèƒ½å°†åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ç»‘å®šåˆ°æ´¾ç”Ÿç±»å¯¹è±¡ä¸­çš„åŸºç±»éƒ¨åˆ†ä¸Šã€‚\n1 2 3 4 5 Quote item; //åŸºç±» Bulk_quote bulk; //æ´¾ç”Ÿç±» Quote *p = \u0026amp;item; p = \u0026amp;bulk; Quote \u0026amp;r = bulk; å¯ä»¥å°†åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ç»‘å®šåˆ°æ´¾ç”Ÿç±»å¯¹è±¡ä¸Šæœ‰ä¸€å±‚æä¸ºè‡³è¦çš„å«ä¹‰ï¼šå½“ä½¿ç”¨åŸºç±»çš„å¼•ç”¨ï¼ˆæˆ–æŒ‡é’ˆï¼‰æ—¶ï¼Œå®é™…ä¸Šæˆ‘ä»¬å¹¶ä¸æ¸…æ¥šè¯¥å¼•ç”¨ï¼ˆæˆ–æŒ‡é’ˆï¼‰æ‰€ç»‘å®šå¯¹è±¡çš„çœŸå®ç±»å‹ã€‚è¯¥å¯¹è±¡å¯èƒ½æ˜¯åŸºç±»çš„å¯¹è±¡ï¼Œä¹Ÿå¯èƒ½æ˜¯æ´¾ç”Ÿç±»çš„å¯¹è±¡ã€‚\n1.2 å¼ºåˆ¶ç±»å‹è½¬æ¢å¸¦æ¥çš„sliced downé—®é¢˜ å¯¹è±¡ä¹‹é—´çš„è½¬æ¢ä¼šå¯¼è‡´æŸäº›å¯¹è±¡è¢«åˆ‡æ‰(sliced down)ã€‚æ‰€è°“çš„åˆ‡æ‰ï¼Œå°±æ˜¯å½“æ´¾ç”Ÿç±»å’ŒåŸºç±»ä¹‹é—´é€šè¿‡æ‹·è´æ„é€ ï¼Œèµ‹å€¼æ„é€ ç­‰è¿›è¡Œè½¬åŒ–æ—¶ï¼Œæœ‰ä¸€äº›æˆå‘˜ä¼šå› ä¸ºæ•°æ®æˆå‘˜çš„ä¸åŒå¯¼è‡´æˆå‘˜ä¸¢å¤±ï¼Œæœ‰ç‚¹åƒè¢«åˆ‡æ‰äº†ã€‚\n2ã€æ´¾ç”Ÿç±»çš„å®ä¾‹åŒ– 2.1 åˆæˆæ„é€ å‡½æ•°ã€èµ‹å€¼å‡½æ•°ã€ææ„å‡½æ•°ã€æ‹·è´æ§åˆ¶å‡½æ•° åŸºç±»æˆ–æ´¾ç”Ÿç±»çš„åˆæˆæ‹·è´æ§åˆ¶æˆå‘˜çš„è¡Œä¸ºå’Œå…¶ä»–åˆæˆçš„æ„é€ å‡½æ•°ã€èµ‹å€¼è¿ç®—ç¬¦æˆ–ææ„å‡½æ•°ç±»ä¼¼ï¼šä»–ä»¬å¯¹ç±»æœ¬èº«çš„æˆå‘˜ä¾æ¬¡è¿›è¡Œåˆå§‹åŒ–ã€èµ‹å€¼æˆ–é”€æ¯çš„æ“ä½œã€‚æ­¤å¤–ï¼Œè¿™äº›åˆæˆçš„æˆå‘˜è¿˜è´Ÿè´£ä½¿ç”¨ç›´æ¥åŸºç±»ä¸­å¯¹åº”çš„æ“ä½œå¯¹ä¸€ä¸ªå¯¹è±¡çš„ç›´æ¥åŸºç±»éƒ¨åˆ†è¿›è¡Œåˆå§‹åŒ–ã€èµ‹å€¼æˆ–é”€æ¯çš„æ“ä½œã€‚åˆæˆææ„å‡½æ•°ä¹Ÿæœ‰åŒæ ·çš„è§„åˆ™ã€‚æ— è®ºåŸºç±»æˆå‘˜æ˜¯åˆæˆçš„ç‰ˆæœ¬è¿˜æ˜¯è‡ªå®šä¹‰çš„ç‰ˆæœ¬éƒ½æ²¡æœ‰å½±å“ï¼Œå”¯ä¸€çš„è¦æ±‚å°±æ˜¯ç›¸åº”çš„æˆå‘˜å¯ä»¥è®¿é—®å¹¶ä¸”æœªè¢«åˆ é™¤ã€‚[[ç»§æ‰¿#äº”ã€è®¿é—®æ§åˆ¶ä¸ç»§æ‰¿|è®¿é—®æ§åˆ¶ä¸ç»§æ‰¿]] å¦‚æœå°±æ˜¯ä¸èƒ½è®¿é—®æˆ–è€…è¢«åˆ é™¤ å¦‚æœåŸºç±»çš„é»˜è®¤æ‹·è´æ„é€ ã€æ„é€ ã€æ‹·è´èµ‹å€¼æˆ–ææ„å‡½æ•°æ˜¯è¢«åˆ é™¤çš„ï¼Œåˆ™å¯¹åº”çš„æ´¾ç”Ÿç±»æˆå‘˜ä¹Ÿæ˜¯è¢«åˆ é™¤çš„ã€‚ å¦‚æœåŸºç±»æœ‰ä¸€ä¸ªä¸å¯è®¿é—®æˆ–è€…åˆ é™¤æ‰çš„ææ„å‡½æ•°ï¼Œåˆ™æ´¾ç”Ÿç±»çš„é»˜è®¤å’Œæ‹·è´æ„é€ å‡½æ•°å°†è¢«åˆ é™¤ å› ä¸ºåŸºç±»ç¼ºå°‘ç§»åŠ¨æ“ä½œä¼šé˜»æ­¢æ´¾ç”Ÿç±»æ‹¥æœ‰è‡ªå·±çš„åˆæˆç§»åŠ¨æ“ä½œï¼Œæ‰€ä»¥å½“æˆ‘ä»¬éœ€è¦æ‰§è¡Œç§»åŠ¨æ“ä½œæ—¶é¦–å…ˆåº”è¯¥åœ¨åŸºç±»ä¸­è¿›è¡Œå®šä¹‰ æ´¾ç”Ÿç±»ææ„å‡½æ•°ï¼šæ´¾ç”Ÿç±»ææ„å‡½æ•°å…ˆæ‰§è¡Œï¼Œç„¶åæ‰§è¡ŒåŸºç±»çš„ææ„å‡½æ•°ã€‚ææ„å‡½æ•°åªè´Ÿè´£é”€æ¯æ´¾ç”Ÿç±»è‡ªå·±åˆ†é…çš„èµ„æºã€‚ 2.2 åˆå§‹åŒ–ä¹‹-æ„é€ å‡½æ•° æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ï¼šæ´¾ç”Ÿç±»å¿…é¡»ä½¿ç”¨åŸºç±»çš„æ„é€ å‡½æ•°å»åˆå§‹åŒ–å®ƒçš„åŸºç±»éƒ¨åˆ†ã€‚ C++11æ–°æ ‡å‡†ä¸­ï¼Œæ´¾ç”Ÿç±»å¯ä»¥é‡ç”¨å…¶ç›´æ¥åŸºç±»å®šä¹‰çš„æ„é€ å‡½æ•°ã€‚ å¦‚æœåœ¨åˆå§‹åŒ–æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨ç»™åŸºç±»ä¼ é€’å‚æ•°ï¼Œä»è€Œè°ƒç”¨åŸºç±»çš„é‡è½½æ„é€ å‡½æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class Base public: Base(int SomeNumber) // overloaded constructor { // Do something with SomeNumber } }ï¼› Class Derived: public Base { public: Derived(): Base(25) // instantiate class Base with argument 25 { // derived class constructor code } ï½ï¼› å¦‚æœåŸºç±»çš„æ„é€ å‡½æ•°å«æœ‰é»˜è®¤å®å‚ï¼Œè¿™äº›å®å‚å¹¶ä¸ä¼šè¢«ç»§æ‰¿ï¼Œç›¸åä¼šè·å¾—å¤šä¸ªç»§æ‰¿çš„æ„é€ å‡½æ•°ï¼Œæ¯ä¸ªæ„é€ å‡½æ•°åˆ†åˆ«çœç•¥æ‰ä¸€ä¸ªå«æœ‰é»˜è®¤å®å‚çš„å½¢å‚ã€‚ 2.3 åˆå§‹åŒ–ä¹‹-æ‹·è´æ„é€ å‡½æ•° å½“æ´¾ç”Ÿç±»å®šä¹‰äº†æ‹·è´æˆ–ç§»åŠ¨æ“ä½œæ—¶ï¼Œè¯¥æ“ä½œè´Ÿè´£æ‹·è´æˆ–ç§»åŠ¨åŒ…æ‹¬åŸºç±»éƒ¨åˆ†æˆå‘˜åœ¨å†…çš„æ•´ä¸ªå¯¹è±¡ã€‚é€šå¸¸ä½¿ç”¨å¯¹åº”çš„åŸºç±»æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡çš„åŸºç±»éƒ¨åˆ†ï¼Œä¸åŒäºæ„é€ å‡½æ•°é»˜è®¤ä½¿ç”¨åŸºç±»çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œå½“ä½¿ç”¨æ‹·è´æ§åˆ¶æˆå‘˜å’Œç§»åŠ¨æ§åˆ¶æˆå‘˜æ—¶ï¼Œéœ€è¦æ˜¾å¼çš„è°ƒç”¨åŸºç±»çš„ç›¸åº”æˆå‘˜å‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 class Base ( /* ... */ }; class D: public Base ( public: //é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŸºç±»çš„é»˜è®¤æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡çš„åŸºç±»éƒ¨åˆ† //è¦æƒ³ä½¿ç”¨æ‹·è´æˆ–ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ„é€ å‡½æ•°åˆå§‹ä¾åˆ—è¡¨ä¸­ //æ˜¾å¼åœ°è°ƒç”¨è¯¥æ„é€ å‡½æ•° D(const D\u0026amp; d):Base(d)\t// æ‹·è´åŸºç±»æˆå‘˜ /* Dçš„æˆå‘˜çš„åˆå§‹ä¾*/ { /* ... */ } D(D\u0026amp;\u0026amp; d):Base (std: :move (d))\t// ç§»åŠ¨åŸºç±»æˆå‘˜ /* Dçš„æˆå‘˜çš„åˆå§‹å€¼*/ { /* ... */ ) )ï¼› 2.4 åˆå§‹åŒ–ä¹‹-èµ‹å€¼å‡½æ•° èµ‹å€¼è¿ç®—ç¬¦ä¹Ÿæ˜¯ç›¸ä¼¼çš„æƒ…å†µ 1 2 3 4 5 D \u0026amp;D::operator=(const D \u0026amp;rhs) { Base::operator= (rhs); // ä¸ºåŸºç±»éƒ¨åˆ†èµ‹å€¼ //æŒ‰ç…§è¿‡å»çš„æ–¹å¼ä¸ºæ´¾ç”Ÿç±»çš„æˆå‘˜èµ‹å€¼ //çš„æƒ…å¤„ç†è‡ªèµ‹å€¼åŠé‡Šæ”¾å·²æœ‰èµ„æºç­‰æƒ…å†µ return *this; å…ˆè°ƒç”¨åŸºç±»çš„èµ‹å€¼è¿ç®—ç¬¦ï¼Œç„¶åå†å®Œæˆæ´¾ç”Ÿç±»çš„èµ‹å€¼æ“ä½œï¼Œæ— è®ºåŸºç±»çš„èµ‹å€¼è¿ç®—ç¬¦æ˜¯ç”±ç¼–è¯‘å™¨åˆæˆçš„è¿˜æ˜¯è‡ªå®šä¹‰çš„éƒ½æ— å…³ç´§è¦\n2.5 åˆå§‹ä¹‹-æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ 2.6 åˆå§‹åŒ–ä¹‹-ææ„å‡½æ•° åŸºç±»é€šå¸¸åº”è¯¥å®šä¹‰ä¸€ä¸ªè™šææ„å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½åŠ¨æ€åˆ†é…ç»§æ‰¿ä½“ç³»ä¸­çš„å¯¹è±¡äº†ã€‚é€šå¸¸éƒ½åº”è¯¥å®šä¹‰ä¸€ä¸ªè™šææ„å‡½æ•°ï¼Œå³ä½¿è¯¥å‡½æ•°ä¸æ‰§è¡Œä»»ä½•å®é™…æ“ä½œä¹Ÿæ˜¯å¦‚æ­¤ã€‚ å¦‚æœåŸºç±»çš„ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œåˆ™deleteä¸€ä¸ªæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆå°†äº§ç”Ÿæœªå®šä¹‰çš„è¡Œä¸ºã€‚ è™šææ„å‡½æ•°å°†é˜»æ­¢åˆæˆç§»åŠ¨æ“ä½œã€‚ 2.7 æ„é€ ä¸ææ„é¡ºåº æ„é€ é¡ºåºï¼Œå…ˆåŸºç±»åæ´¾ç”Ÿ ææ„é¡ºåºï¼Œå…ˆæ´¾ç”ŸååŸºç±»\nå››ã€ç»§æ‰¿ä¸­çš„ç±»ä½œç”¨åŸŸ 1ã€å¦‚ä½•æŸ¥æ‰¾ç±»ä¸­çš„åå­— æ¯ä¸ªç±»å®šä¹‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸå†…æˆ‘ä»¬å®šä¹‰ç±»çš„æˆå‘˜ã€‚å½“å­˜åœ¨ç»§æ‰¿å…³ç³»æ—¶ï¼Œæ´¾ç”Ÿç±»çš„ä½œç”¨åŸŸåµŒå¥—åœ¨å…¶åŸºç±»çš„ä½œç”¨åŸŸä¹‹å†…ã€‚å¦‚æœä¸€ä¸ªåå­—åœ¨æ´¾ç”Ÿç±»çš„ä½œç”¨åŸŸå†…æ— æ³•æ­£ç¡®è§£æï¼Œåˆ™ç¼–è¯‘å™¨å°†ç»§ç»­åœ¨å¤–å±‚çš„åŸºç±»ä½œç”¨åŸŸä¸­å¯»æ‰¾è¯¥åå­—çš„å®šä¹‰ã€‚ åœ¨ç¼–è¯‘æ—¶è¿›è¡Œåå­—æŸ¥æ‰¾ : ä¸€ä¸ªå¯¹è±¡å¼•ç”¨æˆ–æŒ‡é’ˆçš„é™æ€ç±»å‹å†³å®šäº†è¯¥å¯¹è±¡çš„å“ªäº›æˆå‘˜æ˜¯å¯è§çš„ï¼Œå³ä½¿ä¸åŠ¨æ€ç±»å‹å¯èƒ½ä¸ä¸€è‡´ï¼Œä½†æ˜¯æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨å“ªäº›æˆå‘˜ä»ç„¶æ˜¯ç”±é™æ€ç±»å‹å†³å®šçš„ã€‚ æ´¾ç”Ÿç±»çš„æˆå‘˜å°†éšè—åŒåçš„åŸºç±»æˆå‘˜ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ä½œç”¨åŸŸè¿ç®—ç¬¦æ¥ä½¿ç”¨éšè—çš„æˆå‘˜ã€‚ 2ã€è¦†ç›–åŸºç±»ä¸­çš„æˆå‘˜ å£°æ˜åœ¨å†…å±‚ä½œç”¨åŸŸçš„å‡½æ•°ï¼Œå¹¶ä¸ä¼šå­˜åœ¨ç”³æ˜åœ¨å¤–å±‚ä½œç”¨åŸŸçš„å‡½æ•°, å› æ­¤å®šä¹‰æ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°ä¸ä¼šé‡è½½åŸºç±»ä¸­çš„æˆå‘˜ï¼Œä¼šéšè—åŸºç±»ä¸­çš„æˆå‘˜ã€‚é™¤äº†è¦†ç›–ç»§æ‰¿è€Œæ¥çš„è™šå‡½æ•°ä¹‹å¤–ï¼Œæ´¾ç”Ÿç±»æœ€å¥½ä¸è¦é‡ç”¨å…¶ä»–å®šä¹‰åœ¨åŸºç±»ä¸­çš„åå­—ã€‚ 3ã€ä½¿ç”¨åŸºç±»ä¸­çš„æˆå‘˜ ä½¿ç”¨åŸŸè§£æè¿ç®—ç¬¦:: æ¥è°ƒç”¨åŸºç±»çš„æ–¹æ³•ä¹Ÿå¯ä»¥æŠ‘åˆ¶[[ç»§æ‰¿#ä¸‰ã€è™šå‡½æ•°ä¸åŠ¨æ€ç»‘å®š|åŠ¨æ€ç»‘å®š]]\n1 2 3 4 5 6 7 8 9 10 11 12 class Carp:public Fish { public: Carp():Fish(true){} void Swim() { cout\u0026lt;\u0026lt;\u0026#34;Carp swims real slow\u0026#34;\u0026lt;\u0026lt;endl; Fish::Swim(); } } è¦†ç›–é‡è½½çš„å‡½æ•° : å’Œå…¶ä»–å‡½æ•°ä¸€æ ·ï¼Œæˆå‘˜å‡½æ•°æ— è®ºæ˜¯å¦æ˜¯è™šå‡½æ•°éƒ½èƒ½è¢«é‡è½½ã€‚æ´¾ç”Ÿç±»å¯ä»¥è¦†ç›–é‡è½½å‡½æ•°çš„0ä¸ªæˆ–å¤šä¸ªå®ä¾‹ã€‚æœ‰æ—¶ä¸€ä¸ªç±»ä»…éœ€è¦è¦†ç›–é‡è½½é›†åˆä¸­çš„ä¸€äº›è€Œéå…¨éƒ¨å‡½æ•°ä¸€ç§å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯ä¸ºé‡è½½çš„æˆå‘˜æä¾›ä¸€æ¡usingå£°æ˜è¯­å¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ— éœ€è¦†ç›–åŸºç±»ä¸­çš„æ¯ä¸€ä¸ªé‡è½½ç‰ˆæœ¬ã€‚ å¦‚using Disc_quote::Disc_quote;ï¼Œæ³¨æ˜äº†è¦ç»§æ‰¿Disc_quoteçš„æ„é€ å‡½æ•°ã€‚å¦‚æœæ´¾ç”Ÿç±»æœ‰è‡ªå·±çš„æ•°æ®æˆå‘˜ï¼Œåˆ™è¿™äº›æˆå‘˜å°†è¢«é»˜è®¤åˆå§‹åŒ–ã€‚ usingç”³æ˜ä¸ä¼šæ”¹å˜æ„é€ å‡½æ•°çš„è®¿é—®çº§åˆ« å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨usingå,æ´¾ç”Ÿç±»ä¼šç»§æ‰¿æ‰€æœ‰åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯æœ‰ä¸¤ç§ä¾‹å¤–ï¼Œä¸€æ˜¯æ´¾ç”Ÿç±»å¯ä»¥ç»§æ‰¿ä¸€éƒ¨åˆ†æ„é€ å‡½æ•°ï¼Œè€Œå®šä¹‰è‡ªå·±çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ´¾ç”Ÿç±»å®šä¹‰çš„æ„é€ å‡½æ•°ä¸åŸºç±»çš„æ„é€ å‡½æ•°å…·æœ‰ç›¸åŒçš„å‚æ•°åˆ—è¡¨ï¼Œåˆ™è¯¥æ„é€ å‡½æ•°å°†ä¸ä¼šè¢«ç»§æ‰¿ã€‚äºŒæ˜¯é»˜è®¤æ‹·è´å’Œç§»åŠ¨æ„é€ å‡½æ•°ä¸ä¼šè¢«ç»§æ‰¿ã€‚ äº” ã€è®¿é—®æ§åˆ¶ä¸ç»§æ‰¿ 1ã€å¯¹äºå…¬æœ‰ç»§æ‰¿ï¼ˆpublic)æ–¹å¼ åŸºç±»çš„publicå’Œprotectedæˆå‘˜çš„è®¿é—®å±æ€§åœ¨æ´¾ç”Ÿç±»ä¸­ä¿æŒä¸å˜ï¼Œä½†åŸºç±»çš„privateæˆå‘˜ä¸å¯ç›´æ¥æ´¾ç”Ÿç±»ä¸­è®¿é—®ï¼ˆå¯é€šè¿‡è°ƒç”¨åŸºç±»ä¸­è®¿é—®å±æ€§ä¸ºå…¬æœ‰æˆ–ä¿æŠ¤çš„æˆå‘˜å‡½æ•°æ¥è®¿é—®åŸºç±»ä¸­çš„ç§æœ‰æˆå‘˜ï¼‰ã€‚å³æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜å‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®åŸºç±»ä¸­çš„publicå’Œprotectedæˆå‘˜ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»çš„privateæˆå‘˜ã€‚ åŸºç±»æˆå‘˜å¯¹åŸºç±»å¯¹è±¡çš„å¯è§æ€§ä¸ºï¼šå…¬æœ‰æˆå‘˜å¯è§ï¼ˆæˆ–è€…è¯´å¯è®¿é—®ï¼‰ï¼Œä¿æŠ¤æˆå‘˜å’Œç§æœ‰æˆå‘˜ä¸å¯è§ï¼ˆæˆ–è€…è¯´ä¸å¯è®¿é—®ï¼‰ã€‚ åŸºç±»æˆå‘˜å¯¹æ´¾ç”Ÿç±»çš„å¯è§æ€§ä¸ºï¼šåŸºç±»çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜å¯è§ï¼ŒåŸºç±»çš„ç§æœ‰æˆå‘˜ä¸å¯è§ã€‚ åŸºç±»æˆå‘˜å¯¹æ´¾ç”Ÿç±»å¯¹è±¡çš„å¯è§æ€§ä¸ºï¼šåŸºç±»çš„å…¬æœ‰æˆå‘˜å¯è§ï¼Œä¿æŠ¤æˆå‘˜å’Œç§æœ‰æˆå‘˜ä¸å¯è§ï¼Œå³é€šè¿‡æ´¾ç”Ÿç±»çš„å¯¹è±¡åªèƒ½è®¿é—®åŸºç±»çš„publicæˆå‘˜ã€‚ æ‰€ä»¥ï¼Œåœ¨å…¬æœ‰ç»§æ‰¿æ—¶ï¼Œæ´¾ç”Ÿç±»çš„å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®åŸºç±»ä¸­çš„å…¬æœ‰æˆå‘˜ï¼Œæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®åŸºç±»ä¸­çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜ã€‚\n2ã€å¯¹äºç§æœ‰ç»§æ‰¿(private)æ–¹å¼ åŸºç±»çš„publicå’Œprotectedæˆå‘˜éƒ½ä»¥privateèº«ä»½å‡ºç°åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œä½†åŸºç±»çš„privateæˆå‘˜åŒæ ·æ˜¯ä¸å¯ç›´æ¥è®¿é—®çš„ã€‚ åŸºç±»æˆå‘˜å¯¹åŸºç±»å¯¹è±¡çš„å¯è§æ€§ä¸ºï¼šå…¬æœ‰æˆå‘˜å¯è§ï¼Œä¿æŠ¤æˆå‘˜å’Œç§æœ‰æˆå‘˜ä¸å¯è§ã€‚ åŸºç±»æˆå‘˜å¯¹æ´¾ç”Ÿç±»çš„å¯è§æ€§ä¸ºï¼šåŸºç±»çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜å¯è§ï¼ŒåŸºç±»çš„ç§æœ‰æˆå‘˜ä¸å¯è§ã€‚ï¼ˆç»è¿‡ç§æœ‰ç»§æ‰¿ä¹‹åï¼Œæ‰€æœ‰åŸºç±»çš„æˆå‘˜éƒ½æˆä¸ºäº†æ´¾ç”Ÿç±»çš„ç§æœ‰æˆå‘˜æˆ–ä¸å¯ç›´æ¥è®¿é—®çš„æˆå‘˜ï¼Œå¦‚æœç”¨æ­¤æ´¾ç”Ÿç±»è¿›ä¸€æ­¥å‘ä¸‹æ´¾ç”Ÿå­ç±»çš„è¯ï¼ŒåŸºç±»çš„å…¨éƒ¨æˆå‘˜å°±æ— æ³•åœ¨è¿™ä¸ªæ´¾ç”Ÿç±»çš„å­ç±»ä¸­è¢«ç›´æ¥è®¿é—®ï¼‰ åŸºç±»æˆå‘˜å¯¹æ´¾ç”Ÿç±»å¯¹è±¡çš„å¯è§æ€§ä¸ºï¼šåŸºç±»çš„å…¬æœ‰æˆå‘˜ã€ä¿æŠ¤æˆå‘˜å’Œç§æœ‰æˆå‘˜å‡æ˜¯ä¸å¯è§çš„ï¼Œå³é€šè¿‡é€šè¿‡æ´¾ç”Ÿç±»çš„å¯¹è±¡ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»ä¸­çš„ä»»ä½•æˆå‘˜ã€‚ æ‰€ä»¥ï¼Œåœ¨ç§æœ‰ç»§æ‰¿æ—¶ï¼Œæ´¾ç”Ÿç±»çš„å¯¹è±¡æ— æ³•ç›´æ¥è®¿é—®åŸºç±»ä¸­çš„ä»»ä½•æˆå‘˜ï¼Œæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°åˆ™ä¾ç„¶å¯ä»¥ç›´æ¥è®¿é—®åŸºç±»ä¸­çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜ã€‚å¦å¤–ï¼ŒåŸºç±»çš„å…¬æœ‰å’Œä¿æŠ¤æˆå‘˜åªèƒ½ç”±ç›´æ¥æ´¾ç”Ÿç±»ç»§æ‰¿ï¼Œè€Œæ— æ³•å†å‘ä¸‹ç»§æ‰¿ã€‚\n3ã€å¯¹äºä¿æŠ¤ç»§æ‰¿ï¼ˆprotectedï¼‰æ–¹å¼ åŸºç±»çš„publicå’Œprotectedæˆå‘˜éƒ½ä»¥protectedèº«ä»½å‡ºç°åœ¨æ´¾ç”Ÿç±»ä¸­ï¼ŒåŸºç±»çš„privateæˆå‘˜ä¹ŸåŒæ ·æ˜¯ä¸å¯ç›´æ¥è®¿é—®çš„ã€‚ åŸºç±»æˆå‘˜å¯¹åŸºç±»å¯¹è±¡çš„å¯è§æ€§ä¸ºï¼šå…¬æœ‰æˆå‘˜å¯è§ï¼Œä¿æŠ¤æˆå‘˜å’Œç§æœ‰æˆå‘˜ä¸å¯è§ã€‚ åŸºç±»æˆå‘˜å¯¹æ´¾ç”Ÿç±»çš„å¯è§æ€§ä¸ºï¼šåŸºç±»çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜å¯è§ï¼ŒåŸºç±»çš„ç§æœ‰æˆå‘˜ä¸å¯è§ã€‚ï¼ˆæ¯”è¾ƒç§æœ‰ç»§æ‰¿å’Œä¿æŠ¤ç»§æ‰¿å¯ä»¥çœ‹å‡ºï¼Œå®é™…ä¸Šåœ¨ç›´æ¥æ´¾ç”Ÿç±»ä¸­ï¼Œæ‰€æœ‰æˆå‘˜çš„è®¿é—®å±æ€§éƒ½æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ´¾ç”Ÿç±»ä½œä¸ºæ–°çš„åŸºç±»ç»§ç»­æ´¾ç”Ÿæ—¶ï¼ŒäºŒè€…çš„åŒºåˆ«å°±å‡ºç°äº†ã€‚ï¼‰ åŸºç±»æˆå‘˜å¯¹æ´¾ç”Ÿç±»å¯¹è±¡çš„å¯è§æ€§ä¸ºï¼šåŸºç±»çš„å…¬æœ‰æˆå‘˜ã€ä¿æŠ¤æˆå‘˜å’Œç§æœ‰æˆå‘˜å‡æ˜¯ä¸å¯è§çš„ï¼Œå³é€šè¿‡é€šè¿‡æ´¾ç”Ÿç±»çš„å¯¹è±¡ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»ä¸­çš„ä»»ä½•æˆå‘˜ã€‚ å› æ­¤ï¼Œä¿æŠ¤ç»§æ‰¿æ—¢ä¸ç§æœ‰ç»§æ‰¿æœ‰ç›¸ä¼¼çš„åœ°æ–¹ä¹Ÿæœ‰ä¸å…¬æœ‰ç»§æ‰¿ç›¸ä¼¼çš„åœ°æ–¹ã€‚å¯¹æ´¾ç”Ÿç±»çš„å¯¹è±¡æ¥è¯´ï¼Œå®ƒä¸ç§æœ‰ç»§æ‰¿æ–¹å¼çš„æ€§è´¨ç›¸åŒã€‚è€Œå¯¹äºå…¶æ´¾ç”Ÿç±»æ¥è¯´ï¼Œå®ƒåˆä¸å…¬æœ‰ç»§æ‰¿æ–¹å¼çš„æ€§è´¨ç›¸åŒã€‚è¿™æ ·åšæ—¢å®ç°äº†æ•°æ®éšè—ï¼Œåˆæ–¹ä¾¿ç»§æ‰¿ï¼Œå®ç°ä»£ç é‡ç”¨ã€‚ ![[Pasted image 20230119014703.png]]\n1 2 3 4 5 6 7 8 class Parent{ public: ... private: ... protected: ... }; 2. æ´¾ç”Ÿç±»çš„ç»§æ‰¿æ–¹å¼è¯´æ˜ç¬¦ class Child : public Parent {}; class Child : protected Parent {}; class Child : private Parent {}; public ç»§æ‰¿æ–¹å¼ï¼š åŸºç±»ä¸­çš„ public æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ä¸º publicï¼› åŸºç±»ä¸­çš„ protected æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ä¸º protectedï¼› åŸºç±»ä¸­çš„ private æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­è¢«ç»§æ‰¿ä¸‹æ¥ï¼Œä½†æ˜¯ä¸å¯è®¿é—®ï¼› protected ç»§æ‰¿æ–¹å¼ï¼š åŸºç±»ä¸­çš„ public æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­å˜ä¸º protected å±æ€§ï¼› åŸºç±»ä¸­çš„ protected æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­å˜ä¸º protected å±æ€§ï¼› åŸºç±»ä¸­çš„ private æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­è¢«ç»§æ‰¿ä¸‹æ¥ï¼Œä½†æ˜¯ä»ä¸å¯è®¿é—®ï¼› private ç»§æ‰¿æ–¹å¼ï¼š åŸºç±»ä¸­çš„ public æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­å˜ä¸º private å±æ€§ï¼› åŸºç±»ä¸­çš„ protected æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­å˜ä¸º private å±æ€§ï¼› åŸºç±»ä¸­çš„ private æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­è¢«ç»§æ‰¿ä¸‹æ¥ï¼Œä½†æ˜¯ä»ä¸å¯è®¿é—®ï¼› å¯ä»¥çœ‹å‡ºï¼Œä¸‰ç§ç»§æ‰¿æ–¹å¼ä¸ä¼šå½±å“æ´¾ç”Ÿç±»æˆå‘˜å¯¹åŸºç±»æˆå‘˜çš„è®¿é—®æƒé™ï¼Œæ— è®ºå“ªç§ç»§æ‰¿æ–¹å¼ï¼Œæ´¾ç”Ÿç±»ä¸­ä»ç„¶åªèƒ½è®¿é—®åŸºç±»ä¸­çš„ public å’Œ protected æˆå‘˜ï¼Œä¸èƒ½è®¿é—® private æˆå‘˜ï¼›\nåŸºç±»çš„ private æˆå‘˜ä¸èƒ½åœ¨æ´¾ç”Ÿç±»ä¸­ä½¿ç”¨ï¼Œå¹¶æ²¡æœ‰è¯´åŸºç±»çš„ private æˆå‘˜ä¸èƒ½è¢«ç»§æ‰¿ã€‚å®é™…ä¸Šï¼ŒåŸºç±»çš„ private æˆå‘˜æ˜¯èƒ½å¤Ÿè¢«ç»§æ‰¿çš„ï¼Œå¹¶ä¸”ï¼ˆæˆå‘˜å˜é‡ï¼‰ä¼šå ç”¨æ´¾ç”Ÿç±»å¯¹è±¡çš„å†…å­˜ï¼Œå®ƒåªæ˜¯åœ¨æ´¾ç”Ÿç±»ä¸­ä¸å¯è§ï¼Œå¯¼è‡´æ— æ³•ä½¿ç”¨ç½¢äº†ã€‚private æˆå‘˜çš„è¿™ç§ç‰¹æ€§ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„å¯¹æ´¾ç”Ÿç±»éšè—åŸºç±»çš„å®ç°ï¼Œä»¥ä½“ç°é¢å‘å¯¹è±¡çš„å°è£…æ€§ã€‚ ç»§æ‰¿æ–¹å¼å½±å“çš„æ˜¯ ç±»å®ä¾‹å¯¹è±¡å¯¹ç±»æˆå‘˜çš„è®¿é—®æƒé™ï¼š ä¾‹å¦‚ï¼Œå¦‚æœæ´¾ç”Ÿç±»çš„ç»§æ‰¿æ–¹å¼æ˜¯ privateï¼Œåˆ™åŸºç±»å¯¹è±¡å¯ä»¥è®¿é—®çš„ public å±æ€§çš„ç±»æˆå‘˜ï¼Œæ´¾ç”Ÿç±»å¯¹è±¡ä¾¿ä¸èƒ½è®¿é—®äº†ï¼Œå› ä¸ºæ´¾ç”Ÿç±»ä¸­è¯¥å¯¹è±¡å˜æˆäº† private å±æ€§ï¼› ç”±äº private å’Œ protected ç»§æ‰¿æ–¹å¼ä¼šæ”¹å˜åŸºç±»æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®æƒé™ï¼Œå¯¼è‡´ç»§æ‰¿å…³ç³»å¤æ‚ï¼Œæ‰€ä»¥å®é™…å¼€å‘ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ publicã€‚ æ€»ç»“ï¼šç»§æ‰¿æ–¹å¼å†³å®šäº†åŸºç±»æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„å¯è§æ€§ï¼Œä½†ä¸å½±å“æ´¾ç”Ÿç±»å¯¹åŸºç±»æˆå‘˜çš„è®¿é—®æƒé™\n3. æ”¹å˜è®¿é—®æƒé™ ä½¿ç”¨ using å…³é”®å­—å¯ä»¥æ”¹å˜åŸºç±»æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®æƒé™ï¼Œä¾‹å¦‚å°† public æ”¹ä¸º privateã€å°† protected æ”¹ä¸º publicã€‚\næ³¨æ„ï¼šusing åªèƒ½æ”¹å˜åŸºç±»ä¸­ public å’Œ protected æˆå‘˜çš„è®¿é—®æƒé™ï¼Œä¸èƒ½æ”¹å˜ private æˆå‘˜çš„è®¿é—®æƒé™ï¼Œå› ä¸ºåŸºç±»ä¸­ private æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­æ˜¯ä¸å¯è§çš„ï¼Œæ ¹æœ¬ä¸èƒ½ä½¿ç”¨ï¼Œæ‰€ä»¥åŸºç±»ä¸­çš„ private æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­æ— è®ºå¦‚ä½•éƒ½ä¸èƒ½è®¿é—®ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #include\u0026lt;iostream\u0026gt; using namespace std; //åŸºç±»People class People { public: void show(); protected: char *m_name; int m_age; }; void People::show() { cout \u0026lt;\u0026lt; m_name \u0026lt;\u0026lt; \u0026#34;çš„å¹´é¾„æ˜¯\u0026#34; \u0026lt;\u0026lt; m_age \u0026lt;\u0026lt; endl; } //æ´¾ç”Ÿç±»Student class Student : public People { public: void learning(); public: using People::m_name; //å°†protectedæ”¹ä¸ºpublic using People::m_age; //å°†protectedæ”¹ä¸ºpublic float m_score; private: using People::show; //å°†publicæ”¹ä¸ºprivate }; void Student::learning() { cout \u0026lt;\u0026lt; \u0026#34;æˆ‘æ˜¯\u0026#34; \u0026lt;\u0026lt; m_name \u0026lt;\u0026lt; \u0026#34;ï¼Œä»Šå¹´\u0026#34; \u0026lt;\u0026lt; m_age \u0026lt;\u0026lt; \u0026#34;å²ï¼Œè¿™æ¬¡è€ƒäº†\u0026#34; \u0026lt;\u0026lt; m_score \u0026lt;\u0026lt; \u0026#34;åˆ†ï¼\u0026#34; \u0026lt;\u0026lt; endl; } int main() { Student stu; stu.m_name = \u0026#34;å°æ˜\u0026#34;; stu.m_age = 16; stu.m_score = 99.5f; stu.show(); //compile error stu.learning(); return 0; } Student ç±»ä¸­ï¼Œshow å‡½æ•°è¢«æ”¹ä¸ºäº† private æƒé™ï¼Œåˆ™ Student ç±»çš„å¯¹è±¡å°±ä¸èƒ½è°ƒç”¨ show å‡½æ•°äº†ã€‚ å…­ã€å¤šç»§æ‰¿ ","pubDate":"2021-10-22","title":"ã€C++ Primer(edition 5) 14ã€‘ç»§æ‰¿"},{"link":"https://cnjslw.github.io/posts/%E6%93%8D%E4%BD%9C%E9%87%8D%E8%BD%BD%E4%B8%8E%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/","plain":"ä¸€ã€åŸºæœ¬æ¦‚å¿µ 1ã€å®šä¹‰é‡è½½è¿ç®—ç¬¦ 1 return_type operator operator_symbol(...parameter list...); é‡è½½è¿ç®—ç¬¦æ˜¯å…·æœ‰ç‰¹æ®Šåå­—çš„å‡½æ•°ï¼šç”±å…³é”®å­—operatorå’Œå…¶åè¦å®šä¹‰çš„è¿ç®—ç¬¦å·å…±åŒç»„æˆã€‚å’Œå…¶ä»–å‡½æ•°ä¸€æ ·ï¼Œé‡è½½çš„è¿ç®—ç¬¦ä¹ŸåŒ…å«è¿”å›ç±»å‹ã€å‚æ•°åˆ—è¡¨ä»¥åŠå‡½æ•°ä½“ã€‚ å½“ä¸€ä¸ªé‡è½½çš„è¿ç®—ç¬¦æ˜¯æˆå‘˜å‡½æ•°æ—¶ï¼Œthisç»‘å®šåˆ°å·¦ä¾§è¿ç®—å¯¹è±¡ã€‚åŠ¨æ€è¿ç®—ç¬¦ç¬¦å‡½æ•°çš„å‚æ•°æ•°é‡æ¯”è¿ç®—å¯¹è±¡çš„æ•°é‡å°‘ä¸€ä¸ªã€‚ åªèƒ½é‡è½½å¤§å¤šæ•°çš„è¿ç®—ç¬¦ï¼Œè€Œä¸èƒ½å‘æ˜æ–°çš„è¿ç®—ç¬¦å·ã€‚ é‡è½½è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å’Œç»“åˆå¾‹è·Ÿå¯¹åº”çš„å†…ç½®è¿ç®—ç¬¦ä¿æŒä¸€è‡´ã€‚ 2ã€è°ƒç”¨é‡è½½è¿ç®—ç¬¦ æ–¹å¼ä¸€ å°†è¿ç®—ç¬¦ä½œç”¨äºç±»å‹æ­£ç¡®çš„å®å‚ï¼Œä»è€Œä»¥è¿™ç§é—´æ¥æ–¹å¼â€œè°ƒç”¨â€é‡ è½½çš„è¿ç®—ç¬¦å‡½æ•°\n1 data1 + data2; æ–¹å¼äºŒ è°ƒç”¨æ™®é€šå‡½æ•°ä¸€æ ·ç›´æ¥è°ƒç”¨è¿ç®—ç¬¦å‡½æ•°ï¼Œå…ˆæŒ‡å®šå‡½æ•°åå­—ï¼Œç„¶åä¼ å…¥æ•°é‡æ­£ç¡®ã€ç±»å‹é€‚å½“çš„å®å‚\n1 operator+(data1, data2); 3ã€å“ªäº›è¿ç®—ç¬¦ä¸å¯ä»¥é‡è½½ï¼Œé‚£äº›ä¸å»ºè®®é‡è½½ ![[Pasted image 20230122101348.png]]\næŸäº›è¿ç®—ç¬¦æŒ‡å®šäº†è¿ç®—å¯¹è±¡æ±‚å€¼çš„é¡ºåº å› ä¸ºä½¿ç”¨é‡è½½çš„è¿ç®—ç¬¦æœ¬è´¨ä¸Šæ˜¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨ï¼Œæ‰€ä»¥è¿™äº›å…³äºè¿ç®—å¯¹è±¡æ±‚å€¼é¡ºåºçš„è§„åˆ™æ— æ³•åº”ç”¨åˆ°é‡è½½çš„è¿ç®—ç¬¦ä¸Šã€‚ ç‰¹åˆ«æ˜¯ï¼Œé€»è¾‘ä¸è¿ç®—ç¬¦ã€é€»è¾‘æˆ–è¿ç®—ç¬¦å’Œé€—å·è¿ç®—ç¬¦çš„è¿ç®—å¯¹è±¡æ±‚å€¼é¡ºåºè§„åˆ™æ— æ³•ä¿ç•™ä¸‹æ¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ\u0026amp;\u0026amp;å’Œ ||è¿ç®—ç¬¦çš„é‡è½½ç‰ˆæœ¬ä¹Ÿæ— æ³•ä¿ç•™å†…ç½®è¿ç®—ç¬¦çš„çŸ­è·¯æ±‚å€¼å±æ€§ï¼Œä¸¤ä¸ªè¿ç®—å¯¹è±¡æ€»æ˜¯ä¼šè¢«æ±‚å€¼ã€‚ å› ä¸ºä¸Šè¿°è¿ç®—ç¬¦çš„é‡è½½ç‰ˆæœ¬æ— æ³•ä¿ç•™æ±‚å€¼é¡ºåºå’Œ/æˆ–çŸ­è·¯æ±‚å€¼å±æ€§ï¼Œå› æ­¤ä¸å»ºè®®é‡è½½å®ƒä»¬,å› ä¸ºç”¨èµ·æ¥ä¼šå‘ç°æ±‚å€¼è§„åˆ™ä¸å†é€‚ç”¨\nè¿˜æœ‰ä¸€ä¸ªåŸå› ä½¿å¾—æˆ‘ä»¬ä¸€èˆ¬ä¸é‡è½½é€—å·è¿ç®—ç¬¦å’Œå–åœ°å€è¿ç®—ç¬¦ï¼šC++è¯­è¨€å·²ç»å®šä¹‰äº†è¿™ä¸¤ç§è¿ç®—ç¬¦ç”¨äºç±»ç±»å‹å¯¹è±¡æ—¶çš„ç‰¹æ®Šå«ä¹‰ï¼Œè¿™ä¸€ç‚¹ä¸å¤§å¤šæ•°è¿ç®—ç¬¦éƒ½ä¸ç›¸åŒã€‚å› ä¸ºè¿™ä¸¤ç§è¿ç®—ç¬¦å·²ç»æœ‰äº†å†…ç½®çš„å«ä¹‰ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´å®ƒä»¬ä¸åº”è¯¥è¢«é‡è½½ï¼Œå¦åˆ™å®ƒä»¬çš„è¡Œä¸ºå°†å¼‚äºå¸¸æ€ï¼Œä»è€Œå¯¼è‡´ç±»çš„ç”¨æˆ·æ— æ³•é€‚åº”ã€‚\n4ã€è¿ç®—ç¬¦ä½œä¸ºæˆå‘˜å‡½æ•°å’Œéæˆå‘˜å‡½æ•°çš„é—®é¢˜ æœ‰æ—¶åˆ«æ— é€‰æ‹©ï¼Œå¿…é¡»ä½œä¸ºæˆå‘˜å‡½æ•°ï¼Œè€Œæœ‰äº›æ—¶å€™ä½œä¸ºæ™®é€šå‡½æ•°æ›´å¥½ã€‚ å¦‚ä½•åšå‡ºé€‰æ‹©å‘¢ï¼Œæœ‰ä»¥ä¸‹çš„ä¾æ®ï¼š\nèµ‹å€¼ï¼ˆ=ï¼‰ã€ä¸‹æ ‡ï¼ˆ[]ï¼‰ã€è°ƒç”¨ï¼ˆ()ï¼‰å’Œæˆå‘˜è®¿é—®ç®­å¤´ï¼ˆ-\u0026gt;ï¼‰è¿ç®—ç¬¦å¿…é¡»æ˜¯æˆå‘˜ã€‚ å¤åˆèµ‹å€¼è¿ç®—ç¬¦ä¸€èˆ¬æ¥è¯´æ˜¯æˆå‘˜ã€‚ æ”¹å˜å¯¹è±¡çŠ¶æ€çš„è¿ç®—ç¬¦æˆ–è€…å’Œç»™å®šç±»å‹å¯†åˆ‡ç›¸å…³çš„è¿ç®—ç¬¦é€šå¸¸æ˜¯æˆå‘˜ï¼Œå¦‚é€’å¢ã€è§£å¼•ç”¨ã€‚ å…·æœ‰å¯¹ç§°æ€§çš„è¿ç®—ç¬¦å¦‚ç®—æœ¯ã€ç›¸ç­‰æ€§ã€å…³ç³»å’Œä½è¿ç®—ç¬¦ç­‰ï¼Œé€šå¸¸æ˜¯éæˆå‘˜å‡½æ•°ã€‚ è¾“å‡ºè¿ç®—ç¬¦\u0026lt;\u0026lt;å¿…é¡»æ˜¯éæˆå‘˜å‡½æ•° å«æœ‰ç±»å¯¹è±¡çš„æ··åˆç±»å‹çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨å¯¹ç§°æ€§è¿ç®—ç¬¦ï¼Œè¿ç®—ç¬¦å¿…é¡»å®šä¹‰æˆéæˆå‘˜å‡½æ•° 1 2 3 4 5 6 //å¦‚æœ â€œ+â€æ˜¯stringç±»çš„æˆå‘˜ string s = \u0026#34;world\u0026#34;; string t = s + \u0026#34;!\u0026#34;; //âˆš s.operator + (\u0026#34;!\u0026#34;) string u = \u0026#34;hi\u0026#34; + s; //Ã— \u0026#34;hi\u0026#34;.operator + (s) //å¦‚æœâ€œ+â€æ˜¯éå¸¸æˆå‘˜å‡½æ•° //â€œhiâ€+s ç­‰ä»·äº operator+(\u0026#34;hi\u0026#34;,s); æ¯ä¸ªå®å‚éƒ½èƒ½å¤Ÿè½¬æ¢ä¸ºstringç±»å‹ äºŒã€è¾“å…¥å’Œè¾“å‡ºè¿ç®—ç¬¦ 1ã€é‡è½½è¾“å‡ºè¿ç®—ç¬¦\u0026laquo; ç¬¬ä¸€ä¸ªå½¢å‚é€šå¸¸æ˜¯ä¸€ä¸ªéå¸¸é‡çš„ostreamå¯¹è±¡çš„å¼•ç”¨ã€‚éå¸¸é‡æ˜¯å› ä¸ºå‘æµä¸­å†™å…¥ä¼šæ”¹å˜å…¶çŠ¶æ€ï¼›è€Œå¼•ç”¨æ˜¯å› ä¸ºæˆ‘ä»¬æ— æ³•å¤åˆ¶ä¸€ä¸ªostreamå¯¹è±¡ã€‚ ç¬¬äºŒä¸ªå½¢å‚ä¸€èˆ¬æ¥è¯´æ˜¯ä¸€ä¸ªå¸¸é‡çš„å¼•ç”¨ï¼Œè¯¥å¸¸é‡æ˜¯æˆ‘ä»¬æƒ³è¦æ‰“å°çš„ç±»ç±»å‹ã€‚ç¬¬äºŒä¸ªå½¢å‚æ˜¯å¼•ç”¨çš„åŸå› æ˜¯æˆ‘ä»¬å¸Œæœ›é¿å…å¤åˆ¶å®å‚ï¼ŒåŒæ—¶ä¸ä¼šæ”¹å˜è¯¥å½¢å‚ã€‚ è¾“å…¥è¾“å‡ºè¿ç®—ç¬¦å¿…é¡»æ˜¯éæˆå‘˜å‡½æ•°ã€‚ 1 2 3 4 5 ostream \u0026amp;operator\u0026lt;\u0026lt;(ostream \u0026amp;os , const Sales_data \u0026amp;item) { os \u0026lt;\u0026lt; item.isbn()\u0026lt;\u0026lt;\u0026#34; \u0026#34;\u0026lt;\u0026lt;item.units_sold\u0026lt;\u0026lt;\u0026#34; \u0026#34;; return os; } 2ã€é‡è½½è¾“å…¥è¿ç®—ç¬¦\u0026raquo; ç¬¬ä¸€ä¸ªå½¢å‚é€šå¸¸æ˜¯è¿ç®—ç¬¦å°†è¦è¯»å–çš„æµçš„å¼•ç”¨ï¼Œç¬¬äºŒä¸ªå½¢å‚æ˜¯å°†è¦è¯»å–åˆ°çš„ï¼ˆéå¸¸é‡ï¼‰å¯¹è±¡çš„å¼•ç”¨ã€‚ è¾“å…¥è¿ç®—ç¬¦å¿…é¡»å¤„ç†è¾“å…¥å¯èƒ½å¤±è´¥çš„æƒ…å†µï¼Œè€Œè¾“å‡ºè¿ç®—ç¬¦ä¸éœ€è¦ã€‚ 1 2 3 4 5 6 7 8 9 10 11 istream \u0026amp;operator\u0026gt;\u0026gt;(istream \u0026amp;is, Sales_data \u0026amp;item) { double price;//ä¸éœ€è¦åˆå§‹åŒ–ï¼Œå› ä¸ºæˆ‘ä»¬å°†å…ˆè¯»å…¥æ•°æ®åˆ°price,ä¹‹åæ‰ä½¿ç”¨å®ƒ is\u0026gt;\u0026gt;item.bookNo\u0026gt;\u0026gt;item.units_sold\u0026gt;\u0026gt;price; if(is) //æ£€æŸ¥è¾“å…¥æ˜¯å¦æˆåŠŸ item.revenue = item.units_sold*price; else item = Sales_data(); //è¾“å…¥å¤±è´¥ï¼šå¯¹è±¡è¢«èµ‹äºˆé»˜è®¤çš„çŠ¶æ€ return is; } ä¸‰ã€ç®—æœ¯å’Œå…³ç³»è¿ç®—ç¬¦ï¼ˆ+ã€-ã€*ã€/ , ==ã€!=ã€\u0026hellip;\u0026hellip;ï¼‰ å¦‚æœç±»åŒæ—¶å®šä¹‰äº†ç®—æ•°è¿ç®—ç¬¦å’Œç›¸å…³çš„å¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼Œåˆ™é€šå¸¸æƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨å¤åˆèµ‹å€¼æ¥å®ç°ç®—æ•°è¿ç®—ç¬¦ã€‚\n1 2 3 4 5 6 7 //å‡è®¾ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘åŒä¸€æœ¬ä¹¦ Sales_data operator+(const Sales_data \u0026amp;lhs, const Sales_data \u0026amp;rhs) { Sales_data sum = lhs; // æŠŠlhsçš„æ•°æ®æˆå‘˜æ‹·è´ç»™sum sum += rhs;// å°† rhs åŠ è‡³sumä¸­ return sum; } 1ã€ç›¸ç­‰è¿ç®—ç¬¦== å¦‚æœå®šä¹‰äº†operator==ï¼Œåˆ™è¿™ä¸ªç±»ä¹Ÿåº”è¯¥å®šä¹‰operator!=ã€‚ ç›¸ç­‰è¿ç®—ç¬¦å’Œä¸ç­‰è¿ç®—ç¬¦çš„ä¸€ä¸ªåº”è¯¥æŠŠå·¥ä½œå§”æ‰˜ç»™å¦ä¸€ä¸ªã€‚ ç›¸ç­‰è¿ç®—ç¬¦åº”è¯¥å…·æœ‰ä¼ é€’æ€§ã€‚ å¦‚æœæŸä¸ªç±»åœ¨é€»è¾‘ä¸Šæœ‰ç›¸ç­‰æ€§çš„å«ä¹‰ï¼Œåˆ™è¯¥ç±»åº”è¯¥å®šä¹‰operator==ï¼Œè¿™æ ·åšå¯ä»¥ä½¿ç”¨æˆ·æ›´å®¹æ˜“ä½¿ç”¨æ ‡å‡†åº“ç®—æ³•æ¥å¤„ç†è¿™ä¸ªç±»ã€‚ 1 2 3 4 5 6 7 8 bool operator==(const Sales_data \u0026amp;lhs, const Sales_data \u0026amp;rhs) { return lhs.isbn() == rhs.isbn() \u0026amp;\u0026amp; lhs.units_sold == rhs.units_sold \u0026amp;\u0026amp; lhs.revenue == rhs.revenue; } bool operator!=(const Sales_data \u0026amp;lhs, const Sales_data \u0026amp;rhs) { return !(lhs == rhs); } 2ã€å…³ç³»è¿ç®—ç¬¦ å¦‚æœå­˜åœ¨å”¯ä¸€ä¸€ç§é€»è¾‘å¯é çš„\u0026lt;å®šä¹‰ï¼Œåˆ™åº”è¯¥è€ƒè™‘ä¸ºè¿™ä¸ªç±»å®šä¹‰\u0026lt;è¿ç®—ç¬¦ã€‚å¦‚æœåŒæ—¶è¿˜åŒ…å«==ï¼Œåˆ™å½“ä¸”æ™‹æ¡£\u0026lt;çš„å®šä¹‰å’Œ++äº§ç”Ÿçš„ç»“æœä¸€ç›´æ—¶æ‰å®šä¹‰\u0026lt;è¿ç®—ç¬¦ã€‚\nå››ã€èµ‹å€¼è¿ç®—ç¬¦= æˆ‘ä»¬å¯ä»¥é‡è½½èµ‹å€¼è¿ç®—ç¬¦ã€‚ä¸è®ºå½¢å‚çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œèµ‹å€¼è¿ç®—ç¬¦éƒ½å¿…é¡»å®šä¹‰ä¸ºæˆå‘˜å‡½æ•°ã€‚ èµ‹å€¼è¿ç®—ç¬¦å¿…é¡»å®šä¹‰æˆç±»çš„æˆå‘˜ï¼Œå¤åˆèµ‹å€¼è¿ç®—ç¬¦é€šå¸¸æƒ…å†µä¸‹ä¹Ÿåº”è¯¥è¿™ä¹ˆåšã€‚è¿™ä¸¤ç±»è¿ç®—ç¬¦éƒ½åº”è¯¥è¿”å›å·¦ä¾§è¿ç®—å¯¹è±¡çš„å¼•ç”¨ã€‚ 1 2 3 4 5 6 Sales_data\u0026amp; Sales_data::operator+=(const Sales_data \u0026amp;rhs) ( units_sold += rhs.units_sold; revenue += rhs.revenue; return *this; } äº”ã€ä¸‹æ ‡è¿ç®—ç¬¦[] ä¸‹æ ‡è¿ç®—ç¬¦å¿…é¡»æ˜¯æˆå‘˜å‡½æ•°ã€‚ ä¸€èˆ¬ä¼šå®šä¹‰ä¸¤ä¸ªç‰ˆæœ¬ï¼š 1.è¿”å›æ™®é€šå¼•ç”¨ã€‚ 2.ç±»çš„å¸¸é‡æˆå‘˜ï¼Œå¹¶è¿”å›å¸¸é‡å¼•ç”¨ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 class StrVec { public: std::strings operator[](std::size_t n) { return elements[n]; } const std::strings operator[](std::size_t n) const { return elements[n]; } private: std::string *elements; //æŒ‡å‘æ•°ç»„é¦–å…ƒç´ çš„æŒ‡é’ˆ }ï¼› å…­ã€é€’å¢å’Œé€’å‡è¿ç®—ç¬¦ï¼ˆ++ã€\u0026ndash;ï¼‰ å®šä¹‰é€’å¢å’Œé€’å‡è¿ç®—ç¬¦çš„ç±»åº”è¯¥åŒæ—¶å®šä¹‰å‰ç½®ç‰ˆæœ¬å’Œåç½®ç‰ˆæœ¬ï¼Œåç½®ç‰ˆæœ¬æ¥å—ä¸€ä¸ªé¢å¤–çš„(ä¸è¢«ä½¿ç”¨)intç±»å‹çš„å½¢å‚ä»¥å½¢æˆé‡è½½å‡½æ•°ã€‚ é€šå¸¸åº”è¯¥è¢«å®šä¹‰æˆç±»çš„æˆå‘˜ã€‚ ä¸ºäº†å’Œå†…ç½®ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œå‰ç½®è¿ç®—ç¬¦åº”è¯¥è¿”å›é€’å¢æˆ–é€’å‡åå¯¹è±¡çš„å¼•ç”¨ã€‚ åŒæ ·ä¸ºäº†å’Œå†…ç½®ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œåç½®è¿ç®—ç¬¦åº”è¯¥è¿”å›é€’å¢æˆ–é€’å‡å‰å¯¹è±¡çš„å€¼ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚ åç½®ç‰ˆæœ¬æ¥å—ä¸€ä¸ªé¢å¤–çš„ï¼Œä¸è¢«ä½¿ç”¨çš„intç±»å‹çš„å½¢å‚ã€‚å› ä¸ºä¸ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥æ— éœ€å‘½åã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 //å‰ç½®ç‰ˆæœ¬ class StrBlobPtr { public: //é€’å¢å’Œé€’å‡è¿ç®—ç¬¦ StrBlobPtr\u0026amp; operator++() ; // å‰ç½®è¿ç®—ç¬¦ StrBlobPtr\u0026amp; operator--() ; //å…¶ä»–æˆå‘˜å’Œä¹‹å‰çš„ç‰ˆæœ¬ä¸€è‡´ }; StrBlobPtr\u0026amp; StrBlobPtr::operator++() { // å¦‚æœcurrå·²ç»æŒ‡å‘äº†å®¹å™¨çš„å°¾åä½ç½®ï¼Œåˆ™æ— æ³•é€’å¢å®ƒ check(curr, \u0026#34;increment past end of StrBlobPtr*\u0026#39;); ++curr; //å°† curråœ¨å½“å‰çŠ¶æ€ä¸‹å‘å‰ç§»åŠ¨ä¸€ä¸ªå…ƒç´  return *this; } //åç½®ç‰ˆæœ¬ class StrBlobPtr { public: //é€’å¢å’Œé€’å‡è¿ç®—ç¬¦ StrBlobPtr\u0026amp; operator++(int) ; // åç½®è¿ç®—ç¬¦ StrBlobPtr\u0026amp; operator--(int) ; //å…¶ä»–æˆå‘˜å’Œä¹‹å‰çš„ç‰ˆæœ¬ä¸€è‡´ }; StrBlobPtr StrBlobPtr::operator++(int) { //æ­¤å¤„æ— é¡»æ£€æŸ¥æœ‰æ•ˆæ€§ï¼Œè°ƒç”¨å‰ç½®é€’å¢è¿ç®—æ—¶æ‰éœ€è¦æ£€æŸ¥ StrBlobPtr ret = *this; // è®°å½•å½“å‰çš„å€¼ ++*this; //å‘å‰ç§»åŠ¨ä¸€ä¸ªå…ƒç´ ï¼Œå‰ç½®++éœ€è¦æ£€æŸ¥é€’å¢çš„æœ‰æ•ˆæ€§ return ret; //è¿”å›ä¹‹å‰è®°å½•çš„çŠ¶æ€ } StrBlobPtr StrBlobPtr::operator--(int) { //æ­¤å¤„æ— é¡»æ£€æŸ¥æœ‰æ•ˆæ€§ï¼Œè°ƒç”¨å‰ç½®é€’å‡è¿ç®—æ—¶æ‰éœ€è¦æ£€æŸ¥ StrBlobPtr ret = *this; //è®°å½•å½“å‰çš„å€¼ --*this; / / å‘åç§»åŠ¨ä¸€ä¸ªå…ƒç´ ï¼Œå‰ç½®--éœ€è¦æ£€æŸ¥é€’å‡çš„æœ‰æ•ˆæ€§ return ret; / / è¿”å›ä¹‹å‰è®°å½•çš„çŠ¶æ€ } ä¸ƒã€æˆå‘˜è®¿é—®è¿ç®—ç¬¦ï¼ˆ*ã€-\u0026gt;ï¼‰ ç®­å¤´è¿ç®—ç¬¦å¿…é¡»æ˜¯ç±»çš„æˆå‘˜ã€‚è§£å¼•ç”¨è¿ç®—ç¬¦é€šå¸¸ä¹Ÿæ˜¯ç±»çš„æˆå‘˜ï¼Œå°½ç®¡å¹¶éå¿…é¡»å¦‚æ­¤ã€‚ é‡è½½çš„ç®­å¤´è¿ç®—ç¬¦å¿…é¡»è¿”å›ç±»çš„æŒ‡é’ˆæˆ–è€…è‡ªå®šä¹‰äº†ç®­å¤´è¿ç®—ç¬¦çš„æŸä¸ªç±»çš„å¯¹è±¡ã€‚ è§£å¼•ç”¨å’Œä¹˜æ³•çš„åŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯ä¸€å…ƒè¿ç®—ç¬¦ï¼Œä¸€ä¸ªæ˜¯äºŒå…ƒè¿ç®—ç¬¦ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class StrBlobPtr { public: std::strings operator*() const { auto p = check(curr, \u0026#34;dereference past end\u0026#34;); return (*p) [curr] ; // (*p)æ˜¯å¯¹è±¡æ‰€æŒ‡çš„ vector } std::string* operator-\u0026gt; () const { //å°†å®é™…å·¥ä½œå§”æ‰˜ç»™è§£å¼•ç”¨è¿ç®—ç¬¦ return \u0026amp; this-\u0026gt;operator*(); } //å…¶ä»–æˆå‘˜ä¸ä¹‹å‰çš„ç‰ˆæœ¬ä¸€è‡´ } å…«ã€å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ å¦‚æœç±»é‡è½½äº†å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨å‡½æ•°ä¸€æ ·ä½¿ç”¨è¯¥ç±»çš„å¯¹è±¡\nå¯ä»¥åƒä½¿ç”¨å‡½æ•°ä¸€æ ·ï¼Œè°ƒç”¨è¯¥ç±»çš„å¯¹è±¡ã€‚å› ä¸ºè¿™æ ·å¯¹å¾…ç±»åŒæ—¶ä¹Ÿèƒ½å­˜å‚¨çŠ¶æ€ï¼Œæ‰€ä»¥ä¸æ™®é€šå‡½æ•°ç›¸æ¯”æ›´åŠ çµæ´»ã€‚ å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦å¿…é¡»æ˜¯æˆå‘˜å‡½æ•°ã€‚ ä¸€ä¸ªç±»å¯ä»¥å®šä¹‰å¤šä¸ªä¸åŒç‰ˆæœ¬çš„è°ƒç”¨è¿ç®—ç¬¦ï¼Œç›¸äº’ä¹‹é—´åº”è¯¥åœ¨å‚æ•°æ•°é‡æˆ–ç±»å‹ä¸Šæœ‰æ‰€åŒºåˆ«ã€‚ å¦‚æœç´¯å®šä¹‰äº†è°ƒç”¨è¿ç®—ç¬¦ï¼Œåˆ™è¯¥ç±»çš„å¯¹è±¡ç§°ä½œå‡½æ•°å¯¹è±¡ã€‚ 1 2 3 4 5 6 7 8 9 struct abslnt { int operator()(int val) const {return val \u0026lt; 0 ? -val : val} }; int i = -42; abslnt absObj; int ui = absObj(i); 1ã€lambdaæ˜¯å‡½æ•°å¯¹è±¡ lambdaæ•è·å˜é‡ï¼šlambdaäº§ç”Ÿçš„ç±»å¿…é¡»ä¸ºæ¯ä¸ªå€¼æ•è·çš„å˜é‡å»ºç«‹å¯¹åº”çš„æ•°æ®æˆå‘˜ï¼ŒåŒæ—¶åˆ›å»ºæ„é€ å‡½æ•°ã€‚ 2ã€æ ‡å‡†åº“å®šä¹‰çš„å‡½æ•°å¯¹è±¡ æ ‡å‡†åº“å‡½æ•°å¯¹è±¡ æ ‡å‡†åº“å®šä¹‰äº†ä¸€ç»„è¡¨ç¤ºç®—æœ¯è¿ç®—ç¬¦ã€å…³ç³»è¿ç®—ç¬¦å’Œé€»è¾‘è¿ç®—ç¬¦çš„ç±»ï¼Œæ¯ä¸ªç±»åˆ†åˆ«å®šä¹‰äº†ä¸€ä¸ªæ‰§è¡Œå‘½åæ“ä½œçš„è°ƒç”¨è¿ç®—ç¬¦ã€‚ä¾‹å¦‚ï¼Œplusç±»å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ç”¨äºå¯¹ä¸€ å¯¹è¿ç®—å¯¹è±¡æ‰§è¡Œ+çš„æ“ä½œï¼›modulusç±»å®šä¹‰äº†ä¸€ä¸ªè°ƒç”¨è¿ç®—ç¬¦æ‰§è¡ŒäºŒå…ƒçš„å·æ“ä½œï¼› equal_toç±»æ‰§è¡Œ== , ç­‰ç­‰ã€‚ è¿™äº›ç±»éƒ½è¢«å®šä¹‰æˆæ¨¡æ¿çš„å½¢å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶æŒ‡å®šå…·ä½“çš„åº”ç”¨ç±»å‹ï¼Œè¿™é‡Œçš„ç±»å‹å³è°ƒ ç”¨è¿ç®—ç¬¦çš„å½¢å‚ç±»å‹ã€‚ä¾‹å¦‚ï¼Œplus\u0026lt;string\u0026gt;ä»¤ stringåŠ æ³•è¿ç®—ç¬¦ä½œç”¨äºstringå¯¹è±¡ï¼› plus\u0026lt;int\u0026gt;çš„è¿ç®—å¯¹è±¡æ˜¯ intï¼› plus\u0026lt;Sales_data\u0026gt;å¯¹ Sales_data å¯¹è±¡æ‰§è¡ŒåŠ  æ³•è¿ç®—ï¼Œä»¥æ­¤ç±»æ¨\n1 2 3 4 5 6 7 8 plus\u0026lt;int\u0026gt; intAdd; //å¯æ‰§è¡ŒintåŠ æ³•çš„å‡½æ•°å¯¹ negate\u0026lt;int\u0026gt; intNegate; //å¯å¯¹intå€¼å–åçš„å‡½æ•°å¯¹è±¡ // intAdd::operator (int, int)æ±‚ 10 å’Œ 20 çš„å’Œ int sum = intAdd (10, 20) ; // ç­‰ä»·äº sum = 30 sum = intNegate (intAdd (10, 20) ) ; // ç­‰ä»·äº sum = 30 // ä½¿ç”¨ intNegate: :operator (int) // ç„¶åå°†-10ä½œä¸º intAdd::operator (int, int)çš„ç¬¬äºŒä¸ªå‚æ•° sum = intAdd(10, intNegate(10)); // sum = 0 ç®—æœ¯ å…³ç³» é€»è¾‘ plus\u0026lt;Type\u0026gt; equal_to\u0026lt;Type\u0026gt; logical_and\u0026lt;Type\u0026gt; minus\u0026lt;Type\u0026gt; not_equal_to\u0026lt;Type\u0026gt; logical_or\u0026lt;Type\u0026gt; multiplies\u0026lt;Type\u0026gt; greater\u0026lt;Type\u0026gt; logical_not\u0026lt;Type\u0026gt; divides\u0026lt;Type\u0026gt; greater_equal\u0026lt;Type\u0026gt; modulus\u0026lt;Type\u0026gt; less\u0026lt;Type\u0026gt; negate\u0026lt;Type\u0026gt; less_equal\u0026lt;Type\u0026gt; 3ã€å¯è°ƒç”¨å¯¹è±¡ä¸function C++è¯­è¨€ä¸­æœ‰å‡ ç§å¯è°ƒç”¨çš„å¯¹è±¡ï¼šå‡½æ•°ã€å‡½æ•°æŒ‡é’ˆã€lambdaè¡¨è¾¾å¼ã€bindåˆ›å»ºçš„å¯¹è±¡ä»¥åŠé‡è½½äº†å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦çš„ç±»ã€‚\nè°ƒç”¨å¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯æœ‰ç±»å‹çš„\n1 2 3 4 5 6 7 8 9 10 11 //æ™®é€šå‡½æ•°ç±»å‹ int add(int i , int j); //æœªå‘½åçš„å‡½æ•°å¯¹è±¡ç±» auto mod = [](int i, int j){return i%j;}; //å‡½æ•°å¯¹è±¡ç±» struct divide{ int operator()(int denominator , int divisor) { return denominator / divisor ; } } æƒ³è±¡ä¸€ç§åœºæ™¯ï¼Œæˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ªè®¡ç®—ï¼Œå¸Œæœ›é€šè¿‡ç”¨æˆ·é”®å…¥çš„ç¬¦å·æ¥åˆ¤æ–­è¿›è¡Œé‚£ç§å‡½æ•°ï¼Œå¯ä»¥ç”¨mapæ¥å®ç°è¿™æ ·çš„å‡½æ•°è¡¨ï¼Œç»†çœ‹ä¸Šè¿°çš„ä¸‰ä¸ªå‡½æ•°ï¼Œä¼¼ä¹éƒ½æ˜¯è¿”å›å€¼ä¸ºintï¼Œéœ€è¦ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°å½¢å¼int (int , int) æ•…å¯ä»¥å£°æ˜å‡½æ•°è¡¨ï¼šmap\u0026lt;string , int(*)(int , int)\u0026gt; ä½†æ˜¯,è¿™æ ·å°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºè°ƒç”¨å¯¹è±¡æœ¬èº«ä¹Ÿæœ‰ç±»å‹ï¼Œè€Œint (*)(int , int)çš„ç±»å‹æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œä¸èƒ½æŒ‡å‘å‡½æ•°ç±»ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½å°†modå’Œdivideç±»ä¼ å…¥\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨functionæ ‡å‡†åº“æ¥è§£å†³è¿™ä¸ªé—®é¢˜\næ ‡å‡†åº“functionç±»å‹ï¼š æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåä¸ºfunctionçš„æ–°çš„æ ‡å‡†åº“ç±»å‹è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œfunction å®šä¹‰åœ¨functionalå¤´æ–‡ä»¶ä¸­ã€‚functionæ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œå’Œå…¶ä»–æ¨¡æ¿ä¸€æ ·ï¼Œå½“åˆ›å»ºä¸€ä¸ªå…·ä½“çš„ function ç±»å‹æ—¶æˆ‘ä»¬å¿…é¡»æä¾›é¢å¤–çš„ä¿¡æ¯ã€‚åœ¨æ­¤ä¾‹ä¸­ï¼Œæ‰€è°“é¢å¤–çš„ä¿¡æ¯æ˜¯æŒ‡è¯¥ function ç±»å‹èƒ½å¤Ÿè¡¨ç¤ºçš„å¯¹è±¡çš„è°ƒç”¨å½¢å¼ã€‚\næ“ä½œ è§£é‡Š function\u0026lt;T\u0026gt; f; fæ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨å¯è°ƒç”¨å¯¹è±¡çš„ç©ºfunctionï¼Œè¿™äº›å¯è°ƒç”¨å¯¹è±¡çš„è°ƒç”¨å½¢å¼åº”è¯¥ä¸ç±»å‹Tç›¸åŒã€‚ function\u0026lt;T\u0026gt; f(nullptr); æ˜¾å¼åœ°æ„é€ ä¸€ä¸ªç©ºfunction function\u0026lt;T\u0026gt; f(obj) åœ¨fä¸­å­˜å‚¨å¯è°ƒç”¨å¯¹è±¡objçš„å‰¯æœ¬ f å°†fä½œä¸ºæ¡ä»¶ï¼šå½“få«æœ‰ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡æ—¶ä¸ºçœŸï¼›å¦åˆ™ä¸ºå‡ã€‚ å®šä¹‰ä¸ºfunction\u0026lt;T\u0026gt;çš„æˆå‘˜çš„ç±»å‹ result_type è¯¥functionç±»å‹çš„å¯è°ƒç”¨å¯¹è±¡è¿”å›çš„ç±»å‹ argument_type å½“Tæœ‰ä¸€ä¸ªæˆ–ä¸¤ä¸ªå®å‚æ—¶å®šä¹‰çš„ç±»å‹ã€‚å¦‚æœTåªæœ‰ä¸€ä¸ªå®å‚ï¼Œåˆ™argument_type first_argument_type ç¬¬ä¸€ä¸ªå®å‚çš„ç±»å‹ second_argument_type ç¬¬äºŒä¸ªå®å‚çš„ç±»å‹ 1 2 function\u0026lt;int(int,int)\u0026gt; f1 = [](int i,int j){return i*j;} cout \u0026lt;\u0026lt; f1(4,2) \u0026lt;\u0026lt; endl; è¿™æ ·å°±å¯ä»¥é‡æ–°å®šä¹‰å‡½æ•°è¡¨\n1 2 3 4 5 6 7 map\u0026lt;string , function\u0026lt;int(int,int)\u0026gt;\u0026gt; binops = { {\u0026#34;+\u0026#34; , add}, {\u0026#34;-\u0026#34; , std::minus\u0026lt;int\u0026gt;()}, {\u0026#34;/\u0026#34; , divide()}, {\u0026#34;*\u0026#34; , [](int i, int j){return i*j;}}, {\u0026#34;%\u0026#34; , mod} }; é‡è½½å‡½æ•°ä¸function ä¸èƒ½å°†é‡è½½å‡½æ•°çš„åå­—å­˜å…¥functionç±»å‹çš„å¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥ä¸¤ä¸ªæ–¹æ³•è§£å†³\n1 2 3 4 int add(int i , int j){return i+j;} Sales_data add(const Sales_data\u0026amp; , const Sales_data\u0026amp;); map\u0026lt;string , function\u0026lt;int(int , int)\u0026gt;\u0026gt; binops; binops.insert({\u0026#34;+\u0026#34; , add}); //Ã— ï¼Œwhich add å­˜å‚¨å‡½æ•°æŒ‡é’ˆ 1 2 int (*fp)(int , int) = add; binops.insert({\u0026#34;+\u0026#34;,fp}); lamba 1 binops.insert({\u0026#34;+\u0026#34;,[](int a , int b){return add(a,b);}}); ä¹ã€é‡è½½ã€ç±»å‹è½¬æ¢ã€è¿ç®—ç¬¦ 1ã€ç±»å‹è½¬æ¢è¿ç®—ç¬¦ [[ç±»#2.4 è½¬æ¢æ„é€ å‡½æ•°]]\nç±»å‹è½¬æ¢è¿ç®—ç¬¦æ˜¯ç±»çš„ä¸€ç§ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œå®ƒè´Ÿè´£å°†ä¸€ä¸ªç±»ç±»å‹çš„å€¼è½¬æ¢æˆå…¶ä»–ç±»å‹ã€‚ç±»å‹è½¬æ¢å‡½æ•°çš„ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼š 1 operator type() const; ä¸€ä¸ªç±»å‹è½¬æ¢å‡½æ•°å¿…é¡»æ˜¯ç±»çš„æˆå‘˜å‡½æ•°ï¼›å®ƒä¸èƒ½å£°æ˜è¿”å›ç±»å‹ï¼Œå½¢å‚åˆ—è¡¨ä¹Ÿå¿…é¡»ä¸ºç©ºã€‚ç±»å‹è½¬æ¢å‡½æ•°é€šå¸¸åº”è¯¥æ˜¯constã€‚ é¿å…è¿‡åº¦ä½¿ç”¨ç±»å‹è½¬æ¢å‡½æ•°ã€‚ C++11å¼•å…¥äº†æ˜¾å¼çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦ã€‚ å‘boolçš„ç±»å‹è½¬æ¢é€šå¸¸ç”¨åœ¨æ¡ä»¶éƒ¨åˆ†ï¼Œå› æ­¤operator boolä¸€èˆ¬å®šä¹‰æˆexplicitçš„ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class SmallInt{ public: SmallInt(int i = 0):val(i) { if(i\u0026lt;0 || i \u0026gt; 255) throw std::out_of_range(\u0026#34;Bad SmallInt value\u0026#34;); } operator int() const{return val;} private: std::size_t val; } SmallInt si; si = 4 ; si + 3 ; SmallInt sj ; sj = 3,14 ; sj + 3.14 ; 2ã€é¿å…æœ‰äºŒä¹‰æ€§çš„ç±»å‹è½¬æ¢ é€šå¸¸ï¼Œä¸è¦ä¸ºç±»å®šä¹‰ç›¸åŒçš„ç±»å‹è½¬æ¢ï¼Œä¹Ÿä¸è¦åœ¨ç±»ä¸­å®šä¹‰ä¸¤ä¸ªåŠä»¥ä¸Šè½¬æ¢æºæˆ–è½¬æ¢ç›®æ ‡æ˜¯ç®—æœ¯ç±»å‹çš„è½¬æ¢ã€‚ åœ¨è°ƒç”¨é‡è½½å‡½æ•°æ—¶ï¼Œå¦‚æœéœ€è¦é¢å¤–çš„æ ‡å‡†ç±»å‹è½¬æ¢ï¼Œåˆ™è¯¥è½¬æ¢çš„çº§åˆ«åªæœ‰å½“æ‰€æœ‰å¯è¡Œå‡½æ•°éƒ½è¯·æ±‚åŒä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„ç±»å‹è½¬æ¢æ—¶æ‰æœ‰ç”¨ã€‚å¦‚æœæ‰€éœ€çš„ç”¨æˆ·å®šä¹‰çš„ç±»å‹è½¬æ¢ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™è¯¥è°ƒç”¨å…·æœ‰äºŒä¹‰æ€§ã€‚ 3ã€å‡½æ•°åŒ¹é…ä¸é‡è½½è¿ç®—ç¬¦ å¦‚æœaæ˜¯ä¸€ç§ç±»å‹ï¼Œåˆ™è¡¨è¾¾å¼a sym bå¯èƒ½æ˜¯ï¼š a.operatorsym(b); operatorsym(a,b); å¦‚æœæˆ‘ä»¬é˜ŸåŒä¸€ä¸ªç±»æ—¢æä¾›äº†è½¬æ¢ç›®æ ‡æ˜¯ç®—æœ¯ç±»å‹çš„ç±»å‹è½¬æ¢ï¼Œä¹Ÿæä¾›äº†é‡è½½çš„è¿ç®—ç¬¦ï¼Œåˆ™å°†ä¼šé‡åˆ°é‡è½½è¿ç®—ç¬¦ä¸å†…ç½®è¿ç®—ç¬¦çš„äºŒä¹‰æ€§é—®é¢˜ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 class SmallInt{ friend SmallInt operator+(const SmallInt\u0026amp; , const SmallInt\u0026amp;); public: SmallInt(int = 0); operator int() const {return val;} private: std::size_t val; } SmallInt s1, s2 ; SmallInt s3 = s1 + s2 ; int i = s3 + 0 ; //äºŒä¹‰æ€§ ","pubDate":"2021-10-19","title":"ã€C++ Primer(edition 5) 13ã€‘æ“ä½œé‡è½½ä¸ç±»å‹è½¬æ¢"},{"link":"https://cnjslw.github.io/posts/%E6%8B%B7%E8%B4%9D%E6%8E%A7%E5%88%B6/","plain":"æ‹·è´æ§åˆ¶æ“ä½œï¼ˆcopy controlï¼‰: æ‹·è´å’Œç§»åŠ¨æ„é€ å‡½æ•°å®šä¹‰äº†å½“ç”¨åŒç±»å‹çš„å¦ä¸€ä¸ªå¯¹è±¡åˆå§‹åŒ–æœ¬å¯¹è±¡æ—¶åšä»€ä¹ˆã€‚ æ‹·è´å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦å®šä¹‰äº†å°†ä¸€ä¸ªå¯¹è±¡èµ‹äºˆåŒç±»å‹çš„å¦ä¸€ä¸ªå¯¹è±¡æ—¶åšä»€ä¹ˆã€‚ææ„å‡½æ•°å®šä¹‰äº†å½“æ­¤ç±»å‹å¯¹è±¡é”€æ¯æ—¶åšä»€ä¹ˆã€‚\næ‹·è´æ„é€ å‡½æ•°ï¼ˆcopy constructorï¼‰ æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼ˆcopy-assignment operatorï¼‰ ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆmove constructorï¼‰ ç§»åŠ¨èµ‹å€¼å‡½æ•°ï¼ˆmove-assignement operatorï¼‰ ææ„å‡½æ•°ï¼ˆdestructorï¼‰ ä¸€ã€æ‹·è´ã€èµ‹å€¼å’Œé”€æ¯ 1ã€æ‹·è´æ„é€ å‡½æ•° å¦‚æœä¸€ä¸ªæ„é€ å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è‡ªèº«ç±»ç±»å‹çš„å¼•ç”¨ï¼Œä¸”ä»»ä½•é¢å¤–å‚æ•°éƒ½æœ‰é»˜è®¤å€¼ï¼Œåˆ™æ­¤æ„é€ å‡½æ•°æ˜¯æ‹·è´æ„é€ å‡½æ•°ã€‚\n1 2 3 4 5 class Foo { public: Foo(const Foo\u0026amp;); } 1.1 åˆæˆçš„æ‹·è´æ„é€ å‡½æ•°ï¼ˆsynthesized copy constructorï¼‰ æ²¡æœ‰ä¸ºä¸€ä¸ªç±»å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª,å³ä½¿æˆ‘ä»¬å®šä¹‰äº†å…¶ä»–æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šåˆæˆä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°\næ¯ä¸ªæˆå‘˜çš„ç±»å‹å†³å®šäº†å®ƒå¦‚ä½•æ‹·è´ï¼š\nå¯¹ç±»ç±»å‹çš„æˆå‘˜ï¼Œä¼šä½¿ç”¨å…¶æ‹·è´æ„é€ å‡½æ•°æ¥æ‹·è´ï¼› å†…ç½®ç±»å‹çš„æˆå‘˜åˆ™ç›´æ¥æ‹·è´ã€‚ è™½ç„¶æˆ‘ä»¬ä¸èƒ½ç›´æ¥æ‹·è´ä¸€ä¸ªæ•°ç»„ï¼Œä½†åˆæˆæ‹·è´æ„é€ å‡½æ•°ä¼šé€å…ƒç´ åœ°æ‹·è´ä¸€ä¸ªæ•°ç»„ç±»å‹çš„æˆå‘˜ã€‚å¦‚æœæ•°ç»„å…ƒç´ æ˜¯ç±»ç±»å‹ï¼Œåˆ™ä½¿ç”¨å…ƒç´ çš„æ‹·è´æ„é€ å‡½æ•°æ¥è¿›è¡Œæ‹·è´ã€‚ 1.2 æ‹·è´åˆå§‹åŒ– å½“ä½¿ç”¨ç›´æ¥åˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯è¦æ±‚ç¼–è¯‘å™¨ä½¿ç”¨æ™®é€šçš„å‡½æ•°åŒ¹é…æ¥é€‰æ‹©ä¸æˆ‘ä»¬æä¾›çš„å‚æ•°æœ€åŒ¹é…çš„æ„é€ å‡½æ•°ã€‚ å½“æˆ‘ä»¬ä½¿ç”¨æ‹·è´åˆ å§‹ åŒ– ï¼ˆcopy initializationï¼‰ æ—¶ï¼Œæˆ‘ä»¬è¦æ±‚ç¼–è¯‘å™¨å°†å³ä¾§è¿ç®—å¯¹è±¡æ‹·è´åˆ°æ­£åœ¨åˆ›å»ºçš„å¯¹è±¡ä¸­ï¼Œå¦‚æœéœ€è¦çš„è¯è¿˜è¦è¿›è¡Œç±»å‹è½¬æ¢ã€‚\næ‹·è´åˆå§‹åŒ–é€šå¸¸ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æ¥å®Œæˆã€‚ ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªç±»æœ‰ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ï¼Œåˆ™æ‹·è´åˆå§‹åŒ–æœ‰æ—¶ä¼šä½¿ç”¨ç§»åŠ¨æ„é€ å‡½æ•°è€Œéæ‹·è´æ„é€ å‡½æ•°æ¥å®Œæˆã€‚\næ‹·è´åˆå§‹åŒ–å‘ç”Ÿçš„æ—¶æœº\nå°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå®å‚ä¼ é€’ç»™ä¸€ä¸ªéå¼•ç”¨ç±»å‹çš„å½¢å‚ ä»ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºéå¼•ç”¨ç±»å‹çš„å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ ä¸ºä»€ä¹ˆæ‹·è´æ„é€ å‡½æ•°çš„å‚æ•°å¿…é¡»æ˜¯å¼•ç”¨å½¢å‚ å› ä¸ºï¼Œå°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå®å‚ä¼ é€’ç»™ä¸€ä¸ªéå¼•ç”¨ç±»å‹çš„å½¢å‚æ—¶ï¼Œä¼šå‘ç”Ÿæ‹·è´æ„é€ ï¼Œè¿™æ ·å°±ä¼šå‘ç”Ÿå¥—å¨ƒç°è±¡\n1.3 æ‹·è´æ„é€ çš„é™åˆ¶ [[ç±»#2.4 è½¬æ¢æ„é€ å‡½æ•°|æ‹·è´æ„é€ é‡åˆ°explicit]]\n1 2 3 4 5 vector\u0026lt;int\u0026gt; vl(10) ; // æ­£ç¡®ï¼šç›´æ¥åˆå§‹åŒ– vector\u0026lt;int\u0026gt; v2 = 10; // é”™è¯¯ï¼šæ¥å—å¤§å°å‚æ•™çš„æ„é€ å‡½æ•°æ˜¯explicitçš„ void f(vector\u0026lt;int\u0026gt;ï¼‰ ; //f çš„å‚æ•°è¿›è¡Œæ‹·è´åˆå§‹åŒ– f(10) ; // é”™è¯¯ï¼šä¸èƒ½ç”¨ä¸€ä¸ªexplicitçš„æ„é€ å‡½æ•°æ‹·è´ä¸€ä¸ªå®å‚ f(vector\u0026lt;int\u0026gt;(10)) ; // æ­£ç¡®ï¼šä»ä¸€ä¸ªintç›´æ¥æ„é€ ä¸€ä¸ªä¸´æ—¶vector 2ã€æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ ä¸æ‹·è´æ„é€ å‡½æ•°ä¸€æ ·ï¼Œå¦‚æœç±»æœªå®šä¹‰è‡ªå·±çš„æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼Œç¼–è¯‘å™¨ä¼šä¸ºå®ƒåˆæˆä¸€ä¸ªã€‚ é‡å†™ä¸€ä¸ªåä¸ºoperator=çš„å‡½æ•°ï¼Œé€šå¸¸è¿”å›ä¸€ä¸ªæŒ‡å‘å…¶å·¦ä¾§è¿ç®—å¯¹è±¡çš„å¼•ç”¨ã€‚\n1 Foo\u0026amp; operator=(const Foo\u0026amp;); åˆæˆæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ æ‹·è´èµ‹å€¼è¿ç®—ç¬¦æ¥å—ä¸€ä¸ªä¸å…¶æ‰€åœ¨ç±»ç›¸åŒç±»å‹çš„å‚æ•°\nå°†å³ä¾§è¿ç®—å¯¹è±¡çš„æ¯ä¸ªéstaticæˆå‘˜èµ‹äºˆå·¦ä¾§è¿ç®—å¯¹è±¡çš„å¯¹åº”æˆå‘˜ã€‚ 3ã€ææ„å‡½æ•° é‡Šæ”¾å¯¹è±¡æ‰€ä½¿ç”¨çš„èµ„æºï¼Œå¹¶é”€æ¯å¯¹è±¡çš„éstaticæ•°æ®æˆå‘˜ã€‚\nåå­—ç”±æ³¢æµªå·æ¥ç±»åæ„æˆã€‚æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿä¸æ¥å—å‚æ•°ã€‚ 1 ~Foo(); è°ƒç”¨æ—¶æœº\nå˜é‡åœ¨ç¦»å¼€å…¶ä½œç”¨åŸŸæ—¶ã€‚ å½“ä¸€ä¸ªå¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œå…¶æˆå‘˜è¢«é”€æ¯ã€‚ å®¹å™¨è¢«é”€æ¯æ—¶ï¼Œå…¶å…ƒç´ è¢«é”€æ¯ã€‚ åŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼Œå½“å¯¹æŒ‡å‘å®ƒçš„æŒ‡é’ˆåº”ç”¨deleteè¿ç®—ç¬¦æ—¶ã€‚ å¯¹äºä¸´æ—¶å¯¹è±¡ï¼Œå½“åˆ›å»ºå®ƒçš„å®Œæ•´è¡¨è¾¾å¼ç»“æŸæ—¶ã€‚ å½“æŒ‡å‘ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æˆ–æŒ‡é’ˆç¦»å¼€ä½œç”¨åŸŸæ—¶,ææ„å‡½æ•°ä¸ä¼šæ‰§è¡Œã€‚ åˆæˆææ„å‡½æ•°\nç©ºå‡½æ•°ä½“æ‰§è¡Œå®Œåï¼Œæˆå‘˜ä¼šè¢«è‡ªåŠ¨é”€æ¯ã€‚ æ³¨æ„ï¼šææ„å‡½æ•°ä½“æœ¬èº«å¹¶ä¸ç›´æ¥é”€æ¯æˆå‘˜ã€‚ ææ„å‡½æ•°å®Œæˆçš„å·¥ä½œ åœ¨ä¸€ä¸ªææ„å‡½æ•°ä¸­ï¼Œé¦–å…ˆæ‰§è¡Œå‡½æ•°ä½“ï¼Œç„¶åé”€æ¯æˆå‘˜ã€‚æˆå‘˜æŒ‰åˆå§‹åŒ–é¡ºåºçš„é€†åºé”€æ¯ã€‚\n4ã€ä¸‰/äº”æ³•åˆ™ éœ€è¦ææ„å‡½æ•°çš„ç±»ä¹Ÿéœ€è¦æ‹·è´å’Œèµ‹å€¼æ“ä½œã€‚ éœ€è¦æ‹·è´æ“ä½œçš„ç±»ä¹Ÿéœ€è¦èµ‹å€¼æ“ä½œï¼Œåä¹‹äº¦ç„¶ã€‚ 5ã€ä½¿ç”¨=default å¯ä»¥é€šè¿‡å°†æ‹·è´æ§åˆ¶æˆå‘˜å®šä¹‰ä¸º=defaultæ¥æ˜¾å¼åœ°è¦æ±‚ç¼–è¯‘å™¨ç”Ÿæˆåˆæˆçš„ç‰ˆæœ¬ã€‚åˆæˆçš„å‡½æ•°å°†éšå¼åœ°å£°æ˜ä¸ºå†…è”çš„ã€‚\n6ã€é˜»æ­¢æ‹·è´ å¤§å¤šæ•°ç±»åº”è¯¥å®šä¹‰é»˜è®¤æ„é€ å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ— è®ºæ˜¯éšå¼åœ°è¿˜æ˜¯æ˜¾å¼åœ°ã€‚\nå®šä¹‰åˆ é™¤çš„å‡½æ•°ï¼š=deleteã€‚ è™½ç„¶å£°æ˜äº†å®ƒä»¬ï¼Œä½†æ˜¯ä¸èƒ½ä»¥ä»»ä½•æ–¹å¼ä½¿ç”¨å®ƒä»¬ã€‚ ææ„å‡½æ•°ä¸èƒ½æ˜¯åˆ é™¤çš„æˆå‘˜ã€‚ å¦‚æœä¸€ä¸ªç±»æœ‰æ•°æ®æˆå‘˜ä¸èƒ½é»˜è®¤æ„é€ ã€æ‹·è´ã€å¤åˆ¶æˆ–è€…é”€æ¯ï¼Œåˆ™å¯¹åº”çš„æˆå‘˜å‡½æ•°å°†è¢«å®šä¹‰ä¸ºåˆ é™¤çš„ã€‚ è€ç‰ˆæœ¬ä½¿ç”¨privateå£°æ˜æ¥é˜»æ­¢æ‹·è´ã€‚ äºŒã€æ‹·è´æ§åˆ¶å’Œèµ„æºç®¡ç† ç±»çš„è¡Œä¸ºå¯ä»¥åƒä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥åƒä¸€ä¸ªæŒ‡é’ˆã€‚ è¡Œä¸ºåƒå€¼ï¼šå¯¹è±¡æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œå‰¯æœ¬å’ŒåŸå¯¹è±¡æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚ è¡Œä¸ºåƒæŒ‡é’ˆï¼šå…±äº«çŠ¶æ€ï¼Œæ‹·è´ä¸€ä¸ªè¿™ç§ç±»çš„å¯¹è±¡æ—¶ï¼Œå‰¯æœ¬å’ŒåŸå¯¹è±¡ä½¿ç”¨ç›¸åŒçš„åº•å±‚æ•°æ®ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class HasPtr{ public: HasPtr(const std::string \u0026amp;s = std::string()): ps(new std::string(s)),i(0){ } //å¯¹psæŒ‡å‘çš„stringï¼Œæ¯ä¸ªHasPtrå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„æ‹·è´ HasPtr(const HasPtr \u0026amp;p):ps( new std::string(*p.ps) ),i(p.i){ } HasPtr\u0026amp; operator=(const HasPtr \u0026amp;); ~HasPtr(){ delete ps; } private: std::string *ps; int i; }; HasPtr\u0026amp; HasPtr::operator=(const HasPtr \u0026amp;rhs) { auto newp = new string(*rhs.ps);//æ‹·è´åº•å±‚string delete ps; //é‡Šæ”¾å°±å†…å­˜ ps = newp; //ä»å³ä¾§è¿ç®—å¯¹è±¡æ‹·è´æ•°æ®åˆ°æœ¬å¯¹è±¡ i = rhs.i; return *this; //è¿”å›æœ¬å¯¹è±¡ } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 class HasPtr{ public: //æ„é€ å‡½æ•°åˆ†é…æ–°çš„stringå’Œæ–°çš„è®¡æ•°å™¨ï¼Œå°†è®¡æ•°å™¨ç½®ä¸º1 HasPtr(const std::string \u0026amp;s = std::string()): ps(new std::string(s)),i(0),use(new std::size_t(1)){ } //æ‹·è´æ„é€ å‡½æ•°æ‹·è´æ‰€æœ‰ä¸‰ä¸ªæ•°æ®æˆå‘˜ï¼Œå¹¶é€’å¢è®¡æ•°å™¨ HasPtr(const HasPtr \u0026amp;p): ps(p.ps),i(p.i),use(p.use) {++*use;} HasPtr\u0026amp; operator=(const HasPtr\u0026amp;); ~HasPtr(); private: std::string *ps; int i; std::size_t *use; //ç”¨æ¥è®°å½•æœ‰å¤šå°‘ä¸ªå¯¹è±¡å…±äº«*psçš„æˆå‘˜ }; HasPtr::~HasPtr() { if(--*use==0){Â //å¦‚æœå¼•ç”¨è®¡æ•°å˜ä¸º0 delete ps; //é‡Šæ”¾stringå†…å­˜ delete use; //é‡Šæ”¾è®¡æ•°å™¨å†…å­˜ } } HasPtr\u0026amp; HasPtr::operator=(const HasPtr \u0026amp;rhs) { ++*rhs.use; //é€’å¢å³ä¾§è¿ç®—å¯¹è±¡çš„å¼•ç”¨è®¡æ•° if(--*use == 0){ //ç„¶åé€’å‡æœ¬å¯¹è±¡çš„å¼•ç”¨è®¡æ•° delete ps; delete use; } ps = rhs.ps; i = rhs.i; use = rhs.use; return * this; } ä¸‰ã€äº¤æ¢æ“ä½œ ç®¡ç†èµ„æºçš„ç±»é€šå¸¸è¿˜å®šä¹‰ä¸€ä¸ªåä¸ºswapçš„å‡½æ•°ã€‚ ç»å¸¸ç”¨äºé‡æ’å…ƒç´ é¡ºåºçš„ç®—æ³•ã€‚ ç”¨swapè€Œä¸æ˜¯std::swapã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class HasPtr{ public: HasPtr(const std::string \u0026amp;s = std::string()): ps(new std::string(s)),i(0){ } //å¯¹psæŒ‡å‘çš„stringï¼Œæ¯ä¸ªHasPtrå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„æ‹·è´ HasPtr(const HasPtr \u0026amp;p):ps( new std::string(*p.ps) ),i(p.i){ } HasPtr\u0026amp; operator=(const HasPtr \u0026amp;); ~HasPtr(){ delete ps; } private: std::string *ps; int i; }; class HasPtr{ friend void swap(HasPtr\u0026amp;,HasPtr\u0026amp;); //å…¶ä»–æˆå‘˜å®šä¹‰... }; inline void swap(HasPtr \u0026amp;lhs,HasPtr \u0026amp;rhs) { using std::swap; swap(lhs.ps,rhs.ps); //äº¤æ¢æŒ‡é’ˆï¼Œè€Œä¸æ˜¯stringæ•°æ® swap(lhs.i,rihs.i); //äº¤æ¢intæˆå‘˜ } å››ã€å¯¹è±¡ç§»åŠ¨ å¾ˆå¤šæ‹·è´æ“ä½œåï¼ŒåŸå¯¹è±¡ä¼šè¢«é”€æ¯ï¼Œå› æ­¤å¼•å…¥ç§»åŠ¨æ“ä½œå¯ä»¥å¤§å¹…åº¦æå‡æ€§èƒ½ã€‚ åœ¨æ–°æ ‡å‡†ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®¹å™¨ä¿å­˜ä¸å¯æ‹·è´çš„ç±»å‹ï¼Œåªè¦å®ƒä»¬å¯ä»¥è¢«ç§»åŠ¨å³å¯ã€‚ æ ‡å‡†åº“å®¹å™¨ã€stringå’Œshared_ptrç±»æ—¢å¯ä»¥æ”¯æŒç§»åŠ¨ä¹Ÿæ”¯æŒæ‹·è´ã€‚IOç±»å’Œunique_ptrç±»å¯ä»¥ç§»åŠ¨ä½†ä¸èƒ½æ‹·è´ã€‚\n1ã€å³å€¼å¼•ç”¨ æ–°æ ‡å‡†å¼•å…¥å³å€¼å¼•ç”¨ä»¥æ”¯æŒç§»åŠ¨æ“ä½œï¼Œæ‰€è°“å³å€¼å¼•ç”¨å°±æ˜¯å¿…é¡»ç»‘å®šåˆ°å³å€¼çš„å¼•ç”¨ã€‚é€šè¿‡\u0026amp;\u0026amp;è·å¾—å³å€¼å¼•ç”¨ã€‚ é‡è¦æ€§è´¨ï¼šåªèƒ½ç»‘å®šåˆ°ä¸€ä¸ªå°†è¦é”€æ¯çš„å¯¹è±¡ã€‚ å³å€¼å¼•ç”¨ç‰¹æ€§ï¼šæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå³å€¼å¼•ç”¨ç»‘å®šåˆ°è¦æ±‚è½¬æ¢çš„è¡¨è¾¾å¼ã€å­—é¢å¸¸é‡æˆ–æ˜¯è¿”å›å³å€¼çš„è¡¨è¾¾å¼ä¸Šï¼Œä½†ä¸èƒ½å°†ä¸€ä¸ªå³å€¼å¼•ç”¨ç›´æ¥ç»‘å®šåˆ°ä¸€ä¸ªå·¦å€¼ä¸Šã€‚å·¦è¾¹å€¼å¼•ç”¨åˆ™å®Œå…¨ç›¸åã€‚\n1.1 å·¦å€¼å¼•ç”¨VSå³å€¼å¼•ç”¨ å¯ç»‘å®šç±»å‹å®Œå…¨ç›¸å å¼•ç”¨ å¯ç»‘å®šè¡¨è¾¾å¼ å·¦å€¼å¼•ç”¨ è¿”å›å·¦å€¼å¼•ç”¨çš„å‡½æ•°ï¼Œèµ‹å€¼ã€ä¸‹æ ‡ã€è§£å¼•ç”¨å’Œå‰ç½®/é€’å‡è¿ç®—ç¬¦ å³å€¼å¼•ç”¨ è¿”å›éå¼•ç”¨ç±»å‹çš„å‡½æ•°ï¼Œç®—æœ¯ã€å…³ç³»ã€ä½å’Œåç½®é€’å¢/é€’å‡è¿ç®—ç¬¦ 2. å·¦å€¼æŒä¹…ã€å³å€¼çŸ­æš‚ å·¦å€¼æœ‰æŒä¹…çš„çŠ¶æ€ï¼Œè€Œå³å€¼è¦ä¹ˆæ˜¯å­—é¢å¸¸é‡ï¼Œè¦ä¹ˆæ˜¯åœ¨è¡¨è¾¾å¼æ±‚å€¼è¿‡ç¨‹ä¸­åˆ›å»ºçš„ä¸´æ—¶å¯¹è±¡ã€‚ ç”±äºå³å€¼å¼•ç”¨åªèƒ½ç»‘å®šåˆ°ä¸´æ—¶å¯¹è±¡ï¼Œæˆ‘ä»¬å¾—çŸ¥ æ‰€å¼•ç”¨çš„å¯¹è±¡å°†è¦è¢«é”€æ¯ è¯¥å¯¹è±¡æ²¡æœ‰å…¶ä»–ç”¨æˆ· 1.2 moveå‡½æ•° è™½ç„¶ä¸èƒ½å°†ä¸€ä¸ªå³å€¼å¼•ç”¨ç›´æ¥ç»‘å®šåˆ°ä¸€ä¸ªå·¦å€¼ä¸Šï¼Œä½†æˆ‘ä»¬å¯ä»¥æ˜¾å¼åœ°å°†ä¸€ä¸ªå·¦å€¼è½¬æ¢ä¸ºå¯¹åº”çš„å³å€¼å¼•ç”¨ç±»å‹ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è°ƒç”¨ä¸€ä¸ªåä¸ºmoveçš„æ–°æ ‡å‡†åº“å‡½æ•°æ¥è·å¾—ç»‘å®šåˆ°å·¦å€¼ä¸Šçš„å³å€¼å¼•ç”¨ï¼Œæ­¤å‡½æ•°å®šä¹‰åœ¨å¤´æ–‡ä»¶utilityä¸­\n1 int \u0026amp;\u0026amp;rr2 = std::move(rr1); moveå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå·¦å€¼ï¼Œä½†æˆ‘å¸Œæœ›åƒå³å€¼ä¸€æ ·å¤„ç†å®ƒã€‚è°ƒç”¨moveæ„å‘³ç€ï¼šé™¤äº†å¯¹rr1èµ‹å€¼æˆ–è€…é”€æ¯å®ƒå¤–ï¼Œæˆ‘ä»¬å°†ä¸å†ä½¿ç”¨å®ƒã€‚\n2ã€ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ 2.1 ç§»åŠ¨æ„é€ å‡½æ•° ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯¥ç±»ç±»å‹çš„ä¸€ä¸ªå¼•ç”¨ï¼Œå…³é”®æ˜¯è¿™ä¸ªå¼•ç”¨å‚æ•°æ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ã€‚\n1 2 3 4 5 StrVec::StrVec(StrVec \u0026amp;\u0026amp;s) noexcept: elements(s.elements),first_free(s.first_free),cap(s.cap) { s.elements = s.first_free = s.cap = nullptr; } ä¸åˆ†é…ä»»ä½•æ–°å†…å­˜ï¼Œåªæ˜¯æ¥ç®¡ç»™å®šçš„å†…å­˜ã€‚æ¥ç®¡å†…å­˜åï¼Œæºå¯¹è±¡ç½®ç©ºï¼Œé˜²æ­¢æºå¯¹è±¡æ§åˆ¶å†…å­˜ã€‚ ç§»åŠ¨æ„é€ å‡½æ•°è¿˜å¿…é¡»ç¡®ä¿ç§»åæºå¯¹è±¡å¤„äºè¿™æ ·ä¸€ä¸ªçŠ¶æ€â€”â€”é”€æ¯å®ƒæ˜¯æ— å®³çš„ï¼Œä¸€æ—¦èµ„æºå®Œæˆç§»åŠ¨ï¼Œæºå¯¹è±¡å¿…é¡»ä¸å†æŒ‡å‘è¢«ç§»åŠ¨çš„èµ„æºâ€”â€” è¿™äº›èµ„æºçš„æ‰€æœ‰æƒå·²ç»å½’å±æ–°åˆ›å»ºçš„å¯¹è±¡ ä»»ä½•é¢å¤–çš„å‚æ•°éƒ½å¿…é¡»æœ‰é»˜è®¤å®å‚ 2.2 ç§»åŠ¨æ“ä½œã€æ ‡å‡†åº“å®¹å™¨å’Œå¼‚å¸¸ ä½¿ç”¨ç§»åŠ¨æ“ä½œå¿…é¡»é€šçŸ¥æ ‡å‡†åº“ç§»åŠ¨æ„é€ å‡½æ•°ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™æ ‡å‡†åº“æ€»è®¤ä¸ºä¼šæœ‰å¼‚å¸¸å­˜åœ¨ã€‚å¯åœ¨å£°æ˜ä¸­æ ‡æ˜noexceptï¼Œæ‰¿è¯ºä¸€ä¸ªå‡½æ•°ä¸æŠ›å‡ºå¼‚å¸¸çš„ä¸€ç§æ–¹æ³•ã€‚\n2.3 ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ 1 StrVec\u0026amp; StrVec::operator=(StrVec \u0026amp;\u0026amp; rhs) noexcept{} 2.4 ç§»åæºå¯¹è±¡å¿…é¡»å¯ææ„ å½“æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç§»åŠ¨æ“ä½œæ—¶ï¼Œå¿…é¡»ç¡®ä¿ç§»åæºå¯¹è±¡è¿›å…¥ä¸€ä¸ªå¯ææ„çš„çŠ¶æ€ã€‚å¯ä»¥é€šè¿‡å°†ç§»åæºå¯¹è±¡çš„æŒ‡é’ˆæˆå‘˜ç½®ä¸ºnullptræ¥å®ç° ç§»åŠ¨æ“ä½œè¿˜å¿…é¡»ä¿è¯å¯¹è±¡ä»ç„¶æ˜¯æœ‰æ•ˆçš„â€”â€”å®‰å…¨ä½¿ç”¨ã€ä¸ä¾èµ–å½“å‰å€¼ ç§»åŠ¨æ“ä½œå¯¹ç§»åæºå¯¹è±¡ä¸­ç•™ä¸‹çš„å€¼æ²¡æœ‰ä»»ä½•è¦æ±‚ 2.5 åˆæˆçš„ç§»åŠ¨æ“ä½œ ç¼–è¯‘å™¨ä¹Ÿä¼šåˆæˆç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ã€‚ä½†æ˜¯ï¼Œåˆæˆç§»åŠ¨æ“ä½œçš„æ¡ä»¶ä¸åˆæˆæ‹·è´æ“ä½œçš„æ¡ä»¶å¤§ä¸ç›¸åŒ\n2.5.1 ä½•æ—¶ä¼šåˆæˆç§»åŠ¨æ“ä½œï¼Ÿ ä¸æ‹·è´æ“ä½œä¸åŒï¼Œç¼–è¯‘å™¨æ ¹æœ¬ä¸ä¼šä¸ºæŸäº›ç±»åˆæˆç§»åŠ¨æ“ä½œã€‚ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœä¸€ä¸ªç±»å®šä¹‰äº†è‡ªå·±çš„æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼è¿ç®—ç¬¦æˆ–è€…ææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šä¸ºå®ƒåˆæˆç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦äº†ã€‚ åªæœ‰å½“ä¸€ä¸ªç±»æ²¡æœ‰å®šä¹‰ä»»ä½•è‡ªå·±ç‰ˆæœ¬çš„æ‹·è´æ§åˆ¶æˆå‘˜ï¼Œä¸”ç±»çš„æ¯ä¸ªéstaticæ•°æ®æˆå‘˜éƒ½å¯ä»¥ç§»åŠ¨æ—¶ï¼Œç¼–è¯‘å™¨æ‰ä¼šä¸ºå®ƒåˆæˆç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ã€‚\n1 2 3 4 5 6 7 8 9 10 //ç¼–è¯‘å™¨ä¼šä¸ºX å’Œ hasXåˆæˆç§»åŠ¨æ“ä½œ struct X{ int i; // å†…ç½®ç±»å‹å¯ä»¥ç§»åŠ¨ std::string s; // stringå®šä¹‰äº†è‡ªå·±çš„ç§»åŠ¨æ“ä½œ }; struct hasX { X mem; // X æœ‰åˆæˆçš„ç§»åŠ¨æ“ä½œ }; X x, x2 = std::move(x); // ä½¿ç”¨åˆæˆçš„ç§»åŠ¨æ„é€ å‡½æ•° hasX hx, hx2 = std::move(hx) ; // ä½¿ç”¨åˆæˆçš„ç§»åŠ¨æ„é€ å‡½æ•° 2.5.2 åˆ é™¤çš„ç§»åŠ¨æ“ä½œ å¦‚ä½•åˆ é™¤ç§»åŠ¨æ“ä½œï¼Ÿ ç§»åŠ¨æ“ä½œæ°¸è¿œä¸ä¼šéšå¼å®šä¹‰ä¸ºåˆ é™¤çš„å‡½æ•°\næ˜¾ç¤ºåœ°è¦æ±‚ç¼–è¯‘å™¨ç”Ÿæˆ=defaultï¼Œç¼–è¯‘å™¨ä¸èƒ½ç§»åŠ¨æ‰€æœ‰æˆå‘˜ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šå°†ç§»åŠ¨æ“ä½œå®šä¹‰ä¸ºåˆ é™¤çš„å‡½æ•° æœ‰ç±»æˆå‘˜å®šä¹‰äº†è‡ªå·±çš„æ‹·è´æ„é€ å‡½æ•°ä¸”æœªå®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œæˆ–è€…æ˜¯æœ‰ç±»æˆå‘˜æœªå®šä¹‰è‡ªå·±çš„æ‹·è´æ„é€ å‡½æ•°ä¸”ç¼–è¯‘å™¨ä¸èƒ½ä¸ºå…¶åˆæˆç§»åŠ¨æ„é€ å‡½æ•°ã€‚ æœæœ‰ç±»æˆå‘˜çš„ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦è¢«å®šä¹‰ä¸ºåˆ é™¤çš„æˆ–æ˜¯ä¸å¯è®¿é—® ç±»ä¼¼æ‹·è´æ„é€ å‡½æ•°ï¼Œå¦‚æœç±»çš„ææ„å‡½æ•°è¢«å®šä¹‰ä¸ºåˆ é™¤çš„æˆ–ä¸å¯è®¿é—®çš„ï¼Œåˆ™ç±»çš„ç§»åŠ¨æ„é€ å‡½æ•°è¢«å®šä¹‰ä¸ºåˆ é™¤çš„ ç±»ä¼¼æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼Œå¦‚æœæœ‰ç±»æˆå‘˜æ˜¯constçš„æˆ–æ˜¯å¼•ç”¨ï¼Œåˆ™ç±»çš„ç§»åŠ¨èµ‹å€¼è¿ç®— ç¬¦è¢«å®šä¹‰ä¸ºåˆ é™¤çš„ 2.5.3 è°ƒç”¨æ—¶ç©¶ç«Ÿä½¿ç”¨å“ªä¸ª å¦‚æœä¸€ä¸ªç±»æ—¢æœ‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œä¹Ÿæœ‰æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä½¿ç”¨æ™®é€šçš„å‡½æ•°åŒ¹é…è§„åˆ™æ¥ç¡®å®šä½¿ç”¨å“ªä¸ªæ„é€ å‡½æ•°ã€‚èµ‹å€¼æ“ä½œçš„æƒ…å†µç±»ä¼¼ã€‚\n2.5.4 æ²¡æœ‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå³å€¼è¢«æ‹·è´ å¦‚æœä¸€ä¸ªç¾æœ‰ä¸€ä¸ªå¯ç”¨çš„æ‹·è´æ„é€ å‡½æ•°è€Œæ²¡æœ‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œåˆ™å…¶å¯¹è±¡æ˜¯é€šè¿‡æ‹·è´æ„é€ å‡½æ•°æ¥â€œç§»åŠ¨â€çš„ã€‚æ‹·è´èµ‹å€¼è¿ç®—ç¬¦å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦çš„æƒ…å†µç±»ä¼¼ã€‚\n2.5.5 åŒæ—¶å®ç°æ‹·è´å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ 1 2 3 4 5 6 7 8 9 10 11 12 13 class HasPtr{ public: // æ·»åŠ çš„ç§»åŠ¨æ„é€ å‡½æ•° HasPtr(HasPtr \u0026amp;\u0026amp;p) noexcept : ps(p.ps), i (p.i) {p.ps = 0;} // èµ‹å€¼è¿ç®—ç¬¦æ—¢æ˜¯ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œä¹Ÿæ˜¯æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ HasPtr\u0026amp; operator=(HasPtr rhs) {swap(*this, rhs); return *this; } ); HasPtr hp , hp2; hp = hp2; hp = std::move(hp2); æ›´æ–°ä¸‰/äº”æ³•åˆ™ï¼šå¦‚æœä¸€ä¸ªç±»å®šä¹‰äº†ä»»ä½•ä¸€ä¸ªæ‹·è´æ“ä½œï¼Œå®ƒå°±åº”è¯¥å®šä¹‰æ‰€æœ‰äº”ä¸ªæ“ä½œã€‚\n3ã€å³å€¼å¼•ç”¨å’Œæˆå‘˜å‡½æ•° å¦‚æœä¸€ä¸ªæˆå‘˜å‡½æ•°åŒæ—¶æä¾›æ‹·è´å’Œç§»åŠ¨ç‰ˆæœ¬ï¼Œå®ƒä¹Ÿèƒ½ä»ä¸­å—ç›Šã€‚è¿™ç§å…è®¸ç§»åŠ¨çš„æˆå‘˜å‡½æ•°é€šå¸¸ä½¿ç”¨ä¸æ‹·è´/ç§»åŠ¨æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦ç›¸åŒçš„å‚æ•°æ¨¡å¼â€”â€”ä¸€ä¸ªç‰ˆæœ¬æ¥å—ä¸€ä¸ªæŒ‡å‘constçš„å·¦å€¼å¼•ç”¨ï¼Œç¬¬äºŒä¸ªç‰ˆæœ¬æ¥å—ä¸€ä¸ªæŒ‡å‘é constçš„å³å€¼å¼•ç”¨\nä¸ºå•¥è¿™æ ·è®¾ç½®å‚æ•°å‘¢ï¼Ÿ ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸ºå‡½æ•°æ“ä½œå®šä¹‰æ¥å—ä¸€ä¸ªconst X\u0026amp;\u0026amp;æˆ–æ˜¯ä¸€ä¸ª(æ™®é€šçš„)X\u0026amp; å‚æ•°çš„ç‰ˆæœ¬ã€‚å½“æˆ‘ä»¬å¸Œæœ›ä»å®å‚\u0026rsquo;\u0026lsquo;çªƒå–â€æ•°æ®æ—¶ï¼Œé€šå¸¸ä¼ é€’ä¸€ä¸ªå³å€¼å¼•ç”¨ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œå®å‚ä¸èƒ½æ˜¯constçš„ã€‚ç±»ä¼¼çš„ï¼Œä»ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ‹·è´çš„æ“ä½œä¸åº”è¯¥æ”¹å˜è¯¥å¯¹è±¡ã€‚ å› æ­¤ï¼Œé€šå¸¸ä¸éœ€è¦å®šä¹‰ä¸€ä¸ªæ¥å—ä¸€ä¸ª(æ™®é€šçš„)X\u0026amp;å‚æ•°çš„ç‰ˆæœ¬ã€‚\n3.1 å¼•ç”¨é™å®šç¬¦é˜»æ­¢çµæ´»çš„å³å€¼æ“ä½œ ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨æˆå‘˜å‡½æ•°ï¼Œè€Œä¸ç®¡è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªå·¦å€¼è¿˜æ˜¯ä¸€ä¸ªå³å€¼\n1 2 3 string s1 = \u0026#34;a value\u0026#34;, s2 = \u0026#34;another\u0026#34;; auto n = (si + s2).find(\u0026#39;a\u0026#39;); //ç›´æ¥åœ¨å³å€¼å¯¹è±¡ä½¿ç”¨æˆå‘˜å‡½æ•° sl + s2 = \u0026#34;wow!\u0026#34;; //ç›´æ¥ç»™å³å€¼å¯¹è±¡èµ‹å€¼ï¼ï¼ï¼ åœ¨æ—§æ ‡å‡†ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•é˜»æ­¢è¿™ç§ä½¿ç”¨æ–¹å¼ã€‚ä¸ºäº†ç»´æŒå‘åå…¼å®¹æ€§ï¼Œæ–°æ ‡å‡†åº“ç±»ä»ç„¶å…è®¸å‘å³å€¼èµ‹å€¼ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›åœ¨è‡ªå·±çš„ç±»ä¸­é˜»æ­¢è¿™ç§ç”¨æ³•ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›å¼ºåˆ¶å·¦ä¾§è¿ç®—å¯¹è±¡(å³ï¼ŒthisæŒ‡å‘çš„å¯¹è±¡)æ˜¯ä¸€ä¸ªå·¦å€¼ã€‚\næŒ‡å‡ºthisçš„å·¦å€¼/å³å€¼å±æ€§çš„æ–¹å¼ï¼Œåœ¨å‚æ•°åˆ—è¡¨åæ”¾ç½®ä¸€ä¸ªå¼•ç”¨é™å®šç¬¦(reference qualifier) ï¼Œå¼•ç”¨é™å®šç¬¦å¯ä»¥æ˜¯\u0026amp;æˆ–\u0026amp;\u0026amp;,åˆ†åˆ«æŒ‡å‡ºthiså¯ä»¥æŒ‡å‘ä¸€ä¸ªå·¦å€¼æˆ–å³å€¼ã€‚ç±»ä¼¼consté™å®šç¬¦ï¼Œ å¼•ç”¨é™å®šç¬¦åªèƒ½ç”¨äº(éstatic)æˆå‘˜å‡½æ•°ï¼Œä¸”å¿…é¡»åŒæ—¶å‡ºç°åœ¨å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰ä¸­ï¼Œå¦‚æœæœ‰consté™å®šåˆ™å¼•ç”¨é™å®šä½äºå…¶å\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class Foo{ public: Foo \u0026amp;operator=(const Foo\u0026amp;) \u0026amp;; // åªèƒ½å‘å¯ä¿®æ”¹çš„å·¦å€¼èµ‹å€¼ }; Foo \u0026amp;Foo::operator=(const Foo \u0026amp;rhs) \u0026amp; { return *this; } Foo \u0026amp;retFoo(); // è¿”å›ä¸€ä¸ªå¼•ç”¨ï¼›retFooè°ƒç”¨æ˜¯ä¸€ä¸ªå·¦å€¼ 1 Foo retVal(); // è¿”å›ä¸€ä¸ªå€¼ï¼›retValè°ƒç”¨æ˜¯ä¸€ä¸ªå³å€¼ Foo i, j; // i å’Œ j æ˜¯å·¦å€¼ i = j; // æ­£ç¡®ï¼šiæ˜¯å·¦å€¼ retFoo() = j; // æ­£ç¡®ï¼šretFoo ()è¿”å›ä¸€ä¸ªå·¦å€¼ retVal() = j; // é”™è¯¯ï¼šretVal () å›ä¸€ä¸ªå³å€¼ i = retVal(); // æ­£ç¡®ï¼šæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå³å€¼ä½œä¸ºèµ‹å€¼æ“ä½œçš„å³ä¾§è¿ç®—å¯¹è±¡ class Foo { public: Foo anotherMem() const \u0026amp;; }; ","pubDate":"2021-10-11","title":"ã€C++ Primer(edition 5) 12ã€‘æ‹·è´æ§åˆ¶"},{"link":"https://cnjslw.github.io/posts/%E5%8A%A8%E6%80%81%E5%88%86%E9%85%8D/","plain":"åŠ¨æ€å†…å­˜çš„ç®¡ç†æ˜¯é€šè¿‡ä¸€å¯¹è¿ç®—ç¬¦æ¥å®Œæˆçš„ï¼šnew,åœ¨åŠ¨æ€å†…å­˜ä¸­ä¸ºå¯¹è±¡åˆ†é…ç©ºé—´å¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å¯¹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼›delete,æ¥å—ä¸€ä¸ªåŠ¨æ€å¯¹è±¡çš„æŒ‡é’ˆï¼Œé”€æ¯è¯¥å¯¹è±¡ï¼Œå¹¶é‡Šæ”¾ä¸ä¹‹å…³è”çš„å†…å­˜ã€‚\nå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼š\nå…¨å±€å¯¹è±¡åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ†é…ï¼Œç»“æŸæ—¶é”€æ¯ã€‚\nå±€éƒ¨å¯¹è±¡åœ¨è¿›å…¥ç¨‹åºå—æ—¶åˆ›å»ºï¼Œç¦»å¼€å—æ—¶é”€æ¯ã€‚\nå±€éƒ¨staticå¯¹è±¡åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨å‰åˆ†é…ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶é”€æ¯ã€‚\nåŠ¨æ€åˆ†é…å¯¹è±¡ï¼šåªèƒ½æ˜¾å¼åœ°è¢«é‡Šæ”¾ã€‚\nå¯¹è±¡çš„å†…å­˜ä½ç½®ï¼š\né™æ€å†…å­˜ç”¨æ¥ä¿å­˜å±€éƒ¨staticå¯¹è±¡ã€ç±»staticå¯¹è±¡ã€å®šä¹‰åœ¨ä»»ä½•å‡½æ•°ä¹‹å¤–çš„å˜é‡ã€‚ æ ˆå†…å­˜ç”¨æ¥ä¿å­˜å®šä¹‰åœ¨å‡½æ•°å†…çš„éstaticå¯¹è±¡ã€‚ å †å†…å­˜ï¼Œåˆç§°è‡ªç”±ç©ºé—´ï¼Œç”¨æ¥å­˜å‚¨åŠ¨æ€åˆ†é…çš„å¯¹è±¡ã€‚ ä¸€ã€newå’Œdeleteç›´æ¥ç®¡ç†å†…å­˜ 1ã€newåŠ¨æ€åˆ†é…å†…å­˜ 1.1 ç”¨newåŠ¨æ€åˆ†é…å’Œåˆå§‹åŒ–å¯¹è±¡ newæ— æ³•ä¸ºåˆ†é…çš„å¯¹è±¡å‘½åï¼ˆå› ä¸ºè‡ªç”±ç©ºé—´åˆ†é…çš„å†…å­˜æ˜¯æ— åçš„ï¼‰ï¼Œå› æ­¤æ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆã€‚\n1 int *pi = new int(123); 1.2 åˆå§‹åŒ–newåˆ†é…çš„å¯¹è±¡çš„æ–¹æ³• é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åˆ†é…çš„å¯¹è±¡æ˜¯é»˜è®¤åˆå§‹åŒ–çš„ã€‚è¿™æ„å‘³ç€å†…ç½®ç±»å‹å’Œç»„åˆç±»å‹çš„å¯¹è±¡çš„å€¼å°†æ˜¯æœªå®šä¹‰çš„ï¼Œè€Œç±»ç±»å‹å¯¹è±¡å°†ç”¨é»˜è®¤æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ– 1 2 string *ps = new string; //åˆå§‹åŒ–ä¸ºç©ºçš„string int *pi = new int; //piæŒ‡å‘ä¸€ä¸ªæœªåˆå§‹åŒ–çš„int å¯ä»¥ä½¿ç”¨ç›´æ¥åˆå§‹åŒ–çš„æ–¹å¼æ¥åˆå§‹åŒ–ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å¯¹è±¡ã€‚å³ä¼ ç»Ÿçš„åœ†æ‹¬å·æ„é€ å’Œæ–°æ ‡å‡†ä¸‹çš„åˆ—è¡¨åˆå§‹åŒ– 1 2 3 int *pi = new int(1024); string *ps = new string(10,\u0026#39;9\u0026#39;); vector\u0026lt;int\u0026gt; *pv = new vector\u0026lt;int\u0026gt;{0,1,2,3,4,5,6,7,8,9}; ä¹Ÿå¯ä»¥å¯¹åŠ¨æ€åˆ†é…çš„å¯¹è±¡è¿›è¡Œå€¼åˆå§‹åŒ–ã€‚åªéœ€è¦åœ¨å…¶ååŠ ä¸€å¯¹æ‹¬å·å³å¯ 1 2 3 4 string *ps1 = new string; //é»˜è®¤åˆå§‹åŒ–ä¸ºç©ºstring string *ps2 = new string(); //å€¼åˆå§‹åŒ–ä¸ºç©ºstring int *pi1 = new int; //é»˜è®¤åˆå§‹åŒ–ï¼›*pilçš„å€¼æœªå®šä¹‰ int *pi2 = new int(); //å€¼åˆå§‹åŒ–ä¸º0ï¼› *pi2ä¸º 0 1.3 åŠ¨æ€åˆ†é…constå¯¹è±¡ newè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªconstæŒ‡é’ˆ é™¤éæœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»ï¼Œä¸ç„¶å¿…é¡»æ˜¾ç¤ºåŒ–åˆå§‹åŒ–å˜é‡\n1.4 å†…å­˜è€—å°½ ä¸€æ—¦å†…å­˜è€—å°½ï¼Œä¼šæŠ›å‡ºç±»å‹æ˜¯bad_allocçš„å¼‚å¸¸ã€‚\n2ã€deleteé‡Šæ”¾å†…å­˜ 2.1 é‡Šæ”¾åŠ¨æ€å†…å­˜ ç”¨deleteå°†åŠ¨æ€å†…å­˜å½’è¿˜ç»™ç³»ç»Ÿã€‚ æ¥å—ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆå¿…é¡»æŒ‡å‘åŠ¨æ€åˆ†é…çš„å†…å­˜æˆ–è€…ä¸€ä¸ªç©ºæŒ‡é’ˆã€‚å®Œæˆä¸¤ä¸ªåŠ¨ä½œ :\né”€æ¯ç»™å®šçš„æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ é‡Šæ”¾å¯¹åº”çš„å†…å­˜ã€‚ 2.2 deleteå’ŒæŒ‡é’ˆ ç¼–è¯‘å™¨ä¸èƒ½åˆ†è¾¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ˜¯é™æ€è¿˜æ˜¯åŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼Œä¹Ÿä¸èƒ½åˆ¤æ–­æ˜¯å¦æŒ‡é’ˆå·²ç»è¢«delete\n3ã€ç›´æ¥ç®¡ç†åŠ¨æ€å†…å­˜å­˜åœ¨çš„å¸¸è§é—®é¢˜ 1.å¿˜è®°deleteå†…å­˜ã€‚ 2.ä½¿ç”¨å·²ç»é‡Šæ”¾æ‰çš„å¯¹è±¡ã€‚ 3.åŒä¸€å—å†…å­˜é‡Šæ”¾ä¸¤æ¬¡ã€‚ 4.å¤šä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€å—åŠ¨æ€å†…å­˜çš„åˆ é™¤é—®é¢˜ 5.ç©ºæ‚¬æŒ‡é’ˆé—®é¢˜ï¼šdeleteåçš„æŒ‡é’ˆç§°ä¸º[[å¯¹ delete -ptr çš„ç†è§£ï¼ˆé‡Šæ”¾å†…å­˜ã€ç©ºæ‚¬æŒ‡é’ˆã€é‡å¤é‡Šæ”¾ï¼‰.pdf | ç©ºæ‚¬æŒ‡é’ˆ]]ï¼ˆdangling pointerï¼‰\nC/C++ ä¸­ä¸ºä»€ä¹ˆ delete ä¸€å—å†…å­˜åï¼Œè¯¥å†…å­˜ä¸å¯å¤ç”¨\nåšæŒåªä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¯ä»¥é¿å…ä¸Šè¿°æ‰€æœ‰é—®é¢˜ã€‚\näºŒã€åŠ¨æ€å†…å­˜ä¸æ™ºèƒ½æŒ‡é’ˆ åŠ¨æ€å†…å­˜çš„ä½¿ç”¨å¾ˆå®¹æ˜“å‡ºé—®é¢˜ï¼Œå› ä¸ºç¡®ä¿åœ¨æ­£ç¡®çš„æ—¶é—´é‡Šæ”¾å†…å­˜æ˜¯æå…¶å›°éš¾çš„ã€‚æœ‰æ—¶æˆ‘ä»¬ä¼šå¿˜è®°é‡Šæ”¾å†…å­˜ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ï¼›æœ‰æ—¶åœ¨å°šæœ‰æŒ‡é’ˆå¼•ç”¨å†…å­˜çš„æƒ…å†µä¸‹æˆ‘ä»¬å°±é‡Šæ”¾äº†å®ƒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å°±ä¼šäº§ç”Ÿå¼•ç”¨éæ³•å†…å­˜çš„æŒ‡é’ˆã€‚ ä¸ºäº†æ›´å®¹æ˜“ï¼ˆåŒæ—¶ä¹Ÿæ›´å®‰å…¨ï¼‰åœ°ä½¿ç”¨åŠ¨æ€å†…å­˜ï¼Œæ–°çš„æ ‡å‡†åº“æä¾›äº†ä¸¤ç§æ™ºèƒ½æŒ‡é’ˆï¼ˆsmart pointerï¼‰ç±»å‹æ¥ç®¡ç†åŠ¨æ€å¯¹è±¡ã€‚\næ™ºèƒ½æŒ‡é’ˆï¼š\nç®¡ç†åŠ¨æ€å¯¹è±¡ã€‚ è¡Œä¸ºç±»ä¼¼å¸¸è§„æŒ‡é’ˆã€‚ è´Ÿè´£è‡ªåŠ¨é‡Šæ”¾æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚ æ™ºèƒ½æŒ‡é’ˆä¹Ÿæ˜¯æ¨¡æ¿ã€‚ shared_ptrå…è®¸å¤šä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼› unique_ptråˆ™\u0026quot;ç‹¬å â€æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚ æ ‡å‡†åº“è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºweak_ptrçš„ä¼´éšç±»ï¼Œå®ƒæ˜¯ä¸€ç§å¼±å¼•ç”¨ï¼ŒæŒ‡å‘shared_ptræ‰€ ç®¡ç†çš„å¯¹è±¡ã€‚ è¿™ä¸‰ç§ç±»å‹éƒ½å®šä¹‰åœ¨memoryå¤´æ–‡ä»¶ä¸­ã€‚\n1ã€shared_ptrç±» 1.1 å®šä¹‰ 1 2 shared_ptr\u0026lt;string\u0026gt; p1; //p1å¯ä»¥æŒ‡å‘string shared_ptr\u0026lt;list\u0026lt;int\u0026gt;\u0026gt; p2; //p2å¯ä»¥æŒ‡å‘intçš„list 1.2 åˆå§‹åŒ– 1.2.1 ç»“åˆnewåˆå§‹åŒ– ç”¨newè¿”å›çš„æŒ‡é’ˆæ¥åˆå§‹åŒ–ï¼Œä½†æ˜¯å¿…é¡»ç›´æ¥åˆå§‹åŒ– ï¼Œå› ä¸ºæ™ºèƒ½æŒ‡é’ˆçš„æ„é€ å‡½æ•°æ˜¯explicitï¼Œæ‰€ä»¥ä¸èƒ½å°†ä¸€ä¸ªå†…ç½®æŒ‡é’ˆéšå¼è½¬åŒ–ä¸ºæ™ºèƒ½æŒ‡é’ˆ\n1 2 3 shared_ptr\u0026lt;double\u0026gt; pl; //shared_ptrå¯ä»¥æŒ‡å‘ä¸€ä¸ªdouble shared_ptr\u0026lt;int\u0026gt; p2(new int(42)); //p2æŒ‡å‘ä¸€ä¸ªå€¼ä¸º42çš„int shared_ptr\u0026lt;int\u0026gt; p3 = new int(1024); //é”™è¯¯ï¼Œåªèƒ½ç›´æ¥åˆå§‹åŒ– 1.2.2 make_sharedå‡½æ•° ä¸ºä»€ä¹ˆä½¿ç”¨ ï¼šæœ€å®‰å…¨çš„åˆ†é…å’Œä½¿ç”¨åŠ¨æ€å†…å­˜çš„æ–¹æ³•æ˜¯è°ƒç”¨ä¸€ä¸ªåä¸ºmake_shared çš„æ ‡å‡†å‡½æ•° ä½œç”¨ ï¼š æ­¤å‡½æ•°åœ¨åŠ¨æ€å†…å­˜ä¸­åˆ†é…ä¸€ä¸ªå¯¹è±¡å¹¶åˆå§‹åŒ–å®ƒï¼Œè¿”å›æŒ‡å‘æ­¤å¯¹è±¡çš„shared_ptr ç”¨æ³• ï¼š make_shared ç”¨å…¶å‚æ•°æ¥æ„é€ ç»™å®šç±»å‹çš„å¯¹è±¡å½“è¦ç”¨make_sharedæ—¶ï¼Œå¿…é¡»æŒ‡å®šæƒ³è¦åˆ›å»ºçš„å¯¹è±¡çš„ç±»å‹ã€‚å®šä¹‰æ–¹å¼ä¸æ¨¡æ¿ç±»ç›¸åŒï¼Œ åœ¨å‡½æ•°åä¹‹åè·Ÿä¸€ä¸ªå°–æ‹¬å·ï¼Œåœ¨å…¶ä¸­ç»™å‡ºç±»å‹ 1 2 3 4 shared_ptr\u0026lt;int\u0026gt; p3 = make_shared\u0026lt;int\u0026gt;(42); shared_ptr\u0026lt;string\u0026gt; p4 = make_shared\u0026lt;string\u0026gt;(10, \u0026#39;9\u0026#39;); shared_ptr\u0026lt;int\u0026gt; p5 = make_shared\u0026lt;int\u0026gt;(); auto p6 = make_shared\u0026lt;vector\u0026lt;string\u0026gt;\u0026gt;(); 1.2.3 ä½¿ç”¨éåŠ¨æ€å†…å­˜åˆå§‹åŒ– é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç”¨æ¥åˆå§‹åŒ–æ™ºèƒ½æŒ‡é’ˆçš„æ™®é€šæŒ‡é’ˆå¿…é¡»æŒ‡å‘åŠ¨æ€å†…å­˜ï¼Œå› ä¸ºæ™ºèƒ½æŒ‡é’ˆé»˜è®¤ä½¿ç”¨deleteé‡Šæ”¾å®ƒæ‰€å…³è”çš„å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥å°†æ™ºèƒ½æŒ‡é’ˆç»‘å®šåˆ°ä¸€ä¸ªæŒ‡å‘å…¶ä»–ç±»å‹çš„ èµ„æºçš„æŒ‡é’ˆä¸Šï¼Œä½†æ˜¯ä¸ºäº†è¿™æ ·åšï¼Œå¿…é¡»æä¾›è‡ªå·±çš„æ“ä½œæ¥æ›¿ä»£deleteã€‚\n1 shared_ptr\u0026lt;string\u0026gt; p(\u0026amp;c , end_string) //å…¶ä¸­end_stringæ˜¯è‡ªå·±å®šä¹‰çš„åˆ é™¤å‡½æ•° 1.3 å®šä¹‰å’Œæ”¹å˜shared_ptrçš„å…¶ä»–æ–¹æ³• æ“ä½œ è§£é‡Š shared_ptr\u0026lt;T\u0026gt; p(q) pç®¡ç†å†…ç½®æŒ‡é’ˆqæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼›qå¿…é¡»æŒ‡å‘newåˆ†é…çš„å†…å­˜ï¼Œä¸”èƒ½å¤Ÿè½¬æ¢ä¸ºT*ç±»å‹ shared_ptr\u0026lt;T\u0026gt; p(u) pä»unique_ptr ué‚£é‡Œæ¥ç®¡äº†å¯¹è±¡çš„æ‰€æœ‰æƒï¼›å°†uç½®ä¸ºç©º shared_ptr\u0026lt;T\u0026gt; p(q, d) pæ¥ç®¡äº†å†…ç½®æŒ‡é’ˆqæ‰€æŒ‡å‘çš„å¯¹è±¡çš„æ‰€æœ‰æƒã€‚qå¿…é¡»èƒ½è½¬æ¢ä¸ºT*ç±»å‹ã€‚på°†ä½¿ç”¨å¯è°ƒç”¨å¯¹è±¡dæ¥ä»£æ›¿deleteã€‚ shared_ptr\u0026lt;T\u0026gt; p(p2, d) pæ˜¯shared_ptr p2çš„æ‹·è´ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯på°†å¯è°ƒç”¨å¯¹è±¡dæ¥ä»£æ›¿deleteã€‚ p.reset() è‹¥pæ˜¯å”¯ä¸€æŒ‡å‘å…¶å¯¹è±¡çš„shared_ptrï¼Œresetä¼šé‡Šæ”¾æ­¤å¯¹è±¡ã€‚è‹¥ä¼ é€’äº†å¯é€‰çš„å‚æ•°å†…ç½®æŒ‡é’ˆqï¼Œä¼šä»¤pæŒ‡å‘qï¼Œå¦åˆ™ä¼šå°†pç½®ç©ºã€‚è‹¥è¿˜ä¼ é€’äº†å‚æ•°dï¼Œåˆ™ä¼šè°ƒç”¨dè€Œä¸æ˜¯deleteæ¥é‡Šæ”¾qã€‚ p.reset(q) åŒä¸Š p.reset(q, d) åŒä¸Š 1.4 shared_ptrç±»çš„æ“ä½œ shared_ptrå’Œunique_ptréƒ½æ”¯æŒçš„æ“ä½œ\næ“ä½œ è§£é‡Š shared_ptr\u0026lt;T\u0026gt; sp unique_ptr\u0026lt;T\u0026gt; up ç©ºæ™ºèƒ½æŒ‡é’ˆï¼Œå¯ä»¥æŒ‡å‘ç±»å‹æ˜¯Tçš„å¯¹è±¡ p å°†pç”¨ä½œä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œè‹¥pæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ä¸ºtrue *p è§£å¼•ç”¨pï¼Œè·å¾—å®ƒæŒ‡å‘çš„å¯¹è±¡ã€‚ p-\u0026gt;mem ç­‰ä»·äº(*p).mem p.get() è¿”å›pä¸­ä¿å­˜çš„æŒ‡é’ˆï¼Œè¦å°å¿ƒä½¿ç”¨ï¼Œè‹¥æ™ºèƒ½æŒ‡é’ˆé‡Šæ”¾äº†å¯¹è±¡ï¼Œè¿”å›çš„æŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡ä¹Ÿå°±æ¶ˆå¤±äº†ã€‚ swap(p, q) p.swap(q) äº¤æ¢på’Œqä¸­çš„æŒ‡é’ˆ shared_ptrç‹¬æœ‰çš„æ“ä½œ\næ“ä½œ è§£é‡Š make_shared\u0026lt;T\u0026gt;(args) è¿”å›ä¸€ä¸ªshared_ptrï¼ŒæŒ‡å‘ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„ç±»å‹ä¸ºTçš„å¯¹è±¡ã€‚ä½¿ç”¨argsåˆå§‹åŒ–æ­¤å¯¹è±¡ã€‚ shared_ptr\u0026lt;T\u0026gt;p(q) pæ˜¯shared_ptr qçš„æ‹·è´ï¼›æ­¤æ“ä½œä¼šé€’å¢qä¸­çš„è®¡æ•°å™¨ã€‚qä¸­çš„æŒ‡é’ˆå¿…é¡»èƒ½è½¬æ¢ä¸ºT* p = q på’Œqéƒ½æ˜¯shared_ptrï¼Œæ‰€ä¿å­˜çš„æŒ‡é’ˆå¿…é¡»èƒ½äº’ç›¸è½¬æ¢ã€‚æ­¤æ“ä½œä¼šé€’å‡pçš„å¼•ç”¨è®¡æ•°ï¼Œé€’å¢qçš„å¼•ç”¨è®¡æ•°ï¼›è‹¥pçš„å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œåˆ™å°†å…¶ç®¡ç†çš„åŸå†…å­˜é‡Šæ”¾ã€‚ p.unique() è‹¥p.use_count()æ˜¯1ï¼Œè¿”å›trueï¼›å¦åˆ™è¿”å›false p.use_count() è¿”å›ä¸på…±äº«å¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆæ•°é‡ï¼›å¯èƒ½å¾ˆæ…¢ï¼Œä¸»è¦ç”¨äºè°ƒè¯•ã€‚ ä½¿ç”¨åŠ¨æ€å†…å­˜çš„ä¸‰ç§åŸå›  ç¨‹åºä¸çŸ¥é“è‡ªå·±éœ€è¦ä½¿ç”¨å¤šå°‘å¯¹è±¡ï¼ˆæ¯”å¦‚å®¹å™¨ç±»ï¼‰ ç¨‹åºä¸çŸ¥é“æ‰€éœ€è¦å¯¹è±¡çš„å‡†ç¡®ç±»å‹ã€‚ ç¨‹åºéœ€è¦åœ¨å¤šä¸ªå¯¹è±¡é—´å…±äº«æ•°æ®ã€‚ 1.5 æ™ºèƒ½æŒ‡é’ˆå’Œå¼‚å¸¸ å¦‚æœä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œå³ä½¿ç¨‹åºå—ç”±äºå¼‚å¸¸è¿‡æ—©ç»“æŸï¼Œæ™ºèƒ½æŒ‡é’ˆç±»ä¹Ÿèƒ½ç¡®ä¿åœ¨å†…å­˜ä¸éœ€è¦çš„æ—¶å€™å°†å…¶é‡Šæ”¾ã€‚ æ™ºèƒ½æŒ‡é’ˆé™·é˜±ï¼š ä¸ç”¨ç›¸åŒçš„å†…ç½®æŒ‡é’ˆåˆå§‹åŒ–ï¼ˆæˆ–resetï¼‰å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆ ä¸delete get()è¿”å›çš„æŒ‡é’ˆã€‚ å¦‚æœä½ ä½¿ç”¨get()è¿”å›çš„æŒ‡é’ˆï¼Œè®°å¾—å½“æœ€åä¸€ä¸ªå¯¹åº”çš„æ™ºèƒ½æŒ‡é’ˆé”€æ¯åï¼Œä½ çš„æŒ‡é’ˆå°±æ— æ•ˆäº†ã€‚ å¦‚æœä½ ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†çš„èµ„æºä¸æ˜¯newåˆ†é…çš„å†…å­˜ï¼Œè®°ä½ä¼ é€’ç»™å®ƒä¸€ä¸ªåˆ é™¤å™¨ã€‚ 2ã€unique_ptr æŸä¸€ä¸ªæ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªunique_ptræŒ‡å‘ä¸€ä¸ªç»™å®šçš„å¯¹è±¡ï¼Œå¹¶â€œæ‹¥æœ‰â€è¯¥å¯¹è±¡ã€‚ å½“å®šä¹‰ä¸€ä¸ªunique_ptræ—¶ï¼Œéœ€è¦å°†å…¶ç»‘å®šåˆ°ä¸€ä¸ªnewè¿”å›çš„æŒ‡é’ˆä¸Šï¼Œå¿…é¡»é‡‡ç”¨ç›´æ¥åˆå§‹åŒ–å½¢å¼ã€‚ ä¸æ”¯æŒæ‹·è´æˆ–è€…èµ‹å€¼æ“ä½œã€‚åªèƒ½å¯ä»¥é€šè¿‡è°ƒç”¨releaseæˆ– resetå°†æŒ‡é’ˆçš„æ‰€æœ‰æƒä»ä¸€ä¸ª(éconst) unique_ptrè½¬ç§»ç»™å¦ä¸€ä¸ª unique 1 2 3 4 5 6 7 // å°†æ‰€æœ‰æƒä»pl (æŒ‡ å‘ string Stegosaurus )è½¬ç§»ç»™p2 unique_ptr\u0026lt;string\u0026gt; p2 (pl.release () ) ; // release å°† pl ç½®ä¸ºç©º unique_ptr\u0026lt;string\u0026gt; p3(new string(\u0026#34;Trex\u0026#34;)); // å°†æ‰€æœ‰æƒä»p3è½¬ç§»ç»™p2 p2.reset (p3.release () ) ; // reset é‡Šæ”¾äº† p2 åŸæ¥æŒ‡å‘çš„å†…å­˜ å‘åå…¼å®¹ï¼šauto_ptrï¼šè€ç‰ˆæœ¬ï¼Œå…·æœ‰unique_ptrçš„éƒ¨åˆ†ç‰¹æ€§ã€‚ç‰¹åˆ«æ˜¯ï¼Œä¸èƒ½åœ¨å®¹å™¨ä¸­ä¿å­˜auto_ptrï¼Œä¹Ÿä¸èƒ½ä»å‡½æ•°è¿”å›auto_ptrã€‚ ä¸èƒ½æ‹·è´unique_ptrçš„è§„åˆ™æœ‰ä¸€ä¸ªä¾‹å¤–ï¼šæˆ‘ä»¬å¯ä»¥æ‹·è´æˆ–èµ‹å€¼ä¸€ä¸ªå°†è¦è¢«é”€æ¯çš„unique_ptr 1 2 3 4 5 //ä»å‡½æ•°è¿”å›unique_ptr unique_ptr\u0026lt;int\u0026gt; clone (int p) { //æ­£ç¡®ï¼šä» int*åˆ›å»ºä¸€ä¸ªunique_ptr\u0026lt;int\u0026gt; return unique_ptr\u0026lt;int\u0026gt;(new int(p)); } 1 2 3 4 5 6 //è¿”å›ä¸€ä¸ªå±€éƒ¨å¯¹è±¡çš„æ‹·è´ unique_ptr\u0026lt;int\u0026gt; clone(int p) { unique_ptr\u0026lt;int\u0026gt; ret (new int(p)); // return ret; } é‡è½½åˆ é™¤å™¨\n1 unique_ptr\u0026lt;objT , delT\u0026gt; p (new objT , fcn); unique_ptræ“ä½œ:\næ“ä½œ è§£é‡Š unique_ptr\u0026lt;T\u0026gt; u1 ç©ºunique_ptrï¼Œå¯ä»¥æŒ‡å‘ç±»å‹æ˜¯Tçš„å¯¹è±¡ã€‚u1ä¼šä½¿ç”¨deleteæ¥æ˜¯é‡Šæ”¾å®ƒçš„æŒ‡é’ˆã€‚ unique_ptr\u0026lt;T, D\u0026gt; u2 u2ä¼šä½¿ç”¨ä¸€ä¸ªç±»å‹ä¸ºDçš„å¯è°ƒç”¨å¯¹è±¡æ¥é‡Šæ”¾å®ƒçš„æŒ‡é’ˆã€‚ unique_ptr\u0026lt;T, D\u0026gt; u(d) ç©ºunique_ptrï¼ŒæŒ‡å‘ç±»å‹ä¸ºTçš„å¯¹è±¡ï¼Œç”¨ç±»å‹ä¸ºDçš„å¯¹è±¡dä»£æ›¿delete u = nullptr é‡Šæ”¾uæŒ‡å‘çš„å¯¹è±¡ï¼Œå°†uç½®ä¸ºç©ºã€‚ u.release() uæ”¾å¼ƒå¯¹æŒ‡é’ˆçš„æ§åˆ¶æƒï¼Œè¿”å›æŒ‡é’ˆï¼Œå¹¶å°†uç½®ç©ºã€‚ u.reset() é‡Šæ”¾uæŒ‡å‘çš„å¯¹è±¡ u.reset(q) ä»¤uæŒ‡å‘qæŒ‡å‘çš„å¯¹è±¡ u.reset(nullptr) å°†uç½®ç©º 3ã€weak_ptr weak_ptræ˜¯ä¸€ç§ä¸æ§åˆ¶æ‰€æŒ‡å‘å¯¹è±¡ç”Ÿå­˜æœŸçš„æ™ºèƒ½æŒ‡é’ˆã€‚æŒ‡å‘ä¸€ä¸ªç”±shared_ptrç®¡ç†çš„å¯¹è±¡ï¼Œä¸æ”¹å˜shared_ptrçš„å¼•ç”¨è®¡æ•°ã€‚ ä¸€æ—¦æœ€åä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„shared_ptrè¢«é”€æ¯ï¼Œå¯¹è±¡å°±ä¼šè¢«é‡Šæ”¾ï¼Œä¸ç®¡æœ‰æ²¡æœ‰weak_ptræŒ‡å‘è¯¥å¯¹è±¡ã€‚\nweak_ptræ“ä½œ:\næ“ä½œ è§£é‡Š weak_ptr\u0026lt;T\u0026gt; w ç©ºweak_ptrå¯ä»¥æŒ‡å‘ç±»å‹ä¸ºTçš„å¯¹è±¡ weak_ptr\u0026lt;T\u0026gt; w(sp) ä¸shared_ptræŒ‡å‘ç›¸åŒå¯¹è±¡çš„weak_ptrã€‚Tå¿…é¡»èƒ½è½¬æ¢ä¸ºspæŒ‡å‘çš„ç±»å‹ã€‚ w = p på¯ä»¥æ˜¯shared_ptræˆ–ä¸€ä¸ªweak_ptrã€‚èµ‹å€¼åwå’Œpå…±äº«å¯¹è±¡ã€‚ w.reset() å°†wç½®ä¸ºç©ºã€‚ w.use_count() ä¸wå…±äº«å¯¹è±¡çš„shared_ptrçš„æ•°é‡ã€‚ w.expired() è‹¥w.use_count()ä¸º0ï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false w.lock() å¦‚æœexpiredä¸ºtrueï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºshared_ptrï¼›å¦åˆ™è¿”å›ä¸€ä¸ªæŒ‡å‘wçš„å¯¹è±¡çš„shared_ptrã€‚ åˆ›å»ºä¸€ä¸ªweak_ptr\næˆ‘ä»¬åˆ›å»ºä¸€ä¸ªweak_ptræ—¶ï¼Œè¦ç”¨ä¸€ä¸ªshared_ptræ¥åˆå§‹åŒ–å®ƒ\n1 2 auto p = make_shared\u0026lt;int\u0026gt;(42); weak_ptr\u0026lt;int\u0026gt; wp (p) ; // wpå¼±å…±äº«pï¼› p çš„å¼•ç”¨è®¡æ•°æœªæ”¹å˜ ç”±äºå¯¹è±¡å¯èƒ½ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨weak_ptrç›´æ¥è®¿é—®å¯¹è±¡ï¼Œå¿…é¡»è°ƒç”¨lockæ­¤å‡½æ•°æ£€æŸ¥weak_ptræŒ‡å‘çš„å¯¹è±¡æ˜¯å¦ä»å­˜åœ¨ã€‚å¦‚æœå­˜åœ¨ï¼Œlockè¿”å›ä¸€ä¸ªæŒ‡å‘å…±äº«å¯¹è±¡çš„ shared_ptrã€‚\n1 2 if(shared_ptr\u0026lt;int\u0026gt; np = wp.lock()) {} ä¸‰ã€åŠ¨æ€æ•°ç»„ 1ã€newå’Œæ•°ç»„ 1.1 newä¸€ä¸ªåŠ¨æ€æ•°ç»„ ç±»å‹åä¹‹ååŠ ä¸€å¯¹æ–¹æ‹¬å·ï¼ŒæŒ‡æ˜åˆ†é…çš„å¯¹è±¡æ•°ç›®ï¼ˆå¿…é¡»æ˜¯æ•´å‹ï¼Œä¸å¿…æ˜¯å¸¸é‡ï¼‰ã€‚ è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå¯¹è±¡çš„æŒ‡é’ˆã€‚ 1 int *p = new int[size]; æ–¹æ‹¬å·ä¸­çš„å¤§å°å¿…é¡»æ˜¯æ•´å½¢ï¼Œä½†ä¸å¿…æ˜¯å¸¸é‡ã€‚ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªè¡¨ç¤ºæ•°ç»„ç±»å‹çš„ç±»å‹åˆ«åæ¥åˆ†é…ä¸€ä¸ªæ•°ç»„è¿™æ ·newè¡¨è¾¾å¼ä¸­å°±ä¸éœ€è¦æ–¹æ‹¬å·äº†ã€‚ 1 2 typedef int arrT [42] ; //arrT è¡¨ç¤º 42 ä¸ª int çš„æ•°ç»„ç±»å‹ int *p = new arrT; //åˆ†é…ä¸€ä¸ª42ä¸ª intçš„æ•°ç»„ï¼›p æŒ‡å‘ç¬¬ä¸€ä¸ªint åŠ¨æ€åˆ†é…ä¸€ä¸ªç©ºæ•°ç»„ä¹Ÿæ˜¯åˆæ³•çš„ï¼Œè¿™æ ·çš„æŒ‡é’ˆå°±ç±»ä¼¼äºå°¾åæŒ‡é’ˆã€‚ 1.2 åˆå§‹åŒ–åŠ¨æ€æ•°ç»„ æ–¹æ³•ä¸€ï¼šåœ¨æ•°ç»„å¤§å°ä¹‹åè·Ÿä¸€å¯¹ç©ºæ‹¬å· 1 2 3 4 int *pia = new int[10]; // 10ä¸ªæœªåˆå§‹åŒ–çš„int int *pia2 = new int[10](); // 10ä¸ªå€¼åˆå§‹åŒ–ä¸º0 çš„ int string *psa = new string[10]; // 10 ä¸ªç©º string string *psa2 = new string[10](); // 10 ä¸ªç©º string æ–¹æ³•äºŒï¼šæä¾›ä¸€ä¸ªå…ƒç´ åˆå§‹åŒ–å™¨çš„èŠ±æ‹¬å·åˆ—è¡¨ 1 2 3 4 // 10ä¸ª intåˆ†åˆ«ç”¨åˆ—è¡¨ä¸­å¯¹åº”çš„åˆå§‹åŒ–å™¨åˆå§‹åŒ– int *pia3 = new int[10]{0,1,2,3,4,5,6,7,8,9}; // 10ä¸ª string,å‰ 4ä¸ªç”¨ç»™å®šçš„åˆå§‹åŒ–å™¨åˆå§‹åŒ–ï¼Œå‰©ä½™çš„è¿›è¡Œå€¼åˆå§‹åŒ– string *psa3 = new string [10] {\u0026#34;a\u0026#34;, \u0026#34;an\u0026#34;ï¼Œ \u0026#34;the\u0026#34;ï¼Œ string (3,\u0026#39;x\u0026#39;)}; 2ã€deleteé‡Šæ”¾ä¸€ä¸ªåŠ¨æ€æ•°ç»„ ä¸ºäº†é‡Šæ”¾åŠ¨æ€æ•°ç»„ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ç§ç‰¹æ®Šå½¢å¼çš„deleteâ€” åœ¨æŒ‡é’ˆå‰åŠ ä¸Šä¸€ä¸ªç©ºæ–¹æ‹¬å·å¯¹\n1 delete [] p; //æ•°ç»„ä¸­çš„å…ƒç´ æŒ‰é€†åºé”€æ¯ æ–¹æ‹¬å·å¯¹æ˜¯å¿…éœ€çš„ï¼šå®ƒæŒ‡ç¤ºç¼–è¯‘å™¨æ­¤æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå¯¹è±¡æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å³ä½¿ä½¿ç”¨ç±»å‹åˆ«åï¼Œä¹Ÿéœ€è¦æ–¹æ‹¬å·å¯¹\n3ã€æ™ºèƒ½æŒ‡é’ˆunique_ptrå’ŒåŠ¨æ€æ•°ç»„ 3.1 å®šä¹‰ä¸é”€æ¯ åœ¨å®šä¹‰æ—¶ï¼Œåœ¨å¯¹è±¡ç±»å‹åé¢è·Ÿä¸€å¯¹ç©ºæ–¹æ‹¬å·ã€‚ 1 2 3 //upæŒ‡å‘ä¸€ä¸ªåŒ…å«10ä¸ªæœªåˆå§‹åŒ–intçš„æ•°ç»„ unique_ptr\u0026lt;int[]\u0026gt; up(new int[10]); up.release(); // è‡ªåŠ¨ç”¨delete []é”€æ¯å…¶æŒ‡é’ˆ ç±»å‹è¯´æ˜ç¬¦ä¸­çš„æ–¹æ‹¬å·(\u0026lt;int[]\u0026gt;)æŒ‡ å‡º up æŒ‡å‘ä¸€ä¸ªintæ•°ç»„è€Œä¸æ˜¯ä¸€ä¸ªintã€‚ç”±äº upæŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼Œå½“ upé”€æ¯å®ƒç®¡ç†çš„æŒ‡é’ˆæ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨delete[]\n3.2 æ“ä½œ æŒ‡å‘æ•°ç»„çš„unique_pträ¸æ”¯æŒæˆå‘˜è®¿é—®è¿ç®—ç¬¦ï¼ˆç‚¹å’Œç®­å¤´ï¼‰ã€‚å½“ä¸€ä¸ªunique_ptræŒ‡å‘ä¸€ä¸ªæ•°ç»„æ—¶, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è¿ç®—ç¬¦æ¥è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ \næ“ä½œ è§£é‡Š unique_ptr\u0026lt;T[]\u0026gt; u uå¯ä»¥æŒ‡å‘ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„æ•°ç»„ï¼Œæ•´æ•°å…ƒç´ ç±»å‹ä¸ºT unique_ptr\u0026lt;T[]\u0026gt; u(p) uæŒ‡å‘å†…ç½®æŒ‡é’ˆpæ‰€æŒ‡å‘çš„åŠ¨æ€åˆ†é…çš„æ•°ç»„ã€‚på¿…é¡»èƒ½è½¬æ¢ä¸ºç±»å‹T*ã€‚ u[i] è¿”å›uæ‹¥æœ‰çš„æ•°ç»„ä¸­ä½ç½®iå¤„çš„å¯¹è±¡ã€‚uå¿…é¡»æŒ‡å‘ä¸€ä¸ªæ•°ç»„ã€‚ shared_pträ¸ç›´æ¥æ”¯æŒç®¡ç†åŠ¨æ€æ•°ç»„ï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨åˆ™éœ€è¦å®šä¹‰è‡ªå·±çš„åˆ é™¤å™¨ã€‚å¹¶ä¸”å…¶æœªå®šä¹‰ä¸‹æ ‡è¿ç®—ç¬¦ï¼Œè€Œä¸”æ™ºèƒ½æŒ‡é’ˆç±»å‹ä¸æ”¯æŒæŒ‡é’ˆç®—æ•°æœ¯è¿ç®—ã€‚ä¸ºäº†è®¿é—®å…ƒç´ ,å¿…é¡»ç”¨getè·å–ä¸€ä¸ªå†…ç½®æŒ‡é’ˆç„¶åè®¿é—®å…ƒç´  4ã€allocatorç±» 4.1 newã€delete ç®¡ç†åŠ¨æ€æ•°ç»„ä¹‹å›° newã€deteleå°†å†…å­˜åˆ†é…å’Œå¯¹è±¡æ„é€ ç»„åˆåœ¨äº†ä¸€ èµ· ä½†æ˜¯å­˜åœ¨ä¸€ç§æƒ…å†µï¼Œå¸Œæœ›å°†å†…å­˜åˆ†é…å’Œå¯¹è±¡æ„é€ åˆ†ç¦»ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åˆ†é…å¤§å—å†…å­˜ï¼Œä½†åªåœ¨çœŸæ­£éœ€è¦æ—¶æ‰çœŸæ­£æ‰§è¡Œå¯¹è±¡åˆ›å»ºæ“ä½œã€‚ è¿™æš´éœ²äº†è¿™ç§ç®¡ç†åŠ¨æ€æ•°ç»„çš„ç¼ºç‚¹ï¼šå¯èƒ½ä¼šé€ æˆä¸å¿…è¦çš„æµªè´¹\n1 2 3 4 5 6 7 string *const p = new string [n] ; //æ„é€  n ä¸ªç©º string string s; string *q = p; // q æŒ‡å‘ç¬¬ä¸€ä¸ª string while ï¼ˆcin\u0026gt;\u0026gt;s \u0026amp; \u0026amp; q ! = p + n ï¼‰ *q++ = s; // èµ‹äºˆ*qä¸€ä¸ªæ–°å€¼ const size_t size = q - p; //è®°ä½æˆ‘ä»¬è¯»å–äº†å¤šå°‘ä¸ªstring // ä½¿ç”¨æ•°ç»„ delete [] p; // p æŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼›è®°å¾—ç”¨delete []æ¥é‡Šæ”¾ é—®é¢˜1ï¼šåœ¨ä¸çŸ¥é“æœ‰å¤šå°‘è¾“å…¥å­—ç¬¦ä¸²æ—¶ï¼Œå°±é¢„å…ˆåˆ†é…äº†nä¸ªå…ƒç´ çš„æ•°ç»„ é—®é¢˜2ï¼šèµ‹å€¼äº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡é»˜è®¤åˆå§‹åŒ–ï¼Œéšååˆèµ‹å€¼ é—®é¢˜3ï¼šæ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»å°±ä¸èƒ½åŠ¨æ€åˆ†é…æ•°ç»„\n4.2 allocatorç±» æ ‡å‡†åº“allocatorç±»å®šä¹‰åœ¨å¤´æ–‡ä»¶memoryä¸­ï¼Œå¸®åŠ©æˆ‘ä»¬å°†å†…å­˜åˆ†é…å’Œå¯¹è±¡æ„é€ åˆ†ç¦»å¼€ã€‚\nåˆ†é…çš„æ˜¯åŸå§‹çš„ã€æœªæ„é€ çš„å†…å­˜ã€‚ allocatoræ˜¯ä¸€ä¸ªæ¨¡æ¿ã€‚å½“ä¸€ä¸ª allocatorå¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼Œå®ƒä¼šæ ¹æ®ç»™å®šçš„å¯¹è±¡ç±»å‹æ¥ç¡®å®šæ°å½“çš„å†…å­˜å¤§å°å’Œå¯¹é½ä½ç½® 4.2.1 allocatoråˆ†é…æœªæ„é€ çš„å†…å­˜ æ ‡å‡†åº“allocatorç±»åŠå…¶ç®—æ³•\næ“ä½œ è§£é‡Š allocator\u0026lt;T\u0026gt; a å®šä¹‰äº†ä¸€ä¸ªåä¸ºaçš„allocatorå¯¹è±¡ï¼Œå®ƒå¯ä»¥ä¸ºç±»å‹ä¸ºTçš„å¯¹è±¡åˆ†é…å†…å­˜ a.allocate(n) åˆ†é…ä¸€æ®µåŸå§‹çš„ã€æœªæ„é€ çš„å†…å­˜ï¼Œä¿å­˜nä¸ªç±»å‹ä¸ºTçš„å¯¹è±¡ã€‚ a.deallocate(p, n) é‡Šæ”¾ä»T*æŒ‡é’ˆpä¸­åœ°å€å¼€å§‹çš„å†…å­˜ï¼Œè¿™å—å†…å­˜ä¿å­˜äº†nä¸ªç±»å‹ä¸ºTçš„å¯¹è±¡ï¼›på¿…é¡»æ˜¯ä¸€ä¸ªå…ˆå‰ç”±allocateè¿”å›çš„æŒ‡é’ˆã€‚ä¸”nå¿…é¡»æ˜¯påˆ›å»ºæ—¶æ‰€è¦æ±‚çš„å¤§å°ã€‚åœ¨è°ƒç”¨deallocateä¹‹å‰ï¼Œç”¨æˆ·å¿…é¡»å¯¹æ¯ä¸ªåœ¨è¿™å—å†…å­˜ä¸­åˆ›å»ºçš„å¯¹è±¡è°ƒç”¨destroyã€‚ a.construct(p, args) på¿…é¡»æ˜¯ä¸€ä¸ªç±»å‹æ˜¯T*çš„æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€å—åŸå§‹å†…å­˜ï¼›argsè¢«ä¼ é€’ç»™ç±»å‹ä¸ºTçš„æ„é€ å‡½æ•°ï¼Œç”¨æ¥åœ¨pæŒ‡å‘çš„å†…å­˜ä¸­æ„é€ ä¸€ä¸ªå¯¹è±¡ã€‚ a.destroy(p) pä¸ºT*ç±»å‹çš„æŒ‡é’ˆï¼Œæ­¤ç®—æ³•å¯¹pæŒ‡å‘çš„å¯¹è±¡æ‰§è¡Œææ„å‡½æ•°ã€‚ allocatoråˆ†é…çš„å†…å­˜æ˜¯æœªæ„é€ çš„(unconstructed)ã€‚æˆ‘ä»¬æŒ‰éœ€è¦åœ¨æ­¤å†…å­˜ä¸­æ„é€ å¯¹ è±¡ã€‚åœ¨æ–°æ ‡å‡†åº“ä¸­ï¼Œconstructæˆå‘˜å‡½æ•°æ¥å—ä¸€ä¸ªæŒ‡é’ˆå’Œé›¶ä¸ªæˆ–å¤šä¸ªé¢å¤–å‚æ•°ï¼Œåœ¨ç»™å®šä½ç½®æ„é€ ä¸€ä¸ªå…ƒç´ ã€‚é¢å¤–å‚æ•°ç”¨æ¥åˆå§‹åŒ–æ„é€ çš„å¯¹è±¡\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 allocator\u0026lt;string\u0026gt; alloc; //å¯ä»¥åˆ†é…stringçš„allocatorå¯¹ç° auto const p = alloc.allocate(n); //åˆ†é…nä¸ªæœªåˆå§‹åŒ–çš„string auto q = p; // q æŒ‡å‘æœ€åæ„é€ çš„å…ƒç´ ä¹‹åçš„ä½ç½® //ä¸ºäº†ä½¿ç”¨allocateè¿”å›çš„å†…å­˜ï¼Œæˆ‘ä»¬å¿…é¡»ç”¨constructæ„é€ å¯¹è±¡ alloc.construct (q++) ; // *q ä¸ºç©ºå­—ç¬¦ä¸² alloc.construct(q++, 10, \u0026#39;c\u0026#39; ); // *q ä¸º cccccccccc alloc.construct(q++, \u0026#34;hi\u0026#34;); //*qä¸ºhi! cout \u0026lt;\u0026lt; *p \u0026lt;\u0026lt; endl; // æ­£ç¡®ï¼šä½¿ç”¨stringçš„è¾“å‡ºè¿ç®—ç¬¦ cout \u0026lt;\u0026lt; *q \u0026lt;\u0026lt; endl; // ç¾éš¾ï¼šq æŒ‡å‘æœªæ„é€ çš„å†…å­˜ï¼ //å½“æˆ‘ä»¬ç”¨å®Œå¯¹è±¡åï¼Œå¿…é¡»å¯¹æ¯ä¸ªæ„é€ çš„å…ƒç´ è°ƒç”¨destroyæ¥é”€æ¯å®ƒä»¬ã€‚å‡½æ•°destroy æ¥å—ä¸€ä¸ªæŒ‡é’ˆï¼Œå¯¹æŒ‡å‘çš„å¯¹è±¡æ‰§è¡Œææ„å‡½æ•° while (q != p) alloc.destroy (--q) ; // é‡Šæ”¾æˆ‘ä»¬çœŸæ­£æ„é€ çš„string //å…ƒç´ é”€æ¯åï¼Œ1.ç»§ç»­åˆ†é…ç»™å…¶ä»–å…ƒç´  2.deallocateé‡Šæ”¾å†…å­˜ï¼Œè¿˜ç»™ç³»ç»Ÿ alloc.deallocate(p, n); allocatorç®—æ³•ï¼š\næ“ä½œ è§£é‡Š uninitialized_copy(b, e, b2) ä»è¿­ä»£å™¨bå’Œeç»™å®šçš„è¾“å…¥èŒƒå›´ä¸­æ‹·è´å…ƒç´ åˆ°è¿­ä»£å™¨b2æŒ‡å®šçš„æœªæ„é€ çš„åŸå§‹å†…å­˜ä¸­ã€‚b2æŒ‡å‘çš„å†…å­˜å¿…é¡»è¶³å¤Ÿå¤§ï¼Œèƒ½å¤Ÿå®¹çº³è¾“å…¥åºåˆ—ä¸­å…ƒç´ çš„æ‹·è´ã€‚ uninitialized_copy_n(b, n, b2) ä»è¿­ä»£å™¨bæŒ‡å‘çš„å…ƒç´ å¼€å§‹ï¼Œæ‹·è´nä¸ªå…ƒç´ åˆ°b2å¼€å§‹çš„å†…å­˜ä¸­ã€‚ uninitialized_fill(b, e, t) åœ¨è¿­ä»£å™¨bå’Œeæ‰§è¡Œçš„åŸå§‹å†…å­˜èŒƒå›´ä¸­åˆ›å»ºå¯¹è±¡ï¼Œå¯¹è±¡çš„å€¼å‡ä¸ºtçš„æ‹·è´ã€‚ uninitialized_fill_n(b, n, t) ä»è¿­ä»£å™¨bæŒ‡å‘çš„å†…å­˜åœ°å€å¼€å§‹åˆ›å»ºnä¸ªå¯¹è±¡ã€‚bå¿…é¡»æŒ‡å‘è¶³å¤Ÿå¤§çš„æœªæ„é€ çš„åŸå§‹å†…å­˜ï¼Œèƒ½å¤Ÿå®¹çº³ç»™å®šæ•°é‡çš„å¯¹è±¡ã€‚ å®šä¹‰åœ¨å¤´æ–‡ä»¶memoryä¸­ã€‚ åœ¨ç»™å®šç›®çš„ä½ç½®åˆ›å»ºå…ƒç´ ï¼Œè€Œä¸æ˜¯ç”±ç³»ç»Ÿåˆ†é…å†…å­˜ç»™ä»–ä»¬ã€‚åŠ¨æ€å†…å­˜çš„ç®¡ç†æ˜¯é€šè¿‡ä¸€å¯¹è¿ç®—ç¬¦æ¥å®Œæˆçš„ï¼šnew,åœ¨åŠ¨æ€å†…å­˜ä¸­ä¸ºå¯¹è±¡ åˆ†é…ç©ºé—´å¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å¯¹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼›delete,æ¥ å—ä¸€ä¸ªåŠ¨æ€å¯¹è±¡çš„æŒ‡é’ˆï¼Œé”€æ¯è¯¥å¯¹è±¡ï¼Œå¹¶é‡Šæ”¾ä¸ä¹‹å…³è”çš„å†…å­˜ã€‚ ","pubDate":"2021-10-07","title":"ã€C++ Primer(edition 5) 11ã€‘åŠ¨æ€å†…å­˜"},{"link":"https://cnjslw.github.io/posts/%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95/","plain":" å› ä¸ºå®ƒä»¬å®ç°å…±åŒçš„æ“ä½œï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºâ€œç®—æ³•â€ï¼›è€Œâ€œæ³›å‹â€ã€æŒ‡çš„æ˜¯å®ƒä»¬å¯ä»¥æ“ä½œåœ¨å¤šç§å®¹å™¨ç±»å‹ä¸Šã€‚ æ³›å‹ç®—æ³•æœ¬èº«ä¸æ‰§è¡Œå®¹å™¨æ“ä½œï¼Œåªæ˜¯å•ç‹¬ä¾èµ–è¿­ä»£å™¨å’Œè¿­ä»£å™¨æ“ä½œå®ç°ã€‚ å¤´æ–‡ä»¶ï¼š #include \u0026lt;algorithm\u0026gt;æˆ–è€… #include \u0026lt;numeric\u0026gt;(ç®—æ•°ç›¸å…³) å¤§å¤šæ•°ç®—æ³•æ˜¯é€šè¿‡éå†ä¸¤ä¸ªè¿­ä»£å™¨æ ‡è®°çš„ä¸€æ®µå…ƒç´ æ¥å®ç°å…¶åŠŸèƒ½ã€‚ å¿…è¦çš„ç¼–ç¨‹å‡å®šï¼šç®—æ³•æ°¸è¿œä¸ä¼šæ”¹å˜åº•å±‚å®¹å™¨çš„å¤§å°ã€‚ç®—æ³•å¯èƒ½æ”¹å˜å®¹å™¨ä¸­ä¿å­˜çš„å…ƒç´ çš„å€¼ï¼Œä¹Ÿå¯èƒ½åœ¨å®¹å™¨å†…ç§»åŠ¨å…ƒç´ ï¼Œä½†ä¸èƒ½ç›´æ¥æ·»åŠ æˆ–è€…åˆ é™¤å…ƒç´ ã€‚ ä¸€ã€find vector\u0026lt;int\u0026gt;::const_iterator result = find(vec.begin(), vec.end(), search_value); è¾“å…¥ï¼šä¸¤ä¸ªæ ‡è®°èŒƒå›´çš„è¿­ä»£å™¨å’Œç›®æ ‡æŸ¥æ‰¾å€¼ã€‚è¿”å›ï¼šå¦‚æœæ‰¾åˆ°ï¼Œè¿”å›å¯¹åº”çš„è¿­ä»£å™¨ï¼Œå¦åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°ï¼Œå³æ ‡è®°ç»“å°¾çš„è¿­ä»£å™¨ã€‚ äºŒã€åˆè¯†æ³›å‹ç®—æ³• æ ‡å‡†åº“æä¾›äº†è¶…è¿‡100ä¸ªç®—æ³•ï¼Œä½†è¿™äº›ç®—æ³•æœ‰ä¸€è‡´çš„ç»“æ„ã€‚ ç†è§£ç®—æ³•çš„æœ€åŸºæœ¬çš„æ–¹æ³•æ˜¯äº†è§£å®ƒä»¬æ˜¯å¦è¯»å–å…ƒç´ ã€æ”¹å˜å…ƒç´ ã€é‡æ’å…ƒç´ é¡ºåºã€‚ 1ã€åªè¯»ç®—æ³• åªè¯»å–èŒƒå›´ä¸­çš„å…ƒç´ ï¼Œä¸æ”¹å˜å…ƒç´ ã€‚ å¦‚ findå’Œ accumulateï¼ˆåœ¨numericä¸­å®šä¹‰ï¼Œæ±‚å’Œï¼‰ã€‚ find_first_ofï¼Œè¾“å…¥ï¼šä¸¤å¯¹è¿­ä»£å™¨æ ‡è®°ä¸¤æ®µèŒƒå›´ï¼Œåœ¨ç¬¬ä¸€æ®µä¸­æ‰¾ç¬¬äºŒæ®µä¸­ä»»æ„å…ƒç´ ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ï¼Œæ‰¾ä¸åˆ°è¿”å›ç¬¬ä¸€æ®µçš„endè¿­ä»£å™¨ã€‚ é€šå¸¸æœ€å¥½ä½¿ç”¨cbeginå’Œcendã€‚ equalï¼šç¡®å®šä¸¤ä¸ªåºåˆ—æ˜¯å¦ä¿å­˜ç›¸åŒçš„å€¼ã€‚ 2ã€å†™å®¹å™¨å…ƒç´ çš„ç®—æ³• ä¸€äº›ç®—æ³•å°†æ–°å€¼èµ‹äºˆåºåˆ—ä¸­çš„å…ƒç´ ã€‚ ç®—æ³•ä¸æ£€æŸ¥å†™æ“ä½œã€‚ fillï¼š fill(vec.begin(), vec.end(), 0); å°†æ¯ä¸ªå…ƒç´ é‡ç½®ä¸º0 fill_nï¼š fill_n(vec.begin(), 10, 0); æ’å…¥è¿­ä»£å™¨back_inserterï¼š ç”¨æ¥ç¡®ä¿ç®—æ³•æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜å‚¨æ•°æ®ã€‚ #include \u0026lt;iterator\u0026gt; back_inserter(vec) æ‹·è´ç®—æ³•copyï¼š è¾“å…¥ï¼šå‰ä¸¤ä¸ªå‚æ•°æŒ‡å®šè¾“å…¥èŒƒå›´ï¼Œç¬¬ä¸‰ä¸ªæŒ‡å‘ç›®æ ‡åºåˆ—ã€‚ copy (ilst.begin(), ilst.end(), back_inserter(ivec)); copyæ—¶å¿…é¡»ä¿è¯ç›®æ ‡ç›®çš„åºåˆ—è‡³å°‘è¦åŒ…å«ä¸è¾“å…¥åºåˆ—ä¸€æ ·å¤šçš„å…ƒç´ ã€‚ 3ã€é‡æ’å®¹å™¨å…ƒç´ çš„ç®—æ³• è¿™äº›ç®—æ³•ä¼šé‡æ’å®¹å™¨ä¸­å…ƒç´ çš„é¡ºåºã€‚ æ’åºç®—æ³•sortï¼š æ¥å—ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œè¡¨ç¤ºè¦æ’åºçš„å…ƒç´ èŒƒå›´ã€‚ æ¶ˆé™¤é‡å¤uniqueï¼š ä¹‹å‰è¦å…ˆè°ƒç”¨sort è¿”å›çš„è¿­ä»£å™¨æŒ‡å‘æœ€åä¸€ä¸ªä¸é‡å¤å…ƒç´ ä¹‹åçš„ä½ç½®ã€‚ é¡ºåºä¼šå˜ï¼Œé‡å¤çš„å…ƒç´ è¢«â€œåˆ é™¤â€ã€‚ å¹¶æ²¡æœ‰çœŸæ­£åˆ é™¤ï¼ŒçœŸæ­£åˆ é™¤å¿…é¡»ä½¿ç”¨å®¹å™¨æ“ä½œã€‚ ä¸‰ã€å®šåˆ¶æ“ä½œ 1ã€å‘ç®—æ³•ä¼ é€’å‡½æ•°ï¼š è°“è¯ï¼ˆpredicateï¼‰ï¼š\næ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„è¡¨è¾¾å¼ï¼Œè¿”å›ç»“æœæ˜¯ä¸€ä¸ªèƒ½ç”¨ä½œæ¡ä»¶çš„å€¼ ä¸€å…ƒè°“è¯ï¼šæ¥å—ä¸€ä¸ªå‚æ•° äºŒå…ƒè°“è¯ï¼šæ¥å—ä¸¤ä¸ªå‚æ•° ä¾‹å­ï¼š\nstable_sortï¼š ä¿ç•™ç›¸ç­‰å…ƒç´ çš„åŸå§‹ç›¸å¯¹ä½ç½®ã€‚ stable_sort(words.begin(), words.end(), isShorter); 2ã€lambdaè¡¨è¾¾å¼ 2.1 å¯è°ƒç”¨å¯¹è±¡ å¯è°ƒç”¨==å¯¹è±¡==ï¼š==å¯¹è±¡==æˆ–ä¸€ä¸ª==è¡¨è¾¾å¼==ï¼Œå¦‚æœå¯ä»¥å¯¹å…¶ä½¿ç”¨è°ƒç”¨è¿ç®—ç¬¦åˆ™ç§°å®ƒä¸ºå¯è°ƒç”¨çš„ã€‚\nå‡½æ•° å‡½æ•°æŒ‡é’ˆ é‡è½½äº†å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦çš„ç±» Lambdaè¡¨è¾¾å¼ 2.2 lambdaè¡¨è¾¾å¼ æœ‰æ—¶å¯èƒ½å¸Œæœ›æ“ä½œå¯ä»¥æ¥å—æ›´å¤šçš„å‚æ•°ã€‚\nLambdaè¡¨è¾¾å¼ä¸»è¦è§£å†³äº†ä»¥ä¸‹ä¸¤ä¸ªæŠ€æœ¯é—®é¢˜ï¼š\nåŒ¿åå‡½æ•°çš„é—®é¢˜ï¼šä¼ ç»ŸC++è¯­è¨€ä¸­ï¼Œå¦‚æœè¦ä½¿ç”¨ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ªå…·åçš„å‡½æ•°å¯¹è±¡æˆ–ä½¿ç”¨å‡½æ•°æŒ‡é’ˆï¼Œè¿™ä¼šå¯¼è‡´ä»£ç å†—é•¿ï¼Œä¸ä¾¿äºä»£ç é‡æ„å’Œç»´æŠ¤ã€‚Lambdaè¡¨è¾¾å¼å¯ä»¥ç›´æ¥å®šä¹‰åŒ¿åçš„å‡½æ•°å¯¹è±¡ï¼Œæ–¹ä¾¿ä»£ç ç¼–å†™ã€‚ æ•è·å˜é‡çš„é—®é¢˜ï¼šLambdaè¡¨è¾¾å¼å¯ä»¥åœ¨å®šä¹‰æ—¶æ•è·å¤–éƒ¨å˜é‡ï¼Œå¹¶åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œè¿™ç§æ–¹å¼è§£å†³äº†å‡½æ•°å¯¹è±¡ä½¿ç”¨å¤–éƒ¨å˜é‡æ—¶éœ€è¦å®šä¹‰å¤šä¸ªå‡½æ•°å¯¹è±¡çš„é—®é¢˜ã€‚åŒæ—¶Lambdaè¡¨è¾¾å¼æä¾›äº†æ•è·å˜é‡çš„å¤šç§æ–¹å¼ï¼Œå¦‚å€¼æ•è·ã€å¼•ç”¨æ•è·å’Œå¼•ç”¨æ•è·å¹¶ä¿®æ”¹ç­‰ï¼Œæ–¹ä¾¿äº†å˜é‡çš„ä½¿ç”¨å’Œä¿®æ”¹ã€‚ lambdaè¡¨è¾¾å¼è¡¨ç¤ºä¸€ä¸ªå¯è°ƒç”¨çš„ä»£ç å•å…ƒï¼Œå¯ä»¥ç†è§£æˆæ˜¯ä¸€ä¸ªæœªå‘½åçš„å†…è”å‡½æ•°ã€‚ å½¢å¼ 1 [capture list](parameter list) -\u0026gt; return type {function body} å…¶ä¸­capture listæ•è·åˆ—è¡¨æ˜¯ä¸€ä¸ªlambdaæ‰€åœ¨å‡½æ•°å®šä¹‰çš„å±€éƒ¨å˜é‡çš„åˆ—è¡¨ï¼ˆé€šå¸¸ä¸ºç©ºï¼‰ã€‚ä¸å¯å¿½ç•¥ã€‚ return typeæ˜¯è¿”å›ç±»å‹ã€‚å¯å¿½ç•¥ã€‚ parameteræ˜¯å‚æ•°åˆ—è¡¨ã€‚å¯å¿½ç•¥ã€‚ function bodyæ˜¯å‡½æ•°ä½“ã€‚ä¸å¯å¿½ç•¥ã€‚ auto f = [] {return 42;} ä¸å‡½æ•°çš„å·®åˆ«\nå¿…é¡»ä½¿ç”¨å°¾ç½®ç±»å‹æ¥è¡¨ç¤ºè¿”å›ç±»å‹ å¯ä»¥å¿½ç•¥è¿”å›ç±»å‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªLambdaä½“å†…å«æœ‰returnä¹‹å¤–çš„ä»»ä½•è¯­å¥ï¼Œåˆ™ç¼–è¯‘å™¨å‡å®šLambdaè¿”å›voidã€‚ä½†æ˜¯ä¸å‡½æ•°ä¸åŒï¼Œè¿”å›voidçš„lambdaä¸èƒ½è¿”å›å€¼ ä¸èƒ½æœ‰é»˜è®¤å‚æ•° ä¾‹å­\nfind_if: æ¥å—ä¸€å¯¹è¡¨ç¤ºèŒƒå›´çš„è¿­ä»£å™¨å’Œä¸€ä¸ªè°“è¯ï¼Œç”¨æ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³ç‰¹å®šè¦æ±‚çš„å…ƒç´ ã€‚è¿”å›ç¬¬ä¸€ä¸ªä½¿è°“è¯è¿”å›é0å€¼çš„å…ƒç´ ã€‚ auto wc = find_if(words.begin(), words.end(), [sz](const string \u0026amp;a){return a.size() \u0026gt;= sz;}); for_eachï¼š æ¥å—ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå¹¶å¯¹åºåˆ—ä¸­æ¯ä¸ªå…ƒç´ è°ƒç”¨æ­¤å¯¹è±¡ã€‚ for_each(wc, words.end(), [](const string \u0026amp;s){cout \u0026lt;\u0026lt; s \u0026lt;\u0026lt; \u0026quot; \u0026quot;;}) 3ã€lambdaæ•è·å’Œè¿”å› å®šä¹‰lambdaæ—¶ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç±»ç±»å‹å’Œè¯¥ç±»å‹çš„ä¸€ä¸ªå¯¹è±¡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä»lambdaç”Ÿæˆçš„ç±»éƒ½åŒ…å«ä¸€ä¸ªå¯¹åº”è¯¥lambdaæ‰€æ•è·çš„å˜é‡çš„æ•°æ®æˆå‘˜ï¼Œåœ¨lambdaå¯¹è±¡åˆ›å»ºæ—¶è¢«åˆå§‹åŒ–ã€‚ å€¼æ•è·ï¼šå‰ææ˜¯å˜é‡å¯ä»¥æ‹·è´ï¼Œsize_t v1 = 42; auto f = [v1] {return v1;};ã€‚ å¼•ç”¨æ•è·ï¼šå¿…é¡»ä¿è¯åœ¨lambdaæ‰§è¡Œæ—¶ï¼Œå˜é‡æ˜¯å­˜åœ¨çš„ï¼Œauto f2 = [\u0026amp;v1] {return v1;}; å°½é‡å‡å°‘æ•è·çš„æ•°æ®é‡ï¼Œå°½å¯èƒ½é¿å…æ•è·æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚ éšå¼æ•è·ï¼šè®©ç¼–è¯‘å™¨æ¨æ–­æ•è·åˆ—è¡¨ï¼Œåœ¨æ•è·åˆ—è¡¨ä¸­å†™ä¸€ä¸ª\u0026amp;ï¼ˆå¼•ç”¨æ–¹å¼ï¼‰æˆ–=ï¼ˆå€¼æ–¹å¼ï¼‰ã€‚auto f3 = [=] {return v1;} å¯å˜Lambda: æ”¹å˜å€¼æ•è·çš„å˜é‡ : 1 size_t v1 = 42; auto f=[v1]()mutable{return ++v1}; v1=0; auto j=f(); // j=43 æ”¹å˜å¼•ç”¨æ•è·å˜é‡ : å–å†³äºå¼•ç”¨æŒ‡å‘çš„æ˜¯ä¸€ä¸ªconst or not lambdaæ•è·åˆ—è¡¨ï¼š\næ•è·åˆ—è¡¨ è§£é‡Š [] ç©ºæ•è·åˆ—è¡¨ã€‚lambdaä¸èƒ½ä½¿ç”¨æ‰€åœ¨å‡½æ•°ä¸­çš„å˜é‡ã€‚ä¸€ä¸ªlambdaåªæœ‰åœ¨æ•è·å˜é‡åæ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚ [names] namesæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„åå­—åˆ—è¡¨ï¼Œè¿™äº›åå­—éƒ½æ˜¯åœ¨lambdaæ‰€åœ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œæ•è·åˆ—è¡¨ä¸­çš„å˜é‡éƒ½è¢«æ‹·è´ï¼Œåå­—å‰å¦‚æœä½¿ç”¨äº†\u0026amp;ï¼Œåˆ™é‡‡ç”¨å¼•ç”¨æ•è·æ–¹å¼ã€‚ [\u0026amp;] éšå¼æ•è·åˆ—è¡¨ï¼Œé‡‡ç”¨å¼•ç”¨æ•è·æ–¹å¼ã€‚lambdaä½“ä¸­æ‰€ä½¿ç”¨çš„æ¥è‡ªæ‰€åœ¨å‡½æ•°çš„å®ä½“éƒ½é‡‡ç”¨å¼•ç”¨æ–¹å¼ä½¿ç”¨ã€‚ [=] éšå¼æ•è·åˆ—è¡¨ï¼Œé‡‡ç”¨å€¼æ•è·æ–¹å¼ã€‚ [\u0026amp;, identifier_list] identifier_listæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„åˆ—è¡¨ï¼ŒåŒ…å«0ä¸ªæˆ–å¤šä¸ªæ¥è‡ªæ‰€åœ¨å‡½æ•°çš„å˜é‡ã€‚è¿™äº›å˜é‡é‡‡ç”¨å€¼æ•è·æ–¹å¼ï¼Œè€Œä»»ä½•éšå¼æ•è·çš„å˜é‡éƒ½é‡‡ç”¨å¼•ç”¨æ–¹å¼æ•è·ã€‚identifier_listä¸­çš„åå­—å‰é¢ä¸èƒ½ä½¿ç”¨\u0026amp; [=, identifier_list] identifier_listä¸­çš„å˜é‡é‡‡ç”¨å¼•ç”¨æ–¹å¼æ•è·ï¼Œè€Œä»»ä½•éšå¼æ•è·çš„å˜é‡éƒ½é‡‡ç”¨å€¼æ–¹å¼æ•è·ã€‚identifier_listä¸­çš„åå­—ä¸èƒ½åŒ…æ‹¬thisï¼Œä¸”å‰é¢å¿…é¡»ä½¿ç”¨\u0026amp; 4ã€å‚æ•°ç»‘å®š lambdaè¡¨è¾¾å¼æ›´é€‚åˆåœ¨ä¸€ä¸¤ä¸ªåœ°æ–¹ä½¿ç”¨çš„ç®€å•æ“ä½œã€‚ å¦‚æœæ˜¯å¾ˆå¤šåœ°æ–¹ä½¿ç”¨ç›¸åŒçš„æ“ä½œï¼Œè¿˜æ˜¯éœ€è¦å®šä¹‰å‡½æ•°ã€‚ å‡½æ•°å¦‚ä½•åŒ…è£…æˆä¸€å…ƒè°“è¯ï¼Ÿä½¿ç”¨å‚æ•°ç»‘å®šã€‚ bindå‚æ•°ç»‘å®šæ˜¯è§£å†³å›è°ƒå‡½æ•°ä¼ é€’å‚æ•°é—®é¢˜çš„ä¸€ç§æŠ€æœ¯æ‰‹æ®µã€‚ åœ¨C++ä¸­ï¼Œå›è°ƒå‡½æ•°æ˜¯æŒ‡åœ¨æŸä¸ªå‡½æ•°ä¸­ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°çš„æŒ‡é’ˆï¼Œä»¥ä¾¿åœ¨ä¸»å‡½æ•°ä¸­è°ƒç”¨ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå›è°ƒå‡½æ•°éœ€è¦ä¼ é€’ä¸€äº›å‚æ•°æ‰èƒ½å®Œæˆå…¶åŠŸèƒ½ã€‚åœ¨è°ƒç”¨æ—¶ï¼Œéœ€è¦åœ¨ä¸»å‡½æ•°ä¸­æ‰‹åŠ¨ä¼ é€’è¿™äº›å‚æ•°ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ä»£ç å†—é•¿ã€å¯è¯»æ€§å·®ã€ç»´æŠ¤å›°éš¾ç­‰é—®é¢˜ã€‚ ä½¿ç”¨bindå‚æ•°ç»‘å®šï¼Œå¯ä»¥å°†å›è°ƒå‡½æ•°ä¸­éœ€è¦ä¼ é€’çš„å‚æ•°æå‰ç»‘å®šï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡ï¼Œè¿™ä¸ªå‡½æ•°å¯¹è±¡å¯ä»¥åƒå›è°ƒå‡½æ•°ä¸€æ ·åœ¨ä¸»å‡½æ•°ä¸­ä½¿ç”¨ï¼Œä½†ä¸å†éœ€è¦æ‰‹åŠ¨ä¼ é€’å‚æ•°ã€‚è¿™æ ·å°±å¯ä»¥å¤§å¤§ç®€åŒ–ä»£ç ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\nä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°funcï¼Œéœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°aå’Œbï¼Œåœ¨ä¸»å‡½æ•°ä¸­ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨bindç»‘å®šè¿™ä¸¤ä¸ªå‚æ•°ï¼š\n1 2 3 4 5 6 7 int add(int x, int y) { return x + y; } auto add10 = std::bind(add, 10, std::placeholders::_1); std::cout \u0026lt;\u0026lt; add10(5) \u0026lt;\u0026lt; std::endl; // è¾“å‡º 15 std::cout \u0026lt;\u0026lt; add10(7) \u0026lt;\u0026lt; std::endl; // è¾“å‡º 17 æ ‡å‡†åº“bindå‡½æ•°\nå®šä¹‰åœ¨å¤´æ–‡ä»¶functionalä¸­ï¼Œå¯ä»¥çœ‹åšä¸ºä¸€ä¸ªé€šç”¨çš„å‡½æ•°é€‚é…å™¨ã€‚ auto newCallable = bind(callable, arg_list); æˆ‘ä»¬å†è°ƒç”¨newCallableçš„æ—¶å€™ï¼ŒnewCallableä¼šè°ƒç”¨callableå¹¶ä¼ é€’ç»™å®ƒarg_listä¸­çš„å‚æ•°ã€‚ _nä»£è¡¨ç¬¬nä¸ªä½ç½®çš„å‚æ•°ã€‚å®šä¹‰åœ¨placeholdersçš„å‘½åç©ºé—´ä¸­ã€‚using std::placeholder::_1; auto g = bind(f, a, b, _2, c, _1);ï¼Œè°ƒç”¨g(_1, _2)å®é™…ä¸Šè°ƒç”¨f(a, b, _2, c, _1) éå ä½ç¬¦çš„å‚æ•°è¦ä½¿ç”¨å¼•ç”¨ä¼ å‚ï¼Œå¿…é¡»ä½¿ç”¨æ ‡å‡†åº“refå‡½æ•°æˆ–è€…crefå‡½æ•°ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨std::bindå°†addå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ç»‘å®šä¸º10ï¼Œå¹¶å°†ç¬¬äºŒä¸ªå‚æ•°ç•™ç©ºï¼Œå³ä½¿ç”¨å ä½ç¬¦std::placeholders::_1è¡¨ç¤ºã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„å‡½æ•°add10ï¼Œå®ƒåªéœ€è¦ä¸€ä¸ªå‚æ•°ï¼ˆyï¼‰ï¼Œå®ƒå°†xå›ºå®šä¸º10ï¼Œå› æ­¤åœ¨è°ƒç”¨add10æ—¶ï¼Œåªéœ€è¦ä¼ é€’å¦ä¸€ä¸ªå‚æ•°å³å¯ã€‚\nbindç»‘å®šå‚æ•°çš„ä¾‹å­ å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°printNumAndStringï¼Œéœ€è¦åŒæ—¶è¾“å‡ºä¸€ä¸ªæ•´æ•°å’Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 void printNumAndString(int num, const std::string\u0026amp; str) { std::cout \u0026lt;\u0026lt; num \u0026lt;\u0026lt; \u0026#34;: \u0026#34; \u0026lt;\u0026lt; str \u0026lt;\u0026lt; std::endl; } ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°ç»„numså’Œä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œæˆ‘ä»¬å¸Œæœ›å°†printNumAndStringåº”ç”¨äºæ•°ç»„numsçš„æ‰€æœ‰å…ƒç´ å’Œå­—ç¬¦ä¸²strï¼Œä½¿ç”¨forå¾ªç¯å¯ä»¥å®ç°ï¼š\n1 2 3 4 5 int nums[] = {1, 2, 3, 4, 5}; std::string str = \u0026#34;hello\u0026#34;; for (int i = 0; i \u0026lt; 5; i++) { printNumAndString(nums[i], str); } ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨STLç®—æ³•std::for_eachæ¥å®Œæˆè¿™ä¸ªä»»åŠ¡å‘¢ï¼Ÿåœ¨std::for_eachä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå®ƒå°†åº”ç”¨äºå®¹å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š\n1 2 3 int nums[] = {1, 2, 3, 4, 5}; std::string str = \u0026#34;hello\u0026#34;; std::for_each(std::begin(nums), std::end(nums), [=](int num) { printNumAndString(num, str); }); 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 //ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; void printNumAndString(int num, const std::basic_string\u0026lt;char\u0026gt; \u0026amp; str) { std::operator\u0026lt;\u0026lt;(std::operator\u0026lt;\u0026lt;(std::cout.operator\u0026lt;\u0026lt;(num), \u0026#34;: \u0026#34;), str).operator\u0026lt;\u0026lt;(std::endl); } int main() { int nums[5] = {1, 2, 3, 4, 5}; std::basic_string\u0026lt;char\u0026gt; str = std::basic_string\u0026lt;char\u0026gt;(std::basic_string\u0026lt;char\u0026gt;(\u0026#34;hello\u0026#34;, std::allocator\u0026lt;char\u0026gt;())); //è¿™ä¸ªè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªLambdaè¡¨è¾¾å¼ç”Ÿæˆçš„é—­åŒ…å¯¹è±¡ï¼ˆclosure objectï¼‰çš„ç±»å‹åç§°ï¼Œå…¶ä¸­`__lambda_12_49`æ˜¯ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„ç±»åï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªLambdaè¡¨è¾¾å¼çš„ç±»å‹ï¼Œè€Œåé¢çš„`{str}`åˆ™æ˜¯Lambdaè¡¨è¾¾å¼çš„å‚æ•°åˆ—è¡¨ï¼Œè¡¨ç¤ºæ•è·äº†ä¸€ä¸ªåä¸º`str`çš„å˜é‡ã€‚åœ¨C++ä¸­ï¼ŒLambdaè¡¨è¾¾å¼çš„ç±»å‹æ˜¯ä¸€ä¸ªæœªå‘½åçš„é—­åŒ…ç±»ï¼ˆclosure classï¼‰ï¼Œå®ƒä¼šæ ¹æ®Lambdaè¡¨è¾¾å¼çš„å†…å®¹å’Œä¸Šä¸‹æ–‡è‡ªåŠ¨åˆ›å»ºï¼Œå…¶ä¸­æ•è·çš„å˜é‡ä¼šä½œä¸ºç±»çš„æˆå‘˜å˜é‡ï¼ŒLambdaè¡¨è¾¾å¼çš„å‡½æ•°ä½“åˆ™ä¼šè½¬åŒ–ä¸ºç±»çš„ä¸€ä¸ªæˆå‘˜å‡½æ•°ã€‚åœ¨ä½¿ç”¨Lambdaè¡¨è¾¾å¼æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé—­åŒ…å¯¹è±¡ï¼Œå…¶ç±»å‹å°±æ˜¯Lambdaè¡¨è¾¾å¼çš„ç±»å‹ï¼Œè¿™ä¸ªé—­åŒ…å¯¹è±¡å¯ä»¥åƒæ™®é€šå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨å’Œä½¿ç”¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`__lambda_12_49`å°±æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„é—­åŒ…ç±»çš„ç±»å‹åç§°ï¼Œå…¶ä¸­çš„`{str}`è¡¨ç¤ºæ•è·äº†ä¸€ä¸ªåä¸º`str`çš„å˜é‡ã€‚ class __lambda_12_49 { public: inline void operator()(int num) const { printNumAndString(num, str); } private: std::basic_string\u0026lt;char\u0026gt; str; public: // inline __lambda_12_49(__lambda_12_49 \u0026amp;\u0026amp;) noexcept = default; // inline __lambda_12_49 \u0026amp; operator=(const __lambda_12_49 \u0026amp;) /* noexcept */ = delete; __lambda_12_49(const std::basic_string\u0026lt;char\u0026gt; \u0026amp; _str) : str{_str} {} }; std::for_each(std::begin(nums), std::end(nums), __lambda_12_49(__lambda_12_49{str})); return 0; } //åœ¨è¿™ä¸ªlambdaè¡¨è¾¾å¼ä¸­ï¼Œåªæ•è·äº†`str`è€Œæ²¡æœ‰æ•è·`nums`æ•°ç»„çš„åŸå› æ˜¯ï¼Œlambdaè¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„`nums`æ•°ç»„æ˜¯é€šè¿‡è¿­ä»£å™¨ä¼ é€’ç»™`std::for_each`ç®—æ³•çš„ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½œä¸ºlambdaè¡¨è¾¾å¼çš„æ•è·å˜é‡ã€‚å½“lambdaè¡¨è¾¾å¼ä½¿ç”¨`std::for_each`ç®—æ³•æ—¶ï¼Œè¿­ä»£å™¨ä¼šé€ä¸€éå†æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¹¶å°†æ¯ä¸ªå…ƒç´ ä½œä¸ºlambdaè¡¨è¾¾å¼çš„å‚æ•°è¿›è¡Œè°ƒç”¨ï¼Œå› æ­¤ä¸éœ€è¦åœ¨lambdaè¡¨è¾¾å¼ä¸­æ•è·`nums`æ•°ç»„ã€‚è€Œå¯¹äº`str`å˜é‡ï¼Œç”±äºlambdaè¡¨è¾¾å¼ä¸­è°ƒç”¨äº†`printNumAndString`å‡½æ•°ï¼Œéœ€è¦å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œå› æ­¤éœ€è¦æ•è·å®ƒã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥å®šä¹‰ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå®ƒå°†æ¥å—ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è°ƒç”¨printNumAndStringå‡½æ•°æ¥æ‰“å°æ•´æ•°å’Œå­—ç¬¦ä¸²ã€‚ä½†æ˜¯åœ¨è°ƒç”¨printNumAndStringå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨std::bindå‡½æ•°æ¥ç»‘å®šç¬¬äºŒä¸ªå‚æ•°ï¼š\n1 2 3 int nums[] = {1, 2, 3, 4, 5}; std::string str = \u0026#34;hello\u0026#34;; std::for_each(std::begin(nums), std::end(nums), std::bind(printNumAndString, std::placeholders::_1, str)); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨std::bindå‡½æ•°æ¥ç»‘å®šç¬¬äºŒä¸ªå‚æ•°strï¼Œå¹¶ä½¿ç”¨std::placeholders::_1æ¥è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°numã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†std::bindè¿”å›çš„å¯è°ƒç”¨å¯¹è±¡ä¼ é€’ç»™std::for_eachï¼Œå®ƒå°†åœ¨å®¹å™¨çš„æ¯ä¸ªå…ƒç´ ä¸Šè°ƒç”¨è¯¥å¯¹è±¡ï¼Œè€Œä¸å¿…æ‰‹åŠ¨ç»‘å®šç¬¬äºŒä¸ªå‚æ•°ã€‚\nå››ã€å†æ¢è¿­ä»£å™¨ 1ã€æ’å…¥è¿­ä»£å™¨ æ’å…¥å™¨æ˜¯ä¸€ç§è¿­ä»£å™¨é€‚é…å™¨ï¼Œæ¥å—ä¸€ä¸ªå®¹å™¨ï¼Œç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œèƒ½å®ç°å‘ç»™å®šå®¹å™¨æ·»åŠ å…ƒç´ ã€‚ ä¸‰ç§ç±»å‹ï¼š back_inserterï¼šåˆ›å»ºä¸€ä¸ªä½¿ç”¨push_backçš„è¿­ä»£å™¨ã€‚ front_inserterï¼šåˆ›å»ºä¸€ä¸ªä½¿ç”¨push_frontçš„è¿­ä»£å™¨ã€‚ inserteråˆ›å»ºä¸€ä¸ªä½¿ç”¨insertçš„è¿­ä»£å™¨ã€‚æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œå³ä¸€ä¸ªæŒ‡å‘ç»™å®šå®¹å™¨çš„è¿­ä»£å™¨ï¼Œå…ƒç´ ä¼šè¢«æŸ¥åˆ°è¿­ä»£å™¨æ‰€æŒ‡å‘çš„å…ƒç´ ä¹‹å‰ã€‚ æ’å…¥è¿­ä»£å™¨æ“ä½œï¼š\næ“ä½œ è§£é‡Š it=t åœ¨itæŒ‡å®šçš„å½“å‰ä½ç½®æ’å…¥å€¼tã€‚å‡å®šcæ˜¯itç»‘å®šçš„å®¹å™¨ï¼Œä¾èµ–äºæ’å…¥è¿­ä»£å™¨çš„ä¸åŒç§ç±»ï¼Œæ­¤èµ‹å€¼ä¼šåˆ†åˆ«è°ƒç”¨c.push_back(t)ã€c.push_front(t)ã€c.insert(t, p)ï¼Œå…¶ä¸­pæ˜¯ä¼ é€’ç»™inserterçš„è¿­ä»£å™¨ä½ç½® *it, ++it, it++ è¿™äº›æ“ä½œè™½ç„¶å­˜åœ¨ï¼Œä½†ä¸ä¼šå¯¹itåšä»»ä½•äº‹æƒ…ï¼Œæ¯ä¸ªæ“ä½œéƒ½è¿”å›it æ’å…¥è¿­ä»£å™¨æ˜¯ C++ STL ä¸­çš„ä¸€ç§è¿­ä»£å™¨ï¼Œå®ƒå¯ä»¥ç”¨æ¥å°†å…ƒç´ æ’å…¥åˆ°å®¹å™¨ä¸­ã€‚å’Œæ™®é€šè¿­ä»£å™¨ä¸€æ ·ï¼Œå®ƒä¹Ÿæ”¯æŒè¿­ä»£å™¨æ“ä½œï¼Œå¦‚ ++ã€* ç­‰ã€‚ä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªç‰¹æ®Šçš„åœ°æ–¹ï¼Œå®ƒä¸æ˜¯æŒ‡å‘æŸä¸ªå®¹å™¨çš„è¿­ä»£å™¨ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œé€šè¿‡æ¨¡æ¿å‚æ•°æ¥æŒ‡å®šè¦æ’å…¥çš„å®¹å™¨ç±»å‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;iterator\u0026gt; // åŒ…å«æ’å…¥è¿­ä»£å™¨å¤´æ–‡ä»¶ int main() { std::vector\u0026lt;int\u0026gt; v1{1, 2, 3, 4}; std::vector\u0026lt;int\u0026gt; v2{5, 6, 7, 8}; // åˆ›å»ºæ’å…¥è¿­ä»£å™¨ï¼Œå°†å…ƒç´ æ’å…¥åˆ° v1 çš„æœ«å°¾ std::back_insert_iterator\u0026lt;std::vector\u0026lt;int\u0026gt;\u0026gt; inserter(v1); // å°† v2 ä¸­çš„å…ƒç´ æ’å…¥åˆ° v1 ä¸­ std::copy(v2.begin(), v2.end(), inserter); // è¾“å‡º v1 ä¸­çš„å…ƒç´  for (const auto\u0026amp; elem : v1) { std::cout \u0026lt;\u0026lt; elem \u0026lt;\u0026lt; \u0026#34; \u0026#34;; } std::cout \u0026lt;\u0026lt; std::endl; return 0; } 2ã€iostreamè¿­ä»£å™¨ C++ä¸­çš„iostreamè¿­ä»£å™¨å¯ä»¥å°†è¾“å…¥è¾“å‡ºæµè½¬æ¢ä¸ºè¿­ä»£å™¨ï¼Œä½¿å¾—å¯ä»¥åƒæ“ä½œå®¹å™¨è¿­ä»£å™¨ä¸€æ ·æ“ä½œè¾“å…¥è¾“å‡ºæµã€‚ ä½¿ç”¨iostreamè¿­ä»£å™¨éœ€è¦åŒ…å«å¤´æ–‡ä»¶\u0026lt;iterator\u0026gt;å’Œ\u0026lt;iostream\u0026gt;ã€‚\næµè¿­ä»£å™¨å°†å®ƒä»¬å¯¹åº”çš„æµå½“åšä¸€ä¸ªç‰¹å®šç±»å‹çš„å…ƒç´ åºåˆ—æ¥å¤„ç†é€šè¿‡ä½¿ç”¨æµè¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ³›å‹ç®—æ³•å¯¹æµå¯¹è±¡è¯»å–æ•°æ®ä»¥åŠå‘å…¶å†™å…¥æ•°æ®ã€‚ è¿­ä»£å™¨å¯ä¸è¾“å…¥æˆ–è¾“å‡ºæµç»‘å®šåœ¨ä¸€èµ·ï¼Œç”¨äºè¿­ä»£éå†æ‰€å…³è”çš„ IO æµã€‚ é€šè¿‡ä½¿ç”¨æµè¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ³›å‹ç®—æ³•ä»æµå¯¹è±¡ä¸­è¯»å–æ•°æ®ä»¥åŠå‘å…¶å†™å…¥æ•°æ®ã€‚ istream_iteratorçš„æ“ä½œï¼š\næ“ä½œ è§£é‡Š istream_iterator\u0026lt;T\u0026gt; in(is); inä»è¾“å…¥æµisè¯»å–ç±»å‹ä¸ºTçš„å€¼ istream_iterator\u0026lt;T\u0026gt; end; è¯»å–ç±»å‹æ˜¯Tçš„å€¼çš„istream_iteratorè¿­ä»£å™¨ï¼Œè¡¨ç¤ºå°¾åä½ç½® in1 == in2 in1å’Œin2å¿…é¡»è¯»å–ç›¸åŒç±»å‹ã€‚å¦‚æœä»–ä»¬éƒ½æ˜¯å°¾åè¿­ä»£å™¨ï¼Œæˆ–ç»‘å®šåˆ°ç›¸åŒçš„è¾“å…¥ï¼Œåˆ™ä¸¤è€…ç›¸ç­‰ã€‚ in1 != in2 ç±»ä¼¼ä¸Šæ¡ *in è¿”å›ä»æµä¸­è¯»å–çš„å€¼ in-\u0026gt;mem ä¸*(in).memå«ä¹‰ç›¸åŒ ++in, in++ ä½¿ç”¨å…ƒç´ ç±»å‹æ‰€å®šä¹‰çš„\u0026gt;\u0026gt;è¿ç®—ç¬¦ä»æµä¸­è¯»å–ä¸‹ä¸€ä¸ªå€¼ã€‚å‰ç½®ç‰ˆæœ¬è¿”å›ä¸€ä¸ªæŒ‡å‘é€’å¢åè¿­ä»£å™¨çš„å¼•ç”¨ï¼Œåç½®ç‰ˆæœ¬è¿”å›æ—§å€¼ã€‚ 1 2 istream_iterator\u0026lt;int\u0026gt; in(cin) ,eof; cout \u0026lt;\u0026lt; accumulate(in,eof,0)\u0026lt;\u0026lt;endl; ostream_iteratorçš„æ“ä½œï¼š\næ“ä½œ è§£é‡Š ostream_iterator\u0026lt;T\u0026gt; out(os); outå°†ç±»å‹ä¸ºTçš„å€¼å†™åˆ°è¾“å‡ºæµosä¸­ ostream_iterator\u0026lt;T\u0026gt; out(os, d); outå°†ç±»å‹ä¸ºTçš„å€¼å†™åˆ°è¾“å‡ºæµosä¸­ï¼Œæ¯ä¸ªå€¼åé¢éƒ½è¾“å‡ºä¸€ä¸ªdã€‚dæŒ‡å‘ä¸€ä¸ªç©ºå­—ç¬¦ç»“å°¾çš„å­—ç¬¦æ•°ç»„ã€‚ out = val ç”¨\u0026lt;\u0026lt;è¿ç®—ç¬¦å°†valå†™å…¥åˆ°outæ‰€ç»‘å®šçš„ostreamä¸­ã€‚valçš„ç±»å‹å¿…é¡»å’Œoutå¯å†™çš„ç±»å‹å…¼å®¹ã€‚ *out, ++out, out++ è¿™äº›è¿ç®—ç¬¦æ˜¯å­˜åœ¨çš„ï¼Œä½†ä¸å¯¹outåšä»»ä½•äº‹æƒ…ã€‚æ¯ä¸ªè¿ç®—ç¬¦éƒ½è¿”å›outã€‚ 1 2 3 4 5 6 ostream_iterator\u0026lt;int\u0026gt; out_iter(cout,\u0026#34; \u0026#34;); for(auto e:vec) { *out_iter++=e; //ç­‰ä»·å†™æ³•ï¼šout_iter=e; } cout\u0026lt;\u0026lt;endl; ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨iostreamè¿­ä»£å™¨çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 //1. ä»æ ‡å‡†è¾“å…¥æµä¸­è¯»å–æ•°æ®åˆ°å®¹å™¨ä¸­ï¼š #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;iterator\u0026gt; int main() { std::vector\u0026lt;int\u0026gt; v; std::copy(std::istream_iterator\u0026lt;int\u0026gt;(std::cin), std::istream_iterator\u0026lt;int\u0026gt;(), std::back_inserter(v)); return 0; } è¿™ä¸ªä¾‹å­ä¸­ï¼Œstd::istream_iterator\u0026lt;int\u0026gt;(std::cin)åˆ›å»ºäº†ä¸€ä¸ªè¾“å…¥æµè¿­ä»£å™¨ï¼Œè¡¨ç¤ºä»æ ‡å‡†è¾“å…¥æµä¸­è¯»å–intç±»å‹çš„æ•°æ®ï¼Œstd::istream_iterator\u0026lt;int\u0026gt;()åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤çš„è¾“å…¥æµè¿­ä»£å™¨ï¼Œè¡¨ç¤ºè¾“å…¥æµçš„ç»“æŸã€‚std::copyç®—æ³•ä½¿ç”¨è¾“å…¥æµè¿­ä»£å™¨å’Œè¾“å‡ºè¿­ä»£å™¨å°†æ•°æ®ä»è¾“å…¥æµå¤åˆ¶åˆ°å®¹å™¨ä¸­ã€‚\n1 2 3 4 5 6 7 8 9 10 //2. å°†å®¹å™¨ä¸­çš„æ•°æ®è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµä¸­ï¼š #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;iterator\u0026gt; int main() { std::vector\u0026lt;int\u0026gt; v {1, 2, 3, 4, 5}; std::copy(std::begin(v), std::end(v), std::ostream_iterator\u0026lt;int\u0026gt;(std::cout, \u0026#34; \u0026#34;)); return 0; } è¿™ä¸ªä¾‹å­ä¸­ï¼Œstd::ostream_iterator\u0026lt;int\u0026gt;(std::cout, \u0026quot; \u0026quot;)åˆ›å»ºäº†ä¸€ä¸ªè¾“å‡ºæµè¿­ä»£å™¨ï¼Œè¡¨ç¤ºå°†intç±»å‹çš„æ•°æ®è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµä¸­ï¼Œæ¯ä¸ªæ•°æ®ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚std::copyç®—æ³•ä½¿ç”¨è¾“å…¥è¿­ä»£å™¨å’Œè¾“å‡ºæµè¿­ä»£å™¨å°†æ•°æ®ä»å®¹å™¨è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµä¸­ã€‚\n3ã€åå‘è¿­ä»£å™¨ åå‘è¿­ä»£å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨ï¼Œå®ƒå¯ä»¥ä»å®¹å™¨çš„æœ«å°¾å‘å‰éå†å®¹å™¨çš„å…ƒç´ ã€‚C++æ ‡å‡†åº“ä¸­æä¾›äº†åå‘è¿­ä»£å™¨std::reverse_iteratorï¼Œå¯ä»¥ç”¨æ¥è¿­ä»£åŒå‘è¿­ä»£å™¨æˆ–éšæœºè®¿é—®è¿­ä»£å™¨ã€‚\nåå‘è¿­ä»£å™¨å°±æ˜¯åœ¨å®¹å™¨ä¸­ä»å°¾å…ƒç´ å‘é¦–å…ƒç´ åå‘ç§»åŠ¨çš„è¿­ä»£å™¨ã€‚ å¯¹äºåå‘è¿­ä»£å™¨ï¼Œé€’å¢å’Œé€’å‡çš„æ“ä½œå«ä¹‰ä¼šé¢ å€’ã€‚ å®ç°å‘åéå†ï¼Œé…åˆrbeginå’Œrend reverse_iterator çš„baseæˆå‘˜ ![[Pasted image 20220516175615.png]]\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; int main() { std::vector\u0026lt;int\u0026gt; v {1, 2, 3, 4, 5}; // ä»å®¹å™¨å°¾éƒ¨æ„é€ ä¸€ä¸ªåå‘è¿­ä»£å™¨ auto rit = v.rbegin(); // éå†å®¹å™¨çš„å…ƒç´ ï¼Œä»å°¾éƒ¨å¼€å§‹ while (rit != v.rend()) { std::cout \u0026lt;\u0026lt; *rit \u0026lt;\u0026lt; \u0026#34; \u0026#34;; ++rit; } std::cout \u0026lt;\u0026lt; std::endl; // ä½¿ç”¨std::for_eachç®—æ³•å’Œåå‘è¿­ä»£å™¨éå†å®¹å™¨çš„å…ƒç´ ï¼Œä»å°¾éƒ¨å¼€å§‹ std::for_each(v.rbegin(), v.rend(), [](int i) { std::cout \u0026lt;\u0026lt; i \u0026lt;\u0026lt; \u0026#34; \u0026#34;; }); std::cout \u0026lt;\u0026lt; std::endl; return 0; } è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä»å®¹å™¨å°¾éƒ¨æ„é€ äº†ä¸€ä¸ªåå‘è¿­ä»£å™¨ï¼Œç„¶åä½¿ç”¨whileå¾ªç¯éå†äº†å®¹å™¨çš„å…ƒç´ ã€‚åœ¨éå†æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡*ritè®¿é—®åå‘è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ ï¼ŒåŒæ—¶æ¯æ¬¡éå†å®Œæˆåï¼Œé€šè¿‡++ritç§»åŠ¨è¿­ä»£å™¨ï¼Œç›´åˆ°åå‘è¿­ä»£å™¨æŒ‡å‘å®¹å™¨çš„å¼€å¤´ä½ç½®ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº†std::for_eachç®—æ³•å’Œåå‘è¿­ä»£å™¨æ¥éå†å®¹å™¨çš„å…ƒç´ ï¼Œä»å°¾éƒ¨å¼€å§‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªlambdaè¡¨è¾¾å¼æ¥è¾“å‡ºéå†åˆ°çš„æ¯ä¸ªå…ƒç´ ã€‚\näº”ã€æ³›å‹ç®—æ³•ç»“æ„ 1ã€5ç±»è¿­ä»£å™¨ è¿­ä»£å™¨ç±»åˆ« è§£é‡Š æ”¯æŒçš„æ“ä½œ è¾“å…¥è¿­ä»£å™¨ åªè¯»ï¼Œä¸å†™ï¼›å•éæ‰«æï¼Œåªèƒ½é€’å¢ ==,!=,++,*,-\u0026gt; è¾“å‡ºè¿­ä»£å™¨ åªå†™ï¼Œä¸è¯»ï¼›å•éæ‰«æï¼Œåªèƒ½é€’å¢ ++,* å‰å‘è¿­ä»£å™¨ å¯è¯»å†™ï¼›å¤šéæ‰«æï¼Œåªèƒ½é€’å¢ ==,!=,++,*,-\u0026gt; åŒå‘è¿­ä»£å™¨ å¯è¯»å†™ï¼›å¤šéæ‰«æï¼Œå¯é€’å¢é€’å‡ ==,!=,++,--,*,-\u0026gt; éšæœºè®¿é—®è¿­ä»£å™¨ å¯è¯»å†™ï¼Œå¤šéæ‰«æï¼Œæ”¯æŒå…¨éƒ¨è¿­ä»£å™¨è¿ç®— ==,!=,\u0026lt;,\u0026lt;=,\u0026gt;,\u0026gt;=,++,--,+,+=,-,-=,*,-\u0026gt;,iter[n]==*(iter[n]) 2ã€ç®—æ³•çš„å½¢å‚æ¨¡å¼ alg(beg, end, other args); alg(beg, end, dest, other args); alg(beg, end, beg2, other args); alg(beg, end, beg2, end2, other args); å…¶ä¸­ï¼Œalgæ˜¯ç®—æ³•åç§°ï¼Œbegå’Œendè¡¨ç¤ºç®—æ³•æ‰€æ“ä½œçš„è¾“å…¥èŒƒå›´ã€‚destã€beg2ã€end2éƒ½æ˜¯è¿­ä»£å™¨å‚æ•°ï¼Œæ˜¯å¦ä½¿ç”¨è¦ä¾èµ–äºæ‰§è¡Œçš„æ“ä½œã€‚\n3ã€ç®—æ³•å‘½åè§„èŒƒ ä¸€äº›ç®—æ³•ä½¿ç”¨é‡è½½å½¢å¼ä¼ é€’ä¸€ä¸ªè°“è¯ã€‚ æ¥å—ä¸€ä¸ªå…ƒç´ å€¼çš„ç®—æ³•é€šå¸¸æœ‰ä¸€ä¸ªä¸åŒåçš„ç‰ˆæœ¬ï¼šåŠ _ifï¼Œæ¥å—ä¸€ä¸ªè°“è¯ä»£æ›¿å…ƒç´ å€¼ã€‚ åŒºåˆ†æ‹·è´å…ƒç´ çš„ç‰ˆæœ¬å’Œä¸æ‹·è´çš„ç‰ˆæœ¬ï¼šæ‹·è´ç‰ˆæœ¬é€šå¸¸åŠ _copyã€‚ å…­ã€ç‰¹å®šå®¹å™¨ç®—æ³• å¯¹äºlistå’Œforward_listï¼Œä¼˜å…ˆä½¿ç”¨æˆå‘˜å‡½æ•°ç‰ˆæœ¬çš„ç®—æ³•è€Œä¸æ˜¯é€šç”¨ç®—æ³•ã€‚\nlistå’Œforward_listæˆå‘˜å‡½æ•°ç‰ˆæœ¬çš„ç®—æ³•ï¼š\næ“ä½œ è§£é‡Š lst.merge(lst2) å°†æ¥è‡ªlst2çš„å…ƒç´ åˆå¹¶å…¥lstï¼ŒäºŒè€…éƒ½å¿…é¡»æ˜¯æœ‰åºçš„ï¼Œå…ƒç´ å°†ä»lst2ä¸­åˆ é™¤ã€‚ lst.merge(lst2, comp) åŒä¸Šï¼Œç»™å®šæ¯”è¾ƒæ“ä½œã€‚ lst.remove(val) è°ƒç”¨eraseåˆ é™¤æ‰ä¸ç»™å®šå€¼ç›¸ç­‰(==)çš„æ¯ä¸ªå…ƒç´  lst.remove_if(pred) è°ƒç”¨eraseåˆ é™¤æ‰ä»¤ä¸€å…ƒè°“è¯ä¸ºçœŸçš„æ¯ä¸ªå…ƒç´  lst.reverse() åè½¬lstä¸­å…ƒç´ çš„é¡ºåº lst.sort() ä½¿ç”¨\u0026lt;æ’åºå…ƒç´  lst.sort(comp) ä½¿ç”¨ç»™å®šæ¯”è¾ƒæ“ä½œæ’åºå…ƒç´  lst.unique() è°ƒç”¨eraseåˆ é™¤åŒä¸€ä¸ªå€¼çš„è¿ç»­æ‹·è´ã€‚ä½¿ç”¨==ã€‚ lst.unique(pred) è°ƒç”¨eraseåˆ é™¤åŒä¸€ä¸ªå€¼çš„è¿ç»­æ‹·è´ã€‚ä½¿ç”¨ç»™å®šçš„äºŒå…ƒè°“è¯ã€‚ ä¸Šé¢çš„æ“ä½œéƒ½è¿”å›void listå’Œforward_listçš„spliceæˆå‘˜å‡½æ•°ç‰ˆæœ¬çš„å‚æ•°ï¼š\nå‚æ•° è§£é‡Š (p, lst2) pæ˜¯ä¸€ä¸ªæŒ‡å‘lstä¸­å…ƒç´ çš„è¿­ä»£å™¨ï¼Œæˆ–è€…ä¸€ä¸ªæŒ‡å‘flsté¦–å‰ä½ç½®çš„è¿­ä»£å™¨ã€‚å‡½æ•°å°†lst2ä¸­çš„æ‰€æœ‰å…ƒç´ ç§»åŠ¨åˆ°lstä¸­pä¹‹å‰çš„ä½ç½®æˆ–æ˜¯flstä¸­pä¹‹åçš„ä½ç½®ã€‚å°†å…ƒç´ ä»lst2ä¸­åˆ é™¤ã€‚lst2çš„ç±»å‹å¿…é¡»å’Œlstç›¸åŒï¼Œè€Œä¸”ä¸èƒ½æ˜¯åŒä¸€ä¸ªé“¾è¡¨ã€‚ (p, lst2, p2) åŒä¸Šï¼Œp2æ˜¯ä¸€ä¸ªæŒ‡å‘lst2ä¸­ä½ç½®çš„æœ‰æ•ˆçš„è¿­ä»£å™¨ï¼Œå°†p2æŒ‡å‘çš„å…ƒç´ ç§»åŠ¨åˆ°lstä¸­ï¼Œæˆ–å°†p2ä¹‹åçš„å…ƒç´ ç§»åŠ¨åˆ°flstä¸­ã€‚lst2å¯ä»¥æ˜¯äºlstæˆ–flstç›¸åŒçš„é“¾è¡¨ã€‚ (p, lst2, b, e) bå’Œeè¡¨ç¤ºlst2ä¸­çš„åˆæ³•èŒƒå›´ã€‚å°†ç»™å®šèŒƒå›´ä¸­çš„å…ƒç´ ä»lst2ç§»åŠ¨åˆ°lstæˆ–firstä¸­ã€‚lst2ä¸lstå¯ä»¥ä½¿ç›¸åŒçš„é“¾è¡¨ï¼Œä½†pä¸èƒ½æŒ‡å‘ç»™å®šèŒƒå›´ä¸­çš„å…ƒç´ ã€‚ ä½¿ç”¨lst.splice(args)æˆ–flst.splice_after(args) ","pubDate":"2021-10-01","title":"ã€C++ Primer(edition 5) 10ã€‘æ³›å‹ç®—æ³•"},{"link":"https://cnjslw.github.io/posts/%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8/","plain":"å…³è”å®¹å™¨å’Œé¡ºåºå®¹å™¨çš„ä¸åŒï¼šå…³è”å®¹å™¨ä¸­çš„å…ƒç´ æ—¶æŒ‰ç…§å…³é”®å­—æ¥ä¿å­˜å’Œè®¿é—®çš„ã€‚ å…³è”å®¹å™¨æ”¯æŒé€šè¿‡å…³é”®å­—æ¥é«˜æ•ˆåœ°æŸ¥æ‰¾å’Œè¯»å–å…ƒç´ ï¼ŒåŸºæœ¬çš„å…³è”å®¹å™¨ç±»å‹æ˜¯ mapå’Œ setã€‚\nå…³è”å®¹å™¨ç±»å‹ï¼š\nå®¹å™¨ç±»å‹ è§£é‡Š æŒ‰é¡ºåºå­˜å‚¨ map å…³é”®æ•°ç»„ï¼šä¿å­˜å…³é”®å­—-å€¼å¯¹ set å…³é”®å­—å³å€¼ï¼Œå³åªä¿å­˜å…³é”®å­—çš„å®¹å™¨ multimap æ”¯æŒåŒä¸€ä¸ªé”®å¤šæ¬¡å‡ºç°çš„map multiset æ”¯æŒåŒä¸€ä¸ªé”®å¤šæ¬¡å‡ºç°çš„set æ— åºé›†åˆ unordered_map ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡çš„map unordered_set ç”¨å“ˆå¸Œå‡½æ•°ç»„ç»‡çš„set unordered_multimap å“ˆå¸Œç»„ç»‡çš„mapï¼Œå…³é”®å­—å¯ä»¥é‡å¤å‡ºç° unordered_multiset å“ˆå¸Œç»„ç»‡çš„setï¼Œå…³é”®å­—å¯ä»¥é‡å¤å‡ºç° ä¸€ã€ä½¿ç”¨å…³è”å®¹å™¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 //map map\u0026lt;int , size_t\u0026gt; word_count; string word; while(cin\u0026gt;\u0026gt;word) ++word_count[word]; for(const auto \u0026amp;w : word_count) cout\u0026lt;\u0026lt;w.first\u0026lt;\u0026lt;\u0026#34; occurs \u0026#34;\u0026lt;\u0026lt;w.second \u0026lt;\u0026lt;((w.second\u0026gt;1)?\u0026#34;times\u0026#34;:\u0026#34;time\u0026#34;)\u0026lt;\u0026lt;endl; //set map\u0026lt;string, size_t\u0026gt; word_count; // string åˆ° size_t çš„ç©º map set\u0026lt;string\u0026gt; exclude = (\u0026#34;The\u0026#34;, \u0026#34;But\u0026#34;, \u0026#34;Andâ€ï¼Œ MOr\u0026#39;*, \u0026#34;An\u0026#34;, \u0026#34;Aâ€ï¼Œ \u0026#34;theâ€ï¼Œ â€œbutâ€ï¼Œ \u0026#34;andâ€ï¼Œ norn , \u0026#34;ann , \u0026#34;a\u0026#34;}; string word; while (cin\u0026gt;\u0026gt;word) //åªç»Ÿè®¡ä¸åœ¨excludeä¸­çš„å•è¯ if (exclude.find(word) == exclude.end()) ++word_count [word] ; //è·å–å¹¶é€’å¢wordçš„è®¡æ•°å™¨ äºŒã€å…³è”å®¹å™¨æ¦‚è¿° å…³è”å®¹å™¨åŸºæœ¬æ”¯æŒæ™®é€šå®¹å™¨çš„æ‰€æœ‰æ“ä½œï¼Œä½†æ˜¯ä¸æ”¯æŒé¡ºåºå®¹å™¨çš„ä½ç½®ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚push_backï¼Œpush_front å…³è”å®¹å™¨è¿˜æ”¯æŒç‰¹æœ‰çš„æ“ä½œå’Œç±»å‹åˆ«å æ— åºå®¹å™¨è¿˜æ”¯æŒä¸€äº›æ¥è°ƒæ•´å“ˆå¸Œæ€§èƒ½çš„æ“ä½œ 1ã€å®šä¹‰å…³è”å®¹å™¨ å¿…é¡»éœ€è¦æŒ‡å®šå…ƒç´ ç±»å‹ï¼Œå¹¶ä¸”å€¼ç¬¦åˆè¦æ±‚æˆ–è€…å¯ä»¥è½¬åŒ–ã€‚ é»˜è®¤æ„é€  å…³è”å®¹å™¨åˆå§‹åŒ–ä¸ºå¦ä¸€ä¸ªåŒç±»å‹å®¹å™¨çš„æ‹·è´ å€¼èŒƒå›´åˆå§‹åŒ– åˆ—è¡¨åˆå§‹åŒ–ï¼š mapï¼šmap\u0026lt;string, int\u0026gt; word_count = {{\u0026quot;a\u0026quot;, 1}, {\u0026quot;b\u0026quot;, 2}}; setï¼šset\u0026lt;string\u0026gt; exclude = {\u0026quot;the\u0026quot;, \u0026quot;a\u0026quot;}; 2ã€å…³é”®å­—ç±»å‹çš„è¦æ±‚ å¯¹äºæœ‰åºå®¹å™¨ï¼Œå…³é”®å­—ç±»å‹å¿…é¡»å®šä¹‰å…ƒç´ æ¯”è¾ƒçš„æ–¹æ³•ã€‚é»˜è®¤æ˜¯\u0026lt;ã€‚ å¦‚æœæƒ³ä¼ é€’ä¸€ä¸ªæ¯”è¾ƒçš„å‡½æ•°ï¼Œå¯ä»¥è¿™æ ·å®šä¹‰ï¼šmultiset\u0026lt;Sales_data, decltype(compareIsbn)*\u0026gt; bookstore(compareIsbn); 3ã€pair åœ¨utilityå¤´æ–‡ä»¶ä¸­å®šä¹‰ã€‚ ä¸€ä¸ªpairä¿å­˜ä¸¤ä¸ªæ•°æ®æˆå‘˜ï¼Œä¸¤ä¸ªç±»å‹ä¸è¦æ±‚ä¸€æ ·ã€‚ pairçš„æ“ä½œ æ“ä½œ è§£é‡Š pair\u0026lt;T1, T2\u0026gt; p; pæ˜¯ä¸€ä¸ªpairï¼Œä¸¤ä¸ªç±»å‹åˆ†åˆ«æ˜¯T1å’ŒT2çš„æˆå‘˜éƒ½è¿›è¡Œäº†å€¼åˆå§‹åŒ–ã€‚ pair\u0026lt;T1, T2\u0026gt; p(v1, v2); firstå’Œsecondåˆ†åˆ«ç”¨v1å’Œv2è¿›è¡Œåˆå§‹åŒ–ã€‚ pair\u0026lt;T1, T2\u0026gt;p = {v1, v2}; ç­‰ä»·äº`p(v1, v2) make_pair(v1, v2); pairçš„ç±»å‹ä»v1å’Œv2çš„ç±»å‹æ¨æ–­å‡ºæ¥ã€‚ p.first è¿”å›pçš„åä¸ºfirstçš„æ•°æ®æˆå‘˜ã€‚ p.second è¿”å›pçš„åä¸ºsecondçš„æ•°æ®æˆå‘˜ã€‚ p1 relop p2 è¿ç®—å…³ç³»ç¬¦æŒ‰å­—å…¸åºå®šä¹‰ã€‚ p1 == p2 å¿…é¡»ä¸¤å¯¹å…ƒç´ ä¸¤ä¸¤ç›¸ç­‰ p1 != p2 åŒä¸Š ä¸‰ã€å…³è”å®¹å™¨æ“ä½œ å…³è”å®¹å™¨é¢å¤–çš„ç±»å‹åˆ«åï¼š\nç±»å‹åˆ«å è§£é‡Š key_type æ­¤å®¹å™¨ç±»å‹çš„å…³é”®å­—ç±»å‹ mapped_type æ¯ä¸ªå…³é”®å­—å…³è”çš„ç±»å‹ï¼Œåªé€‚ç”¨äºmap value_type å¯¹äºmapï¼Œæ˜¯pair\u0026lt;const key_type, mapped_type\u0026gt;; å¯¹äºsetï¼Œå’Œkey_typeç›¸åŒã€‚ 1ã€å…³è”å®¹å™¨è¿­ä»£å™¨ è§£å¼•ç”¨ä¸€ä¸ªå…³è”å®¹å™¨è¿­ä»£å™¨æ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç±»å‹ä¸ºå®¹å™¨çš„value_typeçš„å€¼çš„å¼•ç”¨ã€‚ mapä¸­çš„è¿­ä»£å™¨è§£å¼•ç”¨è¿”å›ä¸€ä¸ªpair\u0026lt;const value_type , value_type\u0026gt; setçš„è¿­ä»£å™¨æ˜¯constçš„ã€‚ éå†å…³è”å®¹å™¨ï¼šä½¿ç”¨beginå’Œendï¼Œéå†mapã€multimapã€setã€multisetæ—¶ï¼Œè¿­ä»£å™¨æŒ‰å…³é”®å­—å‡åºéå†å…ƒç´ ã€‚ 2ã€æ·»åŠ å…ƒç´  å…³è”å®¹å™¨insertæ“ä½œï¼š\ninsertæ“ä½œ å…³è”å®¹å™¨ c.insert(v) c.emplace(args) væ˜¯value_typeç±»å‹çš„å¯¹è±¡ï¼›argsç”¨æ¥æ„é€ ä¸€ä¸ªå…ƒç´ ã€‚ å¯¹äºmapå’Œsetï¼Œåªæœ‰å…ƒç´ çš„å…³é”®å­—ä¸å­˜åœ¨cä¸­æ‰æ’å…¥æˆ–æ„é€ å…ƒç´ ã€‚å‡½æ•°è¿”å›ä¸€ä¸ªpairï¼ŒåŒ…å«ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘å…·æœ‰æŒ‡å®šå…³é”®å­—çš„å…ƒç´ ï¼Œä»¥åŠä¸€ä¸ªæŒ‡ç¤ºæ’å…¥æ˜¯å¦æˆåŠŸçš„boolå€¼ã€‚å¯¹äºmultimapå’Œmultisetåˆ™ä¼šæ’å…¥èŒƒå›´ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚ c.insert(b, e) c.insert(il) bå’Œeæ˜¯è¿­ä»£å™¨ï¼Œè¡¨ç¤ºä¸€ä¸ªc::value_type\u001bç±»å‹å€¼çš„èŒƒå›´ï¼›ilæ˜¯è¿™ç§å€¼çš„èŠ±æ‹¬å·åˆ—è¡¨ã€‚å‡½æ•°è¿”å›voidã€‚å¯¹äº mapå’Œsetï¼Œåªæ’å…¥å…³é”®å­—ä¸åœ¨cä¸­çš„å…ƒç´ ã€‚ c.insert(p, v) c.emplace(p, args) ç±»ä¼¼insert(v)ï¼Œä½†å°†è¿­ä»£å™¨pä½œä¸ºä¸€ä¸ªæç¤ºï¼ŒæŒ‡å‡ºä»å“ªé‡Œå¼€å§‹æœç´¢æ–°å…ƒç´ åº”è¯¥å­˜å‚¨çš„ä½ç½®ã€‚è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘å…·æœ‰ç»™å®šå…³é”®å­—çš„å…ƒç´ ã€‚ å‘mapæ·»åŠ å…ƒç´ ï¼š\nword_count.insert({word, 1}); word_count.insert(make_pair(word, 1)); word_count.insert(pair\u0026lt;string, size_t\u0026gt;(word, 1)); word_count.insert(map\u0026lt;string, size_t\u0026gt;::value_type (word, 1)); 3ã€åˆ é™¤å…ƒç´  ä»å…³è”å®¹å™¨ä¸­åˆ é™¤å…ƒç´ ï¼š\næ“ä½œ è§£é‡Š c.erase(k) ä»cä¸­åˆ é™¤æ¯ä¸ªå…³é”®å­—ä¸ºkçš„å…ƒç´ ã€‚è¿”å›ä¸€ä¸ªsize_typeå€¼ï¼ŒæŒ‡å‡ºåˆ é™¤çš„å…ƒç´ çš„æ•°é‡ã€‚ c.erase(p) ä»cä¸­åˆ é™¤è¿­ä»£å™¨pæŒ‡å®šçš„å…ƒç´ ã€‚på¿…é¡»æŒ‡å‘cä¸­ä¸€ä¸ªçœŸå®å…ƒç´ ï¼Œä¸èƒ½ç­‰äºc.end()ã€‚è¿”å›ä¸€ä¸ªæŒ‡å‘pä¹‹åå…ƒç´ çš„è¿­ä»£å™¨ï¼Œè‹¥pæŒ‡å‘cä¸­çš„å°¾å…ƒç´ ï¼Œåˆ™è¿”å›c.end() c.erase(b, e) åˆ é™¤è¿­ä»£å™¨å¯¹bå’Œeæ‰€è¡¨ç¤ºèŒƒå›´ä¸­çš„å…ƒç´ ã€‚è¿”å›eã€‚ 4ã€ä¸‹æ ‡æ“ä½œ mapå’Œunordered_mapçš„ä¸‹æ ‡æ“ä½œï¼š\næ“ä½œ è§£é‡Š c[k] è¿”å›å…³é”®å­—ä¸ºkçš„å…ƒç´ ï¼›å¦‚æœkä¸åœ¨cä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå…³é”®å­—ä¸ºkçš„å…ƒç´ ï¼Œå¯¹å…¶å€¼åˆå§‹åŒ–ã€‚ c.at(k) è®¿é—®å…³é”®å­—ä¸ºkçš„å…ƒç´ ï¼Œå¸¦å‚æ•°æ£€æŸ¥ï¼›è‹¥kä¸å­˜åœ¨åœ¨cä¸­ï¼ŒæŠ›å‡ºä¸€ä¸ªout_of_rangeå¼‚å¸¸ã€‚ setä¸æ”¯æŒä¸‹æ ‡æ“ä½œï¼Œmultimapä¹Ÿä¸æ”¯æŒ å¯¹mapä½¿ç”¨ä¸‹æ ‡æ“ä½œ å…³é”®å­—å­˜åœ¨ï¼Œè¿”å›mapped_type å…³é”®å­—ä¸å­˜åœ¨ï¼Œæ·»åŠ ä¸‹æ ‡å…ƒç´  5ã€æŸ¥æ‰¾å…ƒç´  åœ¨ä¸€ä¸ªå…³è”å®¹å™¨ä¸­æŸ¥æ‰¾å…ƒç´ :\næ“ä½œ è§£é‡Š c.find(k) è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…³é”®å­—ä¸ºkçš„å…ƒç´ ï¼Œè‹¥kä¸åœ¨å®¹å™¨ä¸­ï¼Œåˆ™è¿”å›å°¾åè¿­ä»£å™¨ c.count(k) è¿”å›å…³é”®å­—ç­‰äºkçš„å…ƒç´ çš„æ•°é‡ã€‚å¯¹äºä¸å…è®¸é‡å¤å…³é”®å­—çš„å®¹å™¨ï¼Œè¿”å›å€¼æ°¸è¿œæ˜¯0æˆ–1ã€‚ c.lower_bound(k) è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…³é”®å­—ä¸å°äºkçš„å…ƒç´ ã€‚ c.upper_bound(k) è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…³é”®å­—å¤§äºkçš„å…ƒç´ ã€‚ c.equal_range(k) è¿”å›ä¸€ä¸ªè¿­ä»£å™¨pairï¼Œè¡¨ç¤ºå…³é”®å­—ç­‰äºkçš„å…ƒç´ çš„èŒƒå›´ã€‚è‹¥kä¸å­˜åœ¨ï¼Œpairçš„ä¸¤ä¸ªæˆå‘˜å‡ç­‰äºc.end()ã€‚ lower_boundå’Œupper_boundä¸é€‚ç”¨äºæ— åºå®¹å™¨ã€‚ ä¸‹æ ‡å’Œatæ“ä½œåªé€‚ç”¨äºéconstçš„mapå’Œunordered_mapã€‚ å››ã€æ— åºå®¹å™¨ æœ‰åºå®¹å™¨ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦æ¥ç»„ç»‡å…ƒç´ ï¼›æ— åºå®¹å™¨ä½¿ç”¨å“ˆå¸Œå‡½æ•°å’Œå…³é”®å­—ç±»å‹çš„==è¿ç®—ç¬¦ã€‚ ç†è®ºä¸Šå“ˆå¸ŒæŠ€æœ¯å¯ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚ æ— åºå®¹å™¨åœ¨å­˜å‚¨ä¸Šç»„ç»‡ä¸ºä¸€ç»„æ¡¶(bucket)ï¼Œæ¯ä¸ªæ¡¶ä¿å­˜é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚æ— åºå®¹å™¨ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œå‡½æ•°å°†å…ƒç´ æ˜ å°„åˆ°æ¡¶ã€‚ æ— åºå®¹å™¨ç®¡ç†æ“ä½œï¼š\næ“ä½œ è§£é‡Š æ¡¶æ¥å£ c.bucket_count() æ­£åœ¨ä½¿ç”¨çš„æ¡¶çš„æ•°ç›® c.max_bucket_count() å®¹å™¨èƒ½å®¹çº³çš„æœ€å¤šçš„æ¡¶çš„æ•°ç›® c.bucket_size(n) ç¬¬nä¸ªæ¡¶ä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´  c.bucket(k) å…³é”®å­—ä¸ºkçš„å…ƒç´ åœ¨å“ªä¸ªæ¡¶ä¸­ æ¡¶è¿­ä»£ local_iterator å¯ä»¥ç”¨æ¥è®¿é—®æ¡¶ä¸­å…ƒç´ çš„è¿­ä»£å™¨ç±»å‹ const_local_iterator æ¡¶è¿­ä»£å™¨çš„constç‰ˆæœ¬ c.begin(n)ï¼Œc.end(n) æ¡¶nçš„é¦–å…ƒç´ è¿­ä»£å™¨ c.cbegin(n)ï¼Œc.cend(n) ä¸å‰ä¸¤ä¸ªå‡½æ•°ç±»ä¼¼ï¼Œä½†è¿”å›const_local_iteratorã€‚ å“ˆå¸Œç­–ç•¥ c.load_factor() æ¯ä¸ªæ¡¶çš„å¹³å‡å…ƒç´ æ•°é‡ï¼Œè¿”å›floatå€¼ã€‚ c.max_load_factor() cè¯•å›¾ç»´æŠ¤çš„å¹³å‡æ¯”æ¡¶å¤§å°ï¼Œè¿”å›floatå€¼ã€‚cä¼šåœ¨éœ€è¦æ—¶æ·»åŠ æ–°çš„æ¡¶ï¼Œä»¥ä½¿å¾—load_factor\u0026lt;=max_load_factor c.rehash(n) é‡ç»„å­˜å‚¨ï¼Œä½¿å¾—bucket_count\u0026gt;=nï¼Œä¸”bucket_count\u0026gt;size/max_load_factor c.reverse(n) é‡ç»„å­˜å‚¨ï¼Œä½¿å¾—cå¯ä»¥ä¿å­˜nä¸ªå…ƒç´ ä¸”ä¸å¿…rehashã€‚ ","pubDate":"2021-09-28","title":"ã€C++ Primer(edition 5) 09ã€‘å…³è”å®¹å™¨"},{"link":"https://cnjslw.github.io/posts/%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8/","plain":"ä¸€ã€å®¹å™¨åº“æ¦‚è¿° 1ã€å®¹å™¨å†…å…ƒç´ çš„ç±»å‹çº¦æŸ ä½¿ç”¨ C++ æ ‡å‡†åº“å®¹å™¨å­˜å‚¨å…ƒç´ æ—¶ï¼Œå¯¹äºå…ƒç´ ç±»å‹æœ‰ä¸€äº›è¦æ±‚ï¼š\nå…ƒç´ ç±»å‹å¿…é¡»æ”¯æŒå¤åˆ¶è¯­ä¹‰ï¼Œå³å¯ä»¥ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ=ï¼‰å°†ä¸€ä¸ªå…ƒç´ èµ‹å€¼ç»™å¦ä¸€ä¸ªå…ƒç´ ï¼Œè¿™æ˜¯å› ä¸ºæ ‡å‡†åº“å®¹å™¨éœ€è¦åœ¨å†…éƒ¨å­˜å‚¨å’Œå¤åˆ¶å…ƒç´ ã€‚ å…ƒç´ ç±»å‹å¿…é¡»æ”¯æŒç­‰ä»·æ€§ï¼Œå³å¯ä»¥ä½¿ç”¨ç­‰ä»·æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆ==ï¼‰æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸ç­‰ï¼Œè¿™æ˜¯å› ä¸ºæ ‡å‡†åº“å®¹å™¨éœ€è¦æ”¯æŒæŸ¥æ‰¾å’Œåˆ é™¤å…ƒç´ ç­‰æ“ä½œã€‚ å¯¹äºä¸åŒçš„æ ‡å‡†åº“å®¹å™¨ï¼Œå…ƒç´ ç±»å‹è¦æ±‚ä¹Ÿä¸å°½ç›¸åŒã€‚ä¾‹å¦‚ï¼Œstd::vector å’Œ std::deque éƒ½æ˜¯åŠ¨æ€æ•°ç»„ï¼Œä½† std::vector æ”¯æŒéšæœºè®¿é—®ï¼Œè€Œ std::deque æ”¯æŒåœ¨é˜Ÿåˆ—é¦–å°¾è¿›è¡Œ O(1) æ“ä½œã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨å®¹å™¨æ—¶éœ€è¦æ ¹æ®å…·ä½“çš„éœ€æ±‚æ¥é€‰æ‹©é€‚å½“çš„å®¹å™¨ç±»å‹ã€‚ æ€»çš„æ¥è¯´ï¼Œå¦‚æœæ‚¨çš„å…ƒç´ ç±»å‹æ”¯æŒå¤åˆ¶è¯­ä¹‰å’Œç­‰ä»·æ€§ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥ä½œä¸ºæ ‡å‡†åº“å®¹å™¨çš„å…ƒç´ ç±»å‹ã€‚å¦‚æœæ‚¨çš„å…ƒç´ ç±»å‹ä¸æ”¯æŒå¤åˆ¶è¯­ä¹‰å’Œç­‰ä»·æ€§ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨ C++ æŒ‡é’ˆæˆ–å…¶ä»–æŠ€å·§æ¥å°†å®ƒå­˜å‚¨åœ¨å®¹å™¨ 2ã€å®¹å™¨æ“ä½œ å®¹å™¨çš„æ“ä½œåˆ†æˆä¸‰ç±»ï¼š\næ‰€æœ‰å®¹å™¨éƒ½æä¾›çš„æ“ä½œ æŒ‰ç…§é¡ºåºå®¹å™¨ï¼Œå…³è”å®¹å™¨ï¼Œæ— åºå®¹å™¨åˆ†ç±»ï¼Œåˆ†åˆ«æä¾›ä¸åŒçš„æ“ä½œ ä¸€å°éƒ¨åˆ†å®¹å™¨æä¾›çš„æ“ä½œ âš ï¸ éšåçš„è¡¨æ ¼ä¸­ï¼Œåˆ—å‡ºäº†æ‰€æœ‰é¡ºåºå®¹å™¨çš„æ“ä½œï¼ŒæŸäº›ä¸æä¾›è¿™äº›æ“ä½œçš„å®¹å™¨ï¼Œåœ¨è¡¨åæœ‰è¯´æ˜ï¼\n2.1 ç±»å‹åˆ«å æ“ä½œ è§£é‡Š iterator æ­¤å®¹å™¨ç±»å‹çš„è¿­ä»£å™¨ç±»å‹ const_iterator å¯ä»¥è¯»å–å…ƒç´ ä½†ä¸èƒ½ä¿®æ”¹å…ƒç´ çš„è¿­ä»£å™¨ç±»å‹ size_type æ— ç¬¦å·æ•´æ•°ç±»å‹ï¼Œè¶³å¤Ÿä¿å­˜æ­¤ç§å®¹å™¨ç±»å‹æœ€å¤§å¯èƒ½çš„å¤§å° difference_type å¸¦ç¬¦å·æ•´æ•°ç±»å‹ï¼Œè¶³å¤Ÿä¿å­˜ä¸¤ä¸ªè¿­ä»£å™¨ä¹‹é—´çš„è·ç¦» value_type å…ƒç´ ç±»å‹ reference å…ƒç´ çš„å·¦å€¼ç±»å‹ï¼›å’Œvalue_type \u0026amp;å«ä¹‰ç›¸åŒ const_reference å…ƒç´ çš„constå·¦å€¼ç±»å‹ï¼Œå³const value_type \u0026amp; 2.2 æ„é€ å‡½æ•° æ“ä½œ è§£é‡Š C c; é»˜è®¤æ„é€ å‡½æ•°ï¼Œæ„é€ ç©ºå®¹å™¨ C c1(c2);æˆ–C c1 = c2; æ„é€ c2çš„æ‹·è´c1 C c(b, e) æ„é€ cï¼Œå°†è¿­ä»£å™¨bå’ŒeæŒ‡å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ æ‹·è´åˆ°c C c{a, b, c...} åˆ—è¡¨åˆå§‹åŒ–c åªæœ‰é¡ºåºå®¹å™¨çš„æ„é€ å‡½æ•°æ‰æ¥å—å¤§å°å‚æ•°ï¼Œå…³è”å®¹å™¨å¹¶ä¸æ”¯æŒã€‚ arrayå…·æœ‰å›ºå®šå¤§å°ã€‚ å’Œå…¶ä»–å®¹å™¨ä¸åŒï¼Œé»˜è®¤æ„é€ çš„arrayæ˜¯éç©ºçš„ã€‚ arrayå¯ä»¥æ‹·è´å’Œå¯¹è±¡èµ‹å€¼ , è¿™ä¸€ç‚¹ä¸å†…ç½®æ•°ç»„ä¸åŒ ç›´æ¥å¤åˆ¶ï¼šå°†ä¸€ä¸ªå®¹å™¨å¤åˆ¶ç»™å¦ä¸€ä¸ªå®¹å™¨æ—¶ï¼Œç±»å‹å¿…é¡»åŒ¹é…ï¼šå®¹å™¨ç±»å‹å’Œå…ƒç´ ç±»å‹éƒ½å¿…é¡»ç›¸åŒã€‚ ä½¿ç”¨è¿­ä»£å™¨å¤åˆ¶ï¼šä¸è¦æ±‚å®¹å™¨ç±»å‹ç›¸åŒï¼Œå®¹å™¨å†…çš„å…ƒç´ ç±»å‹ä¹Ÿå¯ä»¥ä¸åŒã€‚ 2.3 èµ‹å€¼å’Œswap æ“ä½œ è§£é‡Š c1 = c2; å°†c1ä¸­çš„å…ƒç´ æ›¿æ¢æˆc2ä¸­çš„å…ƒç´  c1 = {a, b, c...} å°†c1ä¸­çš„å…ƒç´ æ›¿æ¢æˆåˆ—è¡¨ä¸­çš„å…ƒç´ ï¼ˆä¸é€‚ç”¨äºarrayï¼‰ c1.swap(c2) äº¤æ¢c1å’Œc2çš„å…ƒç´  swap(c1, c2) ç­‰ä»·äºc1.swap(c2) c.assign(b, e) å°†cä¸­çš„å…ƒç´ æ›¿æ¢æˆè¿­ä»£å™¨bå’Œeè¡¨ç¤ºèŒƒå›´ä¸­çš„å…ƒç´ ï¼Œbå’Œeä¸èƒ½æŒ‡å‘cä¸­çš„å…ƒç´  c.assign(il) å°†cä¸­çš„å…ƒç´ æ›¿æ¢æˆåˆå§‹åŒ–åˆ—è¡¨ilä¸­çš„å…ƒç´  c.assign(n, r) å°†cä¸­çš„å…ƒç´ æ›¿æ¢ä¸ºnä¸ªå€¼æ˜¯tçš„å…ƒç´  2.3.1 èµ‹å€¼ èµ‹å€¼å·¦å³å¤§å°è‹¥ä¸ä¸€è‡´ï¼Œåˆ™ä¸¤è¾¹éƒ½å’Œå³è¾¹ä¸€è‡´\n[[é¡ºåºå®¹å™¨#4.3 arrayçš„æ‹·è´ä¸å¯¹è±¡èµ‹å€¼| arrayèµ‹å€¼æ“ä½œ]]\nä½¿ç”¨éæˆå‘˜ç‰ˆæœ¬çš„swapæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚ swapä¸ä¼šå¯¼è‡´å®¹å™¨çš„æŒ‡é’ˆ,è¿­ä»£å™¨,å¼•ç”¨,å¤±æ•ˆ, ä»–ä»¬ä»ç„¶æŒ‡å‘æˆ–è€…å¼•ç”¨ä¹‹å‰æ‰€æŒ‡å‘æˆ–å¼•ç”¨çš„é‚£äº›å…ƒç´ ï¼Œä½†æ˜¯å·²ç»å±äºä¸åŒçš„å®¹å™¨äº†\nassignæ“ä½œä¸é€‚ç”¨äºå…³è”å®¹å™¨å’Œarray\n2.3.2 ä½¿ç”¨assign ï¼ˆä»…é¡ºåºå®¹å™¨ï¼‰ é¡ºåºå®¹å™¨ï¼ˆarrayé™¤å¤–ï¼‰è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºassignçš„æˆå‘˜ï¼Œ å…è®¸æˆ‘ä»¬ä»ä¸€ä¸ªä¸åŒä½†ç›¸å®¹çš„ç±»å‹èµ‹å€¼ï¼Œæˆ–è€…ä»å®¹å™¨çš„ä¸€ä¸ªå­åºåˆ—èµ‹å€¼ï¼Œåªè¦èƒ½è½¬æ¢\n1 2 3 4 5 6 7 8 9 10 list\u0026lt;string\u0026gt; names; vector\u0026lt;const char*\u0026gt; oldstyle; names = oldstyle; // é”™è¯¯ï¼šå®¹å™¨ç±»å‹ä¸åŒ¹é… // æ­£ç¡®ï¼šå¯ä»¥å°†const char* è½¬æ¢ä¸º string names.assign(oldstyle.cbegin(), oldstyle.cend()); // ç­‰ä»·äºslistl.clear(); // åè·Ÿslistl.insert(slistl.begin(), 10, \u0026#34;Hiya!\u0026#34;); list\u0026lt;string\u0026gt; slistl (1) ; // 1ä¸ªå…ƒç´ ï¼Œä¸ºç©º string slistl.assign (10, \u0026#34;Hiya!\u0026#34;) ; // 10ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªéƒ½æ˜¯\u0026#34;Hiya!\u0026#34; 2.3.3 ä½¿ç”¨swap swapæ“ä½œäº¤æ¢ä¸¤ä¸ªç›¸åŒç±»å‹å®¹å™¨çš„å†…å®¹ã€‚è°ƒç”¨swapä¹‹åï¼Œä¸¤ä¸ªå®¹å™¨ä¸­çš„å…ƒç´ å°†ä¼šäº¤æ¢ï¼›\n1 2 vector\u0026lt;string\u0026gt; svecl (10) ; // 10 ä¸ªå…ƒç´ çš„ vector vector\u0026lt;string\u0026gt; svec2 (24) ; // 24 ä¸ªå…ƒç´ çš„ vector swap(svecl, svec2); äº¤æ¢ä¸¤ä¸ªå®¹å™¨å†…å®¹çš„æ“ä½œä¿è¯ä¼šå¾ˆå¿«â€”â€” å…ƒç´ æœ¬èº«å¹¶æœªäº¤æ¢ï¼Œswapåªæ˜¯äº¤æ¢äº†ä¸¤ä¸ª å®¹å™¨çš„å†…éƒ¨æ•°æ®ç»“æ„ é™¤ arrayå¤–ï¼Œswapä¸å¯¹ä»»ä½•å…ƒç´ è¿›è¡Œæ‹·è´ã€åˆ é™¤æˆ–æ’å…¥æ“ä½œï¼Œå› æ­¤å¯ä»¥ä¿è¯ç”Ÿ åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆï¼Œä½†æ˜¯arrayä¼šçœŸæ­£çš„äº¤æ¢ è¿™ä¹Ÿæ„å‘³ç€ï¼ŒæŒ‡å‘å®¹å™¨çš„è¿­ä»£å™¨ã€å¼•ç”¨å’ŒæŒ‡é’ˆåœ¨swapæ“ä½œä¹‹åä¸ä¼šå¤±æ•ˆï¼Œä»æ—§æŒ‡å‘ä¹‹å‰çš„å…ƒç´  ä¾‹å¦‚ï¼šå‡å®šiteråœ¨ swapä¹‹å‰æŒ‡å‘svec1 [3]çš„string,é‚£ä¹ˆåœ¨swapä¹‹åå®ƒæŒ‡å‘svec2 [3]çš„å…ƒç´ \n2.4 å¤§å° æ“ä½œ è§£é‡Š c.size() cä¸­å…ƒç´ çš„æ•°ç›®ï¼ˆä¸æ”¯æŒforward_listï¼‰ c.max_size() cä¸­å¯ä¿å­˜çš„æœ€å¤§å…ƒç´ æ•°ç›® c.empty() è‹¥cä¸­å­˜å‚¨äº†å…ƒç´ ï¼Œè¿”å›falseï¼Œå¦åˆ™è¿”å›true 2.5 æ·»åŠ å…ƒç´ /åˆ é™¤å…ƒç´  æ“ä½œ è§£é‡Š c.insert(args) å°†argsä¸­çš„å…ƒç´ æ‹·è´è¿›c c.emplace(init) ä½¿ç”¨initsæ„é€ cä¸­çš„ä¸€ä¸ªå…ƒç´  c.erase (args) åˆ é™¤argsæŒ‡å®šçš„å…ƒç´  c.clear() åˆ é™¤cä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œè¿”å›void 2.6 è·å–è¿­ä»£å™¨ æ“ä½œ è§£é‡Š c.begin(), c.end() è¿”å›æŒ‡å‘cçš„é¦–å…ƒç´ å’Œå°¾å…ƒç´ ä¹‹åä½ç½®çš„è¿­ä»£å™¨ c.cbegin(), c.cend() è¿”å›const_iterator ä»¥cå¼€å¤´çš„ç‰ˆæœ¬æ˜¯C++11æ–°æ ‡å‡†å¼•å…¥çš„ å½“ä¸éœ€è¦å†™è®¿é—®æ—¶ï¼Œåº”è¯¥ä½¿ç”¨cbeginå’Œcendã€‚ 2.7 åå‘å®¹å™¨çš„é¢å¤–æˆå‘˜ æ“ä½œ è§£é‡Š reverse_iterator æŒ‰é€†åºå¯»å€å…ƒç´ çš„è¿­ä»£å™¨ const_reverse_iterator ä¸èƒ½ä¿®æ”¹å…ƒç´ çš„é€†åºè¿­ä»£å™¨ c.rbegin(), c.rend() è¿”å›æŒ‡å‘cçš„å°¾å…ƒç´ å’Œé¦–å…ƒç´ ä¹‹å‰ä½ç½®çš„è¿­ä»£å™¨ c.crbegin(), c.crend() è¿”å›const_reverse_iterator ä¸æ”¯æŒforward_list 2.8 å…³ç³»è¿ç®—ç¬¦ æ“ä½œ è§£é‡Š == != æ‰€æœ‰å®¹å™¨éƒ½æ”¯æŒç›¸ç­‰ï¼ˆä¸ç­‰ï¼‰è¿ç®—ç¬¦ \u0026lt; , \u0026lt; = , \u0026gt; , \u0026gt; = å…³ç³»è¿ç®—ç¬¦ï¼ˆæ— åºå…³è”å®¹å™¨ä¸æ”¯æŒï¼‰ å…³ç³»è¿ç®—ç¬¦å·¦å³ä¸¤è¾¹çš„è¿ç®—å¯¹è±¡å¿…é¡»æ˜¯ç›¸åŒç±»å‹çš„å®¹å™¨ï¼Œä¸”å¿…é¡»ä¿å­˜ç›¸åŒç±»å‹çš„å…ƒç´ ï¼Œæ¯”è¾ƒä¸¤ä¸ªå®¹å™¨å®é™…ä¸Šæ˜¯è¿›è¡Œå…ƒç´ çš„é€å¯¹æ¯”è¾ƒ graph LR s[æ¯”è¾ƒ] s--\u0026gt;c_1[ä¸ç›¸ç­‰:å…ƒç´ ä¸ªæ•°ä¸åŒ] s--\u0026gt;c_2[ç›¸ç­‰:å…ƒç´ ä¸ªæ•°å’Œå…ƒç´ å¤§å°éƒ½ç›¸ç­‰] c_1--\u0026gt;c_2_1[å­˜åœ¨åŒ…å«å…³ç³»,æ¯”ä¸ªæ•°] c_1--\u0026gt;c_2_2[æœ‰äº¤é›†ä¸åŒ…å«,æ¯”è¾ƒç¬¬ä¸€ä¸ªä¸ç­‰çš„å…ƒç´ ] æ‰€è°“å…ƒç´ çš„å¤§å°ï¼šå®¹å™¨çš„å…³ç³»è¿ç®—ç¬¦ä½¿ç”¨å…ƒç´ çš„å…³ç³»è¿ç®—ç¬¦å®Œæˆæ¯”è¾ƒ\n2.9 è¿­ä»£å™¨ ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Ÿ åœ¨ C++ ä¸­ï¼Œè¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæä¾›äº†åœ¨å®¹å™¨ï¼ˆå¦‚æ•°ç»„ã€é“¾è¡¨ç­‰ï¼‰ä¸­éå†å…ƒç´ çš„æ–¹æ³•ã€‚é€šä¿—åœ°è¯´ï¼Œè¿­ä»£å™¨å°±åƒæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªæŒ‡é’ˆï¼Œå¯ä»¥é€šè¿‡è¿­ä»£å™¨æ¥è®¿é—®å®¹å™¨ä¸­çš„å…ƒç´ ï¼Œæ¯”å¦‚è·å–ã€ä¿®æ”¹ã€æ’å…¥å…ƒç´ ç­‰ã€‚ C++ ä¸­çš„è¿­ä»£å™¨ç±»å‹åˆ†ä¸ºäº”ç§ï¼šè¾“å…¥è¿­ä»£å™¨ã€è¾“å‡ºè¿­ä»£å™¨ã€å‰å‘è¿­ä»£å™¨ã€åŒå‘è¿­ä»£å™¨å’Œéšæœºè®¿é—®è¿­ä»£å™¨ã€‚æ¯ç§ç±»å‹çš„è¿­ä»£å™¨éƒ½æœ‰ä¸åŒçš„åŠŸèƒ½å’Œæ€§èƒ½ï¼Œä¾‹å¦‚ï¼Œéšæœºè®¿é—®è¿­ä»£å™¨æ”¯æŒ O(1) çš„éšæœºè®¿é—®ï¼Œè€Œè¾“å…¥è¿­ä»£å™¨ä»…æ”¯æŒé€’å¢çš„éå†ã€‚ ä½¿ç”¨è¿­ä»£å™¨çš„å¥½å¤„æ˜¯ï¼Œå®ƒå¯ä»¥ä½¿ä»£ç å˜å¾—æ›´åŠ ç®€æ´å’Œå¯ç§»æ¤ï¼Œå› ä¸ºè¿­ä»£å™¨æŠ½è±¡äº†å¯¹å®¹å™¨çš„éå†ï¼Œä»è€Œä½¿å¾—ä»£ç å¯¹å®¹å™¨çš„å…·ä½“å®ç°ç»†èŠ‚æ›´åŠ ç‹¬ç«‹ã€‚\nè¿­ä»£å™¨\nforward_list , list ä¸æ”¯æŒè¿­ä»£å™¨çš„ç®—æ•°è¿ç®— è¿­ä»£å™¨èŒƒå›´ï¼šbeginåˆ°endï¼Œå³ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ çš„åé¢ä¸€ä¸ªä½ç½®ã€‚ å·¦é—­åˆåŒºé—´ï¼š[begin, end) å·¦é—­åˆèŒƒå›´è•´å«çš„ç¼–ç¨‹è®¾å®šï¼š å¦‚æœbeginå’Œendç›¸ç­‰ï¼Œåˆ™èŒƒå›´ä¸ºç©ºã€‚ å¦‚æœäºŒè€…ä¸ç­‰ï¼Œåˆ™èŒƒå›´è‡³å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼Œä¸”beginæŒ‡å‘è¯¥èŒƒå›´ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ å¯ä»¥å¯¹beginé€’å¢è‹¥å¹²æ¬¡ï¼Œä½¿å¾—begin == endã€‚ 2.10 å®¹å™¨å®šä¹‰å’Œåˆå§‹åŒ– ![[Pasted image 20230211004318.png]]\n2.10.1 åˆ©ç”¨æ‹·è´åˆå§‹åŒ– 1. æ‹·è´æ•´ä¸ªå®¹å™¨ ä¸¤ä¸ªå®¹å™¨çš„ç±»å‹åŠå…¶å…ƒç´ ç±»å‹å¿…é¡»åŒ¹é…\n2. æ‹·è´ç”±ä¸€ä¸ªè¿­ä»£å™¨å¯¹æŒ‡å®šçš„å…ƒç´ èŒƒå›´ å½“ä¼ é€’è¿­ä»£å™¨å‚æ•°æ¥æ‹·è´ä¸€ä¸ªèŒƒå›´æ—¶ï¼Œå°±ä¸è¦æ±‚å®¹å™¨ç±»å‹æ˜¯ç›¸åŒçš„äº†ã€‚è€Œä¸”ï¼Œæ–°å®¹å™¨å’ŒåŸå®¹å™¨ä¸­çš„å…ƒç´ ç±»å‹ä¹Ÿå¯ä»¥ä¸åŒï¼Œåªè¦èƒ½å°†è¦æ‹·è´çš„å…ƒç´ è½¬æ¢ ä¸ºè¦åˆå§‹åŒ–çš„å®¹å™¨çš„å…ƒç´ ç±»å‹å³å¯\n1 2 3 4 5 6 7 //æ¯ä¸ªå®¹å™¨æœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œç”¨ç»™å®šçš„åˆå§‹åŒ–å™¨è¿›è¡Œåˆå§‹åŒ– list\u0026lt;string\u0026gt; authors = {\u0026#34;Milton\u0026#34;, \u0026#34;Shakespeare\u0026#34;, \u0026#34;Austen\u0026#34;}; vector\u0026lt;const char*\u0026gt; articles = {\u0026#34;a\u0026#34;, \u0026#34;an\u0026#34;ï¼Œ \u0026#34;the\u0026#34;}; list\u0026lt;string\u0026gt; list2(authors); // æ­£ç¡® ç±»å‹åŒ¹é… deque\u0026lt;string\u0026gt; authList (authors) ; // é”™è¯¯ å®¹å™¨ç±»å‹ä¸åŒ¹é… vector\u0026lt;string\u0026gt; words (articles) ; // é”™è¯¯ å®¹å™¨ç±»å‹å¿…é¡»åŒ¹é… // æ­£ç¡®ï¼šå¯ä»¥å°†const char*å…ƒç´ è½¬æ¢ä¸ºstring forward_list\u0026lt;string\u0026gt; words(articles.begin(), articles.end()); 2.10.2 åˆ—è¡¨åˆå§‹åŒ– 1 2 list\u0026lt;string\u0026gt; authors = {\u0026#34;Milton\u0026#34; , \u0026#34;Shakespeare\u0026#34;, \u0026#34;Austen\u0026#34;}; vector\u0026lt;const char*\u0026gt; articles = {\u0026#34;a\u0026#34;ï¼Œ \u0026#34;an\u0026#34;, \u0026#34;the\u0026#34;}; å¯¹äºé™¤arrayä¹‹å¤–çš„å®¹å™¨ç±»å‹, åˆå§‹åŒ–åˆ—è¡¨è¿˜éšå«åœ°æŒ‡å®šäº†å®¹å™¨çš„å¤§å°ï¼šå®¹å™¨å°†åŒ…å«ä¸åˆå§‹å€¼ä¸€æ ·å¤šçš„å…ƒç´ \n2.10.3 é¡ºåºå®¹å™¨ç‰¹æœ‰çš„æ„é€ å‡½æ•° é™¤äº†ä¸å…³è”å®¹å™¨ç›¸åŒçš„æ„é€ å‡½æ•°å¤–ï¼Œé¡ºåºå®¹å™¨ï¼ˆarrayé™¤å¤–ï¼‰è¿˜æä¾›å¦ä¸€ä¸ªæ„é€ å‡½æ•°, å®ƒæ¥å—ä¸€ä¸ªå®¹å™¨å¤§å°å’Œä¸€ä¸ªï¼ˆå¯é€‰çš„ï¼‰å…ƒç´ åˆå§‹å€¼ã€‚å¦‚æœæˆ‘ä»¬ä¸æä¾›å…ƒç´ åˆå§‹å€¼ï¼Œåˆ™æ ‡å‡†åº“ä¼šåˆ›å»ºä¸€ä¸ªå€¼åˆå§‹åŒ–å™¨\n1 2 3 4 vector\u0026lt;int\u0026gt; ivec(10,-1); list\u0026lt;string\u0026gt; svec(10,\u0026#34;hi!\u0026#34;); forward_list\u0026lt;int\u0026gt; ivec(10); //10ä¸ªå…ƒç´ ï¼Œåˆå§‹ä¸º0 deque\u0026lt;string\u0026gt; svec(10); //10ä¸ªå…ƒç´ ï¼Œåˆå§‹åŒ–ä¸ºç©º å¦‚æœå…ƒç´ ç±»å‹æ˜¯ç±»ç±»å‹ï¼Œåªæœ‰å½“è¯¥ç±»æœ‰é»˜è®¤æ„é€ å‡½æ•°æ‰èƒ½ä¸æŒ‡å®šåˆå§‹å€¼ï¼Œå¦åˆ™å¿…é¡»æ˜¾ç¤ºåˆå§‹åŒ–\näºŒã€é¡ºåºå®¹å™¨ é¡ºåºå®¹å™¨ï¼ˆsequential containerï¼‰ï¼šé¡ºåºå®¹å™¨éƒ½æä¾›äº†å¿«é€Ÿé¡ºåºè®¿é—®å…ƒç´ çš„èƒ½åŠ›ã€‚è¿™ç§é¡ºåºä¸ä¾èµ–äºå…ƒç´ çš„å€¼ï¼Œè€Œæ˜¯ä¸å…ƒç´ åŠ å…¥å®¹å™¨æ—¶çš„ä½ç½®ç›¸å¯¹åº”ã€‚\n1ã€é¡ºåºå®¹å™¨ç±»å‹ å®¹å™¨ç±»å‹ ä»‹ç» vector å¯å˜å¤§å°æ•°ç»„ã€‚æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚åœ¨å°¾éƒ¨ä¹‹å¤–çš„ä½ç½®æ’å…¥æˆ–åˆ é™¤å…ƒç´ å¯èƒ½å¾ˆæ…¢ã€‚ deque åŒç«¯é˜Ÿåˆ—ã€‚æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚åœ¨å¤´å°¾ä½ç½®æ’å…¥/åˆ é™¤é€Ÿåº¦å¾ˆå¿«ã€‚ list åŒå‘é“¾è¡¨ã€‚åªæ”¯æŒåŒå‘é¡ºåºè®¿é—®ã€‚åœ¨listä¸­ä»»ä½•ä½ç½®è¿›è¡Œæ’å…¥/åˆ é™¤æ“ä½œé€Ÿåº¦éƒ½å¾ˆå¿«ã€‚ forward_list å•å‘é“¾è¡¨ã€‚åªæ”¯æŒå•å‘é¡ºåºè®¿é—®ã€‚åœ¨é“¾è¡¨ä»»ä½•ä½ç½®è¿›è¡Œæ’å…¥/åˆ é™¤æ“ä½œé€Ÿåº¦éƒ½å¾ˆå¿«ã€‚ array å›ºå®šå¤§å°æ•°ç»„ã€‚æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚ä¸èƒ½æ·»åŠ æˆ–è€…åˆ é™¤å…ƒç´ ã€‚ string ä¸vectorç›¸ä¼¼çš„å®¹å™¨ï¼Œä½†ä¸“é—¨ç”¨äºä¿å­˜å­—ç¬¦ã€‚éšæœºè®¿é—®å—ã€‚åœ¨å°¾éƒ¨æ’å…¥/åˆ é™¤é€Ÿåº¦å¿«ã€‚ é™¤äº†å›ºå®šå¤§å°çš„arrayå¤–ï¼Œå…¶ä»–å®¹å™¨éƒ½æä¾›é«˜æ•ˆã€çµæ´»çš„å†…å­˜ç®¡ç†ã€‚ forward_listå’Œarrayæ˜¯æ–°C++æ ‡å‡†å¢åŠ çš„ç±»å‹ã€‚ é€šå¸¸ä½¿ç”¨vectoræ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œé™¤éä½ æœ‰å¾ˆå¥½çš„ç†ç”±é€‰æ‹©å…¶ä»–å®¹å™¨ã€‚ æ¯ä¸ªå®¹å™¨éƒ½å®šä¹‰åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶åä¸ç±»å‹åç›¸åŒï¼Œå®¹å™¨å‡å®šä¹‰ä¸ºæ¨¡æ¿ç±»ï¼ŒæŒ‰ç…§[[æ¨¡æ¿ä¸æ³›å‹ç¼–ç¨‹|æ¨¡æ¿]]çš„ä½¿ç”¨è§„åˆ™æ¥ä½¿ç”¨ æ–°æ ‡å‡†åº“çš„å®¹å™¨æ¯”æ—§ç‰ˆçš„å¿«å¾—å¤šã€‚ 2ã€é¡ºåºå®¹å™¨æ“ä½œ 2.1 æ·»åŠ å…ƒç´  æ“ä½œ è§£é‡Š c.push_back(t) åœ¨cå°¾éƒ¨åˆ›å»ºä¸€ä¸ªå€¼ä¸ºtçš„å…ƒç´ ï¼Œè¿”å›void c.emplace_back(args) åŒä¸Š c.push_front(t) åœ¨cå¤´éƒ¨åˆ›å»ºä¸€ä¸ªå€¼ä¸ºtçš„å…ƒç´ ï¼Œè¿”å›void c.emplace_front(args) åŒä¸Š c.insert(p, t) åœ¨è¿­ä»£å™¨pæŒ‡å‘çš„å…ƒç´ ä¹‹å‰åˆ›å»ºä¸€ä¸ªå€¼æ˜¯tçš„å…ƒç´ ï¼Œè¿”å›æŒ‡å‘æ–°å…ƒç´ çš„è¿­ä»£å™¨ c.emplace(p, args) åŒä¸Š c.insert(p, n, t) åœ¨è¿­ä»£å™¨pæŒ‡å‘çš„å…ƒç´ ä¹‹å‰æ’å…¥nä¸ªå€¼ä¸ºtçš„å…ƒç´ ï¼Œè¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªæ–°å…ƒç´ çš„è¿­ä»£å™¨ï¼›å¦‚æœnæ˜¯0ï¼Œåˆ™è¿”å›p c.insert(p, b, e) å°†è¿­ä»£å™¨bå’ŒeèŒƒå›´å†…çš„å…ƒç´ ï¼Œæ’å…¥åˆ°pæŒ‡å‘çš„å…ƒç´ ä¹‹å‰ï¼›å¦‚æœèŒƒå›´ä¸ºç©ºï¼Œåˆ™è¿”å›p c.insert(p, il) ilæ˜¯ä¸€ä¸ªèŠ±æ‹¬å·åŒ…å›´ä¸­çš„å…ƒç´ å€¼åˆ—è¡¨ï¼Œå°†å…¶æ’å…¥åˆ°pæŒ‡å‘çš„å…ƒç´ ä¹‹å‰ï¼›å¦‚æœilæ˜¯ç©ºï¼Œåˆ™è¿”å›p å› ä¸ºè¿™äº›æ“ä½œä¼šæ”¹å˜å¤§å°ï¼Œå› æ­¤ä¸é€‚ç”¨äºarrayã€‚\nforward_listæœ‰è‡ªå·±ä¸“æœ‰ç‰ˆæœ¬çš„insertå’Œemplaceã€‚\nforward_listä¸æ”¯æŒpush_backå’Œemplace_backã€‚\nvector å’Œ string ä¸æ”¯æŒ push_front å’Œ emplace_front\nå½“æˆ‘ä»¬ç”¨ä¸€ä¸ªå¯¹è±¡å»åˆå§‹åŒ–å®¹å™¨æˆ–è€…å°†å¯¹è±¡æ’å…¥åˆ°å®¹å™¨æ—¶ï¼Œå®é™…ä¸Šæ”¾å…¥çš„æ˜¯å¯¹è±¡çš„æ‹·è´ã€‚\nemplaceå¼€å¤´çš„å‡½æ•°æ˜¯æ–°æ ‡å‡†å¼•å…¥çš„ï¼Œè¿™äº›æ“ä½œæ˜¯æ„é€ è€Œä¸æ˜¯æ‹·è´å…ƒç´ ã€‚å°†å‚æ•°ä¼ é€’ç»™å…ƒç´ ç±»å‹çš„æ„é€ å‡½æ•°ã€‚emplaceæˆå‘˜ä½¿ç”¨è¿™äº›å‚æ•°åœ¨å®¹å™¨ç®¡ç†çš„å†…å­˜ç©ºé—´ä¸­ç›´æ¥æ„é€ å…ƒç´ \n1 c.emplace_back(\u0026#34;978-0590353403 \u0026#34;, 25, 15.99); ä¼ é€’ç»™emplaceçš„å‚æ•°å¿…é¡»å’Œå…ƒç´ ç±»å‹çš„æ„é€ å‡½æ•°ç›¸åŒ¹é…ã€‚ 2.2 è®¿é—®å…ƒç´  æ“ä½œ è§£é‡Š c.back() è¿”å›cä¸­å°¾å…ƒç´ çš„å¼•ç”¨ã€‚è‹¥cä¸ºç©ºï¼Œå‡½æ•°è¡Œä¸ºæœªå®šä¹‰ c.front() è¿”å›cä¸­å¤´å…ƒç´ çš„å¼•ç”¨ã€‚è‹¥cä¸ºç©ºï¼Œå‡½æ•°è¡Œä¸ºæœªå®šä¹‰ c[n] è¿”å›cä¸­ä¸‹æ ‡æ˜¯nçš„å…ƒç´ çš„å¼•ç”¨ï¼Œnæ—¶å€™ä¸€ä¸ªæ— ç¬¦å·è¯ä¹¦ã€‚è‹¥n\u0026gt;=c.size()ï¼Œåˆ™å‡½æ•°è¡Œä¸ºæœªå®šä¹‰ c.at(n) è¿”å›ä¸‹æ ‡ä¸ºnçš„å…ƒç´ å¼•ç”¨ã€‚å¦‚æœä¸‹æ ‡è¶Šç•Œï¼Œåˆ™æŠ›å‡ºout_of_rangeå¼‚å¸¸ è®¿é—®æˆå‘˜å‡½æ•°è¿”å›çš„æ˜¯å¼•ç”¨ã€‚ atå’Œä¸‹æ ‡æ“ä½œåªé€‚ç”¨äºstringã€vectorã€dequeã€arrayã€‚ backä¸é€‚ç”¨äºforward_listã€‚ å¦‚æœå¸Œæœ›ä¸‹æ ‡æ˜¯åˆæ³•çš„ï¼Œå¯ä»¥ä½¿ç”¨atå‡½æ•°ã€‚ 2.3 åˆ é™¤å…ƒç´  æ“ä½œ è§£é‡Š c.pop_back() åˆ é™¤cä¸­å°¾å…ƒç´ ï¼Œè‹¥cä¸ºç©ºï¼Œåˆ™å‡½æ•°è¡Œä¸ºæœªå®šä¹‰ã€‚å‡½æ•°è¿”å›void c.pop_front() åˆ é™¤cä¸­é¦–å…ƒç´ ï¼Œè‹¥cä¸ºç©ºï¼Œåˆ™å‡½æ•°è¡Œä¸ºæœªå®šä¹‰ã€‚å‡½æ•°è¿”å›void c.erase(p) åˆ é™¤è¿­ä»£å™¨pæŒ‡å‘çš„å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¢«åˆ é™¤å…ƒç´ ä¹‹åçš„å…ƒç´ çš„è¿­ä»£å™¨ï¼Œè‹¥pæœ¬èº«æ˜¯å°¾åè¿­ä»£å™¨ï¼Œåˆ™å‡½æ•°è¡Œä¸ºæœªå®šä¹‰ c.erase(b, e) åˆ é™¤è¿­ä»£å™¨bå’ŒeèŒƒå›´å†…çš„å…ƒç´ ï¼Œè¿”å›æŒ‡å‘æœ€åä¸€ä¸ªè¢«åˆ å…ƒç´ ä¹‹åå…ƒç´ çš„è¿­ä»£å™¨ï¼Œè‹¥eæœ¬èº«å°±æ˜¯å°¾åè¿­ä»£å™¨ï¼Œåˆ™è¿”å›å°¾åè¿­ä»£å™¨ c.clear() åˆ é™¤cä¸­æ‰€æœ‰å…ƒç´ ï¼Œè¿”å›void ä¼šæ”¹å˜å®¹å™¨å¤§å°ï¼Œä¸é€‚ç”¨äºarrayã€‚ forward_listæœ‰ç‰¹æ®Šç‰ˆæœ¬çš„erase forward_listä¸æ”¯æŒpop_back vectorå’Œstringä¸æ”¯æŒpop_front 2.4 ç‰¹æ®Šçš„forward_listæ“ä½œ é“¾è¡¨åœ¨åˆ é™¤å…ƒç´ æ—¶éœ€è¦ä¿®æ”¹å‰ç½®èŠ‚ç‚¹çš„å†…å®¹ï¼ŒåŒå‘é“¾è¡¨ä¼šå‰é©±çš„æŒ‡é’ˆï¼Œä½†æ˜¯å•å‘é“¾è¡¨æ²¡æœ‰ä¿å­˜ï¼Œå› æ­¤éœ€è¦å¢åŠ è·å–å‰ç½®èŠ‚ç‚¹çš„æ–¹æ³•ã€‚ forward_listå®šä¹‰äº†before_beginï¼Œå³é¦–å‰ï¼ˆoff-the-beginingï¼‰è¿­ä»£å™¨ï¼Œå…è®¸æˆ‘ä»¬å†åœ¨é¦–å…ƒç´ ä¹‹å‰æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚ æ“ä½œ è§£é‡Š lst.before_begin() è¿”å›æŒ‡å‘é“¾è¡¨é¦–å…ƒç´ ä¹‹å‰ä¸å­˜åœ¨çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼Œæ­¤è¿­ä»£å™¨ä¸èƒ½è§£å¼•ç”¨ã€‚ lst.cbefore_begin() åŒä¸Šï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å¸¸é‡è¿­ä»£å™¨ã€‚ lst.insert_after(p, t) åœ¨è¿­ä»£å™¨pä¹‹åæ’å…¥å…ƒç´ ã€‚tæ˜¯ä¸€ä¸ªå¯¹è±¡ lst.insert_after(p, n, t) åœ¨è¿­ä»£å™¨pä¹‹åæ’å…¥å…ƒç´ ã€‚tæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œnæ˜¯æ•°é‡ã€‚è‹¥næ˜¯0åˆ™å‡½æ•°è¡Œä¸ºæœªå®šä¹‰ lst.insert_after(p, b, e) åœ¨è¿­ä»£å™¨pä¹‹åæ’å…¥å…ƒç´ ã€‚ç”±è¿­ä»£å™¨bå’ŒeæŒ‡å®šèŒƒå›´ã€‚ lst.insert_after(p, il) åœ¨è¿­ä»£å™¨pä¹‹åæ’å…¥å…ƒç´ ã€‚ç”±ilæŒ‡å®šåˆå§‹åŒ–åˆ—è¡¨ã€‚ emplace_after(p, args) ä½¿ç”¨argsåœ¨pä¹‹åçš„ä½ç½®ï¼Œåˆ›å»ºä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªæ–°å…ƒç´ çš„è¿­ä»£å™¨ã€‚è‹¥pä¸ºå°¾åè¿­ä»£å™¨ï¼Œåˆ™å‡½æ•°è¡Œä¸ºæœªå®šä¹‰ã€‚ lst.erase_after(p) åˆ é™¤pæŒ‡å‘ä½ç½®ä¹‹åçš„å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¢«åˆ å…ƒç´ ä¹‹åçš„å…ƒç´ çš„è¿­ä»£å™¨ï¼Œè‹¥pæŒ‡å‘lstçš„å°¾å…ƒç´ æˆ–è€…æ˜¯ä¸€ä¸ªå°¾åè¿­ä»£å™¨ï¼Œåˆ™å‡½æ•°è¡Œä¸ºæœªå®šä¹‰ã€‚ lst.erase_after(b, e) ç±»ä¼¼ä¸Šé¢ï¼Œåˆ é™¤å¯¹è±¡æ¢æˆä»båˆ°eæŒ‡å®šçš„èŒƒå›´ã€‚ 2.5 æ”¹å˜å®¹å™¨çš„å¤§å° æ“ä½œ è§£é‡Š c.resize(n) è°ƒæ•´cçš„å¤§å°ä¸ºnä¸ªå…ƒç´ ï¼Œè‹¥n\u0026lt;c.size()ï¼Œåˆ™å¤šå‡ºçš„å…ƒç´ è¢«ä¸¢å¼ƒã€‚è‹¥å¿…é¡»æ·»åŠ æ–°å…ƒç´ ï¼Œå¯¹æ–°å…ƒç´ è¿›è¡Œå€¼åˆå§‹åŒ– c.resize(n, t) è°ƒæ•´cçš„å¤§å°ä¸ºnä¸ªå…ƒç´ ï¼Œä»»ä½•æ–°æ·»åŠ çš„å…ƒç´ éƒ½åˆå§‹åŒ–ä¸ºå€¼t resizeä¸é€‚ç”¨ä¸array 3ã€å®¹å™¨æ“ä½œå¯èƒ½ä½¿è¿­ä»£å™¨å¤±æ•ˆ åœ¨å‘å®¹å™¨æ·»åŠ å…ƒç´ åï¼š å¦‚æœå®¹å™¨æ˜¯vectoræˆ–stringï¼Œä¸”å­˜å‚¨ç©ºé—´è¢«é‡æ–°åˆ†é…ï¼Œåˆ™æŒ‡å‘å®¹å™¨çš„è¿­ä»£å™¨ã€æŒ‡é’ˆã€å¼•ç”¨éƒ½ä¼šå¤±æ•ˆã€‚ å¯¹äºdequeï¼Œæ’å…¥åˆ°é™¤é¦–å°¾ä½ç½®ä¹‹å¤–çš„ä»»ä½•ä½ç½®éƒ½ä¼šå¯¼è‡´æŒ‡å‘å®¹å™¨çš„è¿­ä»£å™¨ã€æŒ‡é’ˆã€å¼•ç”¨å¤±æ•ˆã€‚å¦‚æœåœ¨é¦–å°¾ä½ç½®æ·»åŠ å…ƒç´ ï¼Œè¿­ä»£å™¨ä¼šå¤±æ•ˆï¼Œä½†æŒ‡å‘å­˜åœ¨å…ƒç´ çš„å¼•ç”¨å’ŒæŒ‡é’ˆä¸ä¼šå¤±æ•ˆã€‚ å¯¹äºlistå’Œforward_listï¼ŒæŒ‡å‘å®¹å™¨çš„è¿­ä»£å™¨ã€æŒ‡é’ˆå’Œå¼•ç”¨ä¾ç„¶æœ‰æ•ˆã€‚ åœ¨ä»ä¸€ä¸ªå®¹å™¨ä¸­åˆ é™¤å…ƒç´ åï¼š å¯¹äºlistå’Œforward_listï¼ŒæŒ‡å‘å®¹å™¨å…¶ä»–ä½ç½®çš„è¿­ä»£å™¨ã€å¼•ç”¨å’ŒæŒ‡é’ˆä»ç„¶æœ‰æ•ˆã€‚ å¯¹äºdequeï¼Œå¦‚æœåœ¨é¦–å°¾ä¹‹å¤–çš„ä»»ä½•ä½ç½®åˆ é™¤å…ƒç´ ï¼Œé‚£ä¹ˆæŒ‡å‘è¢«åˆ é™¤å…ƒç´ å¤–å…¶ä»–å…ƒç´ çš„è¿­ä»£å™¨ã€æŒ‡é’ˆã€å¼•ç”¨éƒ½ä¼šå¤±æ•ˆï¼›å¦‚æœæ˜¯åˆ é™¤dequeçš„å°¾å…ƒç´ ï¼Œåˆ™å°¾åè¿­ä»£å™¨ä¼šå¤±æ•ˆï¼Œä½†å…¶ä»–ä¸å—å½±å“ï¼›å¦‚æœåˆ é™¤çš„æ˜¯dequeçš„å¤´å…ƒç´ ï¼Œè¿™äº›ä¹Ÿä¸ä¼šå—å½±å“ã€‚ å¯¹äºvectorå’Œstringï¼ŒæŒ‡å‘è¢«åˆ å…ƒç´ ä¹‹å‰çš„è¿­ä»£å™¨ã€å¼•ç”¨ã€æŒ‡é’ˆä»ç„¶æœ‰æ•ˆã€‚ æ³¨æ„ï¼šå½“æˆ‘ä»¬åˆ é™¤å…ƒç´ æ—¶ï¼Œå°¾åè¿­ä»£å™¨æ€»æ˜¯ä¼šå¤±æ•ˆã€‚ æ³¨æ„ï¼šä½¿ç”¨å¤±æ•ˆçš„è¿­ä»£å™¨ã€æŒ‡é’ˆã€å¼•ç”¨æ˜¯ä¸¥é‡çš„è¿è¡Œæ—¶é”™è¯¯ï¼ å»ºè®®ï¼šå°†è¦æ±‚è¿­ä»£å™¨å¿…é¡»ä¿æŒæœ‰æ•ˆçš„ç¨‹åºç‰‡æ®µæœ€å°åŒ–ã€‚ å»ºè®®ï¼šä¸è¦ä¿å­˜endè¿”å›çš„è¿­ä»£å™¨ã€‚ 4ã€array 4.1 array å®šä¹‰ ä¸å†…ç½®æ•°ç»„ä¸€æ ·ï¼Œæ ‡å‡†åº“arrayçš„å¤§å°ä¹Ÿæ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚å½“å®šä¹‰ä¸€ä¸ªarrayæ—¶ï¼Œ é™¤äº†æŒ‡å®šå…ƒç´ ç±»å‹ï¼Œè¿˜è¦æŒ‡å®šå®¹å™¨å¤§å°\n1 2 3 4 5 6 array\u0026lt;int , 42\u0026gt; array\u0026lt;string, 10\u0026gt; //é€šè¿‡ç±»å‹åˆ«åè·å¾—å…ƒç´ ç±»å‹ array\u0026lt;int ,10\u0026gt;::size_type i ; array\u0026lt;int\u0026gt;::size_type j ; //wrong 4.2 array åˆå§‹åŒ– 4.2.1 é»˜è®¤åˆå§‹åŒ– arrayé»˜è®¤åˆå§‹åŒ–åŒ…å«å’Œå®šä¹‰ä¸­ä¸€æ ·å¤šçš„å…ƒç´ ï¼Œå…ƒç´ çš„å€¼éƒ½è¢«é»˜è®¤åˆå§‹åŒ–ï¼Œè€Œéç©ºï¼Œè¿™ä¸€ç‚¹ä¸å…¶ä»–é¡ºåºå®¹å™¨ä¸åŒ\n4.2.2 åˆ—è¡¨åˆå§‹åŒ– å¦‚æœæˆ‘ä»¬å¯¹arrayè¿›è¡Œåˆ—è¡¨åˆå§‹åŒ–ï¼Œåˆå§‹å€¼çš„æ•°ç›®å¿…é¡»ç­‰äºæˆ–å°äºarrayçš„å¤§å° å¦‚æœå…ƒç´ ç±»å‹æ˜¯ç±»ç±»å‹ï¼Œé‚£ä¹ˆå°±ä¸€å®šè¦æœ‰å¯ä»¥å€¼åˆå§‹åŒ–çš„æ„é€ å‡½æ•°\n4.3 arrayçš„æ‹·è´ä¸å¯¹è±¡èµ‹å€¼ arrayä¸åŒäºå†…ç½®æ•°ç»„ç±»å‹ï¼Œå¯ä»¥æ‹·è´æˆ–å¯¹è±¡èµ‹å€¼\n1 2 3 4 int digs[10] = {0,1,2,3,4,5,6,7,8,9}; int cpy[10] = digs; //é”™è¯¯ï¼Œå†…ç½®æ•°ç»„ä¸èƒ½æ‹·è´å’Œèµ‹å€¼ array\u0026lt;int, 10\u0026gt; digits = {0,1,2,3,4,5,6,7,8,91}; array\u0026lt;int, 10\u0026gt; copy = digits; // æ­£ç¡®: åªè¦æ•°ç»„ç±»å‹åŒ¹é…å³åˆæ³• ä¸¤ä¸ªé™åˆ¶ï¼š1.åˆå§‹å€¼ç±»å‹ä¸€è‡´ ï¼› 2.å¤§å°å¿…é¡»ä¸€æ ·\nä¸‰ã€vectorå¯¹è±¡æ˜¯å¦‚ä½•å¢é•¿çš„ vectorå’Œstringåœ¨å†…å­˜ä¸­æ˜¯è¿ç»­ä¿å­˜çš„ï¼Œå¦‚æœåŸå…ˆåˆ†é…çš„å†…å­˜ä½ç½®å·²ç»ä½¿ç”¨å®Œï¼Œåˆ™éœ€è¦é‡æ–°åˆ†é…æ–°ç©ºé—´ï¼Œå°†å·²æœ‰å…ƒç´ ä»å°±ä½ç½®ç§»åŠ¨åˆ°æ–°ç©ºé—´ä¸­ï¼Œç„¶åæ·»åŠ æ–°å…ƒç´ ã€‚\nvectoræ˜¯å¦‚ä½•æ‰©å®¹çš„ å½“ä¸å¾—ä¸è·å–æ–°çš„å†…å­˜ç©ºé—´æ—¶ï¼Œvectorå’Œ stringçš„å®ç°é€šå¸¸ä¼šåˆ†é…æ¯”æ–°çš„ç©ºé—´éœ€æ±‚æ›´å¤§ çš„å†…å­˜ç©ºé—´ã€‚å®¹å™¨é¢„ç•™è¿™äº›ç©ºé—´ä½œä¸ºå¤‡ç”¨ï¼Œå¯ç”¨æ¥ä¿å­˜æ›´å¤šçš„æ–°å…ƒç´ ã€‚è¿™æ ·ï¼Œå°±ä¸éœ€è¦æ¯æ¬¡æ·»åŠ æ–°å…ƒç´ éƒ½é‡æ–°åˆ†é…å®¹å™¨çš„å†…å­˜ç©ºé—´äº†ã€‚\nç®¡ç†å®¹é‡çš„æˆå‘˜å‡½æ•° vectorå’Œ stringç±»å‹æä¾›äº†ä¸€äº›æˆå‘˜å‡½æ•°ï¼Œå…è®¸æˆ‘ä»¬ä¸å®ƒçš„å®ç°ä¸­å†…å­˜åˆ†é…éƒ¨åˆ†äº’åŠ¨\næ“ä½œ è§£é‡Š c.shrink_to_fit() å°†capacity()å‡å°‘åˆ°å’Œsize()ç›¸åŒå¤§å° c.capacity() ä¸é‡æ–°åˆ†é…å†…å­˜ç©ºé—´çš„è¯ï¼Œcå¯ä»¥ä¿å­˜å¤šå°‘ä¸ªå…ƒç´  c.reverse(n) åˆ†é…è‡³å°‘èƒ½å®¹çº³nä¸ªå…ƒç´ çš„å†…å­˜ç©ºé—´ shrink_to_fitåªé€‚ç”¨äºvectorã€stringå’Œdeque capacityå’Œreverseåªé€‚ç”¨äºvectorå’Œstringã€‚ 1 2 3 4 ivec.reserve (50) ; // å°† capacityè‡³å°‘è®¾å®šä¸º50,å¯èƒ½ä¼šæ›´å¤§ //sizeåº”è¯¥ä¸º24; capacityåº”è¯¥å¤§äºç­‰äº50,å…·ä½“å€¼ä¾èµ–äºæ ‡å‡†åº“å®ç° cout\u0026lt;\u0026lt;\u0026#34;ivec: size: \u0026#34;\u0026lt;\u0026lt;ivec.size() \u0026lt;\u0026lt; \u0026#34;capacity: \u0026#34; \u0026lt;\u0026lt; ivec.capacity() \u0026lt;\u0026lt; endl; æ€»ç»“ä¸€å“ˆ åªè¦sizeä¸è¶…è¿‡capacityå°±ä¸é‡æ–°åˆ†é…ï¼Œreserveå¯ä»¥è¦æ±‚æ¯æ¬¡æ‰©å®¹ï¼Œä¸å°‘äºreserveçš„å®å‚ï¼Œä½†æ˜¯å¦‚æœå®å‚ä¹Ÿæ»¡è¶³ä¸äº†ï¼Œå°±ä¼šè¶…è¿‡è¿™ä¸ªå€¼ï¼Œshrink_to_fitåªæ˜¯ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶éä¸€å®šä¼šæ‰§è¡Œ\nå››ã€é¢å¤–çš„stringæ“ä½œ stringæ“ä½œ\n1ã€æ„é€ stringçš„å…¶ä»–æ–¹æ³• ^5f2418\næ“ä½œ è§£é‡Š string s(cp, n) sæ˜¯cpæŒ‡å‘çš„æ•°ç»„ä¸­å‰nä¸ªå­—ç¬¦çš„æ‹·è´ï¼Œæ­¤æ•°ç»„ string s(s2, pos2) sæ˜¯string s2ä»ä¸‹æ ‡pos2å¼€å§‹çš„å­—ç¬¦çš„æ‹·è´ã€‚è‹¥pos2 \u0026gt; s2.size()ï¼Œåˆ™æ„é€ å‡½æ•°çš„è¡Œä¸ºæœªå®šä¹‰ã€‚ string s(s2, pos2, len2) sæ˜¯string s2ä»ä¸‹æ ‡pos2å¼€å§‹çš„len2ä¸ªå­—ç¬¦çš„æ‹·è´ã€‚ n,len2,pos2éƒ½æ˜¯æ— ç¬¦å·å€¼ è¿™äº›æ„é€ å‡½æ•°æ¥å—const char* å’Œstringå‚æ•° , å½“ä»const char *åˆ›å»ºstringæ—¶,è¿™æ ·çš„æ•°ç»„å¿…é¡»ä»¥ç©ºå­—ç¬¦ç»“å°¾æ‹·è´ï¼Œæ“ä½œé‡åˆ°ç©ºå­—ç¬¦æ—¶åœæ­¢ï¼Œå¦‚æœæˆ‘ä»¬è¿˜ç»™æ„é€ å‡½æ•°ä¸€ä¸ªè®¡æ•°å€¼ï¼Œæ•°ç»„å°±ä¸å¿…ä»¥ç©ºå­—ç¬¦ç»“å°¾ã€‚ substræ“ä½œ\næ“ä½œ è§£é‡Š s.substr(pos, n) è¿”å›ä¸€ä¸ªstringï¼ŒåŒ…å«sä¸­ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦çš„æ‹·è´ã€‚posçš„é»˜è®¤å€¼æ˜¯0ï¼Œnçš„é»˜è®¤å€¼æ˜¯s.size() - posï¼Œå³æ‹·è´ä»poså¼€å§‹çš„æ‰€æœ‰å­—ç¬¦ã€‚ 2ã€æ”¹å˜stringçš„å…¶ä»–æ–¹æ³• æ“ä½œ è§£é‡Š s.insert(pos, args) åœ¨posä¹‹å‰æ’å…¥argsæŒ‡å®šçš„å­—ç¬¦ã€‚poså¯ä»¥ä½¿æ˜¯ä¸‹æ ‡æˆ–è€…è¿­ä»£å™¨ã€‚æ¥å—ä¸‹æ ‡çš„ç‰ˆæœ¬è¿”å›æŒ‡å‘sçš„å¼•ç”¨ï¼›æ¥å—è¿­ä»£å™¨çš„ç‰ˆæœ¬è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªæ’å…¥å­—ç¬¦çš„è¿­ä»£å™¨ã€‚ s.erase(pos, len) åˆ é™¤ä»poså¼€å§‹çš„lenä¸ªå­—ç¬¦ï¼Œå¦‚æœlenè¢«çœç•¥ï¼Œåˆ™åˆ é™¤åé¢æ‰€æœ‰å­—ç¬¦ï¼Œè¿”å›æŒ‡å‘sçš„å¼•ç”¨ã€‚ s.assign(args) å°†sä¸­çš„å­—ç¬¦æ›¿æ¢æˆargsæŒ‡å®šçš„å­—ç¬¦ã€‚è¿”å›ä¸€ä¸ªæŒ‡å‘sçš„å¼•ç”¨ã€‚ s.append(args) å°†argsæŒ‡å®šçš„å­—ç¬¦è¿½åŠ åˆ°sï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘sçš„å¼•ç”¨ã€‚ s.replace(range, args) åˆ é™¤sä¸­èŒƒå›´rangeä¸­çš„å­—ç¬¦ï¼Œæ›¿æ¢æˆargsæŒ‡å®šçš„å­—ç¬¦ã€‚è¿”å›ä¸€ä¸ªæŒ‡å‘sçš„å¼•ç”¨ã€‚ 3ã€stringæœç´¢æ“ä½œ stringç±»æä¾›äº†6ä¸ªä¸åŒçš„æœç´¢å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰4ä¸ªé‡è½½ç‰ˆæœ¬ã€‚ æ¯ä¸ªæœç´¢æ“ä½œéƒ½è¿”å›ä¸€ä¸ªstring::size_typeå€¼ï¼Œè¡¨ç¤ºåŒ¹é…å‘ç”Ÿä½ç½®çš„ä¸‹æ ‡ã€‚å¦‚æœæœç´¢å¤±è´¥åˆ™è¿”å›ä¸€ä¸ªåä¸ºstring::nposçš„staticæˆå‘˜ï¼ˆç±»å‹æ˜¯string::size_typeï¼Œåˆå§‹åŒ–å€¼æ˜¯-1ï¼Œä¹Ÿå°±æ˜¯stringæœ€å¤§çš„å¯èƒ½å¤§å°ï¼‰ã€‚ æœç´¢æ“ä½œ è§£é‡Š s.find(args) æŸ¥æ‰¾sä¸­argsç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½® s.rfind(args) æŸ¥æ‰¾sä¸­argsæœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½® s.find_first_of(args) åœ¨sä¸­æŸ¥æ‰¾argsä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½® s.find_last_of(args) åœ¨sä¸­æŸ¥æ‰¾argsä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½® s.find_first_not_of(args) åœ¨sä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸åœ¨argsä¸­çš„å­—ç¬¦ s.find_first_not_of(args) åœ¨sä¸­æŸ¥æ‰¾æœ€åä¸€ä¸ªä¸åœ¨argsä¸­çš„å­—ç¬¦ argså¿…é¡»æ˜¯ä¸€ä¸‹çš„å½¢å¼ä¹‹ä¸€ï¼š\nargså½¢å¼ è§£é‡Š c, pos ä»sä¸­ä½ç½®poså¼€å§‹æŸ¥æ‰¾å­—ç¬¦cã€‚posé»˜è®¤æ˜¯0 s2, pos ä»sä¸­ä½ç½®poså¼€å§‹æŸ¥æ‰¾å­—ç¬¦ä¸²sã€‚posé»˜è®¤æ˜¯0 cp, pos ä»sä¸­ä½ç½®poså¼€å§‹æŸ¥æ‰¾æŒ‡é’ˆcpæŒ‡å‘çš„ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„Cé£æ ¼å­—ç¬¦ä¸²ã€‚posé»˜è®¤æ˜¯0 cp, pos, n ä»sä¸­ä½ç½®poså¼€å§‹æŸ¥æ‰¾æŒ‡é’ˆcpæŒ‡å‘çš„å‰nä¸ªå­—ç¬¦ã€‚poså’Œnæ— é»˜è®¤å€¼ã€‚ 4ã€compareå‡½æ•° é€»è¾‘ç±»ä¼¼äºCæ ‡å‡†åº“çš„strcmpå‡½æ•°ï¼Œæ ¹æ®sæ˜¯ç­‰äºã€å¤§äºè¿˜æ˜¯å°äºå‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œs.compareè¿”å›0ã€æ­£æ•°æˆ–è´Ÿæ•°ã€‚\ns.compare()çš„å‡ ç§å‚æ•°å½¢å¼\nå‚æ•°å½¢å¼ è§£é‡Š s2 æ¯”è¾ƒså’Œs2 pos1, n1, s2 æ¯”è¾ƒsä»pos1å¼€å§‹çš„n1ä¸ªå­—ç¬¦å’Œs2 pos1, n1, s2, pos2, n2 æ¯”è¾ƒsä»pos1å¼€å§‹çš„n1ä¸ªå­—ç¬¦å’Œs2 cp æ¯”è¾ƒså’ŒcpæŒ‡å‘çš„ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„å­—ç¬¦æ•°ç»„ pos1, n1, cp æ¯”è¾ƒsä»pos1å¼€å§‹çš„n1ä¸ªå­—ç¬¦å’ŒcpæŒ‡å‘çš„ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„å­—ç¬¦æ•°ç»„ pos1, n1, cp, n2 æ¯”è¾ƒsä»pos1å¼€å§‹çš„n1ä¸ªå­—ç¬¦å’ŒcpæŒ‡å‘çš„åœ°å€å¼€å§‹n2ä¸ªå­—ç¬¦ 5ã€stringå’Œæ•°å€¼è½¬æ¢ è½¬æ¢ è§£é‡Š to_string(val) ä¸€ç»„é‡è½½å‡½æ•°ï¼Œè¿”å›æ•°å€¼valçš„stringè¡¨ç¤ºã€‚valå¯ä»¥ä½¿ä»»ä½•ç®—æœ¯ç±»å‹ã€‚å¯¹æ¯ä¸ªæµ®ç‚¹ç±»å‹å’Œintæˆ–æ›´å¤§çš„æ•´å‹ï¼Œéƒ½æœ‰ç›¸åº”ç‰ˆæœ¬çš„to_string()ã€‚å’Œå¾€å¸¸ä¸€æ ·ï¼Œå°æ•´å‹ä¼šè¢«æå‡ã€‚ stoi(s, p, b) è¿”å›sèµ·å§‹å­ä¸²ï¼ˆè¡¨ç¤ºæ•´æ•°å†…å®¹ï¼‰çš„æ•°å€¼ï¼Œpæ˜¯sä¸­ç¬¬ä¸€ä¸ªéæ•°å€¼å­—ç¬¦çš„ä¸‹æ ‡ï¼Œé»˜è®¤æ˜¯0ï¼Œbæ˜¯è½¬æ¢æ‰€ç”¨çš„åŸºæ•°ã€‚è¿”å›int stol(s, p, b) è¿”å›long stoul(s, p, b) è¿”å›unsigned long stoll(s, p, b) è¿”å›long long stoull(s, p, b) è¿”å›unsigned long long stof(s, p) è¿”å›sèµ·å§‹å­ä¸²ï¼ˆè¡¨ç¤ºæµ®ç‚¹æ•°å†…å®¹ï¼‰çš„æ•°å€¼ï¼Œpæ˜¯sä¸­ç¬¬ä¸€ä¸ªéæ•°å€¼å­—ç¬¦çš„ä¸‹æ ‡ï¼Œé»˜è®¤æ˜¯0ã€‚è¿”å›float stod(s, p) è¿”å›double stold(s, p) è¿”å›long double äº”ã€å®¹å™¨é€‚é…å™¨ï¼ˆadapterï¼‰ 1ã€ä»€ä¹ˆæ˜¯é€‚é…å™¨ C++ ä¸­çš„é€‚é…å™¨æ˜¯æŒ‡ä¸€ç§å¯¹æ ‡å‡†åº“å®¹å™¨æˆ–å…¶ä»–æ•°æ®ç»“æ„è¿›è¡ŒåŒ…è£…æˆ–ä¿®é¥°çš„ç»“æ„ï¼Œä»¥æä¾›ä¸åŒçš„æ¥å£æˆ–è¡Œä¸ºã€‚é€‚é…å™¨åœ¨ C++ ä¸­è¢«å¹¿æ³›ç”¨äºå®¹å™¨åº“ä¸­ï¼Œå¯ä»¥ç®€åŒ–ç¨‹åºä»£ç ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ C++ æ ‡å‡†åº“æä¾›äº†ä»¥ä¸‹å‡ ç§é€‚é…å™¨ï¼š\nstd::stackï¼šä½¿ç”¨åº•å±‚å®¹å™¨ä½œä¸ºæ ˆï¼Œæä¾›äº†ä¸€ä¸ªé¡¶éƒ¨çš„å…ƒç´ è®¿é—®æ¥å£ï¼Œæ”¯æŒ push å’Œ pop æ“ä½œã€‚ std::queueï¼šä½¿ç”¨åº•å±‚å®¹å™¨ä½œä¸ºé˜Ÿåˆ—ï¼Œæä¾›äº†ä¸€ä¸ªé˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ è®¿é—®æ¥å£ï¼Œæ”¯æŒå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œã€‚ std::priority_queueï¼šä½¿ç”¨åº•å±‚å®¹å™¨ä½œä¸ºä¼˜å…ˆé˜Ÿåˆ—ï¼Œæä¾›äº†ä¸€ä¸ªä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ è®¿é—®æ¥å£ï¼Œæ”¯æŒå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œã€‚ 2ã€é€‚é…å™¨çš„é€šç”¨æ“ä½œå’Œç±»å‹ æ“ä½œ è§£é‡Š size_type ä¸€ç§ç±»å‹ï¼Œé¡»ä»¥ä¿å­˜å½“å‰ç±»å‹çš„æœ€å¤§å¯¹è±¡çš„å¤§å° value_type å…ƒç´ ç±»å‹ container_type å®ç°é€‚é…å™¨çš„åº•å±‚å®¹å™¨ç±»å‹ A a; åˆ›å»ºä¸€ä¸ªåä¸ºaçš„ç©ºé€‚é…å™¨ A a(c) åˆ›å»ºä¸€ä¸ªåä¸ºaçš„é€‚é…å™¨ï¼Œå¸¦æœ‰å®¹å™¨cçš„ä¸€ä¸ªæ‹·è´ å…³ç³»è¿ç®—ç¬¦ æ¯ä¸ªé€‚é…å™¨éƒ½æ”¯æŒæ‰€æœ‰å…³ç³»è¿ç®—ç¬¦ï¼š==ã€!=ã€\u0026lt;ã€ \u0026lt;=ã€\u0026gt;ã€\u0026gt;=è¿™äº›è¿ç®—ç¬¦è¿”å›åº•å±‚å®¹å™¨çš„æ¯”è¾ƒç»“æœ a.empty() è‹¥aåŒ…å«ä»»ä½•å…ƒç´ ï¼Œè¿”å›false;å¦åˆ™è¿”å›true a.size() è¿”å›aä¸­çš„å…ƒç´ æ•°ç›® swap(a, b) äº¤æ¢aå’Œbçš„å†…å®¹ï¼Œaå’Œbå¿…é¡»æœ‰ç›¸åŒç±»å‹ï¼ŒåŒ…æ‹¬åº•å±‚å®¹å™¨ç±»å‹ä¹Ÿå¿…é¡»ç›¸åŒ a.swap(b) åŒä¸Š å¯ä»¥ä½¿ç”¨é€‚é…å™¨æ“ä½œï¼Œè€Œä¸èƒ½ä½¿ç”¨åº•å±‚å®¹å™¨ç±»å‹çš„æ“ä½œã€‚ 3ã€å®šä¹‰ä¸€ä¸ªé€‚é…å™¨ stackå’Œqueueæ˜¯åŸºäºdequeå®ç°çš„ï¼Œpriority_queueæ˜¯åœ¨vectorä¹‹ä¸Šå®ç°çš„ï¼Œå¯ä»¥åœ¨åˆ›å»ºä¸€ä¸ªé€‚é…å™¨æ—¶å°†ä¸€ä¸ªå‘½åçš„é¡ºåºå®¹å™¨ä½œä¸ºç¬¬äºŒä¸ªç±»å‹å‚æ•°ï¼Œæ¥é‡è½½é»˜è®¤å®¹å™¨ç±»å‹\n1 2 3 4 // åœ¨ vector _hå®ç°çš„ç©ºæ ˆ stack\u0026lt;string, vector\u0026lt;string\u0026gt;\u0026gt; str_stk; // str_stk2åœ¨vectorä¸Šå®ç°ï¼Œåˆå§‹åŒ–æ—¶ä¿å­˜svecçš„æ‹·è´ stack\u0026lt;string, vector\u0026lt;string\u0026gt;str_stk2(svec); æ¯ä¸ªé€‚é…å™¨éƒ½å®šä¹‰ä¸¤ä¸ªæ„é€ å‡½æ•° 1.é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡\n1 stack\u0026lt;int\u0026gt; s; 2.æ¥å—ä¸€ä¸ªå®¹å™¨çš„æ„é€ å‡½æ•°æ‹·è´è¯¥å®¹å™¨æ¥åˆå§‹åŒ–é€‚é…å™¨\n1 2 //å‡å®šdeqæ˜¯ä¸€ä¸ªdeque\u0026lt;int\u0026gt; stack\u0026lt;int\u0026gt; stk(deq); 4ã€stack æ“ä½œ è§£é‡Š s.pop() åˆ é™¤æ ˆé¡¶å…ƒç´ ï¼Œä¸è¿”å›ã€‚ s.push(item) åˆ›å»ºä¸€ä¸ªæ–°å…ƒç´ ï¼Œå‹å…¥æ ˆé¡¶ï¼Œè¯¥å…ƒç´ é€šè¿‡æ‹·è´æˆ–ç§»åŠ¨itemè€Œæ¥ s.emplace(args) åŒä¸Šï¼Œä½†å…ƒç´ ç”±argsæ¥æ„é€ ã€‚ s.top() è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œä¸åˆ é™¤ã€‚ å®šä¹‰åœ¨stackå¤´æ–‡ä»¶ä¸­ã€‚ stacké»˜è®¤åŸºäºdequeå®ç°ï¼Œä¹Ÿå¯ä»¥åœ¨listæˆ–vectorä¹‹ä¸Šå®ç°ã€‚ 5ã€queueå’Œpriority_queue æ“ä½œ è§£é‡Š q.pop() åˆ é™¤é˜Ÿé¦–å…ƒç´ ï¼Œä½†ä¸è¿”å›ã€‚ q.front() è¿”å›é˜Ÿé¦–å…ƒç´ çš„å€¼ï¼Œä¸åˆ é™¤ã€‚ q.back() è¿”å›é˜Ÿå°¾å…ƒç´ çš„å€¼ï¼Œä¸åˆ é™¤ã€‚åªé€‚ç”¨äºqueue q.top() è¿”å›å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ å€¼ï¼Œä¸åˆ é™¤ã€‚ q.push(item) åœ¨é˜Ÿå°¾å‹å…¥ä¸€ä¸ªæ–°å…ƒç´ ã€‚ q.emplace(args) å®šä¹‰åœ¨queueå¤´æ–‡ä»¶ä¸­ã€‚ queueé»˜è®¤åŸºäºdequeå®ç°ï¼Œpriority_queueé»˜è®¤åŸºäºvectorå®ç°ã€‚ queueå¯ä»¥åœ¨listæˆ–vectorä¹‹ä¸Šå®ç°ï¼Œpriority_queueä¹Ÿå¯ä»¥ç”¨dequeå®ç°ã€‚ ","pubDate":"2021-09-25","title":"ã€C++ Primer(edition 5) 08ã€‘é¡ºåºå®¹å™¨"},{"link":"https://cnjslw.github.io/posts/%E7%B1%BB/","plain":" ç±»èƒŒåçš„åŸºæœ¬æ€æƒ³ï¼šæ•°æ®æŠ½è±¡ï¼ˆdata abstractionï¼‰å’Œå°è£…ï¼ˆencapsulationï¼‰ã€‚ æ•°æ®æŠ½è±¡æ˜¯ä¸€ç§ä¾èµ–äºæ¥å£ï¼ˆinterfaceï¼‰å’Œå®ç°ï¼ˆimplementationï¼‰åˆ†ç¦»çš„ç¼–ç¨‹æŠ€æœ¯ã€‚ å°è£…å®ç°äº†ç±»çš„æ¥å£å’Œå®ç°çš„åˆ†ç¦» ä¸€ã€å®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹ 1 2 3 class CLASSNAME{ //ç±»æˆå‘˜ }; 1ã€ç±»æˆå‘˜ ï¼ˆMemberï¼‰ å¿…é¡»åœ¨ç±»çš„å†…éƒ¨å£°æ˜ï¼Œä¸èƒ½åœ¨å…¶ä»–åœ°æ–¹å¢åŠ æˆå‘˜ã€‚ æˆå‘˜å¯ä»¥æ˜¯æ•°æ®ï¼Œå‡½æ•°ï¼Œç±»å‹åˆ«åã€‚ ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ . è°ƒç”¨æˆå‘˜å‡½æ•° 1.1 ç±»çš„æˆå‘˜å‡½æ•° æˆå‘˜å‡½æ•°çš„å£°æ˜å¿…é¡»åœ¨ç±»çš„å†…éƒ¨ã€‚ æˆå‘˜å‡½æ•°çš„å®šä¹‰æ—¢å¯ä»¥åœ¨ç±»çš„å†…éƒ¨ä¹Ÿå¯ä»¥åœ¨å¤–éƒ¨ã€‚ 1 2 3 4 5 6 7 8 class ClassExample{ //... double avg_price() const; }; double ClassExample::avg_price() const{ //... } å¿…é¡»å¯¹ä»»ä½•constæˆ–å¼•ç”¨ç±»å‹æˆå‘˜ä»¥åŠæ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»ç±»å‹çš„ä»»ä½•æˆå‘˜ä½¿ç”¨åˆå§‹åŒ–å¼ã€‚\né»˜è®¤å®å‚ï¼š Sales_item(const std::string \u0026amp;book): isbn(book), units_sold(0), revenue(0.0) { } 1.2 éæˆå‘˜å‡½æ•° å’Œç±»ç›¸å…³çš„éæˆå‘˜å‡½æ•°ï¼Œå®šä¹‰å’Œå£°æ˜éƒ½åº”è¯¥åœ¨ç±»çš„å¤–éƒ¨ã€‚\n1.3 å¸¸æˆå‘˜ 1.3.1 å¸¸æˆå‘˜å‡½æ•° è‹¥å°†æˆå‘˜å‡½æ•°è®¾ç½®ä¸ºå¸¸æˆå‘˜å‡½æ•°ï¼Œåˆ™åªèƒ½å¼•ç”¨æœ¬ç±»ä¸­çš„æ•°æ®æˆå‘˜ï¼Œè€Œä¸èƒ½ä¿®æ”¹å®ƒï¼›å¸¸æˆå‘˜å‡½æ•°å¯ä»¥å¼•ç”¨constæ•°æ®æˆå‘˜ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨éconstçš„æ•°æ®æˆå‘˜ï¼›å¸¸æˆå‘˜å‡½æ•°çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼š\n1 ç±»å‹å å‡½æ•°å(å½¢å‚åˆ—è¡¨) const è¿™é‡Œçš„constå…³é”®å­—æ˜¯å‡½æ•°ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨å‡½æ•°å£°æ˜å’Œå‡½æ•°å®šä¹‰æ—¶éƒ½è¦å¸¦constå…³é”®å­—ï¼Œå¦åˆ™è¢«ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯ä¸åŒçš„ä¸¤ä¸ªå‡½æ•°ï¼Œä½†æ˜¯åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¸å¿…å¸¦constï¼›\n1 bool same_isbn(const Sales_item \u0026amp;rhs) const è¿™ç§å‡½æ•°ç§°ä¸ºâ€œå¸¸é‡æˆå‘˜å‡½æ•°â€ï¼ˆthisæŒ‡å‘çš„å½“å‰å¯¹è±¡æ˜¯å¸¸é‡ï¼‰ã€‚\nè¿™æ ·åšçš„å¥½å¤„æ˜¯\næ—¢å¯ä»¥å°†thisç»‘å®šåˆ°å¸¸é‡å¯¹è±¡ä¸Šï¼Œä¹Ÿå¯ä»¥ç»‘å®šåˆ°æ™®é€šå¯¹è±¡ä¸Šï¼ˆ[[å˜é‡å’ŒåŸºæœ¬ç±»å‹#3ã€æŒ‡é’ˆå’Œconst|æŒ‡é’ˆä¸constçš„ç‰¹æ®Šæ€§]]ï¼‰ï¼Œæé«˜äº†å‡½æ•°çš„çµæ´»æ€§ ç¨‹åºæ˜¯å®‰å…¨çš„ âš ï¸C++ ä¸­å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨ç±»ä¸­çš„å¸¸æ–¹æ³•ï¼Œä½†æ˜¯å¸¸æˆå‘˜æ–¹æ³•å¯ä»¥ä½¿ç”¨éå¸¸é‡æ•°æ®æˆå‘˜ è¿™æ˜¯æ­£ç¡®çš„ã€‚å¸¸å¯¹è±¡æ˜¯ä¸èƒ½ä¿®æ”¹å¯¹è±¡çŠ¶æ€çš„ï¼Œå› æ­¤åªèƒ½è°ƒç”¨ç±»ä¸­æ ‡è®°ä¸ºå¸¸çš„æ–¹æ³•ï¼Œå³å¸¸æ–¹æ³•ã€‚å¦‚æœè¯•å›¾è°ƒç”¨éå¸¸æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆé”™è¯¯ã€‚å› æ­¤ï¼Œå¸¸å¯¹è±¡å¯ä»¥ä¿è¯å¯¹è±¡çŠ¶æ€ä¸ä¼šè¢«æ„å¤–ä¿®æ”¹ã€‚å¸¸æˆå‘˜å‡½æ•°å¯ä»¥å¼•ç”¨constæ•°æ®æˆå‘˜ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨éconstçš„æ•°æ®æˆå‘˜\n1 2 3 4 5 6 7 8 9 10 11 12 13 class A { public: A(){} void test1(){} void test2()const{} }; const A a; A b; a.test1(); //Ã— a.test2(); //âˆš b.test1(); //âˆš b.test2(); //âˆš å¸¸æ–¹æ³•è¿”å›çš„ä»»ä½•å€¼éƒ½å…·æœ‰å¸¸æ€§ å¸¸æ–¹æ³•è¿”å›çš„ä»»ä½•å€¼éƒ½å…·æœ‰å¸¸æ€§ï¼Œä¸è®ºæ˜¯æŒ‡é’ˆè¿˜æ˜¯å¼•ç”¨ã€‚è¿™æ„å‘³ç€ï¼Œä¸èƒ½é€šè¿‡å¸¸æ–¹æ³•è¿”å›çš„æŒ‡é’ˆæˆ–å¼•ç”¨æ¥ä¿®æ”¹å¯¹è±¡çš„å€¼ã€‚ç„¶è€Œï¼Œéå¸¸é‡æ–¹æ³•åˆ™å…è®¸é€šè¿‡å…¶è¿”å›çš„æŒ‡é’ˆæˆ–å¼•ç”¨æ¥ä¿®æ”¹å¯¹è±¡çš„å€¼ã€‚\n1.3.2 å¸¸æ•°æ®æˆå‘˜ å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨åˆ›å»ºå¯¹è±¡åï¼Œè¯¥å¯¹è±¡çš„æŸä¸ªæ•°æ®æˆå‘˜å°±ä¿æŒä¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ•°æ®æˆå‘˜è®¾ç½®ä¸ºå¸¸æ•°æ®æˆå‘˜ï¼›å¸¸æ•°æ®æˆå‘˜åªèƒ½é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–ï¼Œå…¶ä»–å½¢å¼çš„å‡½æ•°å‡ä¸èƒ½è¿›è¡Œæ•°æ®çš„èµ‹å€¼ï¼›\næ•°æ®æˆå‘˜ éconstçš„æ™®é€šæˆå‘˜å‡½æ•° constæˆå‘˜å‡½æ•° éconstçš„æ™®é€šæ•°æ®æˆå‘˜ å¯ä»¥å¼•ç”¨ï¼Œä¹Ÿå¯ä»¥æ”¹å˜å€¼ å¯ä»¥å¼•ç”¨ï¼Œä½†æ˜¯ä¸å¯ä»¥æ”¹å˜å€¼ constæ•°æ®æˆå‘˜ å¯ä»¥å¼•ç”¨ï¼Œä½†æ˜¯ä¸èƒ½æ”¹å˜å€¼ å¯ä»¥å¼•ç”¨ï¼Œä½†æ˜¯ä¸å¯ä»¥æ”¹å˜å€¼ constå¯¹è±¡ ä¸å…è®¸ å¯ä»¥å¼•ç”¨ï¼Œä½†æ˜¯ä¸å¯ä»¥æ”¹å˜å€¼ 1.4 this æ¯ä¸ªæˆå‘˜å‡½æ•°éƒ½æœ‰ä¸€ä¸ªé¢å¤–çš„ï¼Œéšå«çš„å½¢å‚thisã€‚ thisæ€»æ˜¯æŒ‡å‘å½“å‰å¯¹è±¡ï¼Œå› æ­¤thisæ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆã€‚ return *this;å¯ä»¥è®©æˆå‘˜å‡½æ•°è¿ç»­è°ƒç”¨ã€‚ 1 2 3 4 5 6 Sale_data \u0026amp;Sales_data::combine(const Sales_data \u0026amp;rhs) { units_sold += rhs.units_sold; // revenue += rhs.revenue; return *this; } å½¢å‚è¡¨åé¢çš„constï¼Œæ”¹å˜äº†éšå«çš„thiså½¢å‚çš„ç±»å‹ï¼Œå¦‚æ™®é€šæˆå‘˜å‡½æ•°ä¸­çš„thisç±»å‹ä¸º CLASSNAME *constï¼Œè€Œå½“å£°æ˜å¸¸é‡æˆå‘˜å‡½æ•°åthisç±»å‹ä¸º const CLASSNAME *const\næ™®é€šçš„éconstæˆå‘˜å‡½æ•°ï¼šthisæ˜¯æŒ‡å‘ç±»ç±»å‹çš„constæŒ‡é’ˆï¼ˆå¯ä»¥æ”¹å˜thisæ‰€æŒ‡å‘çš„å€¼ï¼Œä¸èƒ½æ”¹å˜thisä¿å­˜çš„åœ°å€ï¼‰ã€‚ constæˆå‘˜å‡½æ•°ï¼šthisæ˜¯æŒ‡å‘constç±»ç±»å‹çš„constæŒ‡é’ˆï¼ˆæ—¢ä¸èƒ½æ”¹å˜thisæ‰€æŒ‡å‘çš„å€¼ï¼Œä¹Ÿä¸èƒ½æ”¹å˜thisä¿å­˜çš„åœ°å€ï¼‰ã€‚ 1.5 ç±»çš„é™æ€æˆå‘˜ éstaticæ•°æ®æˆå‘˜å­˜åœ¨äºç±»ç±»å‹çš„æ¯ä¸ªå¯¹è±¡ä¸­ã€‚ staticæ•°æ®æˆå‘˜ç‹¬ç«‹äºè¯¥ç±»çš„ä»»æ„å¯¹è±¡è€Œå­˜åœ¨ã€‚ æ¯ä¸ªstaticæ•°æ®æˆå‘˜æ˜¯ä¸ç±»å…³è”çš„å¯¹è±¡ï¼Œå¹¶ä¸ä¸è¯¥ç±»çš„å¯¹è±¡ç›¸å…³è”ã€‚\nå£°æ˜ å£°æ˜ä¹‹å‰åŠ ä¸Šå…³é”®è¯staticã€‚\nä½¿ç”¨ ä½¿ç”¨ä½œç”¨åŸŸè¿ç®—ç¬¦::ç›´æ¥è®¿é—®é™æ€æˆå‘˜:r = Account::rate(); ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡è®¿é—®ï¼šr = ac.rate();\nå®šä¹‰ åœ¨ç±»å¤–éƒ¨å®šä¹‰æ—¶ä¸ç”¨åŠ static\nåˆå§‹åŒ– é™æ€æ•°æ®æˆå‘˜é€šå¸¸ä¸åœ¨ç±»çš„å†…éƒ¨åˆå§‹åŒ–ï¼Œè€Œæ˜¯åœ¨å®šä¹‰æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚ double Account::interestRate = initRate(); å¦‚æœä¸€å®šè¦åœ¨ç±»å†…éƒ¨å®šä¹‰ï¼Œåˆ™è¦æ±‚å¿…é¡»æ˜¯å­—é¢å€¼å¸¸é‡ç±»å‹çš„constexprã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 class Account ( public: void calculate() ( amount += amount * interestRate; ) static double rate() ( return interestRate; } static void rate(double); private: std::string owner; double amountï¼› static double interestRate; static double initRate(); }; //é™æ€æˆå‘˜å‡½æ•°çš„å†…å¤–å®šä¹‰ void Account::rate(double newRate) {interestRate = newRate;} //é™æ€æ•°æ®æˆå‘˜çš„å®šä¹‰ double Account::interestRate = initRate(); //å¯ä»¥ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜å‡½æ•° double r ; r = Account::rate(); Account ac1; Account *ac2 = \u0026amp;ac1; r = ac1.rate(); r=ac2-\u0026gt;rate(); interestRateè¢«æ‰€æœ‰Accountå¯¹è±¡å…±äº« rateä¸åŒ…å«thisæŒ‡é’ˆï¼Œä¸èƒ½å£°æ˜æˆconst 2ã€ç±»çš„æ„é€ å‡½æ•° ç±»é€šè¿‡ä¸€ä¸ªæˆ–è€…å‡ ä¸ªç‰¹æ®Šçš„æˆå‘˜å‡½æ•°æ¥æ§åˆ¶å…¶å¯¹è±¡çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè¿™äº›å‡½æ•°å«åšæ„é€ å‡½æ•°ã€‚\næ„é€ å‡½æ•°æ˜¯ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ã€‚ æ„é€ å‡½æ•°æ”¾åœ¨ç±»çš„publicéƒ¨åˆ†ã€‚ ä¸ç±»åŒåçš„æˆå‘˜å‡½æ•°ã€‚ 2.1 é»˜è®¤æ„é€ å‡½æ•° ç±»é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°æ¥æ§åˆ¶é»˜è®¤åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè¿™ä¸ªå‡½æ•°å«åšé»˜è®¤æ„é€ å‡½æ•°(default constructor)ï¼Œé»˜è®¤æ„é€ å‡½æ•°æ— é¡»ä»»ä½•å®å‚ã€‚ç¼–è¯‘å™¨åˆ›å»ºçš„æ„é€ å‡½ç§°ä¸ºåˆæˆçš„é»˜è®¤æ„é€ å‡½æ•°ã€‚åªæœ‰å½“ç±»æ²¡æœ‰æ„é€ å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨æ‰ä¼šè¿™æ ·åšã€‚ é»˜è®¤æ„é€ å‡½æ•°æŒ‰ç…§å¦‚ä¸‹è§„åˆ™åˆå§‹åŒ–ç±»\nå¦‚æœç±»å†…å­˜åœ¨æˆå‘˜çš„åˆå§‹å€¼ï¼Œåˆ™ç”¨å®ƒæ¥åˆå§‹åŒ–æˆå‘˜\nå¦åˆ™ï¼Œé»˜è®¤åˆå§‹åŒ–æˆå‘˜\n=defaultè¦æ±‚ç¼–è¯‘å™¨åˆæˆé»˜è®¤çš„æ„é€ å‡½æ•°ã€‚(C++11)\n2.2 æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨ 1 Sales_item(const std::string \u0026amp;s):bookNo(s),units_sold(0), revenue(0.0) { } æ€»ä¹‹ï¼Œæ²¡æœ‰å‡ºç°åœ¨æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨ä¸­çš„æˆå‘˜å°†é€šè¿‡ç›¸åº”çš„ç±»å†…åˆå§‹å€¼ï¼ˆå¦‚æœå­˜åœ¨ï¼‰åˆå§‹åŒ–ï¼Œæˆ–è€…æ‰§è¡Œé»˜è®¤åˆå§‹åŒ–\n1. constã€å¼•ç”¨ç±»å‹çš„æˆå‘˜åˆå§‹åŒ– ä½†è¿˜éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰äº›æ—¶å€™æœ‰æˆå‘˜æ˜¯å¿…é¡»é€šè¿‡åˆå§‹å€¼åˆ—è¡¨æ¥åˆå§‹åŒ–\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class ConstRef{ public: ConstRef(int ii); private: int i ; const int ci; int \u0026amp;ri; } ConstRef::ConstRef(int ii) { i=ii; ci=ii; //WRONG ri=i; //WRONG } éšç€æ„é€ å‡½æ•°ä½“ä¸€å¼€å§‹æ‰§è¡Œï¼Œåˆå§‹åŒ–å°±å®Œæˆäº†!! åˆå§‹åŒ–constæˆ–è€…å¼•ç”¨ç±»å‹çš„æ•°æ®æˆå‘˜çš„å”¯ä¸€æœºä¼šå°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°åˆå§‹å€¼\n1 ConstRef::ConstRef(int ii): i(ii), ci(i), ri(ii) { } 2. åˆå§‹åŒ–é¡ºåºé—®é¢˜ æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨åªè¯´æ˜ç”¨äºåˆå§‹åŒ–æˆå‘˜çš„å€¼ï¼Œè€Œä¸é™å®šåˆå§‹åŒ–çš„å…·ä½“æ‰§è¡Œé¡ºåºï¼Œæ‰§è¡Œé¡ºåºä¸å…¶åœ¨ç±»å®šä¹‰ä¸­å‡ºç°çš„é¡ºåºä¸€è‡´ ^172c2c\n1 2 3 4 5 6 class X{ int i; int j; public: X(int val):j(val),i(j){} //çœŸå®çš„é¡ºåºä¸ºå…ˆåˆå§‹åŒ–iï¼Œç„¶åjï¼Œæ‰€ä»¥æŠ¥é”™ } 2.3 å§”æ‰˜æ„é€ å‡½æ•° ï¼ˆdelegating constructor, C++11ï¼‰ å§”æ‰˜æ„é€ å‡½æ•°å°†è‡ªå·±çš„èŒè´£å§”æ‰˜ç»™äº†å…¶ä»–æ„é€ å‡½æ•°ã€‚\nSale_data(): Sale_data(\u0026quot;\u0026quot;, 0, 0) {}\n2.4 è½¬æ¢æ„é€ å‡½æ•° å¦‚æœç±»çš„æ„é€ å‡½æ•°åªæ¥å—ä¸€ä¸ªå®å‚ï¼Œåˆ™å®ƒå®é™…ä¸Šå®šä¹‰äº†è½¬æ¢ä¸ºæ­¤ç±»ç±»å‹çš„éšå¼è½¬æ¢æœºåˆ¶ï¼Œè¿™ç§æ„é€ å‡½æ•°æˆä¸ºè½¬æ¢æ„é€ å‡½æ•°\nåœ¨Sales_dataç±»ä¸­ï¼Œæ¥å—stringçš„æ„é€ å‡½æ•°å’Œæ¥å—istreamçš„æ„é€ å‡½æ•°åˆ†åˆ«å®šä¹‰äº†ä»è¿™é¢ä¸€ç§ç±»å‹å‘Sales_dataéšå¼è½¬æ¢çš„è§„åˆ™ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨éœ€è¦ä½¿ç”¨ Sales_dataçš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨stringæˆ–è€…istreamä½œä¸ºæ›¿ä»£ï¼š\n1 2 3 4 string null_book = \u0026#34;9-999-99999-9â€; //æ„é€ ä¸€ä¸ªä¸´æ—¶çš„Sales_dataæ—¶è±¡ // è¯¥æ—¶è±¡çš„ units_sold å’Œ revenue ç­‰äº 0, bookNo ç­‰äº null_book item.combine(null_book); åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªstringå®å‚è°ƒç”¨äº† Sales_dataçš„combineæˆå‘˜ã€‚è¯¥è°ƒç”¨æ˜¯åˆæ³• çš„ï¼Œç¼–è¯‘å™¨ç”¨ç»™å®šçš„stringè‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªSales_dataå¯¹è±¡ã€‚æ–°ç”Ÿæˆçš„è¿™ä¸ª(ä¸´æ—¶) Sales_dataå¯¹è±¡è¢«ä¼ é€’ç»™combineã€‚å› ä¸ºcombineçš„å‚æ•°æ˜¯ä¸€ä¸ªå¸¸å¼•ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»™è¯¥å‚æ•°ä¼ é€’ä¸€ä¸ªä¸´æ—¶é‡\nä½†æ˜¯åªå…è®¸ä¸€æ­¥ç±»ç±»å‹è½¬æ¢\n1 item.combine(\u0026#34;9-999-99999-9â€); è¿™ç§å°±æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºæš—å«äº†ä¸¤ç§ç±»å‹çš„è½¬æ¢ï¼Œ\u0026ldquo;9-999-99999-9â€è½¬æ¢ä¸ºstringï¼Œstringè½¬æ¢ä¸ºSales_data\n1 2 item.combine(string(\u0026#34;9-999-99999-9â€)); item.combine(Sales_data(\u0026#34;9-999-99999-9â€)); explicitæŠ‘åˆ¶æ„é€ å‡½æ•°å®šä¹‰çš„éšå¼è½¬æ¢\nä½¿ç”¨å…³é”®è¯explicitï¼Œæœ‰ä»¥ä¸‹é™åˆ¶ï¼š\nåªå¯¹ä¸€ä¸ªå®å‚çš„æ„é€ å‡½æ•°æœ‰æ•ˆ åªèƒ½åœ¨ç±»å†…å£°æ˜æ„é€ å‡½æ•°æ—¶ä½¿ç”¨å…³é”®å­—ï¼Œç±»å¤–éƒ¨å®šä¹‰æ—¶ä¸åº”é‡å¤ åªèƒ½é˜»æ­¢éšå¼è½¬æ¢ï¼Œä½†æ˜¯ä¸èƒ½é˜»æ­¢æ˜¾ç¤ºè½¬æ¢ åªèƒ½ç”¨äºç›´æ¥åˆå§‹åŒ–ï¼Œä¸èƒ½ç”¨äºæ‹·è´å½¢å¼çš„åˆå§‹åŒ–ã€‚ 1 2 3 4 5 6 7 8 class Salesdata { public: Sales_data() = defaultï¼› Sales data (const std::string \u0026amp;s, unsigned n, double p): bookNo(s), units_sold(n), revenue(p*n) { ) explicit Sales_data(const std::string \u0026amp;s):bookNo(s) { } explicit Sales_data(std::istream\u0026amp;); }ï¼› 1 2 3 4 string null_book(\u0026#34;999-999-999999\u0026#34;); Sales_data it item(null_book) ;\t// æ­£ç¡®ï¼šç›´æ¥åˆå§‹åŒ– //é”™è¯¯ï¼šä¸èƒ½å°†explicitæ„é€ å‡½æ•°ç”¨äºæ‹·è´å½¢å¼çš„åˆå§‹åŒ–è¿‡ç¨‹ Sales data item2 = null_book; 1 2 3 4 //æ­£ç¡®ï¼šå®å‚æ˜¯ä¸€ä¸ªæ˜¾å¼æ„é€ çš„Sales_dataå¯¹è±¡ item.combine(Sales_data(null_book)); //æ­£ç¡®ï¼šstatic_castå¯ä»¥ä½¿ç”¨explicitçš„æ„é€ å‡½æ•° item.combine(static cast\u0026lt;Sales data\u0026gt;(cin)); 3ã€æ‹·è´æ„é€ å‡½æ•° todo\n4ã€èµ‹å€¼å‡½æ•° todo\n5ã€ææ„å‡½æ•° å½“å¯¹è±¡ä¸åœ¨å­˜åœ¨æ‰§è¡Œé”€æ¯æ“ä½œï¼Œé”€æ¯çš„æ“ä½œç”±ç±»çš„ææ„å‡½æ•°å®Œæˆ\n6ã€å…³äºæ„é€ ã€æ‹·è´ã€èµ‹å€¼ã€ææ„å‡½æ•°çš„æ€»ç»“å’Œæ·±å…¥ è¿™å››ç§æˆå‘˜å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šåœ¨æ²¡æœ‰å®šä¹‰æ—¶ï¼Œç”Ÿæˆé»˜è®¤æ„é€ ã€æ‹·è´ã€èµ‹å€¼ã€ææ„å‡½æ•° æœ‰äº›ç±»ä¸èƒ½ä¾èµ–ç¼–è¯‘å™¨ç”Ÿæˆçš„ç‰ˆæœ¬ï¼Œå› ä¸ºè¿™æ˜¯ä¸å®‰å…¨çš„ 7ã€å¯¹è±¡ å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹åŒ–ï¼Œåˆ†ä¸ºæ™®é€šå¯¹è±¡å’Œå¸¸å¯¹è±¡ å®šä¹‰æ™®é€šå¯¹è±¡çš„æ–¹æ³•\n1 2 ClassName a; ClassName *a = new ClassName; å¸¸å¯¹è±¡æ˜¯æŒ‡è¯¥å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå…¶æ‰€æœ‰çš„æ•°æ®æˆå‘˜çš„å€¼éƒ½ä¸èƒ½è¢«æ”¹å˜ï¼›å®šä¹‰å¯¹è±¡æ—¶åŠ ä¸Šå…³é”®å­—constï¼Œè¯¥å¯¹è±¡å°±æ˜¯å¸¸å¯¹è±¡ï¼Œå…¶ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼š\n1 2 3 4 5 ç±»å const å¯¹è±¡å[(å®å‚ç±»åˆ«)]; æˆ–è€… const ç±»å å¯¹è±¡å[(å®å‚ç±»åˆ«)]; const CComplex num; å¯¹è±¡å¯ä»¥ç”¨.æ¥è®¿é—®æˆå‘˜ æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆç”¨-\u0026gt;æ¥è®¿é—®æˆå‘˜ äºŒã€ èšåˆç±» ï¼ˆaggregate classï¼‰ æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼š æ‰€æœ‰æˆå‘˜éƒ½æ˜¯publicçš„ã€‚ æ²¡æœ‰å®šä¹‰ä»»ä½•æ„é€ å‡½æ•°ã€‚ æ²¡æœ‰ç±»å†…åˆå§‹å€¼ã€‚ æ²¡æœ‰åŸºç±»ï¼Œä¹Ÿæ²¡æœ‰virtualå‡½æ•°ã€‚ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªèŠ±æ‹¬å·æ‹¬èµ·æ¥çš„æˆå‘˜åˆå§‹å€¼åˆ—è¡¨ï¼Œåˆå§‹å€¼çš„é¡ºåºå¿…é¡»å’Œå£°æ˜çš„é¡ºåºä¸€è‡´ã€‚ 1 2 3 4 5 6 struct Data{ int ival; string s; }; Data val1={0,\u0026#34;Anna\u0026#34;}; å¦‚æœåˆå§‹å€¼åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ª æ•°å°‘äºç±»çš„æˆå‘˜æ•°é‡ï¼Œåˆ™é åçš„æˆå‘˜è¢«å€¼åˆå§‹åŒ–ã€‚ åˆå§‹å€¼åˆ—è¡¨çš„å…ƒç´ ä¸ªæ•°ç»å¯¹ä¸èƒ½è¶…è¿‡ç±»çš„æˆå‘˜æ•°é‡ã€‚ C++ä¸­å¼•å…¥èšåˆç±»çš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†æ–¹ä¾¿åœ°å¯¹ä¸€ç»„ç›¸å…³çš„æ•°æ®è¿›è¡Œç»„ç»‡å’Œç®¡ç†ã€‚èšåˆç±»å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ•°æ®å®¹å™¨ï¼Œå®ƒæŠŠå¤šä¸ªæ•°æ®æˆå‘˜å°è£…åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå•ç‹¬çš„æ•°æ®å•å…ƒï¼Œä»è€Œæ›´åŠ æ–¹ä¾¿åœ°ä½¿ç”¨è¿™äº›æ•°æ®ã€‚é€šè¿‡å°†ç›¸å…³çš„æ•°æ®æˆå‘˜æ”¾åœ¨åŒä¸€ä¸ªèšåˆç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ç»„ç»‡ä»£ç ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚æ­¤å¤–ï¼Œèšåˆç±»è¿˜å¯ä»¥å‡å°‘ä»£ç é‡ï¼Œé¿å…å‡ºç°è¿‡å¤šçš„å…¨å±€å˜é‡æˆ–ç»“æ„ä½“å®šä¹‰ï¼Œä»è€Œä½¿ä»£ç æ›´åŠ ç®€æ´ã€æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚å¦å¤–ï¼Œèšåˆç±»ä¹Ÿä¸ºC++çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æä¾›äº†ä¸€ç§æ–°çš„æ–¹å¼ã€‚é€šè¿‡å®šä¹‰æˆå‘˜å‡½æ•°å’Œé‡è½½æ“ä½œç¬¦ç­‰æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹èšåˆç±»è¿›è¡Œæ›´åŠ çµæ´»å’Œæ–¹ä¾¿çš„æ“ä½œï¼Œå®ç°æ›´ä¼˜é›…çš„ä»£ç è®¾è®¡ã€‚æœ€åï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶èšåˆç±»å’Œç»“æ„ä½“çœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œä½†å®ƒä»¬åœ¨è¯­ä¹‰ä¸Šæœ‰æ‰€ä¸åŒã€‚èšåˆç±»æ›´å¼ºè°ƒå¯¹æ•°æ®çš„ç»„ç»‡å’Œå°è£…ï¼Œè€Œç»“æ„ä½“åˆ™æ›´å¼ºè°ƒå¯¹æ•°æ®çš„æè¿°å’Œè¡¨ç¤ºã€‚å› æ­¤ï¼Œåœ¨é€‰æ‹©ä½¿ç”¨èšåˆç±»è¿˜æ˜¯ç»“æ„ä½“æ—¶ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€è¦è¿›è¡Œé€‰æ‹©ã€‚\nä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„å¿…é¡»è¦ä½¿ç”¨èšåˆç±»çš„åœºæ™¯æ˜¯æ•°æ®åº“ä¸­çš„æ•°æ®è¡¨ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä½¿ç”¨ä¸€ç§æ•°æ®ç»“æ„æ¥è¡¨ç¤ºæ•°æ®åº“ä¸­çš„æ•°æ®è¡¨ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„éœ€è¦åŒ…å«æ¯ä¸€è¡Œæ•°æ®çš„å„ä¸ªå­—æ®µï¼Œä»¥åŠç›¸å…³çš„å±æ€§å’Œæ–¹æ³•ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œä½¿ç”¨èšåˆç±»å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ç»„ç»‡å’Œç®¡ç†æ•°æ®è¡¨ä¸­çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥å°†æ¯ä¸€è¡Œæ•°æ®çœ‹ä½œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠæ‰€æœ‰è¡Œå¯¹è±¡æ”¾åœ¨åŒä¸€ä¸ªèšåˆç±»ä¸­ï¼Œå½¢æˆä¸€ä¸ªæ•°æ®è¡¨å¯¹è±¡ã€‚è¿™ä¸ªèšåˆç±»å¯ä»¥åŒ…å«å„ç§æˆå‘˜å‡½æ•°å’Œæ“ä½œç¬¦é‡è½½ï¼Œç”¨äºå®ç°æ•°æ®è¡¨çš„å„ç§æŸ¥è¯¢ã€æ’åºã€æ›´æ–°ç­‰æ“ä½œã€‚\nä¸‰ã€ å­—é¢å€¼å¸¸é‡ç±» constexprå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼å¿…é¡»æ˜¯å­—é¢å€¼ã€‚ å­—é¢å€¼ç±»å‹ï¼šé™¤äº†ç®—æœ¯ç±»å‹ã€å¼•ç”¨å’ŒæŒ‡é’ˆå¤–ï¼ŒæŸäº›ç±»ä¹Ÿæ˜¯å­—é¢å€¼ç±»å‹ã€‚ æ•°æ®æˆå‘˜éƒ½æ˜¯å­—é¢å€¼ç±»å‹çš„èšåˆç±»æ˜¯å­—é¢å€¼å¸¸é‡ç±»ã€‚ å¦‚æœä¸æ˜¯èšåˆç±»ï¼Œåˆ™å¿…é¡»æ»¡è¶³ä¸‹é¢æ‰€æœ‰æ¡ä»¶ï¼š æ•°æ®æˆå‘˜éƒ½å¿…é¡»æ˜¯å­—é¢å€¼ç±»å‹ã€‚ ç±»å¿…é¡»è‡³å°‘å«æœ‰ä¸€ä¸ªconstexpræ„é€ å‡½æ•°ã€‚ å¦‚æœä¸€ä¸ªæ•°æ®æˆå‘˜å«æœ‰ç±»å†…éƒ¨åˆå§‹å€¼ï¼Œåˆ™å†…ç½®ç±»å‹æˆå‘˜çš„åˆå§‹å€¼å¿…é¡»æ˜¯ä¸€æ¡å¸¸é‡è¡¨è¾¾å¼ï¼›æˆ–è€…å¦‚æœæˆå‘˜å±äºæŸç§ç±»ç±»å‹ï¼Œåˆ™åˆå§‹å€¼å¿…é¡»ä½¿ç”¨æˆå‘˜è‡ªå·±çš„constexpræ„é€ å‡½æ•°ã€‚ ç±»å¿…é¡»ä½¿ç”¨ææ„å‡½æ•°çš„é»˜è®¤å®šä¹‰ï¼Œè¯¥æˆå‘˜è´Ÿè´£é”€æ¯ç±»çš„å¯¹è±¡ã€‚ å››ã€è®¿é—®æ§åˆ¶ä¸å°è£… è®¿é—®è¯´æ˜ç¬¦ï¼ˆaccess specifiersï¼‰ï¼š publicï¼šå®šä¹‰åœ¨ publicåé¢çš„æˆå‘˜åœ¨æ•´ä¸ªç¨‹åºå†…å¯ä»¥è¢«è®¿é—®ï¼› publicæˆå‘˜å®šä¹‰ç±»çš„æ¥å£ã€‚ privateï¼šå®šä¹‰åœ¨ privateåé¢çš„æˆå‘˜å¯ä»¥è¢«ç±»çš„æˆå‘˜å‡½æ•°è®¿é—®ï¼Œä½†ä¸èƒ½è¢«ä½¿ç”¨è¯¥ç±»çš„ä»£ç è®¿é—®ï¼› privateéšè—äº†ç±»çš„å®ç°ç»†èŠ‚ã€‚ ä½¿ç”¨ classæˆ–è€… structï¼šéƒ½å¯ä»¥è¢«ç”¨äºå®šä¹‰ä¸€ä¸ªç±»ã€‚å”¯ä¸€çš„å´åˆ«åœ¨äºè®¿é—®æƒé™ã€‚ ä½¿ç”¨ classï¼šåœ¨ç¬¬ä¸€ä¸ªè®¿é—®è¯´æ˜ç¬¦ä¹‹å‰çš„æˆå‘˜æ˜¯ priavteçš„ã€‚ ä½¿ç”¨ structï¼šåœ¨ç¬¬ä¸€ä¸ªè®¿é—®è¯´æ˜ç¬¦ä¹‹å‰çš„æˆå‘˜æ˜¯ publicçš„ã€‚ 1ã€å‹å…ƒ å…è®¸ç‰¹å®šçš„éæˆå‘˜å‡½æ•°è®¿é—®ä¸€ä¸ªç±»çš„ç§æœ‰æˆå‘˜. å‹å…ƒçš„å£°æ˜ä»¥å…³é”®å­— friendå¼€å§‹ã€‚ friend Sales_data add(const Sales_data\u0026amp;, const Sales_data\u0026amp;);è¡¨ç¤ºéæˆå‘˜å‡½æ•°addå¯ä»¥è®¿é—®ç±»çš„éå…¬æœ‰æˆå‘˜ã€‚ é€šå¸¸å°†å‹å…ƒå£°æ˜æˆç»„åœ°æ”¾åœ¨ç±»å®šä¹‰çš„å¼€å§‹æˆ–è€…ç»“å°¾ã€‚ ç±»ä¹‹é—´çš„å‹å…ƒï¼š å¦‚æœä¸€ä¸ªç±»æŒ‡å®šäº†å‹å…ƒç±»ï¼Œåˆ™å‹å…ƒç±»çš„æˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®æ­¤ç±»åŒ…æ‹¬éå…¬æœ‰æˆå‘˜åœ¨å†…çš„æ‰€æœ‰æˆå‘˜ã€‚ 2ã€å°è£…çš„ç›Šå¤„ ç¡®ä¿ç”¨æˆ·çš„ä»£ç ä¸ä¼šæ— æ„é—´ç ´åå°è£…å¯¹è±¡çš„çŠ¶æ€ã€‚ è¢«å°è£…çš„ç±»çš„å…·ä½“å®ç°ç»†èŠ‚å¯ä»¥éšæ—¶æ”¹å˜ï¼Œè€Œæ— éœ€è°ƒæ•´ç”¨æˆ·çº§åˆ«çš„ä»£ç ã€‚ äº”ã€ç±»çš„å…¶ä»–ç‰¹æ€§ æˆå‘˜å‡½æ•°ä½œä¸ºå†…è”å‡½æ•° inlineï¼š åœ¨ç±»çš„å†…éƒ¨ï¼Œå¸¸æœ‰ä¸€äº›è§„æ¨¡è¾ƒå°çš„å‡½æ•°é€‚åˆäºè¢«å£°æ˜æˆå†…è”å‡½æ•°ã€‚ å®šä¹‰åœ¨ç±»å†…éƒ¨çš„å‡½æ•°æ˜¯è‡ªåŠ¨å†…è”çš„ã€‚ åœ¨ç±»å¤–éƒ¨å®šä¹‰çš„æˆå‘˜å‡½æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨å£°æ˜æ—¶æ˜¾å¼åœ°åŠ ä¸Š inlineã€‚ å¯å˜æ•°æ®æˆå‘˜ ï¼ˆmutable data memberï¼‰ï¼š mutable size_t access_ctr; æ°¸è¿œä¸ä¼šæ˜¯constï¼Œå³ä½¿å®ƒæ˜¯constå¯¹è±¡çš„æˆå‘˜ã€‚ ç±»ç±»å‹ï¼š æ¯ä¸ªç±»å®šä¹‰äº†å”¯ä¸€çš„ç±»å‹ã€‚ å…­ã€ç±»çš„ä½œç”¨åŸŸ æ¯ä¸ªç±»éƒ½ä¼šå®šä¹‰å®ƒè‡ªå·±çš„ä½œç”¨åŸŸã€‚åœ¨ç±»çš„ä½œç”¨åŸŸä¹‹å¤–ï¼Œæ™®é€šçš„æ•°æ®å’Œå‡½æ•°æˆå‘˜åªèƒ½ç”±å¼•ç”¨ã€å¯¹è±¡ã€æŒ‡é’ˆä½¿ç”¨æˆå‘˜è®¿é—®è¿ç®—ç¬¦æ¥è®¿é—®ã€‚ å‡½æ•°çš„è¿”å›ç±»å‹é€šå¸¸åœ¨å‡½æ•°åå‰é¢ï¼Œå› æ­¤å½“æˆå‘˜å‡½æ•°å®šä¹‰åœ¨ç±»çš„å¤–éƒ¨æ—¶ï¼Œè¿”å›ç±»å‹ä¸­ä½¿ç”¨çš„åå­—éƒ½ä½äºç±»çš„ä½œç”¨åŸŸä¹‹å¤–ã€‚ å¦‚æœæˆå‘˜ä½¿ç”¨äº†å¤–å±‚ä½œç”¨åŸŸä¸­çš„æŸä¸ªåå­—ï¼Œè€Œè¯¥åå­—ä»£è¡¨ä¸€ç§ç±»å‹ï¼Œåˆ™ç±»ä¸èƒ½åœ¨ä¹‹åé‡æ–°å®šä¹‰è¯¥åå­—ã€‚ ç±»ä¸­çš„ç±»å‹åå®šä¹‰éƒ½è¦æ”¾åœ¨ä¸€å¼€å§‹ã€‚ ","pubDate":"2021-09-20","title":"ã€C++ Primer(edition 5) 07ã€‘ç±»"},{"link":"https://cnjslw.github.io/posts/%E5%87%BD%E6%95%B0/","plain":"ä¸€ã€å‡½æ•°åŸºç¡€ å‡½æ•°å®šä¹‰ï¼šå‡½æ•°æ˜¯ä¸€ä¸ªå‘½åäº†çš„ä»£ç å—ã€‚ ç¼–å†™å‡½æ•°ï¼šåŒ…æ‹¬è¿”å›ç±»å‹ã€å‡½æ•°åå­—å’Œ0ä¸ªæˆ–è€…å¤šä¸ªå½¢å‚ï¼ˆparameterï¼‰ç»„æˆçš„åˆ—è¡¨å’Œå‡½æ•°ä½“ã€‚ è°ƒç”¨è¿ç®—ç¬¦è°ƒç”¨å‡½æ•°ï¼šè°ƒç”¨è¿ç®—ç¬¦çš„å½¢å¼æ˜¯ä¸€å¯¹åœ†æ‹¬å· ()ï¼Œä½œç”¨äºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼æ˜¯å‡½æ•°æˆ–è€…æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆã€‚ åœ†æ‹¬å·å†…æ˜¯ç”¨é€—å·éš”å¼€çš„å®å‚ï¼ˆargumentï¼‰åˆ—è¡¨ã€‚ å‡½æ•°è°ƒç”¨è¿‡ç¨‹ï¼š 1.ä¸»è°ƒå‡½æ•°ï¼ˆcalling functionï¼‰çš„æ‰§è¡Œè¢«ä¸­æ–­ã€‚ 2.è¢«è°ƒå‡½æ•°ï¼ˆcalled functionï¼‰å¼€å§‹æ‰§è¡Œã€‚ å½¢å‚å’Œå®å‚ï¼šå½¢å‚å’Œå®å‚çš„ä¸ªæ•°å’Œç±»å‹å¿…é¡»åŒ¹é…ä¸Šã€‚ è¿”å›ç±»å‹ï¼š voidè¡¨ç¤ºå‡½æ•°ä¸è¿”å›ä»»ä½•å€¼ã€‚å‡½æ•°çš„è¿”å›ç±»å‹ä¸èƒ½æ˜¯æ•°ç»„ç±»å‹æˆ–è€…å‡½æ•°ç±»å‹ï¼Œä½†å¯ä»¥æ˜¯æŒ‡å‘æ•°ç»„æˆ–è€…å‡½æ•°çš„æŒ‡é’ˆã€‚ åå­—ï¼šåå­—çš„ä½œç”¨äºæ˜¯ç¨‹åºæ–‡æœ¬çš„ä¸€éƒ¨åˆ†ï¼Œåå­—åœ¨å…¶ä¸­å¯è§ã€‚ 1ã€å±€éƒ¨å¯¹è±¡ ç”Ÿå‘½å‘¨æœŸï¼šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­è¯¥å¯¹è±¡å­˜åœ¨çš„ä¸€æ®µæ—¶é—´ã€‚ å±€éƒ¨å˜é‡ï¼ˆlocal variableï¼‰ï¼šå½¢å‚å’Œå‡½æ•°ä½“å†…éƒ¨å®šä¹‰çš„å˜é‡ç»Ÿç§°ä¸ºå±€éƒ¨å˜é‡ã€‚å®ƒå¯¹å‡½æ•°è€Œè¨€æ˜¯å±€éƒ¨çš„ï¼Œå¯¹å‡½æ•°å¤–éƒ¨è€Œè¨€æ˜¯éšè—çš„ã€‚ è‡ªåŠ¨å¯¹è±¡ï¼šåªå­˜åœ¨äºå—æ‰§è¡ŒæœŸé—´çš„å¯¹è±¡ã€‚å½“å—çš„æ‰§è¡Œç»“æŸåï¼Œå®ƒçš„å€¼å°±å˜æˆæœªå®šä¹‰çš„äº†ã€‚ å±€éƒ¨é™æ€å¯¹è±¡ï¼š staticç±»å‹çš„å±€éƒ¨å˜é‡ï¼Œç”Ÿå‘½å‘¨æœŸè´¯ç©¿å‡½æ•°è°ƒç”¨å‰åã€‚ 2ã€å‡½æ•°å£°æ˜ å‡½æ•°å£°æ˜ï¼šå‡½æ•°çš„å£°æ˜å’Œå®šä¹‰å”¯ä¸€çš„åŒºåˆ«æ˜¯å£°æ˜æ— éœ€å‡½æ•°ä½“ï¼Œç”¨ä¸€ä¸ªåˆ†å·æ›¿ä»£ã€‚å‡½æ•°å£°æ˜ä¸»è¦ç”¨äºæè¿°å‡½æ•°çš„æ¥å£ï¼Œä¹Ÿç§°å‡½æ•°åŸå‹ã€‚ åœ¨å¤´æ–‡ä»¶ä¸­è¿›è¡Œå‡½æ•°å£°æ˜ï¼šå»ºè®®å˜é‡åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼›åœ¨æºæ–‡ä»¶ä¸­å®šä¹‰ã€‚ åˆ†ç¦»ç¼–è¯‘ï¼š CC a.cc b.ccç›´æ¥ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼›CC -c a.cc b.ccç¼–è¯‘ç”Ÿæˆå¯¹è±¡ä»£ç a.o b.oï¼› CC a.o b.oç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ äºŒã€å‚æ•°ä¼ é€’ å½¢å‚åˆå§‹åŒ–çš„æœºç†å’Œå˜é‡åˆå§‹åŒ–ä¸€æ ·ã€‚ å¼•ç”¨ä¼ é€’ï¼ˆpassed by referenceï¼‰ï¼šåˆç§°ä¼ å¼•ç”¨è°ƒç”¨ï¼ˆcalled by referenceï¼‰ï¼ŒæŒ‡å½¢å‚æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¼•ç”¨å½¢å‚æ˜¯å®ƒå¯¹åº”çš„å®å‚çš„åˆ«åã€‚ å€¼ä¼ é€’ï¼ˆpassed by valueï¼‰ï¼šåˆç§°ä¼ å€¼è°ƒç”¨ï¼ˆcalled by valueï¼‰ï¼ŒæŒ‡å®å‚çš„å€¼æ˜¯é€šè¿‡æ‹·è´ä¼ é€’ç»™å½¢å‚ã€‚ 1ã€ä¼ å€¼å‚æ•° å½“åˆå§‹åŒ–ä¸€ä¸ªéå¼•ç”¨ç±»å‹çš„å˜é‡æ—¶ï¼Œåˆå§‹å€¼è¢«æ‹·è´ç»™å˜é‡ã€‚ å‡½æ•°å¯¹å½¢å‚åšçš„æ‰€æœ‰æ“ä½œéƒ½ä¸ä¼šå½±å“å®å‚ã€‚ æŒ‡é’ˆå½¢å‚ï¼šå¸¸ç”¨åœ¨Cä¸­ï¼ŒC++å»ºè®®ä½¿ç”¨å¼•ç”¨ç±»å‹çš„å½¢å‚ä»£æ›¿æŒ‡é’ˆã€‚ 2ã€ä¼ å¼•ç”¨å‚æ•° é€šè¿‡ä½¿ç”¨å¼•ç”¨å½¢å‚ï¼Œå…è®¸å‡½æ•°æ”¹å˜ä¸€ä¸ªæˆ–å¤šä¸ªå®å‚çš„å€¼ã€‚ å¼•ç”¨å½¢å‚ç›´æ¥å…³è”åˆ°ç»‘å®šçš„å¯¹è±¡ï¼Œè€Œéå¯¹è±¡çš„å‰¯æœ¬ã€‚ ä½¿ç”¨å¼•ç”¨å½¢å‚å¯ä»¥ç”¨äºè¿”å›é¢å¤–çš„ä¿¡æ¯ã€‚ ç»å¸¸ç”¨å¼•ç”¨å½¢å‚æ¥é¿å…ä¸å¿…è¦çš„å¤åˆ¶ã€‚ void swap(int \u0026amp;v1, int \u0026amp;v2) å¦‚æœæ— éœ€æ”¹å˜å¼•ç”¨å½¢å‚çš„å€¼ï¼Œæœ€å¥½å°†å…¶å£°æ˜ä¸ºå¸¸é‡å¼•ç”¨ã€‚ 3ã€constå½¢å‚å’Œå®å‚ å½¢å‚çš„é¡¶å±‚constè¢«å¿½ç•¥ã€‚void func(const int i);è°ƒç”¨æ—¶æ—¢å¯ä»¥ä¼ å…¥const intä¹Ÿå¯ä»¥ä¼ å…¥intã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨éå¸¸é‡åˆå§‹åŒ–ä¸€ä¸ªåº•å±‚constå¯¹è±¡ï¼Œä½†æ˜¯åè¿‡æ¥ä¸è¡Œã€‚ åœ¨å‡½æ•°ä¸­ï¼Œä¸èƒ½æ”¹å˜å®å‚çš„å±€éƒ¨å‰¯æœ¬ã€‚ å°½é‡ä½¿ç”¨å¸¸é‡å¼•ç”¨ã€‚ 4ã€æ•°ç»„å½¢å‚ 4.1 æ•°ç»„å½¢å‚çš„å®šä¹‰ å› ä¸ºä¸èƒ½æ‹·è´æ•°ç»„ï¼Œæ‰€ä»¥æ— æ³•ä»¥å€¼ä¼ é€’çš„æ–¹å¼ä½¿ç”¨æ•°ç»„å‚æ•°ï¼Œå› ä¸ºæ•°ç»„ä¼šè½¬æ¢æˆæŒ‡é’ˆï¼Œæ‰€ä»¥å½“ä¸ºå‡½æ•°ä¼ é€’ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œå®é™…ä¸Šä¼ é€’çš„æ˜¯æŒ‡å‘æ•°ç»„é¦–å…ƒç´ çš„æŒ‡é’ˆ\n1 2 3 4 5 6 7 8 9 void print(const int *); void print(const int[]); void print(const int[10]); //è¿™é‡Œçš„10åªæ˜¯æœŸæœ›æ•°ç»„å«æœ‰å¤šå°‘å…ƒç´ ï¼Œå®é™…ä¸ä¸€å®š //ä¸‰ç§printå‡½æ•°å£°æ˜ç­‰ä»·,å½¢å‚éƒ½æ˜¯const int* ç±»å‹ int i = 0 , j[2] = {0,1}; print(\u0026amp;i); print(j); 4.2 æ•°ç»„å½¢å‚çš„è¶Šç•Œé—®é¢˜ è¦æ³¨æ„åœ¨å‡½æ•°ä¸­ä½¿ç”¨æ•°ç»„æ—¶ï¼Œä¸èƒ½è¶Šç•Œã€‚ç®¡ç†æŒ‡é’ˆå½¢å‚æœ‰ä¸‰ç§å¸¸ç”¨çš„æŠ€æœ¯ã€‚\n1. ä½¿ç”¨æ ‡è®°æŒ‡å®šçš„æ•°ç»„é•¿åº¦ ç®¡ç†æ•°æ®å®å‚çš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯è¦æ±‚æ•°ç»„æœ¬èº«åŒ…å«ä¸€ä¸ªç»“æŸæ ‡è®°ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•çš„å…¸å‹ç¤ºä¾‹æ˜¯Cé£æ ¼å­—ç¬¦ä¸²ã€‚Cé£æ ¼çš„æ˜¯å­—ç¬¦ä¸²æ˜¯ä»¥\\0ä¸ºç»“æŸçš„ï¼Œå‡½æ•°åœ¨å¤„ç†Cé£æ ¼å­—ç¬¦ä¸²æ—¶ï¼Œé‡åˆ°ç©ºå­—ç¬¦åœæ­¢\n1 2 3 4 5 6 void print(const char *cp) { if(cp) //éç©ºæŒ‡é’ˆ while(*cp) //éç©ºå­—ç¬¦ count \u0026lt;\u0026lt; *cp++; } 2.ä½¿ç”¨æ ‡å‡†åº“è§„èŒƒ ç®¡ç†æ•°ç»„å®å‚çš„ç¬¬äºŒç§æŠ€æœ¯æ˜¯ä¼ é€’æŒ‡å‘æ•°ç»„é¦–å…ƒç´ å’Œå°¾åå…ƒç´ çš„æŒ‡é’ˆ\n1 2 3 4 5 6 7 8 void print(const int *beg , const int *end) { while(beg != end) cout \u0026lt;\u0026lt;*beg++\u0026lt;\u0026lt;endl; } int j[2]={0,1}; print(begin(j),end(j)); 3.æ˜¾ç¤ºä¼ é€’ä¸€ä¸ªè¡¨ç¤ºæ•°ç»„å¤§å°çš„å½¢å‚ ç¬¬ä¸‰ç§ç®¡ç†æ–¹æ³•ï¼Œå°±æ˜¯ä¸“é—¨å®šä¹‰ä¸€ä¸ªè¡¨ç¤ºæ•°ç»„å¤§å°çš„å½¢å‚\n1 2 3 4 5 6 7 8 9 void print(const int ia[], size_t size) { for(size_t i=0 ; i != size ; ++i){ cout\u0026lt;\u0026lt;ia[i]\u0026lt;\u0026lt;endl; } } int j[] = {0,1}; print(j,end(j)-begin(j)); 4.3 æ•°ç»„å¼•ç”¨å½¢å‚ 1 2 3 4 5 6 7 8 f(int \u0026amp;arr[10]); //arræ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½å¼•ç”¨å˜é‡ f(int (\u0026amp;arr)[10]); //arræ˜¯å¼•ç”¨å˜é‡ï¼ŒæŒ‡å‘ä¸€ä¸ªå«æœ‰10ä¸ªå…ƒç´ çš„æ•°ç»„ int i = 0 , j[2] = {0,1}; int k[10] = {0,1,2,3,4,5,6,7,8,9}; f(\u0026amp;i); //é”™è¯¯ f(j); //é”™è¯¯ f(k); //æ­£ç¡® 4.4 ä¼ é€’å¤šç»´æ•°ç»„ 1 void print(int (*matrix)[10] , int rowSize); 5ã€mainå¤„ç†å‘½ä»¤è¡Œé€‰é¡¹ int main(int argc, char *argv[]){...} ç¬¬ä¸€ä¸ªå½¢å‚ä»£è¡¨å‚æ•°çš„ä¸ªæ•°ï¼›ç¬¬äºŒä¸ªå½¢å‚æ˜¯å‚æ•°Cé£æ ¼å­—ç¬¦ä¸²æ•°ç»„ã€‚ 6ã€å¯å˜å½¢å‚ å¦‚æœå‡½æ•°çš„å®å‚æ•°é‡æœªçŸ¥ä½†æ˜¯å…¨éƒ¨å®å‚çš„ç±»å‹éƒ½ç›¸åŒï¼Œå¯ä»¥ä½¿ç”¨initializer_listç±»å‹çš„å½¢å‚ï¼Œè¿™æ˜¯ä¸€ç§æ ‡å‡†åº“ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºæŸç§ç‰¹å®šç±»å‹çš„å€¼çš„æ•°ç»„ã€‚å®šèƒ½ä¸€åœ¨åŒåå¤´æ–‡ä»¶ä¸­ã€‚\ninitializer_listæä¾›çš„æ“ä½œï¼ˆC++11ï¼‰ï¼š\næ“ä½œ è§£é‡Š initializer_list\u0026lt;T\u0026gt; lst; é»˜è®¤åˆå§‹åŒ–ï¼›Tç±»å‹å…ƒç´ çš„ç©ºåˆ—è¡¨ initializer_list\u0026lt;T\u0026gt; lst{a,b,c...}; lstçš„å…ƒç´ æ•°é‡å’Œåˆå§‹å€¼ä¸€æ ·å¤šï¼›lstçš„å…ƒç´ æ˜¯å¯¹åº”åˆå§‹å€¼çš„å‰¯æœ¬ï¼›åˆ—è¡¨ä¸­çš„å…ƒç´ æ˜¯constã€‚ lst2(lst) æ‹·è´æˆ–èµ‹å€¼ä¸€ä¸ªinitializer_listå¯¹è±¡ä¸ä¼šæ‹·è´åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼›æ‹·è´åï¼ŒåŸå§‹åˆ—è¡¨å’Œå‰¯æœ¬å…±äº«å…ƒç´ ã€‚ lst2 = lst åŒä¸Š lst.size() åˆ—è¡¨ä¸­çš„å…ƒç´ æ•°é‡ lst.begin() è¿”å›æŒ‡å‘lstä¸­é¦–å…ƒç´ çš„æŒ‡é’ˆ lst.end() è¿”å›æŒ‡å‘lstä¸­å¾®å…ƒç´ ä¸‹ä¸€ä½ç½®çš„æŒ‡é’ˆ initializer_listä½¿ç”¨demoï¼š\n1 2 3 4 5 6 7 8 void err_msg(ErrCode e, initializer_list\u0026lt;string\u0026gt; il){ cout \u0026lt;\u0026lt; e.msg \u0026lt;\u0026lt; endl; for (auto bed = il.begin(); beg != il.end(); ++ beg) cout \u0026lt;\u0026lt; *beg \u0026lt;\u0026lt; \u0026#34; \u0026#34;; cout \u0026lt;\u0026lt; endl; } err_msg(ErrCode(0), {\u0026#34;functionX\u0026#34;, \u0026#34;okay}); æ‰€æœ‰å®å‚ç±»å‹ç›¸åŒï¼Œå¯ä»¥ä½¿ç”¨ initializer_listçš„æ ‡å‡†åº“ç±»å‹ã€‚ å®å‚ç±»å‹ä¸åŒï¼Œå¯ä»¥ä½¿ç”¨å¯å˜å‚æ•°æ¨¡æ¿ã€‚ çœç•¥å½¢å‚ç¬¦ï¼š ...ï¼Œä¾¿äºC++è®¿é—®æŸäº›Cä»£ç ï¼Œè¿™äº›Cä»£ç ä½¿ç”¨äº† varargsçš„Cæ ‡å‡†åŠŸèƒ½ã€‚ ä¸‰ã€è¿”å›ç±»å‹å’Œreturnè¯­å¥ 1ã€æ— è¿”å›å€¼å‡½æ•° æ²¡æœ‰è¿”å›å€¼çš„ returnè¯­å¥åªèƒ½ç”¨åœ¨è¿”å›ç±»å‹æ˜¯ voidçš„å‡½æ•°ä¸­ï¼Œè¿”å› voidçš„å‡½æ•°ä¸è¦æ±‚éå¾—æœ‰ returnè¯­å¥ã€‚\n2ã€æœ‰è¿”å›å€¼å‡½æ•° returnè¯­å¥çš„è¿”å›å€¼çš„ç±»å‹å¿…é¡»å’Œå‡½æ•°çš„è¿”å›ç±»å‹ç›¸åŒï¼Œæˆ–è€…èƒ½å¤Ÿéšå¼åœ°è½¬æ¢æˆå‡½æ•°çš„è¿”å›ç±»å‹ã€‚\n2.1 å€¼æ˜¯å¦‚ä½•è¢«è¿”å›çš„ ![[c++ ä¸´æ—¶å¯¹è±¡ä»¥åŠå¼•ç”¨çš„ä¸€äº›çŸ¥è¯†]] è¿”å›çš„å€¼ç”¨äºåˆå§‹åŒ–è°ƒç”¨ç‚¹çš„ä¸€ä¸ªä¸´æ—¶é‡(é™¤äº†æŒ‡é’ˆå’Œå¼•ç”¨)ï¼Œè¯¥ä¸´æ—¶é‡å°±æ˜¯å‡½æ•°è°ƒç”¨çš„ç»“æœã€‚\nå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªstringå¯¹è±¡ï¼Œæ„å‘³ç€è¿”å›å€¼å°†è¢«æ‹·è´åˆ°è°ƒç”¨ç‚¹ï¼Œå› æ­¤ï¼Œè¯¥å‡½æ•°è¿”å›wordçš„å‰¯æœ¬æˆ–è€…ä¸€ä¸ªæœªå‘½åçš„ä¸´æ—¶stringå¯¹è±¡\n1 2 3 4 5 6 7 string make_plural(size_t ctr , const string \u0026amp;word, const string \u0026amp;ending) { return (ctr \u0026gt; 1) ? word+ending : word; } string word = make_plural(0,word,\u0026#34;s\u0026#34;); å¦‚æœå‡½æ•°è¿”å›å¼•ç”¨ï¼Œè¯¥å¼•ç”¨ä»…æ˜¯å®ƒæ‰€å¼•ç”¨å¯¹è±¡çš„ä¸€ä¸ªåˆ«å\n2.2 ä¸è¦è¿”å›å±€éƒ¨å¯¹è±¡çš„å¼•ç”¨æˆ–æŒ‡é’ˆ 1 2 3 4 5 6 7 8 9 // ä¸¥é‡é”™è¯¯ï¼šè¿™ä¸ªå‡½æ•°è¯•å›¾è¿”å›å±€éƒ¨å¯¹è±¡çš„å¼•ç”¨ const string \u0026amp;mainp() { string ret ; if(!ret.empty()) return ret; else return \u0026#34;Empty\u0026#34;; } è¿”å›å±€éƒ¨å¯¹è±¡çš„å¼•ç”¨æ˜¯é”™è¯¯çš„ï¼›åŒæ ·ï¼Œè¿”å›å±€éƒ¨å¯¹è±¡çš„æŒ‡é’ˆä¹Ÿæ˜¯é”™è¯¯çš„ã€‚ ä¸€æ—¦å‡½æ•°å®Œæˆï¼Œå±€éƒ¨å¯¹è±¡è¢«é‡Šæ”¾ï¼ŒæŒ‡é’ˆå°†æŒ‡å‘ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡ã€‚è¦æƒ³ç¡®ä¿è¿”å›å€¼çš„å®‰å…¨ï¼Œä¸å¦¨æé—®ï¼šå¼•ç”¨æ‰€å¼•ï¼ˆæŒ‡é’ˆæ‰€æŒ‡å‘ï¼‰çš„æ˜¯åœ¨å‡½æ•°ä¹‹å‰å·²ç»å­˜åœ¨çš„å“ªä¸ªå¯¹è±¡ï¼Ÿ\nâš ï¸ä¸è¦ï¼Œè€Œä¸æ˜¯ä¸èƒ½ ![[C++ä¸­è¿”å›ä¸´æ—¶å˜é‡æŒ‡é’ˆé—®é¢˜]]\n2.3 è¿”å›ç±»ç±»å‹çš„å‡½æ•°å’Œè°ƒç”¨è¿ç®—ç¬¦ 1 2 //è°ƒç”¨stringå¯¹è±¡çš„sizeæˆå‘˜ï¼Œè¯¥stringå¯¹è±¡æ˜¯ç”±shorterStringå‡½æ•°è¿”å›çš„ auto sz = shorterString(s1,s2).size(); 2.4 å¼•ç”¨è¿”å›å·¦å€¼ å‡½æ•°çš„è¿”å›ç±»å‹å†³å®šå‡½æ•°è°ƒç”¨æ˜¯å¦æ˜¯å·¦å€¼ã€‚==è°ƒç”¨ä¸€ä¸ªè¿”å›å¼•ç”¨çš„å‡½æ•°å¾—åˆ°å·¦å€¼==ï¼›å…¶ä»–è¿”å›ç±»å‹å¾—åˆ°å³å€¼ã€‚\n2.5 åˆ—è¡¨åˆå§‹åŒ–è¿”å›å€¼ å‡½æ•°å¯ä»¥è¿”å›èŠ±æ‹¬å·åŒ…å›´çš„å€¼çš„åˆ—è¡¨ã€‚ï¼ˆC++11ï¼‰ æ­¤å¤„çš„åˆ—è¡¨ä¹Ÿç”¨æ¥å¯¹è¡¨ç¤ºå‡½æ•°è¿”å›çš„ä¸´æ—¶é‡è¿›è¡Œåˆå§‹åŒ–\n1 2 3 4 5 6 7 8 9 10 vector\u0026lt;string\u0026gt; process() { //string expected , actual if(expected.empty()) return {}; else if(expected == actual) return {\u0026#34;functionX\u0026#34; ,\u0026#34;okay\u0026#34;}; else return {\u0026#34;fuctionX\u0026#34;,expected,actual}; } å¦‚æœå‡½æ•°è¿”å›çš„æ˜¯å†…ç½®ç±»å‹,åˆ™èŠ±æ‹¬å·åŒ…å›´çš„åˆ—è¡¨æœ€å¤šåŒ…å«ä¸€ä¸ªå€¼ï¼Œè€Œä¸”è¯¥å€¼æ‰€å ç©ºé—´ä¸åº”è¯¥å¤§äºç›®æ ‡ç±»å‹çš„ç©ºé—´ã€‚å¦‚æœå‡½æ•°è¿”å›çš„æ˜¯ç±»ç±»å‹ï¼Œç”±ç±»æœ¬èº«å®šä¹‰åˆå§‹å€¼å¦‚ä½•ä½¿ç”¨ã€‚\n2.6 ä¸»å‡½æ•°mainçš„è¿”å›å€¼ mainå‡½æ•°å¯ä»¥æ²¡æœ‰returnè¯­å¥ç›´æ¥ç»“æŸ å¦‚æœç»“å°¾æ²¡æœ‰returnï¼Œç¼–è¯‘å™¨å°†éšå¼åœ°æ’å…¥ä¸€æ¡è¿”å›0çš„returnè¯­å¥ã€‚è¿”å›0ä»£è¡¨æ‰§è¡ŒæˆåŠŸã€‚mainçš„è¿”å›å€¼å¯ä»¥çœ‹ä½œçŠ¶æ€æŒ‡ç¤ºå™¨ï¼Œ0è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–è¡¨ç¤ºå¤±è´¥ï¼Œå…¶ä¸­é0çš„å…·ä½“å«ä¹‰æ ¹æ®æœºå™¨å®šå¤ºï¼Œå¦‚æœæœŸæœ›è¿”å›å€¼ä¸æœºå™¨æ— å…³ï¼Œåˆ™å¯è°ƒç”¨cstdlibå¤´æ–‡ä»¶ä¸­å®šä¹‰çš„ä¸¤ä¸ªé¢„å¤„ç†å˜é‡\n1 2 3 4 5 6 7 int main() { if(some_failure) return EXIT_FAILURE; else return EXIT_SUCCESS; } å…¶ä¸ºé¢„å¤„ç†å˜é‡ï¼Œæ‰€ä»¥ä¸ç”¨åœ¨å‰é¢æ·»åŠ std::\n2.7 è¿”å›æ•°ç»„æŒ‡é’ˆ å› ä¸ºæ•°ç»„ä¸èƒ½è¢«æ‹·è´ï¼Œæ‰€ä»¥å‡½æ•°ä¸èƒ½è¿”å›æ•°ç»„ã€‚ä¸è¿‡ï¼Œå‡½æ•°å¯ä»¥è¿”å›æ•°ç»„çš„æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚è™½ç„¶ä»è¯­æ³•ä¸Šæ¥è¯´ï¼Œè¦æƒ³å®šä¹‰ä¸€ä¸ªè¿”å›æ•°ç»„çš„æŒ‡é’ˆæˆ–å¼•ç”¨ çš„å‡½æ•°æ¯”è¾ƒçƒ¦çï¼Œä½†æ˜¯æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥ç®€åŒ–è¿™ä¸€ä»»åŠ¡ï¼Œå…¶ä¸­æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç±»å‹åˆ«åï¼š\n1 2 3 typedef int arrT[10]; //arrTæ˜¯åŒ…å«10ä¸ªæ•´æ•°çš„æ•°ç»„ using arrT = int[10]; //ç­‰ä»·å£°æ˜ arrT* func() {...} //funcè¿”å›ä¸€ä¸ªæŒ‡å‘å«æœ‰10ä¸ªæ•´æ•°çš„æ•°ç»„æŒ‡é’ˆ å¦‚æœä¸ä½¿ç”¨ç±»å‹åˆ«å\n1 int (*func(int i))[10] func (int i)è¡¨ç¤ºè°ƒç”¨funcå‡½æ•°æ—¶éœ€è¦ä¸€ä¸ªintç±»å‹çš„å®å‚ã€‚ (*func(int i))æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¯¹å‡½æ•°è°ƒç”¨çš„ç»“æœæ‰§è¡Œè§£å¼•ç”¨æ“ä½œã€‚ (*func(int i)) [10]è¡¨ç¤ºè§£å¼•ç”¨funcçš„è°ƒç”¨å°†å¾—åˆ°ä¸€ä¸ªå¤§å°æ˜¯10çš„æ•°ç»„, int (*func (int i)) [10]è¡¨ç¤ºæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯intç±»å‹ ä½¿ç”¨ decltype å¦‚æœæˆ‘ä»¬çŸ¥é“å‡½æ•°è¿”å›çš„æŒ‡é’ˆå°†æŒ‡å‘å“ªä¸ªæ•°ç»„ï¼Œå°±å¯ä»¥ä½¿ç”¨decltypeå…³é”®å­—å£°æ˜è¿”å›ç±»å‹\n1 2 3 4 5 6 int odd[] = {1,3,5,7,9}; int even[] = {2,4,6,8,10}; decltype(odd) *arrPtr(int i) { return ( i%2 ) ? \u0026amp;odd : \u0026amp;even; } å°¾ç½®è¿”å›ç±»å‹ ä½¿ç”¨å°¾ç½®è¿”å›ç±»å‹ (trailing return type)ã€‚ä»»ä½•å‡½æ•°çš„å®šä¹‰éƒ½èƒ½ä½¿ç”¨ï¼Œä½†æ˜¯è¿™ç§å½¢å¼å¯¹è¿”å›ç±»å‹å¤æ‚çš„å‡½æ•°æœ€æœ‰æ•ˆï¼Œæ¯”å¦‚è¿”æ˜¯æ•°ç»„çš„æŒ‡é’ˆæˆ–è€…æ•°ç»„çš„å¼•ç”¨ã€‚å°¾ç½®è¿”å›ç±»å‹è·Ÿåœ¨å½¢å‚åˆ—è¡¨åé¢å¹¶ä»¥-\u0026gt;ç¬¦å·å¼€å¤´ã€‚ä¸ºäº†è¡¨ç¤ºå‡½æ•°çœŸæ­£çš„è¿”å›ç±»å‹è·Ÿåœ¨å½¢å‚åˆ—è¡¨ä¹‹åï¼Œåœ¨æœ¬åº”è¯¥å‡ºç°è¿”å›ç±»å‹çš„åœ°æ–¹æ”¾ç½®ä¸€ä¸ªautoï¼š\n1 auto func(int i) -\u0026gt; int(*)[10] å››ã€å‡½æ•°é‡è½½ 1ã€é‡è½½æ¦‚å¿µ é‡è½½ï¼šå¦‚æœåŒä¸€ä½œç”¨åŸŸå†…å‡ ä¸ªå‡½æ•°åå­—ç›¸åŒä½†å½¢å‚åˆ—è¡¨ä¸åŒï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé‡è½½ï¼ˆoverloadï¼‰å‡½æ•°ã€‚ mainå‡½æ•°ä¸èƒ½é‡è½½ã€‚ é‡è½½å’Œconstå½¢å‚ï¼š ä¸€ä¸ªæœ‰é¡¶å±‚constçš„å½¢å‚å’Œæ²¡æœ‰å®ƒçš„å‡½æ•°æ— æ³•åŒºåˆ†ã€‚ Record lookup(Phone* const)å’Œ Record lookup(Phone*)æ— æ³•åŒºåˆ†ã€‚ ç›¸åï¼Œæ˜¯å¦æœ‰æŸä¸ªåº•å±‚constå½¢å‚å¯ä»¥åŒºåˆ†ã€‚ Record lookup(Account*)å’Œ Record lookup(const Account*)å¯ä»¥åŒºåˆ†ã€‚ é‡è½½å’Œä½œç”¨åŸŸï¼šè‹¥åœ¨å†…å±‚ä½œç”¨åŸŸä¸­å£°æ˜åå­—ï¼Œå®ƒå°†éšè—å¤–å±‚ä½œç”¨åŸŸä¸­å£°æ˜çš„åŒåå®ä½“ï¼Œåœ¨ä¸åŒçš„ä½œç”¨åŸŸä¸­æ— æ³•é‡è½½å‡½æ•°åã€‚ 2ã€å‡½æ•°åŒ¹é… é‡è½½å‡½æ•°åŒ¹é…çš„ä¸‰ä¸ªæ­¥éª¤ï¼š1.å€™é€‰å‡½æ•°ï¼›2.å¯è¡Œå‡½æ•°ï¼›3.å¯»æ‰¾æœ€ä½³åŒ¹é…ã€‚ å€™é€‰å‡½æ•°ï¼šé€‰å®šæœ¬æ¬¡è°ƒç”¨å¯¹åº”çš„é‡è½½å‡½æ•°é›†ï¼Œé›†åˆä¸­çš„å‡½æ•°ç§°ä¸ºå€™é€‰å‡½æ•°ï¼ˆcandidate functionï¼‰ã€‚ å¯è¡Œå‡½æ•°ï¼šè€ƒå¯Ÿæœ¬æ¬¡è°ƒç”¨æä¾›çš„å®å‚ï¼Œé€‰å‡ºå¯ä»¥è¢«è¿™ç»„å®å‚è°ƒç”¨çš„å‡½æ•°ï¼Œæ–°é€‰å‡ºçš„å‡½æ•°ç§°ä¸ºå¯è¡Œå‡½æ•°ï¼ˆviable functionï¼‰ã€‚ å¯»æ‰¾æœ€ä½³åŒ¹é…ï¼šåŸºæœ¬æ€æƒ³ï¼šå®å‚ç±»å‹å’Œå½¢å‚ç±»å‹è¶Šæ¥è¿‘ï¼Œå®ƒä»¬åŒ¹é…åœ°è¶Šå¥½ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 string read(); void print(const string \u0026amp;); void print(double); void fooBar(int val) { bool read = false; string s = read(); //WRONG void print(int); print(\u0026#34;Value:\u0026#34;); //WRONG print(val); print(3.14); } äº”ã€ç‰¹æ®Šç”¨é€”è¯­è¨€ç‰¹æ€§ 1ã€é»˜è®¤å®å‚ string screen(sz ht = 24, sz wid = 80, char backgrnd = ' '); ä¸€æ—¦æŸä¸ªå½¢å‚è¢«èµ‹äºˆäº†é»˜è®¤å€¼ï¼Œé‚£ä¹ˆå®ƒä¹‹åçš„å½¢å‚éƒ½å¿…é¡»è¦æœ‰é»˜è®¤å€¼ã€‚ 2ã€å†…è”ï¼ˆinlineï¼‰å‡½æ•° æ™®é€šå‡½æ•°çš„ç¼ºç‚¹ï¼šè°ƒç”¨å‡½æ•°æ¯”æ±‚è§£ç­‰ä»·è¡¨è¾¾å¼è¦æ…¢å¾—å¤šã€‚ inlineå‡½æ•°å¯ä»¥é¿å…å‡½æ•°è°ƒç”¨çš„å¼€é”€ï¼Œå¯ä»¥è®©ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å†…è”åœ°å±•å¼€è¯¥å‡½æ•°ã€‚ inlineå‡½æ•°åº”è¯¥åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰ã€‚ 1 2 cout \u0026lt;\u0026lt; shorterString(s1,s2)\u0026lt;\u0026lt;endl; //inline cout \u0026lt;\u0026lt; (s1.size() \u0026lt; s2.size() ? s1 : s2) \u0026lt;\u0026lt;endl; //ç¼–è¯‘æ—¶ 3ã€constexprå‡½æ•° æŒ‡èƒ½ç”¨äºå¸¸é‡è¡¨è¾¾å¼çš„å‡½æ•°ã€‚ç¼–è¯‘å™¨ä¼šæŠŠæ‰€æœ‰è°ƒç”¨constexprå‡½æ•°çš„åœ°æ–¹æ›¿æ¢æˆç»“æœå€¼ï¼Œè¢«éšå¼çš„æŒ‡å®šæˆå†…è”å‡½æ•° å‡½æ•°çš„è¿”å›ç±»å‹åŠæ‰€æœ‰å½¢å‚ç±»å‹éƒ½è¦æ˜¯å­—é¢å€¼ç±»å‹ï¼Œå¹¶ä¸”æœ‰ä¸”ä»…æœ‰ä¸€æ¡returnè¯­å¥ 1 2 3 4 5 6 7 8 constexpr int new_sz() {return 42;} constexpr int foo = new new_sz(); //fooæ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ //è¿”å›å€¼å¯ä»¥ä¸æ˜¯å¸¸é‡ constexpr size_t scale(size_t cnt){return new_sz()*cnt;} int arr[scale(2)]; int i =2 ; int a2[scale(i)]; //WRONG constexprå‡½æ•°åº”è¯¥åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰ã€‚ 4ã€è°ƒè¯•å¸®åŠ© 4.1 assert é¢„å¤„ç†å®ï¼ˆpreprocessor macroï¼‰ assert(expr); å¦‚æœexprä¸ºå‡ï¼ˆ0ï¼‰ï¼Œè¾“å‡ºä¿¡æ¯å¹¶ç»ˆæ­¢ç¨‹åºçš„æ‰§è¡Œ å¦‚æœä¸ºçœŸï¼ˆ1ï¼‰ï¼Œä»€ä¹ˆä¹Ÿä¸åš å®šä¹‰åœ¨cassertå¤´æ–‡ä»¶ä¸­ï¼Œé¢„å¤„ç†å™¨è€Œä¸æ˜¯ç¼–è¯‘å™¨ç®¡ç†\n4.2 NDEBUG assertçš„è¡Œä¸ºä¾èµ–äºä¸€ä¸ªåä¸ºNDEBUGçš„é¢„å¤„ç†å˜é‡ï¼Œè¯¥å˜é‡å®šä¹‰ï¼Œåˆ™ä¸æ˜¯æ‰§è¡Œï¼Œæœªå®šä¹‰ï¼Œåˆ™æ‰§è¡Œæ£€æŸ¥\nå®šä¹‰NDEBUGçš„æ–¹æ³•\nåˆ©ç”¨#define NDEBUG å…³é—­assert åˆ©ç”¨ç¼–è¯‘å™¨å‚æ•°æ§åˆ¶è°ƒè¯•çŠ¶æ€ï¼š CC -D NDEBUG main.cå¯ä»¥å®šä¹‰è¿™ä¸ªå˜é‡NDEBUGã€‚ åˆ©ç”¨NDEBUGç¼–å†™æ¡ä»¶è°ƒè¯•ä»£ç  å¦‚æœå®šä¹‰äº†NDEBUGï¼Œå¿½ç•¥æ‰è°ƒè¯•ä»£ç  å¦‚æœæœªå®šä¹‰NDEBUGï¼Œæ‰§è¡Œ #ifndef å’Œ #endifä¹‹é—´çš„ä»£ç \n1 2 3 4 5 void print(){ #ifndef NDEBUG cerr \u0026lt;\u0026lt; __func__ \u0026lt;\u0026lt; \u0026#34;...\u0026#34; \u0026lt;\u0026lt; endl; #endif } é¢„å¤„ç†å™¨å®šä¹‰çš„ä¸€äº›å˜é‡\nå˜é‡å å«ä¹‰ __FILE__ å­˜æ”¾æ–‡ä»¶åçš„å­—ç¬¦ä¸²å­—é¢é‡ __LINE__ å­˜æ”¾å½“å‰è¡Œå·çš„æ•´å‹å­—é¢å€¼ __FILE__ å­˜æ”¾æ–‡ä»¶ç¼–è¯‘æ—¶é—´çš„å­—ç¬¦ä¸²å­—é¢å€¼ __FILE__ å­˜æ”¾æ–‡ä»¶ç¼–è¯‘æ—¥æœŸçš„å­—ç¬¦ä¸²å­—é¢é‡ å…­ã€å‡½æ•°æŒ‡é’ˆ 1ã€å‡½æ•°æŒ‡é’ˆ æ˜¯æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆã€‚ bool (*pf)(const string \u0026amp;, const string \u0026amp;); æ³¨ï¼šä¸¤ç«¯çš„æ‹¬å·ä¸å¯å°‘ã€‚ å°†å‡½æ•°åä½œä¸ºä¸€ä¸ªå€¼ä½¿ç”¨æ—¶ï¼Œè¯¥å‡½æ•°è‡ªåŠ¨è½¬æ¢ä¸ºæŒ‡é’ˆ\n1 2 bool *pf = func; bool *pf = \u0026amp;func; //\u0026amp;å¯é€‰ 2ã€å‡½æ•°æŒ‡é’ˆå½¢å‚ å½¢å‚ä¸­ä½¿ç”¨å‡½æ•°å®šä¹‰æˆ–è€…å‡½æ•°æŒ‡é’ˆå®šä¹‰æ•ˆæœä¸€æ ·ã€‚\n1 2 3 4 5 6 7 8 void useBigger(const string \u0026amp;s1 , const string \u0026amp;s2, bool pf(const string \u0026amp; , const string \u0026amp;)); void useBigger(const string \u0026amp;s1 , const string \u0026amp;s2, bool (*pf)(const string \u0026amp; , const string \u0026amp;)); //è°ƒç”¨ useBigger(s1,s2,func); è¿‡äºå†—ä½™çš„å½¢å‚ï¼Œå¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åæˆ–è€…decltypeæ¥ç®€åŒ–\n1 2 3 4 5 6 7 8 9 10 11 12 13 //func1 , func2 , funcU1 éƒ½æ˜¯å‡½æ•°ç±»å‹ typedef bool func1(const string \u0026amp; , const string \u0026amp;); typedef decltype(lengthCompare) func2; using funcU1 = bool(const string \u0026amp; , const tring \u0026amp;); //func3 , func4 , funcU2æ˜¯æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ typedef bool(*func3)(const string \u0026amp; , const string \u0026amp;); typedef decltype(lengthCompare) *func4; using funcU2 = bool(*)(const string \u0026amp; , const tring \u0026amp;); //æ›´åŠ ç®€æ´çš„å½¢å¼ void useBigger(const string \u0026amp;s1 , const string \u0026amp;s2, func1); void useBigger(const string \u0026amp;s1 , const string \u0026amp;s2, func3); void useBigger(const string \u0026amp;s1 , const string \u0026amp;s2, funcU1); void useBigger(const string \u0026amp;s1 , const string \u0026amp;s2, funcU2); è¿™é‡Œç›´æ¥ç»™å‡½æ•°åå­—ä½œä¸ºå½¢å‚ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºå‡½æ•°æŒ‡é’ˆ\n3ã€è¿”å›æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ ç›´æ¥å£°æ˜\n1 int (*f1(int))(int *,int*); ç±»å‹åˆ«å å’Œå½¢å‚ä¸åŒï¼Œè¿”å›ç±»å‹ä¸ä¼šè‡ªåŠ¨è¯†åˆ«å‡½æ•°åä¸ºå‡½æ•°æŒ‡é’ˆç±»å‹ï¼Œæ‰€ä»¥è¦æ˜ç¡®çš„å®šä¹‰\n1 2 3 4 5 using F = int(int *, int*); using Fp = int(*)(int *,int*); Fp f1(int); F f2(int); //WRONG å°¾ç½®è¿”å›ç±»å‹\n1 auto f1(int)-\u0026gt;int(*)(int *,int*); 4ã€é‡è½½å‡½æ•°çš„æŒ‡é’ˆ å®šä¹‰æŒ‡å‘é‡è½½å‡½æ•°çš„æŒ‡é’ˆå¿…é¡»ç²¾å‡†åŒ¹é…\n1 2 3 4 5 6 7 void ff(int *); void ff(unsigned int); void (*pf1)(unsigned int) = ff; //pf1æŒ‡å‘ff(unsigned int) void (*pf2)(int) = ff; //WRONG double (*pf3)(int *) =ff; //WRONG ","pubDate":"2021-09-13","title":"ã€C++ Primer(edition 5) 06ã€‘å‡½æ•°"},{"link":"https://cnjslw.github.io/posts/%E8%AF%AD%E5%8F%A5/","plain":"ç®€å•è¯­å¥ è¡¨è¾¾å¼è¯­å¥ï¼šä¸€ä¸ªè¡¨è¾¾å¼æœ«å°¾åŠ ä¸Šåˆ†å·ï¼Œå°±å˜æˆäº†è¡¨è¾¾å¼è¯­å¥ã€‚ ç©ºè¯­å¥ï¼šåªæœ‰ä¸€ä¸ªå•ç‹¬çš„åˆ†å·ã€‚ å¤åˆè¯­å¥ï¼ˆå—ï¼‰ï¼šç”¨èŠ±æ‹¬å· {}åŒ…è£¹èµ·æ¥çš„è¯­å¥å’Œå£°æ˜çš„åºåˆ—ã€‚ä¸€ä¸ªå—å°±æ˜¯ä¸€ä¸ªä½œç”¨åŸŸã€‚ æ¡ä»¶è¯­å¥ æ‚¬å‚elseï¼ˆdangling elseï¼‰ï¼šç”¨æ¥æè¿°åœ¨åµŒå¥—çš„if elseè¯­å¥ä¸­ï¼Œå¦‚æœifæ¯”elseå¤šæ—¶å¦‚ä½•å¤„ç†çš„é—®é¢˜ã€‚C++ä½¿ç”¨çš„æ–¹æ³•æ˜¯elseåŒ¹é…æœ€è¿‘æ²¡æœ‰é…å¯¹çš„ifã€‚ è¿­ä»£è¯­å¥ whileï¼šå½“ä¸ç¡®å®šåˆ°åº•è¦è¿­ä»£å¤šå°‘æ¬¡æ—¶ï¼Œä½¿ç”¨ whileå¾ªç¯æ¯”è¾ƒåˆé€‚ï¼Œæ¯”å¦‚è¯»å–è¾“å…¥çš„å†…å®¹ã€‚ forï¼š forè¯­å¥å¯ä»¥çœç•¥æ‰ init-statementï¼Œ conditionå’Œ expressionçš„ä»»ä½•ä¸€ä¸ªï¼›ç”šè‡³å…¨éƒ¨ã€‚ èŒƒå›´forï¼š for (declaration: expression) statement è·³è½¬è¯­å¥ breakï¼šbreakè¯­å¥è´Ÿè´£ç»ˆæ­¢ç¦»å®ƒæœ€è¿‘çš„whileã€do whileã€foræˆ–è€…switchè¯­å¥ï¼Œå¹¶ä»è¿™äº›è¯­å¥ä¹‹åçš„ç¬¬ä¸€æ¡è¯­å¥å¼€å§‹ç»§ç»­æ‰§è¡Œã€‚ continueï¼šç»ˆæ­¢æœ€è¿‘çš„å¾ªç¯ä¸­çš„å½“å‰è¿­ä»£å¹¶ç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚åªèƒ½åœ¨whileã€do whileã€forå¾ªç¯çš„å†…éƒ¨ã€‚ tryè¯­å¥å—å’Œå¼‚å¸¸å¤„ç† throwè¡¨è¾¾å¼ï¼šå¼‚å¸¸æ£€æµ‹éƒ¨åˆ†ä½¿ç”¨ throwè¡¨è¾¾å¼æ¥è¡¨ç¤ºå®ƒé‡åˆ°äº†æ— æ³•å¤„ç†çš„é—®é¢˜ã€‚æˆ‘ä»¬è¯´ throwå¼•å‘ raiseäº†å¼‚å¸¸ã€‚ tryè¯­å¥å—ï¼šä»¥ tryå…³é”®è¯å¼€å§‹ï¼Œä»¥ä¸€ä¸ªæˆ–å¤šä¸ª catchå­—å¥ç»“æŸã€‚ tryè¯­å¥å—ä¸­çš„ä»£ç æŠ›å‡ºçš„å¼‚å¸¸é€šå¸¸ä¼šè¢«æŸä¸ª catchæ•è·å¹¶å¤„ç†ã€‚ catchå­å¥ä¹Ÿè¢«ç§°ä¸ºå¼‚å¸¸å¤„ç†ä»£ç ã€‚ å¼‚å¸¸ç±»ï¼šç”¨äºåœ¨ throwè¡¨è¾¾å¼å’Œç›¸å…³çš„ catchå­å¥ä¹‹é—´ä¼ é€’å¼‚å¸¸çš„å…·ä½“ä¿¡æ¯ã€‚ 1 2 3 4 Sales_item item1,item2; cin \u0026gt;\u0026gt; item1\u0026gt;\u0026gt;item2; if(item1.isbn() != item2.isbn()) throw runtime_error(\u0026#34;Data must refer to same ISBN\u0026#34;); runtime_errorï¼šå¼‚å¸¸ç±»ï¼ŒæŠ›å‡ºå¼‚å¸¸å°†ç»ˆæ­¢å½“å‰å‡½æ•°å¹¶å°†æ§åˆ¶æƒç»™èƒ½å¤„ç†è¯¥å¼‚å¸¸çš„ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 while(cin\u0026gt;\u0026gt;iteml\u0026gt;\u0026gt;item2){ try{ //...... }catch(runtime_error err){ cout \u0026lt;\u0026lt; err.what() \u0026lt;\u0026lt; \u0026#34;\\nTry Agiain?\u0026#34;\u0026lt;\u0026lt;endl; char c; cin \u0026gt;\u0026gt; c; if(!cin || c==\u0026#39;n\u0026#39;) break; } } æ ‡å‡†å¼‚å¸¸ ã€ŠC++Primerï¼ˆedition 5ï¼‰ã€‹P197\n","pubDate":"2021-09-12","title":"ã€C++ Primer(edition 5) 05ã€‘è¯­å¥"},{"link":"https://cnjslw.github.io/posts/%E8%A1%A8%E8%BE%BE%E5%BC%8F/","plain":"è¡¨è¾¾å¼ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç®—å¯¹è±¡(operand)ç»„æˆï¼Œå¯¹è¡¨è¾¾å¼æ±‚å€¼å°†å¾—åˆ°ä¸€ä¸ªç»“æœ(result )ã€‚å­—é¢å€¼å’Œå˜é‡æ˜¯æœ€ç®€å•çš„è¡¨è¾¾å¼(expression),å…¶ç»“æœå°±æ˜¯å­—é¢å€¼å’Œå˜é‡çš„å€¼ã€‚æŠŠä¸€ä¸ªè¿ç®—ç¬¦(operator)å’Œä¸€ä¸ªæˆ–å¤šä¸ªè¿ç®—å¯¹è±¡ç»„åˆèµ·æ¥å¯ä»¥ç”Ÿæˆè¾ƒå¤æ‚çš„è¡¨è¾¾å¼ã€‚ ^0c892c\nä¸€ã€è¡¨è¾¾å¼åŸºç¡€ è¿ç®—å¯¹è±¡è½¬æ¢ï¼šå°æ•´æ•°ç±»å‹ä¼šè¢«æå‡ä¸ºè¾ƒå¤§çš„æ•´æ•°ç±»å‹ é‡è½½è¿ç®—ç¬¦ï¼šå½“è¿ç®—ç¬¦ä½œç”¨åœ¨ç±»ç±»å‹çš„è¿ç®—å¯¹è±¡æ—¶ï¼Œç”¨æˆ·å¯ä»¥è‡ªè¡Œå®šä¹‰å…¶å«ä¹‰ã€‚ å·¦å€¼å’Œå³å€¼ï¼š Cä¸­åŸæ„ï¼šå·¦å€¼å¯ä»¥åœ¨è¡¨è¾¾å¼å·¦è¾¹ï¼Œå³å€¼ä¸èƒ½ã€‚ C++ï¼šå½“ä¸€ä¸ªå¯¹è±¡è¢«ç”¨ä½œå³å€¼çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯å¯¹è±¡çš„å€¼ï¼ˆå†…å®¹ï¼‰ï¼› è¢«ç”¨åšå·¦å€¼æ—¶ï¼Œç”¨çš„æ˜¯å¯¹è±¡çš„èº«ä»½ï¼ˆåœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼‰ã€‚ æ±‚å€¼é¡ºåºï¼šint i = f1() + f2() å…ˆè®¡ç®—f1() + f2(),å†è®¡ç®—int i = f1() + f2()ã€‚ä½†æ˜¯f1å’Œf2çš„è®¡ç®—å…ˆåä¸ç¡®å®š ä½†æ˜¯ï¼Œå¦‚æœf1ã€f2éƒ½å¯¹åŒä¸€å¯¹è±¡è¿›è¡Œäº†ä¿®æ”¹ï¼Œå› ä¸ºé¡ºåºä¸ç¡®å®šï¼Œæ‰€ä»¥ä¼šç¼–è¯‘å‡ºé”™ï¼Œæ˜¾ç¤ºæœªå®šä¹‰ äºŒã€ç®—æœ¯è¿ç®—ç¬¦ æº¢å‡ºï¼šå½“è®¡ç®—çš„ç»“æœè¶…å‡ºè¯¥ç±»å‹æ‰€èƒ½è¡¨ç¤ºçš„èŒƒå›´æ—¶å°±ä¼šäº§ç”Ÿæº¢å‡ºã€‚ boolç±»å‹ä¸åº”è¯¥å‚ä¸è®¡ç®— 1 2 3 4 bool b=true; bool b2=-b; //ä»ç„¶ä¸ºtrue //bä¸ºtrueï¼Œæå‡ä¸ºå¯¹åº”int=1ï¼Œ-b=-1 //b2=-1â‰ 0ï¼Œæ‰€ä»¥b2ä»æœªtrue å–ä½™è¿ç®—m%nï¼Œç»“æœç¬¦å·ä¸mç›¸åŒ ä¸‰ã€é€»è¾‘è¿ç®—ç¬¦ çŸ­è·¯æ±‚å€¼ï¼šé€»è¾‘ä¸è¿ç®—ç¬¦å’Œé€»è¾‘æˆ–è¿ç®—ç¬¦éƒ½æ˜¯å…ˆæ±‚å·¦ä¾§è¿ç®—å¯¹è±¡çš„å€¼å†æ±‚å³ä¾§è¿ç®—å¯¹è±¡çš„å€¼ï¼Œå½“ä¸”ä»…å½“å·¦ä¾§è¿ç®—å¯¹è±¡æ— æ³•ç¡®å®šè¡¨è¾¾å¼çš„ç»“æœæ—¶æ‰ä¼šè®¡ç®—å³ä¾§è¿ç®—å¯¹è±¡çš„å€¼ã€‚å…ˆå·¦å†å³ å°æŠ€å·§ï¼Œå£°æ˜ä¸ºå¼•ç”¨ç±»å‹å¯ä»¥é¿å…å¯¹å…ƒç´ çš„æ‹·è´ï¼Œå¦‚ä¸‹ï¼Œå¦‚stringç‰¹åˆ«å¤§æ—¶å¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ã€‚ 1 2 3 4 vector\u0026lt;string\u0026gt; text; for(const auto \u0026amp;s: text){ cout\u0026lt;\u0026lt;s; } å››ã€èµ‹å€¼è¿ç®—ç¬¦ èµ‹å€¼è¿ç®—çš„è¿”å›ç»“æœæ—¶å®ƒçš„å·¦ä¾§è¿ç®—å¯¹è±¡ï¼Œä¸”æ˜¯ä¸€ä¸ªå·¦å€¼ã€‚ç±»å‹ä¹Ÿå°±æ˜¯å·¦ä¾§å¯¹è±¡çš„ç±»å‹ã€‚ å¦‚æœèµ‹å€¼è¿ç®—çš„å·¦å³ä¾§è¿ç®—å¯¹è±¡ç±»å‹ä¸åŒï¼Œåˆ™å³ä¾§è¿ç®—å¯¹è±¡å°†è½¬æ¢æˆå·¦ä¾§è¿ç®—å¯¹è±¡çš„ç±»å‹ã€‚ èµ‹å€¼è¿ç®—ç¬¦æ»¡è¶³å³ç»“åˆå¾‹ï¼Œè¿™ç‚¹å’Œå…¶ä»–äºŒå…ƒè¿ç®—ç¬¦ä¸ä¸€æ ·ã€‚ ival = jval = 0;ç­‰ä»·äºival = (jval = 0); èµ‹å€¼è¿ç®—ä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œä½¿ç”¨å…¶å½“æ¡ä»¶æ—¶åº”è¯¥åŠ æ‹¬å·ã€‚ å¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼Œå¤åˆè¿ç®—ç¬¦åªæ±‚å€¼ä¸€æ¬¡ï¼Œæ™®é€šè¿ç®—ç¬¦æ±‚å€¼ä¸¤æ¬¡ã€‚ï¼ˆå¯¹æ€§èƒ½æœ‰ä¸€ç‚¹ç‚¹ç‚¹ç‚¹å½±å“ï¼‰ ä»»æ„å¤åˆè¿ç®—ç¬¦opç­‰ä»·äºa = a op b; äº”ã€é€’å¢é€’å‡è¿ç®—ç¬¦ å‰ç½®ç‰ˆæœ¬j = ++iï¼Œå…ˆåŠ ä¸€åèµ‹å€¼ åç½®ç‰ˆæœ¬j = i++ï¼Œå…ˆèµ‹å€¼ååŠ ä¸€ ä¼˜å…ˆä½¿ç”¨å‰ç½®ç‰ˆæœ¬ï¼Œåç½®å¤šä¸€æ­¥å‚¨å­˜åŸå§‹å€¼ã€‚ï¼ˆé™¤ééœ€è¦å˜åŒ–å‰çš„å€¼ï¼‰\næ··ç”¨è§£å¼•ç”¨å’Œé€’å¢è¿ç®—ç¬¦ *iter++ç­‰ä»·äº*(iter++)ï¼Œé€’å¢ä¼˜å…ˆçº§è¾ƒé«˜\n1 2 3 auto iter = vi.begin(); while (iter!=vi.end()\u0026amp;\u0026amp;*iter\u0026gt;=0) cout\u0026lt;\u0026lt;*iter++\u0026lt;\u0026lt;endl;\t// è¾“å‡ºå½“å‰å€¼ï¼ŒæŒ‡é’ˆå‘å‰ç§»1 ç®€æ´æ˜¯ä¸€ç§ç¾å¾·ï¼Œè¿½æ±‚ç®€æ´èƒ½é™ä½ç¨‹åºå‡ºé”™å¯èƒ½æ€§\nå…­ã€æˆå‘˜è®¿é—®è¿ç®—ç¬¦ ptr-\u0026gt;memç­‰ä»·äº(*ptr).mem\næ³¨æ„.è¿ç®—ç¬¦ä¼˜å…ˆçº§å¤§äº*ï¼Œæ‰€ä»¥è®°å¾—åŠ æ‹¬å·\nä¸ƒã€æ¡ä»¶è¿ç®—ç¬¦ æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ?:ï¼‰å…è®¸æˆ‘ä»¬æŠŠç®€å•çš„if-elseé€»è¾‘åµŒå…¥åˆ°å•ä¸ªè¡¨è¾¾å¼ä¸­å»ï¼ŒæŒ‰ç…§å¦‚ä¸‹å½¢å¼ï¼šcond? expr1: expr2\nå¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œå³ç»“åˆå¾‹ï¼Œä»å³å‘å·¦é¡ºåºç»„åˆ\n1 2 3 finalgrade = (grade \u0026gt; 90) ? \u0026#34;high pass\u0026#34;:(grade \u0026lt; 60) ? \u0026#34;fail\u0026#34; : \u0026#34;pass\u0026#34;; //ç­‰ä»·äº finalgrade = (grade \u0026gt; 90) ? \u0026#34;high pass\u0026#34;: ((grade \u0026lt; 60) ? \u0026#34;fail\u0026#34; : \u0026#34;pass\u0026#34;); è¾“å‡ºè¡¨è¾¾å¼ä½¿ç”¨æ¡ä»¶è¿ç®—ç¬¦è®°å¾—åŠ æ‹¬å·ï¼Œæ¡ä»¶è¿ç®—ç¬¦ä¼˜å…ˆçº§å¤ªä½ã€‚ å…«ã€ä½è¿ç®—ç¬¦ ç”¨äºæ£€æŸ¥å’Œè®¾ç½®äºŒè¿›åˆ¶ä½çš„åŠŸèƒ½ã€‚\nä½è¿ç®—ç¬¦æ˜¯ä½œç”¨äºæ•´æ•°ç±»å‹çš„è¿ç®—å¯¹è±¡ã€‚ äºŒè¿›åˆ¶ä½å‘å·¦ç§»ï¼ˆ\u0026lt;\u0026lt;ï¼‰æˆ–è€…å‘å³ç§»ï¼ˆ\u0026gt;\u0026gt;ï¼‰ï¼Œç§»å‡ºè¾¹ç•Œå¤–çš„ä½å°±è¢«èˆå¼ƒæ‰äº†ã€‚ ä½å–åï¼ˆ~ï¼‰ï¼ˆé€ä½æ±‚åï¼‰ã€ä¸ï¼ˆ\u0026amp;ï¼‰ã€æˆ–ï¼ˆ|ï¼‰ã€å¼‚æˆ–ï¼ˆ^ï¼‰ æœ‰ç¬¦å·æ•°è´Ÿå€¼å¯èƒ½ç§»ä½åå˜å·ï¼Œæ‰€ä»¥å¼ºçƒˆå»ºè®®ä½è¿ç®—ç¬¦ä»…ç”¨äºæ— ç¬¦å·æ•°ã€‚\nåº”ç”¨ï¼š\n1 2 3 4 5 unsigned long quiz1 = 0; // æ¯ä¸€ä½ä»£è¡¨ä¸€ä¸ªå­¦ç”Ÿæ˜¯å¦é€šè¿‡è€ƒè¯• 1UL \u0026lt;\u0026lt; 12; // ä»£è¡¨ç¬¬12ä¸ªå­¦ç”Ÿé€šè¿‡ quiz1 |= (1UL \u0026lt;\u0026lt; 12); // å°†ç¬¬12ä¸ªå­¦ç”Ÿç½®ä¸ºå·²é€šè¿‡ quiz1 \u0026amp;= ~(1UL \u0026lt;\u0026lt; 12); // å°†ç¬¬12ä¸ªå­¦ç”Ÿä¿®æ”¹ä¸ºæœªé€šè¿‡ bool stu12 = quiz1 \u0026amp; (1UL \u0026lt;\u0026lt; 12); // åˆ¤æ–­ç¬¬12ä¸ªå­¦ç”Ÿæ˜¯å¦é€šè¿‡ ä½è¿ç®—ç¬¦ä½¿ç”¨è¾ƒå°‘ï¼Œä½†æ˜¯é‡è½½coutã€cinå¤§å®¶éƒ½ç”¨è¿‡\nä½è¿ç®—ç¬¦æ»¡è¶³å·¦ç»“åˆå¾‹ï¼Œä¼˜å…ˆçº§ä»‹äºä¸­é—´ï¼Œä½¿ç”¨æ—¶å°½é‡åŠ æ‹¬å·ã€‚\nä¹ã€sizeofè¿ç®—ç¬¦ è¿”å›ä¸€æ¡è¡¨è¾¾å¼æˆ–ä¸€ä¸ªç±»å‹åå­—æ‰€å çš„å­—èŠ‚æ•°ã€‚ è¿”å›çš„ç±»å‹æ˜¯ size_tçš„å¸¸é‡è¡¨è¾¾å¼ã€‚ sizeofå¹¶ä¸å®é™…è®¡ç®—å…¶è¿ç®—å¯¹è±¡çš„å€¼ã€‚ ä¸¤ç§å½¢å¼ï¼š sizeof (type)ï¼Œç»™å‡ºç±»å‹å sizeof exprï¼Œç»™å‡ºè¡¨è¾¾å¼ å¯ç”¨sizeofè¿”å›æ•°ç»„çš„å¤§å° 1 2 3 4 5 int ia[10]; // sizeof(ia)è¿”å›æ•´ä¸ªæ•°ç»„æ‰€å ç©ºé—´çš„å¤§å° // sizeof(ia)/sizeof(*ia)è¿”å›æ•°ç»„çš„å¤§å° constexpr size_t sz = sizeof(ia)/sizeof(*ia); int arr[sz]; åã€é€—å·è¿ç®—ç¬¦ ä»å·¦å‘å³ä¾æ¬¡æ±‚å€¼ã€‚\nå·¦ä¾§æ±‚å€¼ç»“æœä¸¢å¼ƒï¼Œé€—å·è¿ç®—ç¬¦ç»“æœæ˜¯å³ä¾§è¡¨è¾¾å¼çš„å€¼ã€‚\nåä¸€ã€ç±»å‹è½¬æ¢ 1ã€éšå¼ç±»å‹è½¬æ¢ è®¾è®¡ä¸ºå°½å¯èƒ½é¿å…æŸå¤±ç²¾åº¦ï¼Œå³è½¬æ¢ä¸ºæ›´ç²¾ç»†ç±»å‹ã€‚\næ¯” intç±»å‹å°çš„æ•´æ•°å€¼å…ˆæå‡ä¸ºè¾ƒå¤§çš„æ•´æ•°ç±»å‹ã€‚ æ¡ä»¶ä¸­ï¼Œéå¸ƒå°”è½¬æ¢æˆå¸ƒå°”ã€‚ åˆå§‹åŒ–ä¸­ï¼Œåˆå§‹å€¼è½¬æ¢æˆå˜é‡çš„ç±»å‹ã€‚ ç®—æœ¯è¿ç®—æˆ–è€…å…³ç³»è¿ç®—çš„è¿ç®—å¯¹è±¡æœ‰å¤šç§ç±»å‹ï¼Œè¦è½¬æ¢æˆåŒä¸€ç§ç±»å‹ã€‚ å‡½æ•°è°ƒç”¨æ—¶ä¹Ÿä¼šæœ‰è½¬æ¢ã€‚ 1.1 ç®—æœ¯è½¬æ¢ ç®—æœ¯è½¬æ¢(arithmetic conversion) çš„å«ä¹‰æ˜¯æŠŠä¸€ç§ç®—æœ¯ç±»å‹è½¬æ¢æˆå¦å¤–ä¸€ç§ç®—æœ¯ç±»å‹\n1.1.1 æ•´å‹æå‡ å¸¸è§çš„charã€boolã€shortèƒ½å­˜åœ¨intå°±ä¼šè½¬æ¢æˆintï¼Œå¦åˆ™æå‡ä¸ºunsigned int wchar_t,char16_t,char32_tæå‡ä¸ºæ•´å‹ä¸­int,long,long long â€¦â€¦æœ€å°çš„ï¼Œä¸”èƒ½å®¹çº³åŸç±»å‹æ‰€æœ‰å¯èƒ½å€¼çš„ç±»å‹ã€‚ 1.1.2 æ— ç¬¦å·ç±»å‹çš„è¿ç®—å¯¹è±¡ éƒ½å¸¦ç¬¦å· or éƒ½ä¸å¸¦ç¬¦å·ï¼Œå°ç±»å‹è½¬å¤§ç±»å‹ ä¸€ä¸ªå¸¦ç¬¦å·ï¼Œå¦ä¸€ä¸ªä¸å¸¦ç¬¦å· å¸¦ç¬¦å·\u0026gt;ä¸å¸¦ç¬¦å·ï¼šæ— ç¬¦å·èƒ½å­˜å…¥å¸¦ç¬¦å·ç±»å‹ï¼Œåˆ™è½¬åŒ–ä¸ºå¸¦ç¬¦å·ç±»å‹ï¼Œåä¹‹åˆ™è½¬ä¸ºæ— ç¬¦å·ç±»å‹ å¸¦ç¬¦å·â‰¤ä¸å¸¦ç¬¦å·ï¼šå¸¦ç¬¦å·è½¬ä¸ºä¸å¸¦ç¬¦å· ä¸åŒç¬¦å·çš„ç±»å‹è½¬æ¢å¸¦æ¥äº†éšæ‚£ï¼Œæ¯”å¦‚ unsigned int ç±»å‹çš„å˜é‡å¤§äºintç±»å‹çš„å˜é‡ï¼Œåˆ™æœ‰è½¬ä¸ºä¸º int-\u0026gt;unsigned int , å¦‚æœæ°å·§è¿™ä¸ªint æ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œåˆ™è½¬åŒ–ä¸ºå°±ä¼šäº§ç”Ÿæ­§ä¹‰ 1.2 å…¶ä»–è½¬æ¢ p143\n2ã€æ˜¾å¼ç±»å‹è½¬æ¢ï¼ˆå°½é‡é¿å…ï¼‰ 2.1 static_cast ä»»ä½•æ˜ç¡®å®šä¹‰çš„ç±»å‹è½¬æ¢ï¼Œåªè¦ä¸åŒ…å«åº•å±‚constï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚\n1 2 3 int i,j ; cin \u0026gt;\u0026gt; i \u0026gt;\u0026gt; j; double slope = static_cast\u0026lt;double\u0026gt;(j)/i; å¸¸ç”¨äºè¾ƒå¤§ç®—æ•°è¿ç®—ç¬¦è½¬æ¢ä¸ºè¾ƒå°ç®—æ•°è¿ç®—ç¬¦ï¼Œæ—¨åœ¨å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œä¸åœ¨ä¹ç²¾åº¦çš„æŸå¤±ã€‚\n2.2 dynamic_cast æ”¯æŒè¿è¡Œæ—¶ç±»å‹è¯†åˆ«ã€‚\n2.3 const_cast åªèƒ½æ”¹å˜è¿ç®—å¯¹è±¡çš„åº•å±‚constï¼Œä¸€èˆ¬å¯ç”¨äºå»é™¤constæ€§è´¨ã€‚\n1 2 const char *pc; char *p = const_cast\u0026lt;char*\u0026gt;(pc) åªæœ‰const_cast å¯ä»¥æ¶ˆé™¤åº•å±‚constï¼Œå…¶ä»–ç±»å‹è½¬æ¢ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å¦‚æœè¢«æ¶ˆé™¤çš„å˜é‡æœ¬èº«å°±æ˜¯å¸¸é‡å¯¹è±¡ï¼Œé€šè¿‡const_castæ¶ˆé™¤å…¶åº•å±‚conståå†ä¿®æ”¹ï¼Œå°±æ˜¯æœªå®šä¹‰çš„è¡Œä¸º\n2.4 reinterpret_cast é€šå¸¸ä¸ºè¿ç®—å¯¹è±¡çš„ä½æ¨¡å¼æä¾›è¾ƒä½å±‚æ¬¡ä¸Šçš„é‡æ–°è§£é‡Šã€‚\n3ã€æ—§å¼å¼ºåˆ¶ç±»å‹è½¬æ¢ 1 char *pc = (char *) ip; //ipåŸç±»å‹ä¸ºæŒ‡å‘æ•´æ•°çš„æŒ‡é’ˆ åäºŒã€è¿ç®—ç¬¦ä¼˜å…ˆçº§è¡¨ ã€ŠC++ Primerï¼ˆedition 5ï¼‰ã€‹p166\nåä¸‰ã€å¸¸é‡è¡¨è¾¾å¼ å¸¸é‡è¡¨è¾¾å¼æ˜¯æŒ‡ä¸ä¼šæ”¹å˜å¹¶ä¸”åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°±èƒ½å¾—åˆ°è®¡ç®—ç»“æœçš„è¡¨è¾¾å¼ï¼Œå­—é¢å€¼å±äºå¸¸é‡è¡¨è¾¾å¼ï¼Œç”¨å¸¸é‡è¡¨è¾¾å¼åˆå§‹åŒ–çš„constå¯¹è±¡ä¹Ÿæ˜¯å¸¸é‡è¡¨è¾¾å¼ã€‚\n1 2 const int max_file = 20 ; const int limit = max_file + 1 ; ","pubDate":"2021-09-09","title":"ã€C++ Primer(edition 5) 04ã€‘è¡¨è¾¾å¼"},{"link":"https://cnjslw.github.io/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%90%91%E9%87%8F%E5%92%8C%E6%95%B0%E7%BB%84/","plain":"ä¸€ã€string æ ‡å‡†åº“ç±»å‹stringè¡¨ç¤ºå¯å˜é•¿çš„å­—ç¬¦åºåˆ—ã€‚ #include \u0026lt;string\u0026gt;ï¼Œç„¶å using std::string; stringå¯¹è±¡ï¼šæ³¨æ„ï¼Œä¸åŒäºå­—ç¬¦ä¸²å­—é¢å€¼ã€‚ 1ã€å®šä¹‰å’Œåˆå§‹åŒ–stringå¯¹è±¡ å®šä¹‰stringå¯¹è±¡çš„æ–¹å¼ï¼š\næ–¹å¼ è§£é‡Š string s1 é»˜è®¤åˆå§‹åŒ–ï¼Œs1æ˜¯ä¸ªç©ºå­—ç¬¦ä¸² string s2(s1) s2æ˜¯s1çš„å‰¯æœ¬ string s2 = s1 ç­‰ä»·äºs2(s1)ï¼Œs2æ˜¯s1çš„å‰¯æœ¬ string s3(\u0026quot;value\u0026quot;) s3æ˜¯å­—é¢å€¼â€œvalueâ€çš„å‰¯æœ¬ï¼Œé™¤äº†å­—é¢å€¼æœ€åçš„é‚£ä¸ªç©ºå­—ç¬¦å¤– string s3 = \u0026quot;value\u0026quot; ç­‰ä»·äºs3(\u0026quot;value\u0026quot;)ï¼Œs3æ˜¯å­—é¢å€¼\u0026quot;value\u0026quot;çš„å‰¯æœ¬ string s4(n, 'c') æŠŠs4åˆå§‹åŒ–ä¸ºç”±è¿ç»­nä¸ªå­—ç¬¦cç»„æˆçš„ä¸² [[é¡ºåºå®¹å™¨#^5f2418|æ„é€ stringçš„å…¶ä»–æ–¹æ³•]]\næ‹·è´åˆå§‹åŒ–ï¼ˆcopy initializationï¼‰ï¼šä½¿ç”¨ç­‰å·=å°†ä¸€ä¸ªå·²æœ‰çš„å¯¹è±¡æ‹·è´åˆ°æ­£åœ¨åˆ›å»ºçš„å¯¹è±¡ã€‚ ç›´æ¥åˆå§‹åŒ–ï¼ˆdirect initializationï¼‰ï¼šé€šè¿‡æ‹¬å·ç»™å¯¹è±¡èµ‹å€¼ã€‚ 2ã€stringå¯¹è±¡ä¸Šçš„æ“ä½œ stringçš„æ“ä½œï¼š\næ“ä½œ è§£é‡Š os \u0026lt;\u0026lt; s å°†så†™åˆ°è¾“å‡ºæµoså½“ä¸­ï¼Œè¿”å›os is \u0026gt;\u0026gt; s ä»isä¸­è¯»å–å­—ç¬¦ä¸²èµ‹ç»™sï¼Œå­—ç¬¦ä¸²ä»¥ç©ºç™½åˆ†å‰²ï¼Œè¿”å›is getline(is, s) ä»isä¸­è¯»å–ä¸€è¡Œèµ‹ç»™sï¼Œè¿”å›is s.empty() sä¸ºç©ºè¿”å›trueï¼Œå¦åˆ™è¿”å›false s.size() è¿”å›sä¸­å­—ç¬¦çš„ä¸ªæ•° s[n] è¿”å›sä¸­ç¬¬nä¸ªå­—ç¬¦çš„å¼•ç”¨ï¼Œä½ç½®nä»0è®¡èµ· s1+s2 è¿”å›s1å’Œs2è¿æ¥åçš„ç»“æœ s1=s2 ç”¨s2çš„å‰¯æœ¬ä»£æ›¿s1ä¸­åŸæ¥çš„å­—ç¬¦ s1==s2 å¦‚æœs1å’Œs2ä¸­æ‰€å«çš„å­—ç¬¦å®Œå…¨ä¸€æ ·ï¼Œåˆ™å®ƒä»¬ç›¸ç­‰ï¼›stringå¯¹è±¡çš„ç›¸ç­‰æ€§åˆ¤æ–­å¯¹å­—æ¯çš„å¤§å°å†™æ•æ„Ÿ s1!=s2 åŒä¸Š \u0026lt;, \u0026lt;=, \u0026gt;, \u0026gt;= åˆ©ç”¨å­—ç¬¦åœ¨å­—å…¸ä¸­çš„é¡ºåºè¿›è¡Œæ¯”è¾ƒï¼Œä¸”å¯¹å­—æ¯çš„å¤§å°å†™æ•æ„Ÿï¼ˆå¯¹ç¬¬ä¸€ä¸ªä¸ç›¸åŒçš„ä½ç½®è¿›è¡Œæ¯”è¾ƒï¼‰ string ioï¼š æ‰§è¡Œè¯»æ“ä½œ\u0026gt;\u0026gt;ï¼šå¿½ç•¥æ‰å¼€å¤´çš„ç©ºç™½ï¼ˆåŒ…æ‹¬ç©ºæ ¼ã€æ¢è¡Œç¬¦å’Œåˆ¶è¡¨ç¬¦ï¼‰ï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€å¤„ç©ºç™½ä¸ºæ­¢ã€‚ getlineï¼šè¯»å–ä¸€æ•´è¡Œï¼ŒåŒ…æ‹¬ç©ºç™½ç¬¦ã€‚ s.size()è¿”å›çš„æ—¶string::size_typeç±»å‹ï¼Œè®°ä½æ˜¯ä¸€ä¸ªæ— ç¬¦å·ç±»å‹çš„å€¼ï¼Œä¸è¦å’Œintæ··ç”¨ s1+s2ä½¿ç”¨æ—¶ï¼Œä¿è¯è‡³å°‘ä¸€ä¾§æ˜¯stringç±»å‹ã€‚string s1 = \u0026quot;hello\u0026quot; + \u0026quot;world\u0026quot; // é”™è¯¯ï¼Œä¸¤ä¾§å‡ä¸ºå­—ç¬¦ä¸²å­—é¢å€¼ å­—ç¬¦ä¸²å­—é¢å€¼å’Œstringæ˜¯ä¸åŒçš„ç±»å‹ã€‚ 3ã€å¤„ç†stringå¯¹è±¡ä¸­çš„å­—ç¬¦ ctype.h vs. cctypeï¼šC++ä¿®æ”¹äº†cçš„æ ‡å‡†åº“ï¼Œåç§°ä¸ºå»æ‰.hï¼Œå‰é¢åŠ cã€‚ å¦‚c++ç‰ˆæœ¬ä¸ºcctypeï¼Œcç‰ˆæœ¬ä¸ºctype.h\nå°½é‡ä½¿ç”¨c++ç‰ˆæœ¬çš„å¤´æ–‡ä»¶ï¼Œå³cctype cctypeå¤´æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ç»„æ ‡å‡†å‡½æ•°ï¼š\nå‡½æ•° è§£é‡Š isalnum(c) å½“cæ˜¯å­—æ¯æˆ–æ•°å­—æ—¶ä¸ºçœŸ isalpha(c) å½“cæ˜¯å­—æ¯æ—¶ä¸ºçœŸ iscntrl(c) å½“cæ˜¯æ§åˆ¶å­—ç¬¦æ—¶ä¸ºçœŸ isdigit(c) å½“cæ˜¯æ•°å­—æ—¶ä¸ºçœŸ isgraph(c) å½“cä¸æ˜¯ç©ºæ ¼ä½†å¯ä»¥æ‰“å°æ—¶ä¸ºçœŸ islower(c) å½“cæ˜¯å°å†™å­—æ¯æ—¶ä¸ºçœŸ isprint(c) å½“cæ˜¯å¯æ‰“å°å­—ç¬¦æ—¶ä¸ºçœŸ ispunct(c) å½“cæ˜¯æ ‡ç‚¹ç¬¦å·æ—¶ä¸ºçœŸ isspace(c) å½“cæ˜¯ç©ºç™½æ—¶ä¸ºçœŸï¼ˆç©ºæ ¼ã€æ¨ªå‘åˆ¶è¡¨ç¬¦ã€çºµå‘åˆ¶è¡¨ç¬¦ã€å›è½¦ç¬¦ã€æ¢è¡Œç¬¦ã€è¿›çº¸ç¬¦ï¼‰ isupper(c) å½“cæ˜¯å¤§å†™å­—æ¯æ—¶ä¸ºçœŸ isxdigit(c) å½“cæ˜¯åå…­è¿›åˆ¶æ•°å­—æ—¶ä¸ºçœŸ tolower(c) å½“cæ˜¯å¤§å†™å­—æ¯ï¼Œè¾“å‡ºå¯¹åº”çš„å°å†™å­—æ¯ï¼›å¦åˆ™åŸæ ·è¾“å‡ºc toupper(c) å½“cæ˜¯å°å†™å­—æ¯ï¼Œè¾“å‡ºå¯¹åº”çš„å¤§å†™å­—æ¯ï¼›å¦åˆ™åŸæ ·è¾“å‡ºc éå†å­—ç¬¦ä¸²ï¼šä½¿ç”¨èŒƒå›´forï¼ˆrange forï¼‰è¯­å¥ï¼š for (auto c: str)ï¼Œæˆ–è€… for (auto \u0026amp;c: str)ä½¿ç”¨å¼•ç”¨ç›´æ¥æ”¹å˜å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚ ï¼ˆC++11ï¼‰ str[x],[]è¾“å…¥å‚æ•°ä¸ºstring::size_typeç±»å‹ï¼Œç»™å‡ºintæ•´å‹ä¹Ÿä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºè¯¥ç±»å‹ äºŒã€vector [[C++Primer#ç¬¬ä¹ç« |æ·±å±‚æ¬¡çš„ä»‹ç»]]\nvectoræ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼› #include \u0026lt;vector\u0026gt; ç„¶å using std::vector; å®¹å™¨ï¼šåŒ…å«å…¶ä»–å¯¹è±¡ã€‚ ç±»æ¨¡æ¿ï¼šæœ¬èº«ä¸æ˜¯ç±»ï¼Œä½†å¯ä»¥å®ä¾‹åŒ–instantiation(ç¼–è¯‘å™¨æ ¹æ®æ¨¡æ¿åˆ›å»ºç±»æˆ–å‡½æ•°çš„è¿‡ç¨‹ç§°ä¸ºå®ä¾‹åŒ–)å‡ºä¸€ä¸ªç±»ã€‚ vectoræ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œ vector\u0026lt;int\u0026gt;æ˜¯ä¸€ä¸ªç±»å‹ã€‚ é€šè¿‡å°†ç±»å‹æ”¾åœ¨ç±»æ¨¡æ¿åç§°åé¢çš„å°–æ‹¬å·ä¸­æ¥æŒ‡å®šç±»å‹ï¼Œå¦‚vector\u0026lt;int\u0026gt; ivecã€‚ 1ã€å®šä¹‰å’Œåˆå§‹åŒ–vectorå¯¹è±¡ åˆå§‹åŒ–vectorå¯¹è±¡çš„æ–¹æ³•\næ–¹æ³• è§£é‡Š vector\u0026lt;T\u0026gt; v1 v1æ˜¯ä¸€ä¸ªç©ºvectorï¼Œå®ƒæ½œåœ¨çš„å…ƒç´ æ˜¯Tç±»å‹çš„ï¼Œæ‰§è¡Œé»˜è®¤åˆå§‹åŒ– vector\u0026lt;T\u0026gt; v2(v1) v2ä¸­åŒ…å«æœ‰v1æ‰€æœ‰å…ƒç´ çš„å‰¯æœ¬ vector\u0026lt;T\u0026gt; v2 = v1 ç­‰ä»·äºv2(v1)ï¼Œv2ä¸­åŒ…å«v1æ‰€æœ‰å…ƒç´ çš„å‰¯æœ¬ vector\u0026lt;T\u0026gt; v3(n, val) v3åŒ…å«äº†nä¸ªé‡å¤çš„å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ çš„å€¼éƒ½æ˜¯val vector\u0026lt;T\u0026gt; v4(n) v4åŒ…å«äº†nä¸ªé‡å¤åœ°æ‰§è¡Œäº†å€¼åˆå§‹åŒ–çš„å¯¹è±¡ vector\u0026lt;T\u0026gt; v5{a, b, c...} v5åŒ…å«äº†åˆå§‹å€¼ä¸ªæ•°çš„å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ è¢«èµ‹äºˆç›¸åº”çš„åˆå§‹å€¼ vector\u0026lt;T\u0026gt; v5={a, b, c...} ç­‰ä»·äºv5{a, b, c...} åˆ—è¡¨åˆå§‹åŒ–ï¼š vector\u0026lt;string\u0026gt; v{\u0026quot;a\u0026quot;, \u0026quot;an\u0026quot;, \u0026quot;the\u0026quot;}; ï¼ˆC++11ï¼‰ å…ƒç´ ç”±å†…é»˜è®¤åˆå§‹åŒ–æœ‰ä¸¤ä¸ªé™åˆ¶ï¼Œå…¶ä¸€æœ‰äº›ç±»å¿…é¡»æ˜ç¡®çš„æä¾›åˆå§‹å€¼ï¼Œå…¶äºŒ,å¦‚æœåªæä¾›äº†å…ƒç´ çš„æ•°é‡ï¼Œè€Œæ²¡æœ‰è®¾å®šåˆå§‹å€¼ï¼Œåªèƒ½ä½¿ç”¨ç›´æ¥åˆå§‹åŒ–ã€‚ å¦‚æœåˆå§‹åŒ–æ—¶ä½¿ç”¨äº†èŠ±æ‹¬å·çš„å½¢å¼ï¼Œä½†æ˜¯æä¾›äº†å€¼åˆä¸èƒ½ç”¨æ¥åˆ—è¡¨åˆå§‹åŒ–å°±è¦è€ƒè™‘ç”¨è¿™æ ·çš„å€¼æ¥æ„é€ vectorå¯¹è±¡ã€‚ 2ã€å‘vectorå¯¹è±¡ä¸­æ·»åŠ å…ƒç´  v.push_back(e) åœ¨å°¾éƒ¨å¢åŠ å…ƒç´ ã€‚ 3ã€å…¶ä»–vectoræ“ä½œ vectoræ”¯æŒçš„æ“ä½œï¼š\næ“ä½œ è§£é‡Š v.emtpy() å¦‚æœvä¸å«æœ‰ä»»ä½•å…ƒç´ ï¼Œè¿”å›çœŸï¼›å¦åˆ™è¿”å›å‡ v.size() è¿”å›vä¸­å…ƒç´ çš„ä¸ªæ•° v.push_back(t) å‘vçš„å°¾ç«¯æ·»åŠ ä¸€ä¸ªå€¼ä¸ºtçš„å…ƒç´  v[n] è¿”å›vä¸­ç¬¬nä¸ªä½ç½®ä¸Šå…ƒç´ çš„å¼•ç”¨ v1 = v2 ç”¨v2ä¸­çš„å…ƒç´ æ‹·è´æ›¿æ¢v1ä¸­çš„å…ƒç´  v1 = {a,b,c...} ç”¨åˆ—è¡¨ä¸­å…ƒç´ çš„æ‹·è´æ›¿æ¢v1ä¸­çš„å…ƒç´  v1 == v2 v1å’Œv2ç›¸ç­‰å½“ä¸”ä»…å½“å®ƒä»¬çš„å…ƒç´ æ•°é‡ç›¸åŒä¸”å¯¹åº”ä½ç½®çš„å…ƒç´ å€¼éƒ½ç›¸åŒ v1 != v2 åŒä¸Š \u0026lt;,\u0026lt;=,\u0026gt;, \u0026gt;= ä»¥å­—å…¸é¡ºåºè¿›è¡Œæ¯”è¾ƒ èŒƒå›´forè¯­å¥å†…ä¸åº”è¯¥æ”¹å˜å…¶éå†åºåˆ—çš„å¤§å°ã€‚ vectorå¯¹è±¡ï¼ˆä»¥åŠstringå¯¹è±¡ï¼‰çš„ä¸‹æ ‡è¿ç®—ç¬¦ï¼Œåªèƒ½å¯¹ç¡®çŸ¥å·²å­˜åœ¨çš„å…ƒç´ æ‰§è¡Œä¸‹æ ‡æ“ä½œï¼Œä¸èƒ½ç”¨äºæ·»åŠ å…ƒç´ ã€‚ ä¸‰ã€è¿­ä»£å™¨iterator æ‰€æœ‰æ ‡å‡†åº“å®¹å™¨éƒ½å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨ã€‚ ç±»ä¼¼äºæŒ‡é’ˆç±»å‹ï¼Œè¿­ä»£å™¨ä¹Ÿæä¾›äº†å¯¹å¯¹è±¡çš„é—´æ¥è®¿é—®ã€‚ 1ã€ä½¿ç”¨è¿­ä»£å™¨ vector\u0026lt;int\u0026gt;::iterator iterã€‚ auto b = v.begin();è¿”å›æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚ auto e = v.end();è¿”å›æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªï¼ˆå“¨å…µï¼Œå°¾å,one past the endï¼‰çš„è¿­ä»£å™¨ï¼ˆoff the endï¼‰ã€‚ å¦‚æœå®¹å™¨ä¸ºç©ºï¼Œ begin()å’Œ end()è¿”å›çš„æ˜¯åŒä¸€ä¸ªè¿­ä»£å™¨ï¼Œéƒ½æ˜¯å°¾åè¿­ä»£å™¨ã€‚ ä½¿ç”¨è§£å¼•ç”¨ç¬¦*è®¿é—®è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ ã€‚ å…»æˆä½¿ç”¨è¿­ä»£å™¨å’Œ!=çš„ä¹ æƒ¯ï¼ˆæ³›å‹ç¼–ç¨‹ï¼‰ã€‚ å®¹å™¨ï¼šå¯ä»¥åŒ…å«å…¶ä»–å¯¹è±¡ï¼›ä½†æ‰€æœ‰çš„å¯¹è±¡å¿…é¡»ç±»å‹ç›¸åŒã€‚ è¿­ä»£å™¨ï¼ˆiteratorï¼‰ï¼šæ¯ç§æ ‡å‡†å®¹å™¨éƒ½æœ‰è‡ªå·±çš„è¿­ä»£å™¨ã€‚C++å€¾å‘äºç”¨è¿­ä»£å™¨è€Œä¸æ˜¯ä¸‹æ ‡éå†å…ƒç´ ã€‚ const_iteratorï¼šåªèƒ½è¯»å–å®¹å™¨å†…å…ƒç´ ä¸èƒ½æ”¹å˜ã€‚ ç®­å¤´è¿ç®—ç¬¦ï¼š è§£å¼•ç”¨ + æˆå‘˜è®¿é—®ï¼Œit-\u0026gt;memç­‰ä»·äº (*it).mem è°¨è®°ï¼šä½†å‡¡æ˜¯ä½¿ç”¨äº†è¿­ä»£å™¨çš„å¾ªç¯ä½“ï¼Œéƒ½ä¸è¦å‘è¿­ä»£å™¨æ‰€å±çš„å®¹å™¨æ·»åŠ å…ƒç´ ã€‚ æ ‡å‡†å®¹å™¨è¿­ä»£å™¨çš„è¿ç®—ç¬¦:\nè¿ç®—ç¬¦ è§£é‡Š *iter è¿”å›è¿­ä»£å™¨iteræ‰€æŒ‡å‘çš„å…ƒç´ çš„å¼•ç”¨ iter-\u0026gt;mem ç­‰ä»·äº(*iter).mem ++iter ä»¤iteræŒ‡ç¤ºå®¹å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´  --iter ä»¤iteræŒ‡ç¤ºå®¹å™¨ä¸­çš„ä¸Šä¸€ä¸ªå…ƒç´  iter1 == iter2 åˆ¤æ–­ä¸¤ä¸ªè¿­ä»£å™¨æ˜¯å¦ç›¸ç­‰ 2ã€è¿­ä»£å™¨è¿ç®— vectorå’Œstringè¿­ä»£å™¨æ”¯æŒçš„è¿ç®—ï¼š\nè¿ç®—ç¬¦ è§£é‡Š iter + n è¿­ä»£å™¨åŠ ä¸Šä¸€ä¸ªæ•´æ•°å€¼ä»å¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿­ä»£å™¨æŒ‡ç¤ºçš„æ–°ä½ç½®å’ŒåŸæ¥ç›¸æ¯”å‘å‰ç§»åŠ¨äº†è‹¥å¹²ä¸ªå…ƒç´ ã€‚ç»“æœè¿­ä»£å™¨æˆ–è€…æŒ‡ç¤ºå®¹å™¨å†…çš„ä¸€ä¸ªå…ƒç´ ï¼Œæˆ–è€…æŒ‡ç¤ºå®¹å™¨å°¾å…ƒç´ çš„ä¸‹ä¸€ä½ç½®ã€‚ iter - n è¿­ä»£å™¨å‡å»ä¸€ä¸ªè¯ä¹¦ä»å¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿­ä»£å™¨æŒ‡ç¤ºçš„æ–°ä½ç½®æ¯”åŸæ¥å‘åç§»åŠ¨äº†è‹¥å¹²ä¸ªå…ƒç´ ã€‚ç»“æœè¿­ä»£å™¨æˆ–è€…æŒ‡å‘å®¹å™¨å†…çš„ä¸€ä¸ªå…ƒç´ ï¼Œæˆ–è€…æŒ‡ç¤ºå®¹å™¨å°¾å…ƒç´ çš„ä¸‹ä¸€ä½ç½®ã€‚ iter1 += n è¿­ä»£å™¨åŠ æ³•çš„å¤åˆèµ‹å€¼è¯­å¥ï¼Œå°†iter1åŠ nçš„ç»“æœèµ‹ç»™iter1 iter1 -= n è¿­ä»£å™¨å‡æ³•çš„å¤åˆèµ‹å€¼è¯­å¥ï¼Œå°†iter2å‡nçš„åŠ è¿‡èµ‹ç»™iter1 iter1 - iter2 ä¸¤ä¸ªè¿­ä»£å™¨ç›¸å‡çš„ç»“æœæ˜¯å®ƒä»¬ä¹‹é—´çš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå°†è¿ç®—ç¬¦å³ä¾§çš„è¿­ä»£å™¨å‘å‰ç§»åŠ¨å·®å€¼ä¸ªå…ƒç´ åå¾—åˆ°å·¦ä¾§çš„è¿­ä»£å™¨ã€‚å‚ä¸è¿ç®—çš„ä¸¤ä¸ªè¿­ä»£å™¨å¿…é¡»æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå®¹å™¨ä¸­çš„å…ƒç´ æˆ–è€…å°¾å…ƒç´ çš„ä¸‹ä¸€ä½ç½®ã€‚ \u0026gt;ã€\u0026gt;=ã€\u0026lt;ã€\u0026lt;= è¿­ä»£å™¨çš„å…³ç³»è¿ç®—ç¬¦ï¼Œå¦‚æœæŸè¿­ä»£å™¨ difference_typeï¼šä¿è¯è¶³å¤Ÿå¤§ä»¥å­˜å‚¨ä»»ä½•ä¸¤ä¸ªè¿­ä»£å™¨å¯¹è±¡é—´çš„è·ç¦»ï¼Œå¯æ­£å¯è´Ÿã€‚ ä¸‰ã€æ•°ç»„ ç›¸å½“äºvectorçš„ä½çº§ç‰ˆï¼Œé•¿åº¦å›ºå®šã€‚ å¦‚æœä¸æ¸…æ¥šå…ƒç´ çš„ç¡®åˆ‡ä¸ªæ•°ï¼Œè¯·ä½¿ç”¨vectorã€‚ 1ã€å®šä¹‰å’Œåˆå§‹åŒ–å†…ç½®æ•°ç»„ åˆå§‹åŒ–ï¼šchar input_buffer[buffer_size];ï¼Œé•¿åº¦å¿…é¡»æ˜¯constè¡¨è¾¾å¼ï¼Œæˆ–è€…ä¸å†™ï¼Œè®©ç¼–è¯‘å™¨è‡ªå·±æ¨æ–­ã€‚ æ•°ç»„ä¸å…è®¸ç›´æ¥èµ‹å€¼ç»™å¦ä¸€ä¸ªæ•°ç»„ã€‚ å­—ç¬¦æ•°ç»„çš„ç‰¹æ®Šæ€§ : å­—ç¬¦æ•°ç»„æœ‰ä¸€ç§é¢å¤–çš„åˆå§‹åŒ–å½¢å¼ï¼Œå¯ä»¥ç”¨å­—ç¬¦ä¸²å­—é¢å€¼å¯¹æ­¤ç±»æ•°ç»„åˆå§‹åŒ–ã€‚ä¸€å®šè¦æ³¨æ„å­—ç¬¦ä¸²å­—é¢å€¼çš„ç»“å°¾å¤„è¿˜æœ‰ä¸€ä¸ªç©ºå­—ç¬¦ã€‚ 1 2 char a1[] = {\u0026#39;c\u0026#39; , \u0026#39;+\u0026#39;, \u0026#39;+\u0026#39;};//åˆ—è¡¨åˆå§‹åŒ–,æ²¡æœ‰ç©ºå­—ç¬¦ char a2[]=\u0026#34;C++\u0026#34; //è‡ªåŠ¨æ·»åŠ è¡¨ç¤ºå­—ç¬¦ä¸²ç»“æŸçš„ç©ºå­—ç¬¦ ç†è§£å¤æ‚çš„æ•°ç»„å£°æ˜ : ç”±å†…å‘å¤–ï¼Œä»å³å‘å·¦ã€‚ ç”¨æ•°ç»„åˆå§‹åŒ– vectorï¼š int a[] = {1,2,3,4,5}; vector\u0026lt;int\u0026gt; v(begin(a), end(a)); ã€‚ 2ã€è®¿é—®æ•°ç»„å…ƒç´  æ•°ç»„ä¸‹æ ‡çš„ç±»å‹ï¼šsize_t ã€‚ å­—ç¬¦æ•°ç»„çš„ç‰¹æ®Šæ€§ï¼šç»“å°¾å¤„æœ‰ä¸€ä¸ªç©ºå­—ç¬¦ï¼Œå¦‚ char a[] = \u0026quot;hello\u0026quot;; ã€‚ 3ã€æ•°ç»„å’ŒæŒ‡é’ˆ ä½¿ç”¨æ•°ç»„æ—¶ï¼Œç¼–è¯‘å™¨ä¸€èˆ¬ä¼šæŠŠå®ƒè½¬æ¢æˆæŒ‡é’ˆã€‚ æ ‡å‡†åº“ç±»å‹é™å®šä½¿ç”¨çš„ä¸‹æ ‡å¿…é¡»æ˜¯æ— ç¬¦å·ç±»å‹ï¼Œè€Œå†…ç½®çš„ä¸‹æ ‡å¯ä»¥å¤„ç†è´Ÿå€¼ã€‚ int *p=a[2] ; int k= p[-2]; //k=a[0]* æŒ‡é’ˆè®¿é—®æ•°ç»„ï¼šåœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ•°ç»„åæ—¶ï¼Œåå­—ä¼šè‡ªåŠ¨è½¬æ¢æˆæŒ‡å‘æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚ å½“ä½¿ç”¨æ•°ç»„ä½œä¸ºä¸€ä¸ªautoå˜é‡çš„åˆå§‹å€¼æ—¶ï¼Œæ¨æ–­å¾—åˆ°çš„ç±»å‹æ˜¯æŒ‡é’ˆè€Œéæ•°ç»„ã€‚å½“ä½¿ç”¨decltypeçš„å…³é”®å­—æ—¶ï¼Œä¸Šè¿°è½¬æ¢ä¸ä¼šå‘ç”Ÿã€‚ åœ¨å®¿ä¸»ä¸­å¼•å…¥beginå’Œendå‡½æ•°æ¥è·å–æ•°ç»„çš„é¦–å…ƒç´ å’Œæ•°ç»„çš„å°¾åå…ƒç´ ã€‚ ä¸¤ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆç›¸å‡çš„ç»“æœæ˜¯å®ƒä»¬ä¹‹é—´çš„è·ç¦»ã€‚ ç»“æœç±»å‹ä¸ºptrdiff_tçš„æ ‡å‡†åº“ç±»å‹ã€‚ 4ã€Cé£æ ¼å­—ç¬¦ä¸² Cé£æ ¼çš„å­—ç¬¦ä¸²æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­—ç¬¦æ•°ç»„\n1 2 const char *c = \u0026#34;Halo,World\u0026#34;; const char c[] = {\u0026#39;H\u0026#39;,\u0026#39;a\u0026#39;,\u0026#39;l\u0026#39;,\u0026#39;o\u0026#39;,\u0026#39;,\u0026#39;,\u0026#39;W\u0026#39;,\u0026#39;o\u0026#39;,\u0026#39;r\u0026#39;,\u0026#39;l\u0026#39;,\u0026#39;d\u0026#39;,\u0026#39;\\0\u0026#39;}; ä¸¤è€…ç­‰ä»·ï¼Œè¯·æ³¨æ„ï¼Œè¯¥æ•°ç»„çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¸ºç©ºå­—ç¬¦\\0ï¼Œè¿™ä¹Ÿè¢«ç§°ä¸ºå­—ç¬¦ä¸²ç»“æŸå­—ç¬¦ï¼Œå› ä¸ºå®ƒå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œ å­—ç¬¦ä¸²åˆ°æ­¤ç»“æŸã€‚è¿™ç§Cé£æ ¼å­—ç¬¦ä¸²æ˜¯ç‰¹æ®Šçš„å­—ç¬¦æ•°ç»„ï¼Œå› ä¸ºæ€»æ˜¯åœ¨æœ€åä¸€ä¸ªå­—ç¬¦ååŠ ä¸Šç©ºå­—ç¬¦\\0ï¼Œåœ¨ä»£ç ä¸­ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡æ—¶ï¼Œç¼–è¯‘å™¨å°†è´Ÿè´£åœ¨å®ƒåé¢æ·»åŠ \\0ã€‚ åœ¨æ•°ç»„ä¸­é—´æ’å…¥\\0å¹¶ä¸ä¼šæ”¹å˜æ•°ç»„çš„é•¿åº¦ï¼Œè€Œåªä¼šå¯¼è‡´å°†è¯¥æ•°ç»„ä½œä¸ºè¾“å…¥çš„å­—ç¬¦ä¸²å¤„ç†å°†åˆ°è¿™ ä¸ªä½ç½®ç»“æŸï¼Œå¦‚æœä¸åŠ \\0ï¼Œåˆ™ä¼šå¯¼è‡´åœ¨æ‰“å°æˆ–è€…è®¡ç®—é•¿åº¦ç­‰æ“ä½œæ˜¯æ— æ³•åœæ­¢æˆ–è€…è¾“å‡ºåƒåœ¾æ•°æ®ï¼Œä»è€Œç¨‹åºå¥”æºƒã€‚\nCé£æ ¼å­—ç¬¦ä¸²ä¸ä»…ä½¿ç”¨èµ·æ¥ä¸æ–¹ä¾¿è€Œä¸”ææ˜“å¼•å‘ç¨‹åºæ¼æ´æ˜¯, è¯¸å¤šå®‰å…¨é—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚\nä»Cç»§æ‰¿æ¥çš„å­—ç¬¦ä¸²ã€‚ ç”¨ç©ºå­—ç¬¦ç»“æŸï¼ˆ\\0ï¼‰ã€‚ å¯¹å¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼Œä½¿ç”¨æ ‡å‡†åº“ stringæ¯”ä½¿ç”¨Cé£æ ¼å­—ç¬¦ä¸²æ›´å®‰å…¨ã€æ›´é«˜æ•ˆã€‚ è·å– string ä¸­çš„ cstring ï¼š const char *str = s.c_str(); 1 2 3 char ca[] = {\u0026#39;C\u0026#39; , \u0026#39;+\u0026#39; , \u0026#39;+\u0026#39;}; cout \u0026lt;\u0026lt; strlen(ca)\u0026lt;\u0026lt;endl; //ä¸¥é‡é”™è¯¯CAæ²¡æœ‰ä»¥ç©ºå­—ç¬¦ç»“æŸã€‚ Strlenå‡½æ•°å°†æœ‰å¯èƒ½æ²¿ç€caåœ¨å†…å­˜ä¸­çš„ä½ç½®ä¸æ–­å‘å‰å¯»æ‰¾ï¼Œç›´åˆ°é‡åˆ°ç©ºå­—ç¬¦æ‰åœä¸‹ã€‚ Cæ ‡å‡†åº“Stringå‡½æ•°ï¼Œå®šä¹‰åœ¨\u0026lt;cstring\u0026gt; ä¸­ï¼š\nå‡½æ•° ä»‹ç» strlen(p) è¿”å›pçš„é•¿åº¦ï¼Œç©ºå­—ç¬¦ä¸è®¡ç®—åœ¨å†… strcmp(p1, p2) æ¯”è¾ƒp1å’Œp2çš„ç›¸ç­‰æ€§ã€‚å¦‚æœp1==p2ï¼Œè¿”å›0ï¼›å¦‚æœp1\u0026gt;p2ï¼Œè¿”å›ä¸€ä¸ªæ­£å€¼ï¼›å¦‚æœp1\u0026lt;p2ï¼Œè¿”å›ä¸€ä¸ªè´Ÿå€¼ã€‚ strcat(p1, p2) å°†p2é™„åŠ åˆ°p1ä¹‹åï¼Œè¿”å›p1 strcpy(p1, p2) å°†p2æ‹·è´ç»™p1ï¼Œè¿”å›p1 å°½é‡ä½¿ç”¨vectorå’Œè¿­ä»£å™¨ï¼Œå°‘ç”¨æ•°ç»„\n5ã€ä¸æ—§ä»£ç çš„æ¥å£ æ··ç”¨stringå¯¹è±¡å’ŒCé£æ ¼å­—ç¬¦ä¸²\nå…è®¸ä½¿ç”¨ä»¥ç©ºå­—ç¬¦ç»“æŸçš„å­—ç¬¦æ•°ç»„æ¥åˆå§‹åŒ–stringå¯¹è±¡ï¼Œæˆ–ä¸ºstringå¯¹è±¡èµ‹å€¼ã€‚ å…è®¸ä½¿ç”¨ä»¥ç©ºå­—ç¬¦ç»“æŸçš„å­—ç¬¦æ•°ç»„ä½œä¸ºstringå¯¹è±¡åŠ æ³•è¿ç®—ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä¸èƒ½ä¸¤ä¸ªè¿ç®—å¯¹è±¡éƒ½æ˜¯ ï¼Œ åœ¨stringå¯¹è±¡çš„å¤åˆèµ‹å€¼è¿ç®—ä¸­ï¼Œå…è®¸ä½¿ç”¨ä»¥ç©ºå­—ç¬¦ç»“æŸçš„å­—ç¬¦æ•°ç»„ä½œä¸ºå³ä¾§çš„è¿ç®—å¯¹è±¡ã€‚ ä¸Šè¿°æ€§è´¨åè¿‡æ¥åªèƒ½ç”¨stringä¸“é—¨æä¾›çš„ä¸€ä¸ªåä¸ºc_strçš„æˆå‘˜å‡½æ•°æ¥åˆå§‹åŒ–æŒ‡å‘å­—ç¬¦çš„æŒ‡é’ˆã€‚string s =\u0026quot;C++\u0026quot; ; const char *str = s.c_str();è¯¥å‡½æ•°çš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘çš„ä¸€ä¸ªä»¥ç©ºå­—ç¬¦ç»“æŸçš„å­—è¯»æ•°ç»„, ä¹Ÿå°±æ˜¯Cé£æ ¼çš„å­—ç¬¦ä¸²ï¼Œè€Œè¿™ä¸ªæ•°ç»„æ‰€å­˜çš„æ•°æ®æ°å¥½ä¸é‚£ä¸ªstringå¯¹è±¡æ˜¯ä¸€æ ·çš„ï¼Œç»“æœæŒ‡é’ˆçš„ç±»å‹æ˜¯const char*ï¼Œä»è€Œç¡®ä¿æˆ‘ä»¬ä¸ä¼šæ”¹å˜å­—ç¬¦æ•°ç»„çš„ç±»å‹ã€‚ å…­ã€å¤šç»´æ•°ç»„ å¤šç»´æ•°ç»„çš„åˆå§‹åŒ–ï¼š int ia[3][4] = {{0,1,2,3}, ...}ã€‚ ä½¿ç”¨èŒƒå›´forè¯­å¥æ—¶ï¼Œé™¤äº†æœ€å†…å±‚çš„å¾ªç¯å¤–ï¼Œå…¶ä»–æ‰€æœ‰å¾ªç¯çš„æ§åˆ¶å˜é‡éƒ½åº”è¯¥æ˜¯å¼•ç”¨ç±»å‹ã€‚ ä¸ƒã€åŠ¨æ€æ•°ç»„ ä½¿ç”¨ newå’Œ deleteè¡¨è¾¾å’Œcä¸­mallocå’Œfreeç±»ä¼¼çš„åŠŸèƒ½ï¼Œå³åœ¨å †ï¼ˆè‡ªç”±å­˜å‚¨åŒºï¼‰ä¸­åˆ†é…å­˜å‚¨ç©ºé—´ã€‚ å®šä¹‰ï¼š int *pia = new int[10]; 10å¯ä»¥è¢«ä¸€ä¸ªå˜é‡æ›¿ä»£ã€‚ é‡Šæ”¾ï¼š delete [] pia;ï¼Œæ³¨æ„ä¸è¦å¿˜è®°[]ã€‚ ","pubDate":"2021-09-08","title":"ã€C++ Primer(edition 5) 03ã€‘å­—ç¬¦ä¸²ã€å‘é‡å’Œæ•°ç»„"},{"link":"https://cnjslw.github.io/posts/%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B/","plain":"ä¸€ã€å¼•ç”¨ 1ã€å·¦å€¼å¼•ç”¨ 1.1ã€å¼•ç”¨çš„å®šä¹‰ å¼•ç”¨æ˜¯ä¸€ä¸ªå¯¹è±¡çš„åˆ«åï¼Œå¼•ç”¨ç±»å‹å¼•ç”¨ï¼ˆrefer toï¼‰å¦å¤–ä¸€ç§ç±»å‹ã€‚å¦‚int \u0026amp;refVal = val;ã€‚ å¼•ç”¨çš„ç±»å‹è¦å’Œä¸ä¹‹ç»‘å®šçš„å¯¹è±¡(å¯¹è±¡)ä¸¥æ ¼åŒ¹é…ã€‚è€Œä¸”ï¼Œå¼•ç”¨åªèƒ½ç»‘å®šåœ¨å¯¹è±¡ä¸Šï¼Œè€Œä¸èƒ½ä¸å­—é¢å€¼æˆ–æŸä¸ªè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœç»‘å®šåœ¨ä¸€èµ·\nå¼•ç”¨å¿…é¡»åˆå§‹åŒ–ã€‚ å¼•ç”¨å’Œå®ƒçš„åˆå§‹å€¼æ˜¯ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œè€Œä¸æ˜¯æ‹·è´ã€‚ä¸€æ—¦å®šä¹‰å°±ä¸èƒ½æ›´æ”¹ç»‘å®šä¸ºå…¶ä»–çš„å¯¹è±¡ 1.2ã€å¼•ç”¨è§„åˆ™çš„ä¸¤ç§ä¾‹å¤–æƒ…å†µ ç¬¬ä¸€ä¸ªä¾‹å¤– åœ¨åˆå§‹åŒ–å¸¸é‡å¼•ç”¨æ—¶å…è®¸ç”¨ä»»æ„è¡¨è¾¾å¼ä½œä¸ºåˆå§‹å€¼ï¼Œåªè¦è¡¨è¾¾å¼çš„ç»“æœèƒ½å¤Ÿè½¬æ¢ä¸ºå¼•ç”¨çš„ç±»å‹å³å¯ï¼Œå…è®¸ä¸€ä¸ªå¸¸é‡å¼•ç”¨ç»‘å®šéå¸¸é‡çš„å¯¹è±¡ï¼Œå­—é¢å€¼ï¼Œç”šè‡³ä¸€ä¸ªè¡¨è¾¾å¼ ^d7c880\n1 2 3 4 5 int i = -42; const int \u0026amp;rl = i;\t//å…è®¸å°† const int\u0026amp; ç»‘å®šåˆ°ä¸€ä¸ªæ™®é€šintå¯¹è±¡ä¸Š const int \u0026amp;r2 = 42;\t//æ­£ç¡®ï¼šrlæ˜¯ä¸€ä¸ªå¸¸é‡å¼•ç”¨ const int \u0026amp;r3 = rl*2;\t//æ­£ç¡®ï¼šr3æ˜¯ä¸€ä¸ªå¸¸é‡å¼•ç”¨ int \u0026amp;r4 = rl*2;\t//\té”™è¯¯ï¼šr4æ˜¯ä¸€ä¸ªæ™®é€šçš„éå¸¸é‡å¼•ç”¨ 1 2 double dval = 3.14; const int \u0026amp;ri = dval; ç†è§£è¿™ç§ä¾‹å¤–çš„æ ¸å¿ƒå°±æ˜¯ææ¸…æ¥šå½“ä¸€ä¸ªå¸¸é‡å¼•ç”¨è¢«ç»‘å®šåˆ°å¦å¤–ä¸€ç§ç±»å‹ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆã€‚\n1 2 3 const int temp = dval; //ç”±åŒç²¾åº¦æµ®ç‚¹æ•°ç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„æ•´å‹å¸¸é‡ const int \u0026amp;ri = temp; //è®©riç»‘å®šè¿™ä¸ªä¸´æ—¶é‡ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œriç»‘å®šäº†ä¸€ä¸ªä¸´æ—¶é‡(temporary)å¯¹è±¡ã€‚æ‰€è°“ä¸´æ—¶é‡å¯¹è±¡å°±æ˜¯å½“ç¼–è¯‘å™¨éœ€è¦ä¸€ä¸ªç©ºé—´æ¥æš‚å­˜è¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœæ—¶ä¸´æ—¶åˆ›å»ºçš„ä¸€ä¸ªæœªå‘½åçš„å¯¹è±¡ã€‚c++ç¨‹åºå‘˜ä»¬å¸¸å¸¸æŠŠä¸´æ—¶é‡å¯¹è±¡ç®€ç§°ä¸ºä¸´æ—¶é‡ã€‚\nç¬¬äºŒä¸ªä¾‹å¤– å­˜åœ¨ç»§æ‰¿å…³ç³»çš„ç±»æ˜¯ä¸€ä¸ªä¾‹å¤–ï¼Œå¯ä»¥å°†åŸºç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ç»‘å®šåˆ°æ´¾ç”Ÿç±»å¯¹è±¡ä¸Š å¯ä»¥å°†åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ç»‘å®šåˆ°æ´¾ç”Ÿç±»å¯¹è±¡ä¸Šæœ‰ä¸€å±‚æä¸ºè‡³è¦çš„å«ä¹‰ï¼šå½“ä½¿ç”¨åŸºç±»çš„ å¼•ç”¨ï¼ˆæˆ–æŒ‡é’ˆï¼‰æ—¶ï¼Œå®é™…æˆ‘ä»¬å¹¶ä¸æ¸…æ¥šè¯¥å¼•ç”¨ï¼ˆæˆ–æŒ‡é’ˆï¼‰æ‰€ç»‘å®šå¯¹è±¡çš„çœŸå®ç±»å‹ã€‚è¯¥å¯¹è±¡å¯èƒ½æ˜¯åŸºç±»çš„å¯¹è±¡ï¼Œä¹Ÿå¯èƒ½æ˜¯æ´¾ç”Ÿç±»çš„å¯¹è±¡ã€‚ ^9b1798\n1.3 sizeof()å’Œå¼•ç”¨ sizeof()å–çš„æ˜¯å¼•ç”¨å˜é‡çš„ç±»å‹å¤§å°\n3ã€ä¸ºä»€ä¹ˆè¦æœ‰å¼•ç”¨ é¿å…æ— ä¼‘æ­¢çš„æ‹·è´ï¼Œæå¤§æé«˜äº†æ€§èƒ½\näºŒã€æŒ‡é’ˆ 1ã€å®šä¹‰ æŒ‡é’ˆæ˜¯ä¸€ç§ \u0026ldquo;æŒ‡å‘ï¼ˆpoint toï¼‰\u0026ldquo;å¦å¤–ä¸€ç§ç±»å‹çš„å¤åˆç±»å‹ã€‚ä¹Ÿå¯ä»¥è¯´æ˜¯æŒ‡å‘å†…å­˜å•å…ƒçš„ç‰¹æ®Šå˜é‡ã€‚æŒ‡é’ˆçš„ç±»å‹ä¸æ‰€æŒ‡å‘çš„å¯¹è±¡ç±»å‹å¿…é¡»ä¸€è‡´\n1.1 å£°æ˜æŒ‡é’ˆ int *ip1;ï¼Œä»å³å‘å·¦è¯»æœ‰åŠ©äºé˜…è¯»ï¼Œip1æ˜¯æŒ‡å‘intç±»å‹çš„æŒ‡é’ˆã€‚\n1.2 å–å˜é‡åœ°å€ æŒ‡é’ˆå­˜æ”¾æŸä¸ªå¯¹è±¡çš„åœ°å€ï¼Œè·å–å¯¹è±¡çš„åœ°å€ï¼š int i=42; int *p = \u0026amp;i;ã€‚ \u0026amp;æ˜¯å–åœ°å€ç¬¦ã€‚\n1.3 åˆ©ç”¨æŒ‡é’ˆè®¿é—®å¯¹è±¡ ä½¿ç”¨è§£å¼•ç”¨ç¬¦ï¼ˆ*ï¼‰æ¥è®¿é—®å¯¹è±¡ æŒ‡é’ˆè®¿é—®å¯¹è±¡ï¼š cout \u0026lt;\u0026lt; *p;\n1.4 sizeof()å’ŒæŒ‡é’ˆ sizeof()ç”¨äºæ™®é€šå˜é‡æ˜¯æŒ‡å˜é‡ç±»å‹çš„å†…å­˜å¤§å°ï¼Œå³ç¼–è¯‘å™¨ä¸ºå˜é‡é¢„ç•™çš„å†…å­˜ç©ºé—´å¤§å°ã€‚ ä½†æ˜¯ï¼Œå½“ç”¨äºæŒ‡é’ˆå˜é‡æ—¶ï¼Œå–å†³äºç¼–è¯‘å™¨å’Œæ“ä½œç³»ç»Ÿå­˜å‚¨åœ°å€æ‰€éœ€çš„å†…å­˜ç©ºé—´ï¼Œä¸æŒ‡å‘ä»€ä¹ˆç±»å‹çš„å˜é‡ç©ºé—´æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚\n2ã€æŒ‡é’ˆæ“ä½œ 2.1 é€’å¢å’Œé€’å‡ å¦‚æœå¯¹æŒ‡é’ˆæ‰§è¡Œé€’å¢æˆ–é€’å‡è¿ç®—ï¼Œç¼–è¯‘å™¨å°†è®¤ä¸ºè¦æŒ‡å‘å†…å­˜å—ä¸­ç›¸é‚»çš„å€¼ï¼ˆå¹¶å‡å®šè¿™ä¸ªå€¼çš„ ç±»å‹ä¸å‰ä¸€ä¸ªå€¼ç›¸åŒï¼‰,è€Œä¸æ˜¯ç›¸é‚»çš„å­—èŠ‚ï¼ˆé™¤éå€¼çš„é•¿åº¦åˆšå¥½æ˜¯1å­—èŠ‚ï¼Œå¦‚charï¼‰ã€‚ å°†æŒ‡é’ˆé€’å¢æˆ–é€’å‡çš„ç»“æœ å°†æŒ‡é’ˆé€’å¢æˆ–é€’å‡æ—¶ï¼Œå…¶åŒ…å«çš„åœ°å€å°†å¢åŠ æˆ–å‡å°‘æŒ‡å‘çš„æ•°æ®ç±»å‹çš„sizeof ï¼ˆå¹¶ä¸ä¸€å®šæ˜¯1å­—èŠ‚ï¼‰ã€‚è¿™æ ·ï¼Œç¼–è¯‘å™¨å°†ç‰ä¿æŒ‡é’ˆä¸ä¼šæŒ‡å‘æ•°æ®çš„ä¸­é—´æˆ–æœ«å°¾ï¼Œè€Œåªä¼šæŒ‡å‘æ•°æ®çš„å¼€å¤´ã€‚ å¦‚æœå£°æ˜äº†å¦‚ä¸‹æŒ‡é’ˆï¼š\n1 Type* pType = Address; åˆ™æ‰§è¡Œ++piypeåï¼ŒpType å°†åŒ…å«ï¼ˆæŒ‡å‘ï¼‰Address + sizeoffiypeã€‚\n2.2 å°†å…³é”®å­—constç”¨äºæŒ‡é’ˆ ![[å˜é‡å’ŒåŸºæœ¬ç±»å‹#3ã€æŒ‡é’ˆå’Œconst|æŒ‡é’ˆå’Œconst]]\n2.3 å°†æŒ‡é’ˆä¼ é€’ç»™å‡½æ•° 3ã€æŒ‡é’ˆå®šä¹‰çš„ä¸¤ç§ä¾‹å¤–æƒ…å†µ æŒ‡é’ˆçš„ç±»å‹ä¸æ‰€æŒ‡å‘çš„å¯¹è±¡ç±»å‹å¿…é¡»ä¸€è‡´è¿™ä¸ªè§„åˆ™æœ‰ä¸¤ç§ä¾‹å¤– ç¬¬ä¸€ç§ å…è®¸ä»¤ä¸€ä¸ªæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªéå¸¸é‡å¯¹è±¡ ^413a8b\n1 2 3 const double *cptr ; double dval = 3.14 ; cptr = \u0026amp;dval ; å’Œå¸¸é‡å¼•ç”¨ä¸€æ ·ï¼ŒæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆä¹Ÿæ²¡æœ‰è§„å®šå…¶æ‰€æŒ‡çš„å¯¹è±¡å¿…é¡»æ˜¯ä¸ªå¸¸é‡ã€‚æ‰€è°“çš„æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆä»…ä»…è¦æ±‚ä¸èƒ½é€šè¿‡è¯¥æŒ‡é’ˆæ”¹å˜å¯¹è±¡çš„å€¼ï¼Œè€Œæ²¡æœ‰è§„å®šé‚£ä¸ªå¯¹è±¡çš„å€¼ä¸èƒ½é€šè¿‡ å…¶ä»–é€”å¾„æ”¹å˜ã€‚ å¯ä»¥è¿™æ ·æƒ³ï¼Œæ‰€è°“çš„å¸¸é‡å¼•ç”¨å’Œå¸¸é‡æŒ‡é’ˆï¼Œä¸è¿‡æ˜¯æŒ‡é’ˆå’Œå¼•ç”¨çš„â€œè‡ªä»¥ä¸ºæ˜¯â€ï¼Œä»–ä»¬è§‰å¾—è‡ªå·±æŒ‡å‘äº†å¸¸é‡ï¼Œæ‰€ä»¥è‡ªè§‰çš„ä¸å»æ”¹å˜æ‰€æŒ‡å‘çš„å¯¹è±¡çš„å€¼ç½¢äº†ã€‚\nç¬¬äºŒç§ [[å¤åˆç±»å‹#^9b1798|ç»§æ‰¿å…³ç³»ä¸­å­˜åœ¨ä¾‹å¤–]]\n4ã€æŒ‡é’ˆçš„å€¼çš„å››ç§çŠ¶æ€ 1.æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼› 2.æŒ‡å‘ç´§é‚»å¯¹è±¡çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼› 3.ç©ºæŒ‡é’ˆï¼› 4.æ— æ•ˆæŒ‡é’ˆã€‚\nå¯¹æ— æ•ˆæŒ‡é’ˆçš„æ“ä½œå‡ä¼šå¼•å‘é”™è¯¯ï¼Œç¬¬äºŒç§å’Œç¬¬ä¸‰ç§è™½ä¸ºæœ‰æ•ˆçš„ï¼Œä½†ç†è®ºä¸Šæ˜¯ä¸è¢«å…è®¸çš„\n5ã€ç©ºæŒ‡é’ˆ ç©ºæŒ‡é’ˆä¸æŒ‡å‘ä»»ä½•å¯¹è±¡ã€‚ä½¿ç”¨int *p=nullptr;æ¥ä½¿ç”¨ç©ºæŒ‡é’ˆã€‚\n6ã€ç©ºç±»å‹æŒ‡é’ˆ void*æŒ‡é’ˆå¯ä»¥å­˜æ”¾ä»»æ„å¯¹è±¡çš„åœ°å€ã€‚å› æ— ç±»å‹ï¼Œä»…æ“ä½œå†…å­˜ç©ºé—´ï¼Œå¯¹æ‰€å­˜å¯¹è±¡æ— æ³•è®¿é—®ã€‚ åˆ©ç”¨void*æŒ‡é’ˆèƒ½åšçš„äº‹å„¿æ¯”è¾ƒæœ‰é™ï¼šæ‹¿å®ƒå’Œåˆ«çš„æŒ‡é’ˆæ¯”è¾ƒã€ä½œä¸ºå‡½æ•°çš„è¾“å…¥æˆ–è¾“å‡ºï¼Œæˆ–è€…èµ‹ç»™å¦å¤–ä¸€ä¸ªvoid*æŒ‡é’ˆã€‚ä¸èƒ½ç›´æ¥æ“ä½œvoid*æŒ‡é’ˆæ‰€æŒ‡çš„å¯¹è±¡ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸çŸ¥é“ è¿™ä¸ªå¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹ï¼Œä¹Ÿå°±æ— æ³•ç¡®å®šèƒ½åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šåšå“ªäº›æ“ä½œã€‚\n7ã€ä½¿ç”¨æŒ‡é’ˆæ—¶å¸¸çŠ¯çš„é”™è¯¯ 7.1 é‡æŒ‡é’ˆ â€œé‡æŒ‡é’ˆâ€åˆ™æ˜¯ä¸ç¡®å®šå…¶å…·ä½“æŒ‡å‘çš„æŒ‡é’ˆã€‚â€œé‡æŒ‡é’ˆâ€æœ€å¸¸æ¥è‡ªäºæœªåˆå§‹åŒ–çš„æŒ‡é’ˆ\n1 2 void *p; // æ­¤æ—¶ p æ˜¯â€œé‡æŒ‡é’ˆâ€ å› ä¸ºâ€œé‡æŒ‡é’ˆâ€å¯èƒ½æŒ‡å‘ä»»æ„å†…å­˜æ®µï¼Œå› æ­¤å®ƒå¯èƒ½ä¼šæŸåæ­£å¸¸çš„æ•°æ®ï¼Œä¹Ÿæœ‰å¯èƒ½å¼•å‘å…¶ä»–æœªçŸ¥é”™è¯¯ï¼Œæ‰€ä»¥Cè¯­è¨€ä¸­çš„â€œé‡æŒ‡é’ˆâ€å±å®³æ€§ç”šè‡³æ¯”â€œæ‚¬ç©ºæŒ‡é’ˆâ€è¿˜è¦ä¸¥é‡ã€‚åœ¨å®é™…çš„Cè¯­è¨€ç¨‹åºå¼€å‘ä¸­ï¼Œå®šä¹‰æŒ‡é’ˆæ—¶ï¼Œä¸€èˆ¬éƒ½è¦å°½é‡é¿å…â€œé‡æŒ‡é’ˆâ€çš„å‡ºç°ï¼ˆèµ‹åˆå€¼ï¼‰ï¼š\n1 void *p = NULL; 7.2 å†…å­˜æ³„æ¼ è¿™å¯èƒ½æ˜¯C++åº”ç”¨ç¨‹åºæœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ï¼šè¿è¡Œæ—¶é—´è¶Šé•¿ï¼Œå ç”¨çš„å†…å­˜è¶Šå¤šï¼Œç³»ç»Ÿè¶Šæ…¢ã€‚å¦‚æœåœ¨ä½¿ç”¨newåŠ¨æ€åˆ†é…çš„å†…å­˜ä¸å†éœ€è¦åï¼Œç¨‹åºå‘˜æ²¡æœ‰ä½¿ç”¨é…å¥—çš„deleteé‡Šæ”¾ï¼Œé€šå¸¸å°±ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚\n7.3 æŒ‡å‘æ— æ•ˆçš„å†…å­˜å•å…ƒ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #include \u0026lt;iostream\u0026gt; using namespace std; int main() { // uninitialized pointer (bad) int* pTemperature; cout \u0026lt;\u0026lt; \u0026#34;Is it sunny (y/n)?\u0026#34; \u0026lt;\u0026lt; endl; char Userinput = \u0026#39;y\u0026#39;; cin \u0026gt;\u0026gt; Userinput; if (Userinput == \u0026#39;y\u0026#39;) { pTemperature = new int; *pTemperature = 30; } // pTemperature contains invalid value if user entered \u0026#39;n\u0026#39; cout Â« \u0026#34;Temperature is: \u0026#39; Â« *pTemperature; // delete also being invoked for those cases new wasn\u0026#39;t done delete pTemperature; return 0; } 7.4 æ‚¬ç©ºæŒ‡é’ˆ æŒ‡é’ˆå¯ä»¥æŒ‡å‘ä¸€å—å†…å­˜ï¼Œå¦‚æœè¿™å—å†…å­˜ç¨åè¢«æ“ä½œç³»ç»Ÿå›æ”¶ï¼ˆè¢«é‡Šæ”¾ï¼‰ï¼Œä½†æ˜¯æŒ‡é’ˆä»ç„¶æŒ‡å‘è¿™å—å†…å­˜ï¼Œé‚£ä¹ˆï¼Œæ­¤æ—¶è¯¥æŒ‡é’ˆå°±æ˜¯â€œæ‚¬ç©ºæŒ‡é’ˆâ€\nä¸‰ã€æŒ‡é’ˆä¸å¼•ç”¨çš„ä¸åŒ æœ¬è´¨ä¸Šï¼š å¼•ç”¨æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆ\nä½¿ç”¨ä¸Šï¼š æŒ‡é’ˆä¸å¼•ç”¨ç±»ä¼¼ï¼Œéƒ½å®ç°äº†å¯¹å…¶ä»–å¯¹è±¡çš„é—´æ¥è®¿é—®ã€‚ ç„¶è€ŒæŒ‡é’ˆä¸å¼•ç”¨ç›¸æ¯”ä¹Ÿæœ‰å¾ˆå¤šä¸åŒç‚¹ã€‚\nå…¶ä¸€ï¼ŒæŒ‡é’ˆæœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…è®¸å¯¹æŒ‡é’ˆèµ‹å€¼å’Œæ‹·è´ï¼Œè€Œä¸”åœ¨==æŒ‡é’ˆçš„ç”Ÿå‘½å‘¨æœŸå†…å®ƒå¯ä»¥å…ˆåæŒ‡å‘å‡ ä¸ªä¸åŒçš„å¯¹è±¡==ï¼Œä½†æ˜¯å¼•ç”¨ä¸€æ—¦åˆå§‹åŒ–åå°±ä¸å¯ä»¥å†æ”¹å˜ã€‚\nå…¶äºŒï¼Œ==æŒ‡é’ˆæ— é¡»åœ¨å®šä¹‰æ—¶èµ‹åˆå€¼==ã€‚å’Œå…¶ä»–å†…ç½®ç±»å‹ä¸€æ ·ï¼Œåœ¨å—ä½œç”¨åŸŸå†…å®šä¹‰çš„æŒ‡é’ˆå¦‚æœæ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œä¹Ÿå°†æ‹¥æœ‰ä¸ªä¸ç¡®å®šçš„å€¼ã€‚\nå…¶ä¸‰ï¼Œä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼ŒæŒ‡é’ˆæ˜¯==æ‹·è´==åŒæ ·çš„åœ°å€ï¼Œå¦‚æœå‡½æ•°ä½œç”¨åŸŸä¸­æ”¹å˜æŒ‡é’ˆå˜é‡çš„åœ°å€ï¼Œåˆ™ä¸å†å½±å“å®å‚ã€‚å¼•ç”¨å‚æ•°å®è´¨ä¸Š==ä¼ é€’çš„æ˜¯å®å‚æœ¬èº«==ï¼Œå³ä¼ é€’è¿›æ¥çš„ä¸æ˜¯å®å‚çš„ä¸€ä¸ªæ‹·è´ï¼Œå› æ­¤å¯¹å½¢å‚çš„ä¿®æ”¹å…¶å®æ˜¯å¯¹å®å‚çš„ä¿®æ”¹ï¼Œæ‰€ä»¥åœ¨ç”¨å¼•ç”¨è¿›è¡Œå‚æ•°ä¼ é€’æ—¶ï¼Œä¸ä»…èŠ‚çº¦æ—¶é—´ï¼Œè€Œä¸”å¯ä»¥èŠ‚çº¦ç©ºé—´ã€‚\nå››ã€ç†è§£å¤åˆç±»å‹çš„å£°æ˜ å˜é‡çš„å®šä¹‰åŒ…æ‹¬ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹(base type) å’Œä¸€ç»„å£°æ˜ç¬¦ã€‚åœ¨åŒä¸€æ¡å®šä¹‰è¯­å¥ä¸­ï¼Œè™½ç„¶åŸºæœ¬æ•°æ®ç±»å‹åªæœ‰ä¸€ä¸ªï¼Œä½†æ˜¯å£°æ˜ç¬¦çš„å½¢å¼å´å¯ä»¥ä¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ æ¡å®šä¹‰è¯­å¥å¯èƒ½å®šä¹‰å‡ºä¸åŒç±»å‹çš„å˜é‡ï¼š\n1 int i = 1024, *p = \u0026amp;i , \u0026amp;r = i; ç”šè‡³å¯ä»¥æœ‰å¤šä¸ªå£°æ˜ç¬¦ï¼Œç»„åˆå‡ºæ›´ä¸ºå¤æ‚çš„å˜é‡\næŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ\n1 int **p; æŒ‡å‘æŒ‡é’ˆçš„å¼•ç”¨ è¦ç†è§£å˜é‡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯==ä»å³å‘å·¦==é˜…è¯»rçš„å®šä¹‰ï¼Œè·ç¦»å˜é‡åæœ€è¿‘çš„ç¬¦å·å¯¹å˜é‡çš„ç±»å‹æœ‰ç›´æ¥çš„å½±å“\n1 2 3 4 5 6 int i = 42; int *p; int *\u0026amp;r = p; //ræ˜¯ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œå¼•ç”¨ä¸€ä¸ªæŒ‡å‘intå‹å˜é‡çš„æŒ‡é’ˆå˜é‡ r = \u0026amp;i; *r=0; ","pubDate":"2021-09-06","title":"ã€C++ Primer(edition 5) 02ã€‘å¤åˆç±»å‹"},{"link":"https://cnjslw.github.io/posts/%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/","plain":"ä¸€ã€åŸºæœ¬å†…ç½®ç±»å‹ åŸºæœ¬ç®—æ•°ç±»å‹\nç±»å‹ å«ä¹‰ æœ€å°å°ºå¯¸ bool å¸ƒå°”ç±»å‹ 8bits char å­—ç¬¦ 8bits wchar_t å®½å­—ç¬¦ 16bits char16_t Unicodeå­—ç¬¦ 16bits char32_t Unicodeå­—ç¬¦ 32bits short çŸ­æ•´å‹ 16bits int æ•´å‹ 16bits (åœ¨32ä½æœºå™¨ä¸­æ˜¯32bits) long é•¿æ•´å‹ 32bits long long é•¿æ•´å‹ 64bits ï¼ˆæ˜¯åœ¨C++11ä¸­æ–°å®šä¹‰çš„ï¼‰ float å•ç²¾åº¦æµ®ç‚¹æ•° 6ä½æœ‰æ•ˆæ•°å­— double åŒç²¾åº¦æµ®ç‚¹æ•° 10ä½æœ‰æ•ˆæ•°å­— long double æ‰©å±•ç²¾åº¦æµ®ç‚¹æ•° 10ä½æœ‰æ•ˆæ•°å­— å¦‚ä½•é€‰æ‹©ç±»å‹\n1.å½“æ˜ç¡®çŸ¥æ™“æ•°å€¼ä¸å¯èƒ½æ˜¯è´Ÿæ•°æ—¶ï¼Œé€‰ç”¨æ— ç¬¦å·ç±»å‹ï¼› 2.ä½¿ç”¨intæ‰§è¡Œæ•´æ•°è¿ç®—ã€‚ä¸€èˆ¬longçš„å¤§å°å’Œintä¸€æ ·ï¼Œè€Œshortå¸¸å¸¸æ˜¾å¾—å¤ªå°ã€‚é™¤éè¶…è¿‡äº†intçš„èŒƒå›´ï¼Œé€‰æ‹©long longã€‚ 3.ç®—æœ¯è¡¨è¾¾å¼ä¸­ä¸è¦ä½¿ç”¨charæˆ–boolã€‚ 4.æµ®ç‚¹è¿ç®—é€‰ç”¨doubleã€‚ äºŒã€å¸¸é‡ åœ¨C++ä¸­ï¼Œå¸¸é‡ç±»ä¼¼äºå˜é‡ï¼Œåªæ˜¯ä¸èƒ½ä¿®æ”¹ã€‚ä¸å˜é‡ä¸€æ ·ï¼Œå¸¸é‡ä¹Ÿå ç”¨å†…å­˜ç©ºé—´ï¼Œå¹¶ä½¿ç”¨åç§°æ ‡è¯†ä¸ºå…¶é¢„ç•™çš„ç©ºé—´çš„åœ°å€ï¼Œä½†ä¸èƒ½è¦†ç›–è¯¥ç©ºé—´çš„å†…å®¹ã€‚åœ¨C++ä¸­ï¼Œå¸¸é‡å¯ä»¥æ˜¯ï¼š â€¢å­—é¢å¸¸é‡ï¼› â€¢ä½¿ç”¨å…³é”®å­—constå£°æ˜çš„å¸¸é‡ï¼› â€¢ä½¿ç”¨å…³é”®å­—constexprå£°æ˜çš„å¸¸é‡è¡¨è¾¾å¼ï¼ˆC++11æ–°å¢çš„ï¼‰; â€¢ä½¿ç”¨å…³é”®å­—enumå£°æ˜çš„æšä¸¾å¸¸é‡ï¼› â€¢ä½¿ç”¨#defineå®šä¹‰çš„å¸¸é‡ï¼ˆå·²æ‘’å¼ƒï¼Œä¸æ¨èï¼‰ã€‚\n1ã€ä½¿ç”¨constexprå£°æ˜å¸¸é‡ åœ¨C++11ä¹‹å‰ï¼ŒC++å°±æ”¯æŒå¸¸é‡è¡¨è¾¾å¼çš„æ¦‚å¿µï¼Œåªæ˜¯æ²¡æœ‰å…³é”®å­—constexprï¼Œåœ¨ç¨‹åºæ¸…å•3.5ä¸­ï¼Œ 22.0/7æ˜¯ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ï¼ŒC++11ä¹‹å‰çš„ç¼–è¯‘å™¨ä¹Ÿæ”¯æŒå®ƒã€‚ç„¶è€Œï¼ŒC++11ä¹‹å‰çš„ç¼–è¯‘å™¨ä¸å…è®¸å®šä¹‰åœ¨ç¼–è¯‘é˜¶æ®µè®¡ç®—çš„å‡½æ•°ã€‚ åœ¨C++11ä¸­ï¼Œå¯ä»¥ç¼–å†™ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š\n1 constexpr double GetPi() {return 22.0 / 7;} è¿˜å¯å°†GetPiä¸å¦ä¸€ä¸ªå¸¸é‡ä¸€èµ·ä½¿ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n1 constexpr double TwicePi() {return 2 * GetPi();} ä¹ä¸€çœ‹ï¼Œconstå’Œconstexprä¹‹é—´çš„å·®åˆ«å¾ˆå°ï¼Œä½†ä»ç¼–è¯‘å™¨å’Œåº”ç”¨ç¨‹åºçš„è§’åº¦çœ‹ï¼Œå…³é”®å­—Constexpr æä¾›äº†ä¼˜åŒ–åº”ç”¨ç¨‹åºçš„å¯èƒ½æ€§ã€‚å¯¹äºç¬¬äºŒæ¡è¯­å¥ï¼Œå¦‚æœä½¿ç”¨const,å°†åœ¨è¿è¡Œé˜¶æ®µæ‰§è¡Œè®¡ç®—ï¼Œä½†ä½¿ç”¨éµ å®ˆC++11çš„ç¼–è¯‘å™¨æ—¶ï¼Œå°†åœ¨ç¼–è¯‘é˜¶æ®µè®¡ç®—è¯¥è¡¨è¾¾å¼çš„å€¼ï¼Œè¿™æé«˜äº†åº”ç”¨ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚\n2ã€å­—é¢å€¼å¸¸é‡ ä¸€ä¸ªå½¢å¦‚42çš„å€¼è¢«ç§°ä½œå­—é¢å€¼å¸¸é‡ï¼ˆliteralï¼‰ã€‚ æ•´å‹å’Œæµ®ç‚¹å‹å­—é¢å€¼ã€‚ å­—ç¬¦å’Œå­—ç¬¦ä¸²å­—é¢å€¼ã€‚ ä½¿ç”¨ç©ºæ ¼è¿æ¥ï¼Œç»§æ‰¿è‡ªCã€‚ å­—ç¬¦å­—é¢å€¼ï¼šå•å¼•å·ï¼Œ 'a' å­—ç¬¦ä¸²å­—é¢å€¼ï¼šåŒå¼•å·ï¼Œ \u0026quot;Hello World\u0026quot;\u0026quot; åˆ†å¤šè¡Œä¹¦å†™å­—ç¬¦ä¸²ã€‚ 1 2 std:cout\u0026lt;\u0026lt;\u0026#34;wow, a really, really long string\u0026#34; \u0026#34;literal that spans two lines\u0026#34; \u0026lt;\u0026lt;std::endl; è½¬ä¹‰åºåˆ—ã€‚\\nã€\\tç­‰ã€‚ å¸ƒå°”å­—é¢å€¼ã€‚trueï¼Œfalseã€‚ æŒ‡é’ˆå­—é¢å€¼ã€‚nullptr å­—ç¬¦ä¸²å‹å®é™…ä¸Šæ—¶å¸¸é‡å­—ç¬¦æ„æˆçš„æ•°ç»„ï¼Œç»“å°¾å¤„ä»¥'\\0'ç»“æŸï¼Œæ‰€ä»¥å­—ç¬¦ä¸²ç±»å‹å®é™…ä¸Šé•¿åº¦æ¯”å†…å®¹å¤š1ã€‚\n3ã€ä½¿ç”¨constå°†å˜é‡å£°æ˜ä¸ºå¸¸é‡ [[å˜é‡å’ŒåŸºæœ¬ç±»å‹#äº”ã€consté™å®šç¬¦]]\n4ã€æšä¸¾å¸¸é‡ åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œå˜é‡åªèƒ½æœ‰ä¸€ç»„ç‰¹å®šçš„å–å€¼\n1 2 3 4 5 6 7 8 9 10 11 enum RainbowColors { Violet = 0 , //æ­¤åæ¯ä¸ªå€¼éƒ½é€’å¢1ï¼Œé»˜è®¤0å¼€å§‹ Indigo, Blue, Yellow, Orange, Red } RainbowColors MyWorldColor = Blue; 5ã€ä½¿ç”¨#defineå®šä¹‰å¸¸é‡ ã€æ‘’å¼ƒã€‘ è¿™æ˜¯ä¸€ä¸ªé¢„å¤„ç†å™¨å®ï¼Œè®©é¢„å¤„ç†å™¨å°†éšåå‡ºç°çš„æ‰€æœ‰Piéƒ½æ›¿æ¢ä¸º3.14286ã€‚é¢„å¤„ç†å™¨å°†è¿›è¡Œæ–‡æœ¬æ›¿æ¢ï¼Œè€Œä¸æ˜¯æ™ºèƒ½æ›¿æ¢ã€‚ç¼–è¯‘å™¨æ—¢ä¸çŸ¥é“ä¹Ÿä¸å…³å¿ƒå¸¸é‡çš„ç±»å‹ã€‚\n1 #define Pi 3.14 ä¸‰ã€å˜é‡ 1ã€ä»€ä¹ˆæ˜¯å˜é‡ å˜é‡æä¾›ä¸€ä¸ªå…·åçš„ï¼Œå¯ä¾›ç¨‹åºæ“ä½œçš„å­˜å‚¨ç©ºé—´ å˜é‡ç±»å‹å‘ç¼–è¯‘å™¨æŒ‡å‡ºäº†å˜é‡å¯å­˜å‚¨çš„æ•°æ®çš„æ€§è´¨ï¼Œç¼–è¯‘å™¨å°†ä¸ºå˜é‡é¢„ç•™å¿…è¦çš„ç©ºé—´ã€‚å˜é‡åç”±ç¨‹åºå‘˜é€‰æ‹©ï¼Œå®ƒæ›¿ä»£äº†å˜é‡å€¼åœ¨å†…å­˜ä¸­çš„å­˜å‚¨åœ°å€ï¼Œä½†æ›´å‹å¥½ã€‚é™¤éç»™å˜é‡èµ‹åˆå€¼ï¼Œå¦åˆ™æ— æ³•ç¡®ä¿ç›¸åº”å†…å­˜å•å…ƒçš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œè¿™å¯¹ç¨‹åºå¯èƒ½ä¸åˆ©ã€‚å› æ­¤ï¼Œåˆå§‹åŒ–è™½ç„¶æ˜¯å¯é€‰çš„ï¼Œä½†å¯¹å˜é‡åˆå§‹åŒ–é€šå¸¸æ˜¯ ä¸€ä¸ªä¸é”™çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚ç¨‹åºæ¸…å•3.1å°†ç”¨æˆ·æä¾›çš„ä¸¤ä¸ªæ•°å­—ç›¸ä¹˜ï¼Œæ¼”ç¤ºäº†å¦‚ä½•åœ¨ç¨‹åºä¸­å£°æ˜ã€åˆå§‹åŒ–ã€‚\nå˜é‡å æ˜¯å†…å­˜åœ°å€çš„åˆ«åï¼Œæ–¹ä¾¿å­˜å– ç±»å‹ æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨å¯ä»¥å­˜ä»€ä¹ˆæ ·çš„æ•°æ®,éœ€è¦å¤šå¤§çš„å†…å­˜ç©ºé—´ åˆå§‹åŒ– æ˜¯å¯é€‰çš„ï¼Œä¸ç„¶æ— æ³•ç¡®ä¿å†…å­˜ä¸­çš„æ•°æ®æ˜¯å•¥ å˜é‡æä¾›ä¸€ä¸ªå…·åçš„ã€å¯ä¾›ç¨‹åºæ“ä½œçš„å­˜å‚¨ç©ºé—´ã€‚ C++ä¸­å˜é‡å’Œå¯¹è±¡ä¸€èˆ¬å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚\n2ã€å˜é‡å®šä¹‰ï¼ˆdefineï¼‰ å®šä¹‰å½¢å¼ï¼šç±»å‹è¯´æ˜ç¬¦ï¼ˆtype specifierï¼‰ + ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡åç»„æˆçš„åˆ—è¡¨ã€‚ç”¨äºåˆå§‹åŒ–å˜é‡çš„å€¼å¯ä»¥æ˜¯ä»»æ„å¤æ‚çš„[[è¡¨è¾¾å¼#^0c892c|è¡¨è¾¾å¼]]\n1 int sum = 0, value, units_sold = 0; 3ã€åˆå§‹åŒ– åˆå§‹åŒ–ï¼ˆinitializeï¼‰ï¼šå¯¹è±¡åœ¨åˆ›å»ºæ—¶è·å¾—äº†ä¸€ä¸ªç‰¹å®šçš„å€¼ã€‚ åˆå§‹åŒ–ä¸æ˜¯èµ‹å€¼ï¼ åˆå§‹åŒ– = åˆ›å»ºå˜é‡ + èµ‹äºˆåˆå§‹å€¼ èµ‹å€¼ = æ“¦é™¤å¯¹è±¡çš„å½“å‰å€¼ + ç”¨æ–°å€¼ä»£æ›¿\n3.1 ç›´æ¥åˆå§‹åŒ– ç•¥\n3.2 åˆ—è¡¨åˆå§‹åŒ–(C++11 å…¨é¢æ”¯æŒ) ä½¿ç”¨èŠ±æ‹¬å·{}\n1 2 3 4 int units_sold = 0; int units_sold = {0}; int units_sold{0}; int units_sold(0); å½“ç”¨äºå†…ç½®ç±»å‹çš„å˜é‡æ—¶ï¼Œè¿™ç§åˆå§‹åŒ–å½¢å¼æœ‰ä¸€ä¸ªé‡è¦ç‰¹ç‚¹ï¼šå¦‚æœæˆ‘ä»¬ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–ä¸”åˆå§‹å€¼å­˜åœ¨ä¸¢å¤±ä¿¡æ¯çš„é£é™©ï¼Œåˆ™ç¼–è¯‘å™¨å°†æŠ¥é”™\n1 2 3 long double Id = 3.1415926536; int a{Id}, b = {Id}; // é”™è¯¯ ï¼šè½¬æ¢æœªæ‰§è¡Œï¼Œå› ä¸ºå­˜åœ¨ä¸¢å¤±ä¿¡æ¯çš„å±é™© int c(ld), d = Id; // æ­£ç¡®ï¼šè½¬æ¢æ‰§è¡Œï¼Œä¸”ç¡®å®ä¸¢å¤±äº†éƒ¨åˆ†å€¼ 3.3 é»˜è®¤åˆå§‹åŒ– å®šä¹‰æ—¶æ²¡æœ‰æŒ‡å®šåˆå§‹å€¼ä¼šè¢«é»˜è®¤åˆå§‹åŒ–ï¼Œé»˜è®¤å€¼åˆ°åº•æ˜¯ä»€ä¹ˆç”±å˜é‡ç±»å‹å†³å®š\nåœ¨å‡½æ•°ä½“å†…éƒ¨çš„å†…ç½®ç±»å‹å˜é‡å°†ä¸ä¼šè¢«åˆå§‹åŒ–, å‡½æ•°ä½“å¤–çš„å†…ç½®ç±»å‹åˆå§‹åŒ–ä¸º0ï¼Œè¯•å›¾ä½¿ç”¨æœªå®šä¹‰çš„å˜é‡å°†å‘ç”Ÿé”™è¯¯ã€‚å»ºè®®åˆå§‹åŒ–æ¯ä¸€ä¸ªå†…ç½®ç±»å‹çš„å˜é‡ã€‚\n3.4 å€¼åˆå§‹åŒ–ï¼ˆç±»ï¼‰ é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯ä»¥åªæä¾›Vectorå¯¹è±¡å®¹çº³çš„å…ƒç´ æ•°é‡è€Œä¸ç”¨ç•¥å»åˆå§‹å€¼ã€‚æ­¤æ—¶åº“ä¼šåˆ›å»ºä¸€ä¸ªå€¼åˆå§‹åŒ–çš„(value-initialized)å…ƒç´ åˆå€¼ï¼Œå¹¶æŠŠå®ƒèµ‹ç»™å®¹å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚è¿™ä¸ª åˆå€¼ç”±vectorå¯¹è±¡ä¸­å…ƒç´ çš„ç±»å‹å†³å®šã€‚ é™åˆ¶ï¼šç±»ä¸­çš„å…ƒç´ å¿…é¡»æ”¯æŒé»˜è®¤åˆå§‹åŒ–\n4ã€å˜é‡çš„å£°æ˜ï¼ˆdeclarationï¼‰ vs å®šä¹‰ï¼ˆdefineï¼‰ ä¸ºäº†æ”¯æŒåˆ†ç¦»å¼ç¼–è¯‘ï¼ŒC++å°†å£°æ˜å’Œå®šä¹‰åŒºåˆ†å¼€ã€‚å£°æ˜ä½¿å¾—åå­—ä¸ºç¨‹åºæ‰€çŸ¥ã€‚å®šä¹‰è´Ÿè´£åˆ›å»ºä¸åå­—å…³è”çš„å®ä½“ã€‚ externï¼šåªæ˜¯è¯´æ˜å˜é‡å®šä¹‰åœ¨å…¶ä»–åœ°æ–¹ã€‚ åªå£°æ˜è€Œä¸å®šä¹‰ï¼š åœ¨å˜é‡åå‰æ·»åŠ å…³é”®å­— externï¼Œå¦‚extern int i;ã€‚ä½†å¦‚æœåŒ…å«äº†åˆå§‹å€¼ï¼Œå°±å˜æˆäº†å®šä¹‰ï¼šextern double pi = 3.14; å˜é‡åªèƒ½è¢«å®šä¹‰ä¸€æ¬¡ï¼Œä½†æ˜¯å¯ä»¥å¤šæ¬¡å£°æ˜ã€‚å®šä¹‰åªå‡ºç°åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå…¶ä»–æ–‡ä»¶ä½¿ç”¨è¯¥å˜é‡æ—¶éœ€è¦å¯¹å…¶å£°æ˜ã€‚ åå­—çš„ä½œç”¨åŸŸï¼ˆnamescopeï¼‰{} ç¬¬ä¸€æ¬¡ä½¿ç”¨å˜é‡æ—¶å†å®šä¹‰å®ƒã€‚ åµŒå¥—çš„ä½œç”¨åŸŸ åŒæ—¶å­˜åœ¨å…¨å±€å’Œå±€éƒ¨å˜é‡æ—¶ï¼Œå·²å®šä¹‰å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸä¸­å¯ç”¨::reusedæ˜¾å¼è®¿é—®å…¨å±€å˜é‡reusedã€‚ ä½†æ˜¯ç”¨åˆ°å…¨å±€å˜é‡æ—¶ï¼Œå°½é‡ä¸é€‚ç”¨é‡åçš„å±€éƒ¨å˜é‡ã€‚ 5ã€å˜é‡å‘½åè§„èŒƒ éœ€ä½“ç°å®é™…æ„ä¹‰ å˜é‡åç”¨å°å†™å­—æ¯ è‡ªå®šä¹‰ç±»åç”¨å¤§å†™å­—æ¯å¼€å¤´ï¼šSales_item æ ‡è¯†ç¬¦ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œä¸­é—´é¡»æœ‰æ˜ç¡®åŒºåˆ†ï¼šstudent_loanæˆ–studentLoanï¼Œä¸è¦ç”¨studentloanã€‚ 6ã€å·¦å€¼å’Œå³å€¼ å·¦å€¼ï¼ˆl-valueï¼‰å¯ä»¥å‡ºç°åœ¨èµ‹å€¼è¯­å¥çš„å·¦è¾¹æˆ–è€…å³è¾¹ï¼Œæ¯”å¦‚å˜é‡ï¼› å³å€¼ï¼ˆr-valueï¼‰åªèƒ½å‡ºç°åœ¨èµ‹å€¼è¯­å¥çš„å³è¾¹ï¼Œæ¯”å¦‚å¸¸é‡ã€‚ 7ã€å˜é‡çš„ä½œç”¨åŸŸ C++ä½œç”¨åŸŸ\nå››ã€å¤åˆç±»å‹ å¤åˆç±»å‹\näº”ã€consté™å®šç¬¦ åŠ¨æœºï¼šå¸Œæœ›å®šä¹‰ä¸€äº›ä¸èƒ½è¢«æ”¹å˜å€¼çš„å˜é‡ã€‚ 1ã€åˆå§‹åŒ–å’Œconst constå¯¹è±¡å¿…é¡»åˆå§‹åŒ–ï¼Œä¸”ä¸èƒ½è¢«æ”¹å˜ã€‚ ç¼–è¯‘å™¨å°†åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æŠŠç”¨åˆ°const å˜é‡çš„åœ°æ–¹éƒ½æ›¿æ¢æˆå¯¹åº”çš„å€¼ã€‚ constå˜é‡é»˜è®¤ä¸èƒ½è¢«å…¶ä»–æ–‡ä»¶è®¿é—®ï¼Œéè¦è®¿é—®ï¼Œå¿…é¡»åœ¨æŒ‡å®šconstå®šä¹‰ä¹‹å‰åŠ externã€‚æŸäº›æ—¶å€™æœ‰è¿™æ ·ç§constå˜é‡ï¼Œå®ƒçš„åˆå§‹å€¼ä¸æ˜¯ä¸ªå¸¸é‡è¡¨è¾¾å¼ï¼Œä½†åˆç¡®å®æœ‰å¿…è¦åœ¨æ–‡ä»¶é—´å…±äº«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰const,è€Œåœ¨å…¶ä»–å¤šä¸ªæ–‡ä»¶ä¸­å£°æ˜å¹¶ä½¿ç”¨å®ƒã€‚è§£å†³çš„åŠæ³•æ˜¯ï¼Œå¯¹äºconstå˜é‡ä¸ç®¡æ˜¯å£°æ˜è¿˜æ˜¯å®šä¹‰éƒ½æ·»åŠ externå…³é”®å­—ï¼Œè¿™æ ·åªéœ€å®šä¹‰ä¸€æ¬¡å°±å¯ä»¥äº†ï¼š 1 2 3 4 // file_l.ccå®šä¹‰å¹¶åˆå§‹åŒ–äº†ä¸€ä¸ªå¸¸é‡ï¼Œè¯¥å¸¸é‡èƒ½è¢«å…¶ä»–æ–‡ä»¶è®¿é—® extern const int bufSize = fen(); // file_l.h å¤´ä¸ˆä»¶ extern const int bufSize; // ä¸\t.cc ä¸­å®šä¹‰çš„ bufSize æ˜¯åŒä¸€ä¸ª 2ã€constçš„å¼•ç”¨ [[å¤åˆç±»å‹#^d7c880|å¸¸é‡å¼•ç”¨çš„ç‰¹æ®Šæ€§]]\nreference to constï¼ˆå¯¹å¸¸é‡çš„å¼•ç”¨ï¼‰ï¼šæŒ‡å‘constå¯¹è±¡çš„å¼•ç”¨ï¼Œå¦‚ const int ival=1; const int \u0026amp;refVal = ival;ï¼Œå¯ä»¥è¯»å–ä½†ä¸èƒ½ä¿®æ”¹refValã€‚ ä¸´æ—¶é‡ï¼ˆtemporaryï¼‰å¯¹è±¡ï¼šå½“ç¼–è¯‘å™¨éœ€è¦ä¸€ä¸ªç©ºé—´æ¥æš‚å­˜è¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœæ—¶ï¼Œä¸´æ—¶åˆ›å»ºçš„ä¸€ä¸ªæœªå‘½åçš„å¯¹è±¡ã€‚ å¯¹ä¸´æ—¶é‡çš„å¼•ç”¨æ˜¯éæ³•è¡Œä¸ºã€‚ 3ã€æŒ‡é’ˆå’Œconst [[å¤åˆç±»å‹#^413a8b|å¸¸é‡æŒ‡é’ˆçš„ç‰¹æ®Šæ€§]]\npointer to constï¼ˆæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼Œç®€ç§°å¸¸é‡æŒ‡é’ˆï¼‰ï¼šä¸èƒ½ç”¨äºæ”¹å˜å…¶æ‰€æŒ‡å¯¹è±¡çš„å€¼, å¦‚ const double pi = 3.14; const double *cptr = \u0026amp;pi;ã€‚ const pointerï¼šæŒ‡é’ˆæœ¬èº«æ˜¯å¸¸é‡ï¼ˆç®€ç§°æŒ‡é’ˆå¸¸é‡ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‡é’ˆå›ºå®šæŒ‡å‘è¯¥å¯¹è±¡ï¼Œï¼ˆå­˜æ”¾åœ¨æŒ‡é’ˆä¸­çš„åœ°å€ä¸å˜ï¼Œåœ°å€æ‰€å¯¹åº”çš„é‚£ä¸ªå¯¹è±¡å€¼å¯ä»¥ä¿®æ”¹ï¼‰å¦‚ int i = 0; int *const ptr = \u0026amp;i; 4ã€é¡¶å±‚constä¸åº•å±‚ é¡¶å±‚constï¼šè¡¨ç¤ºå˜é‡æœ¬èº«æ˜¯ä¸ªå¸¸é‡ï¼Œå¯¹ä»»ä½•æ•°æ®ç±»å‹é€‚ç”¨ï¼Œå¦‚ç®—æ•°ç±»å‹ï¼ˆintã€doubleï¼‰ï¼Œç±»ï¼ŒæŒ‡é’ˆã€‚ åº•å±‚constï¼šè¡¨ç¤ºæŒ‡å‘çš„å˜é‡æ˜¯ä¸ªå¸¸é‡ï¼Œç”¨äºæŒ‡é’ˆå’Œå¼•ç”¨ å…­ã€å¤„ç†ç±»å‹ 1ã€ç±»å‹åˆ«å ä¼ ç»Ÿåˆ«åï¼šä½¿ç”¨typedefæ¥å®šä¹‰ç±»å‹çš„åŒä¹‰è¯ã€‚ 1 2 typedef double wages; typedef wages base,*p; //base = wages = double , p = wages * = double * è¿™é‡Œä¸ä»…æœ‰åŸºæœ¬ç±»å‹è¿˜åŒ…å«å£°æ˜ç¬¦ï¼Œéœ€è¦ç†è§£[[å¤åˆç±»å‹#å››ã€ç†è§£å¤åˆç±»å‹çš„å£°æ˜|å¤åˆç±»å‹çš„å£°æ˜]]\næ–°æ ‡å‡†åˆ«åï¼šåˆ«åå£°æ˜ï¼ˆalias declarationï¼‰ï¼š using SI = Sales_item;ï¼ˆC++11ï¼‰ æŒ‡é’ˆã€å¸¸é‡å’Œç±»å‹åˆ«å\n1 2 3 4 5 6 7 8 9 // å¯¹äºå¤åˆç±»å‹ï¼ˆæŒ‡é’ˆç­‰ï¼‰ä¸èƒ½ä»£å›åŸå¼æ¥è¿›è¡Œç†è§£ typedef char *pstring; // pstringæ˜¯char*çš„åˆ«å const pstring cstr = 0; // æŒ‡å‘charçš„å¸¸é‡æŒ‡é’ˆ const pstring *ps; //psæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä»–çš„å¯¹è±¡æ˜¯æŒ‡å‘charçš„å¸¸é‡æŒ‡é’ˆ // å¦‚æ”¹å†™ä¸ºconst char *cstr = 0;ä¸æ­£ç¡®ï¼Œä¸ºæŒ‡å‘const charçš„æŒ‡é’ˆ // è¾…åŠ©ç†è§£ï¼ˆå¯ä»£å›ååŠ æ‹¬å·ï¼‰ // const pstring cstr = 0;ä»£å›åconst (char *) cstr = 0; // const char *cstr = 0;å³ä¸º(const char *) cstr = 0; 2ã€autoç±»å‹è¯´æ˜ç¬¦ c++11 autoç±»å‹è¯´æ˜ç¬¦ï¼šè®©ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ç±»å‹ã€‚ ä¸€æ¡å£°æ˜è¯­å¥åªèƒ½æœ‰ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œæ‰€ä»¥ä¸€ä¸ªautoå£°æ˜å¤šä¸ªå˜é‡æ—¶åªèƒ½ç›¸åŒçš„å˜é‡ç±»å‹(åŒ…æ‹¬å¤æ‚ç±»å‹\u0026amp;å’Œ*)ã€‚auto sz = 0, pi =3.14//é”™è¯¯ å¦‚ä½•åˆå§‹åŒ–çš„å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¼šæ ¹æ®å¼•ç”¨å˜é‡çš„å¼•ç”¨å¯¹è±¡çš„å€¼æ¥æ¨æµ‹ï¼Œè€Œéå¼•ç”¨å˜é‡çš„ç±»å‹ï¼Œint i = 0, \u0026amp;r = i; auto a = r; æ¨æ–­açš„ç±»å‹æ˜¯intã€‚ ä¼šå¿½ç•¥é¡¶å±‚constã€‚const int ci = 1; const auto f = ci;æ¨æ–­ç±»å‹æ˜¯intï¼Œå¦‚æœå¸Œæœ›æ˜¯é¡¶å±‚constéœ€è¦è‡ªå·±åŠ constï¼›ä½†æ˜¯å¦‚æœå·¦å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œé‚£ä¹ˆåˆå§‹å€¼ä¸­çš„é¡¶å±‚å¸¸é‡å±æ€§ä¼šè¢«ä¿å­˜ 1 2 3 4 5 6 7 8 9 10 11 12 int i = 0, \u0026amp;r = i; auto a = r; //a æ˜¯æ•´å‹ const int ci = i, \u0026amp;cr = ci; auto b = ci; //b æ˜¯æ•´å‹ auto c = cr; //c æ˜¯ä¸€ä¸ªæ•´å‹ auto d = \u0026amp;i; //d æ˜¯ä¸€ä¸ªæ•´å‹æŒ‡é’ˆ auto e = \u0026amp;ci; //e æ˜¯ä¸€ä¸ªæŒ‡å‘æ•´æ•°å¸¸é‡çš„æŒ‡é’ˆï¼ˆå¯¹å¸¸é‡å–åœ°å€æ˜¯ä¸€ç§åº•å±‚constï¼‰ const auto f = ci; //ciçš„æ¨æ¼”ç±»å‹æ˜¯int,fæ˜¯cosnt int auto \u0026amp;g = ci; //gæ˜¯ä¸€ä¸ªæ•´å‹å¸¸é‡å¼•ç”¨ï¼Œç»‘å®šåˆ°ci auto \u0026amp;h = 42; //é”™è¯¯ï¼šä¸èƒ½ä¸ºéå¸¸é‡å¼•ç”¨ç»‘å®šåˆ°å­—é¢å€¼ const auto \u0026amp;j = 42 //æ­£ç¡®ï¼Œè¿™é‡Œæ˜¯å› ä¸ºå¸¸é‡å¼•ç”¨çš„ç‰¹æ®Šæ€§ï¼Œå¯ä»¥å‚è€ƒå¤åˆç±»å‹çš„ç¬”è®° 3ã€decltypeç±»å‹æŒ‡ç¤ºç¬¦ æœ‰æ—¶ä¼šé‡åˆ°è¿™ç§æƒ…å†µ: å‘å¾€ä»è¡¨è¾¾å¼çš„ç±»å‹æ¨æ–­å‡ºè¦å®šä¹‰çš„å˜é‡çš„ç±»å‹ï¼Œä½†æ˜¯ä¸æƒ³ç”¨è¯¥è¡¨è¾¾å¼çš„å€¼åˆå§‹åŒ–å˜é‡ï¼ˆæƒ³ç”¨ç±»å‹ï¼Œä¸æƒ³ç”¨å€¼ï¼‰ã€‚ ä¸ºäº†æ»¡è¶³è¿™ä¸€è¦æ±‚ï¼ŒC++1Iæ–°æ ‡å‡†å¼•å…¥äº†ç¬¬äºŒç§ç±»å‹è¯´æ˜ç¬¦decltype decltypeï¼šé€‰æ‹©å¹¶è¿”å›æ“ä½œæ•°çš„æ•°æ®ç±»å‹ï¼Œä»è¡¨è¾¾å¼çš„ç±»å‹æ¨æ–­å‡ºè¦å®šä¹‰çš„å˜é‡çš„ç±»å‹ã€‚\n3.1 ä¸autoçš„ä¸åŒ decltypeå¤„ç†é¡¶å±‚constå’Œå¼•ç”¨çš„æ–¹å¼ä¸autoæœ‰äº›è®¸ä¸åŒã€‚ å…¶ä¸€ï¼Œå¦‚æœdecltypeä½¿ç”¨çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåˆ™decltypeè¿”å›è¯¥å˜é‡çš„ç±»å‹ï¼ˆåŒ…æ‹¬é¡¶å±‚constå’Œå¼•ç”¨åœ¨å†…ï¼‰:\n1 2 3 4 const int ci =0, \u0026amp;cj =ci; decltype(ci) x = 0 ; //xçš„ç±»å‹æ˜¯const int decltype(cj) y = x ; //yçš„ç±»å‹æ˜¯const int \u0026amp; decltype(cj) z; //é”™è¯¯ï¼Œzæ˜¯const int \u0026amp; ,éœ€è¦åˆå§‹åŒ– å…¶äºŒï¼Œdecltypeçš„ç»“æœç±»å‹ä¸è¡¨è¾¾å¼å½¢å¼å¯†åˆ‡ç›¸å…³ï¼Œå¦‚æœå¯¹å˜é‡åŠ æ‹¬å·ï¼ˆä¸€å±‚æˆ–è€…å¤šå±‚ï¼‰ï¼Œå› ä¸ºå˜é‡æ˜¯ä¸€ç§å¯ä»¥ä½œä¸ºèµ‹å€¼è¯­å¥å·¦å€¼çš„ç‰¹æ®Šè¡¨è¾¾å¼ï¼Œç¼–è¯‘å™¨ä¼šå› æ­¤å°†å…¶è®¤ä¸ºæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼\n1 2 decltype((i)) d; //é”™è¯¯ï¼Œdæ˜¯int\u0026amp;ï¼Œå¿…é¡»åˆå§‹åŒ– decltype(i) e; //æ­£ç¡®ï¼Œeæ˜¯ä¸€ä¸ªæœªåˆå§‹åŒ–çš„int 3.2 decltypeå’Œå¼•ç”¨ å¦‚æœdecltypeä½¿ç”¨çš„è¡¨è¾¾å¼ä¸æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåˆ™decltypeè¿”å›è¡¨è¾¾å¼ç»“æœå¯¹åº”çš„ ç±»å‹ã€‚ 1 2 3 4 5 6 decltype(f()) sum = x; // æ¨æ–­sumçš„ç±»å‹æ˜¯å‡½æ•°fçš„è¿”å›ç±»å‹ã€‚ int i = 42, *p = \u0026amp;i, \u0026amp;r = i ; decltype(r + 0) b; //æ­£ç¡®ï¼ŒåŠ æ³•çš„ç»“æœæ˜¯int,å› æ­¤bæ˜¯ä¸€ä¸ªæœªåˆå§‹åŒ–çš„int decltype(*p) c; //é”™è¯¯ï¼šcæ˜¯int\u0026amp; , å¿…é¡»åˆå§‹åŒ– decltype(\u0026amp;i) d; //dæ˜¯ int **ç±»å‹ å› ä¸ºræ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤decltype (r)çš„ç»“æœæ˜¯å¼•ç”¨ç±»å‹ã€‚å¦‚æœæƒ³è®©ç»“æœç±»å‹æ˜¯ræ‰€æŒ‡ çš„ç±»å‹ï¼Œå¯ä»¥æŠŠrä½œä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚r+0,æ˜¾ç„¶è¿™ä¸ªè¡¨è¾¾å¼çš„ç»“æœå°†æ˜¯ä¸€ä¸ªå…·ä½“å€¼è€Œéä¸€ä¸ªå¼•ç”¨ã€‚ è¡¨è¾¾å¼çš„å†…å®¹æ˜¯è§£å¼•ç”¨æ“ä½œï¼Œåˆ™decltypeå°†å¾—åˆ°å¼•ç”¨ç±»å‹ èµ‹å€¼æ˜¯ä¼šäº§ç”Ÿå¼•ç”¨çš„ä¸€ç±»å…¸å‹è¡¨è¾¾å¼ï¼Œå¼•ç”¨çš„ç±»å‹å°±æ˜¯å·¦å€¼çš„ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ i æ˜¯ intï¼Œåˆ™è¡¨è¾¾å¼ i=x çš„ç±»å‹æ˜¯ int\u0026amp;ã€‚ å–åœ°å€è¿ç®—ç¬¦ç”Ÿæˆå³å€¼ï¼Œæ‰€ä»¥decltype(\u0026amp;p)çš„ç»“æœæ˜¯int ** ","pubDate":"2021-09-04","title":"ã€C++ Primer(edition 5) 01ã€‘å˜é‡å’ŒåŸºæœ¬ç±»å‹"}];
    var search_theEnd = "åˆ°åº•äº†";
    var search_nothing = "ä»€ä¹ˆä¹Ÿæ²¡æ‰¾åˆ°";
    var search_found = "æ‰¾åˆ°";
    var search_result = "æ¡ç»“æœ";
    var search_results = "æ¡ç»“æœ";
    var enable_mermaid =  null 
</script>





        
    </body>
</html>

